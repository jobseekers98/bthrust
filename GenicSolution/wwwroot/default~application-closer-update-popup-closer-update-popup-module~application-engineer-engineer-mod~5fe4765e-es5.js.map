{"version":3,"sources":["webpack:///src/app/application/closer-update-popup/closer-update-popup.component.ts","webpack:///src/app/application/closer-update-popup/closer-update-popup.component.html"],"names":["CloserUpdatePopupComponent","titleService","dialogRef","docservice","ticketService","closerService","logService","toastr","sanitizer","router","genicProfile","loginservice","engineerservice","notifyService","audioRecordingService","configPad","pecColor","backgroundcolor","canvasWidth","canvasHeight","attachmentLocalURL","NoImagePng","attachmentLocalURL2","isRecording","recoudngId","blobToFile","theBlob","fileName","b","lastModifiedDate","Date","name","currentUser","subscribe","x","localPrependUrl","apiUrl","CloserAttachmentSpinner","customersignatureshow","engineersignatureshow","recordingFailed","getRecordedTime","time","recordedTime","getRecordedBlob","data","blobUrl","bypassSecurityTrustUrl","URL","createObjectURL","blob","base64data","reader","FileReader","readAsDataURL","onloadend","result","setTimeout","CloserAttachmentAduioData","AudioAttachment","split","AudiotSize","size","Permissions","CloserEdit","warning","close","getTicketCloserAttachmentList","setTitle","Token","CloserDetailsData","CloserID","res","response","Message","CloserAttachmentList","error","console","log","Remarks","CustBase64","CustomerCloserSingnaturePad","toDataURL","EngBase64","EnginnerSingnaturePad","EngineerSignature","CustomerSignature","WithCustomerSignature","IsTested","loader","OverWriteCloserDetails","success","MessageDescription","des","formData","TicketId","UserName","CustomerName","Activity5","postUserLog","Id","cleareEngineerSignature","cleareCustomerCloserSignature","SetDefaultCloserDetailsData","navigate","removeCloserAttachment","CAID","event","CloserAttachmentData","target","value","PutCloserDetails","t","id","document","getElementById","click","m","pattern","Files","files","file","item","type","match","filExt","Ext1","remark","uploadDocument","toString","SetDefaultCloserAudio","startRecording","stopRecording","postCloserAttachmentAudioData","info","removeAudioAttachment","PostCloserDetails","CloserAttachmentAduioList","AttachmentFile","AttachmentExtenstion","AttachmentSize","AttachmentFileAfter","AttachmentExtenstionAfter","AttachmentSizeAfter","Caid","AttachmentAudioId","clear","s","cust_sign","Boolean","checked","eng_sign","provide","useClass","onSubmit","oncheckedSignature","templateUrl","styleUrls","providers"],"mappings":"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","file":"default~application-closer-update-popup-closer-update-popup-module~application-engineer-engineer-mod~5fe4765e-es5.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { NgbTimeAdapter, NgbDateAdapter } from '@ng-bootstrap/ng-bootstrap';\nimport { TicketService } from 'src/app/services/ticket.service';\nimport { NgbDateToStringAdapter } from 'src/app/ngb-date-to-string-adapter';\nimport { NgbTimeToStringAdapter } from 'src/app/ngb-time-to-string-adapter';\nimport { ToastrService } from 'ngx-toastr';\nimport { EngineerService } from 'src/app/services/engineer.service';\nimport { Router } from '@angular/router';\nimport { Login, AuthenticationService } from 'src/app/services';\nimport { NotificationService } from 'src/app/services/notification.service';\nimport { GenicProfileService } from 'src/app/services/genicprofile.service';\nimport { CloserService } from 'src/app/services/closer.service';\nimport { environment } from 'src/environments/environment';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AudioRecordingService } from 'src/app/services/audio-recording.service';\nimport { DomSanitizer, Title } from '@angular/platform-browser';\nimport { SignaturePad } from 'angular2-signaturepad';\nimport { CloserAttachment } from 'src/app/services/closerDetails.module';\nimport { DocumentUploadService } from 'src/app/services/DocumentUpload.service';\n\n@Component({\n  templateUrl: './closer-update-popup.component.html',\n  styleUrls: [\n    '../../../../src/app/application/engineer/engineer-ticket/my-ticket-details/my-ticket-details.component.css/',\n    '../../../../src/app/application/engineer/engineer-ticket/engineer-ticket.component.css'\n  ],\n  providers: [\n    { provide: NgbDateAdapter, useClass: NgbDateToStringAdapter },\n    { provide: NgbTimeAdapter, useClass: NgbTimeToStringAdapter }],\n})\nexport class CloserUpdatePopupComponent implements OnInit {\n  @ViewChild('SignaturePad1', { static: false }) EnginnerSingnaturePad: SignaturePad;\n  @ViewChild('SignaturePad2', { static: false }) CustomerCloserSingnaturePad: SignaturePad;\n  public configPad = {' minWidth': 2, pecColor: 'rgb(66,133,244)', backgroundcolor: 'rgb(255,255,255)', canvasWidth: 360, canvasHeight: 200};\n  customersignatureshow: boolean;\n  engineersignatureshow: boolean;\n  currentUser: Login;\n  loader: boolean;\n  CloserAttachmentSpinner: boolean;\n  localPrependUrl: string;\n  attachmentLocalURL = environment.NoImagePng;\n  attachmentLocalURL2 = environment.NoImagePng;\n  blobUrl;\n  isRecording = false;\n  recordedTime;\n  recoudngId = 0;\n  constructor(\n    public titleService: Title,\n    public dialogRef: MatDialogRef<CloserUpdatePopupComponent>,\n    public docservice: DocumentUploadService,\n    public ticketService: TicketService,\n    public closerService: CloserService,\n    public logService: UserlogService,\n    private toastr: ToastrService,\n    private sanitizer: DomSanitizer,\n    private router: Router,\n    public genicProfile: GenicProfileService,\n    public loginservice: AuthenticationService,\n    public engineerservice: EngineerService,\n    public notifyService: NotificationService,\n    private audioRecordingService: AudioRecordingService\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n    this.CloserAttachmentSpinner = false;\n    this.customersignatureshow = false;\n    this.engineersignatureshow = false;\n    this.audioRecordingService.recordingFailed().subscribe(() => {\n      this.isRecording = false;\n    });\n\n    this.audioRecordingService.getRecordedTime().subscribe((time) => {\n      this.recordedTime = time;\n    });\n    this.audioRecordingService.getRecordedBlob().subscribe((data) => {\n      this.blobUrl = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(data.blob));\n      let base64data;\n      // base64data = '';\n      var reader = new FileReader();\n      reader.readAsDataURL(data.blob);\n      // tslint:disable-next-line: only-arrow-functions\n      reader.onloadend = function () {\n        base64data = reader.result;\n      };\n      setTimeout(() => {\n        this.closerService.CloserAttachmentAduioData.AudioAttachment = base64data.split(',')[1];\n        this.closerService.CloserAttachmentAduioData.AudiotSize = data.blob.size;\n      }, 500);\n    });\n   }\n\n  ngOnInit() {\n     if(!this.currentUser.Permissions.CloserEdit) {\n      this.toastr.warning('You have not permission to overwrite closer details');\n      this.dialogRef.close();\n     }\n     this.getTicketCloserAttachmentList();\n     this.titleService.setTitle('Closer Update | Genic Solution');\n  }\n  getTicketCloserAttachmentList() {\n    this.closerService.getTicketCloserAttachmentList(this.currentUser.Token, this.closerService.CloserDetailsData.CloserID).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.closerService.CloserAttachmentList = [];\n                    this.closerService.CloserAttachmentList = response.result;\n                  }\n    }}, error =>  console.log(error));\n  }\n  onSubmit(){\n  if (this.closerService.CloserDetailsData.Remarks === '') {\n    this.toastr.warning('', 'Please enter remarks and try again.');\n    return false;\n  }\n  let CustBase64 = '';\n  if (this.customersignatureshow) {\n     CustBase64 = this.CustomerCloserSingnaturePad.toDataURL('image/png');\n  }\n  let EngBase64 = '';\n  if (this.engineersignatureshow) {\n    EngBase64 = this.EnginnerSingnaturePad.toDataURL('image/png');\n  }\n  \n  this.closerService.CloserDetailsData.EngineerSignature = EngBase64;\n  this.closerService.CloserDetailsData.CustomerSignature = CustBase64;\n  this.closerService.CloserDetailsData.WithCustomerSignature = this.customersignatureshow;\n  this.closerService.CloserDetailsData.IsTested = this.engineersignatureshow;\n  this.loader = true;\n  this.closerService.OverWriteCloserDetails(this.currentUser.Token).subscribe(\n    res => {\n      const response = res as any;\n      if (response.Message === 'success') {\n        this.dialogRef.close();\n        this.loader = false;\n        this.toastr.success('success', response.MessageDescription);\n        const des = 'Ticket No : '\n          + this.ticketService.formData.TicketId + ', has been Modify by : ' + this.currentUser.UserName +\n          ', of Customer : ' + this.ticketService.formData.CustomerName + ', where Closer remarks : '\n          + this.closerService.CloserDetailsData.Remarks;\n        const Activity5 = 'Ticket No : ' + this.ticketService.formData.TicketId +\n          ', has been Overwite on dated : ' + new Date();\n        this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Ticket',\n          this.ticketService.formData.Id, 'Modify', des, Activity5).subscribe();\n        this.cleareEngineerSignature();\n        this.cleareCustomerCloserSignature();\n        this.closerService.SetDefaultCloserDetailsData();\n        this.closerService.CloserAttachmentList = [];\n        this.router.navigate(['/engineer/engineer-tickets']);\n      }\n      if (response.Message === 'failure') {\n        this.toastr.warning('warning', response.MessageDescription);\n        this.loader = false;\n      }\n    }\n  );\n  }\n\n  removeAttachment(x: CloserAttachment) {\n    this.closerService.removeCloserAttachment(this.currentUser.Token, x.CAID, x.CloserID).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.toastr.success(response.MessageDescription);\n                  this.getTicketCloserAttachmentList();\n                  }\n                  if (response.Message === 'failure') {\n                    this.CloserAttachmentSpinner = false;\n                      this.toastr.warning('warning', response.MessageDescription);\n                    }\n    }}, error =>  console.log(error)); \n  }\n  UpdateCloserAttachmentRemark(event, x: CloserAttachment) {\n    this.closerService.CloserAttachmentData.CAID = x.CAID;\n    this.closerService.CloserAttachmentData.CloserID = x.CloserID;\n    this.closerService.CloserAttachmentData.Remarks = event.target.value;\n    this.CloserAttachmentSpinner = true;\n    this.closerService.PutCloserDetails(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.CloserAttachmentSpinner = false;\n                  this.getTicketCloserAttachmentList();\n                  }\n    }}, error =>  console.log(error));\n}\nonclickcloser(t, id) {\n  if(t === 'before') { document.getElementById('id_' + id).click() }\n  if(t === 'after') { document.getElementById('ida_' + id).click() }\n}\npicked(event, m , x: CloserAttachment) {\n  var pattern = /image-*/;\n  let Files = event.target.files;\n  let file = Files.item(0);\n  if (!file.type.match(pattern)) {\n    this.toastr.warning('', 'Invalid image format!'); return false;\n  }\n  let filExt = file.name.split('.');\n  let Ext1 = filExt[1];\n  if (Ext1 === 'png' || Ext1 === 'jpg' || Ext1 === 'jpeg') {\n    this.loader = true;\n    let t = this.currentUser.Token;\n    let remark = '';\n    let type = m;\n      this.docservice.uploadDocument(t , type, x.CloserID, x.CAID.toString(), remark, file).subscribe( res => {\n        if (res) { const response = res as any;\n                  if (response.Message === 'success') {\n                    this.getTicketCloserAttachmentList();\n                    this.loader = false;\n                    }\n                    if (response.Message === 'failure') {\n                      this.toastr.warning(response.MessageDescription);\n                      this.loader = false;\n                    }\n      }}, error =>  console.log(error));\n    this.loader = false;\n  } else {\n    this.toastr.warning('Invalid file format, select png, jpg, jpeg!');\n    this.loader = false;\n    return false;\n  }\n}\nstartRecording(x: CloserAttachment) {\n  this.closerService.SetDefaultCloserAudio();\n  if (!this.isRecording) {\n    this.recoudngId = x.CAID;\n    this.isRecording = true;\n    this.audioRecordingService.startRecording();\n  }\n}\nstopRecording(x: CloserAttachment) {\n  if (this.isRecording) {\n      this.audioRecordingService.stopRecording();\n      this.isRecording = false;\n      this.loader = true;\n      this.closerService.CloserAttachmentAduioData.CAID = x.CAID\n      this.closerService.CloserAttachmentAduioData.CloserID = x.CloserID\n      setTimeout(() => {\n        this.closerService.postCloserAttachmentAudioData(this.currentUser.Token).subscribe( res => {\n          if (res) { const response = res as any;\n                     if (response.Message === 'success') {\n                      this.toastr.info(response.MessageDescription);\n                      this.loader = false;\n                          this.recoudngId = 0\n                        this.getTicketCloserAttachmentList();\n                      }\n                     if (response.Message === 'failure') {\n                        this.toastr.warning('warning', response.MessageDescription);\n                        this.loader = false;\n                      }\n        }}, error =>  console.log(error));\n      }, 1000);\n  }\n}\n\npublic blobToFile = (theBlob: Blob, fileName:string): File => {\n  var b: any = theBlob;\n  b.lastModifiedDate = new Date();\n  b.name = fileName;\n  return <File>theBlob;\n}\nClearTempCloaseAudio(id) {\n  this.closerService.removeAudioAttachment(this.currentUser.Token, id).subscribe( res => {\n    if (res) { const response = res as any;\n               if (response.Message === 'success') {\n                this.toastr.info(response.MessageDescription);\n                this.loader = false;\n                    this.recoudngId = 0\n                  this.getTicketCloserAttachmentList();\n                }\n               if (response.Message === 'failure') {\n                  this.toastr.warning('warning', response.MessageDescription);\n                  this.loader = false;\n                }\n  }}, error =>  console.log(error));\n  //this.closerService.CloserAttachmentData.CloserAttachmentAduioList.splice(index);\n  //this.blobUrl = null;\n}\n  addCloserAttachment() {\n    this.closerService.CloserAttachmentData.CAID = 0 ;\n      this.closerService.CloserAttachmentData.CloserID = this.closerService.CloserDetailsData.CloserID;\n      this.CloserAttachmentSpinner = true;\n      this.closerService.PostCloserDetails(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.toastr.success(response.MessageDescription);\n                    this.CloserAttachmentSpinner = false;\n                    this.closerService.CloserAttachmentData.CloserAttachmentAduioList = [];\n                    this.closerService.SetDefaultCloserAudio();\n                    this.closerService.CloserAttachmentData.Remarks = '';\n                    this.closerService.CloserAttachmentData.CAID = 0;\n                    this.closerService.CloserAttachmentData.AttachmentFile = null;\n                    this.closerService.CloserAttachmentData.AttachmentExtenstion = null;\n                    this.closerService.CloserAttachmentData.AttachmentSize = 0;\n                    this.closerService.CloserAttachmentData.AttachmentFileAfter = null;\n                    this.closerService.CloserAttachmentData.AttachmentExtenstionAfter = null;\n                    this.closerService.CloserAttachmentData.AttachmentSizeAfter = 0;\n                    this.getTicketCloserAttachmentList();\n                    }\n                   if (response.Message === 'failure') {\n                    this.CloserAttachmentSpinner = false;\n                      this.toastr.warning('warning', response.MessageDescription);\n                    }\n      }}, error =>  console.log(error));\n  }\n\n    // ----------- Audio section Start -----------------------------------\n  // --- remove saved audio against Closer attchment\n  removeSavedCloserAudio(Caid, AttachmentAudioId) {\n    this.closerService.removeAudioAttachment(Caid, AttachmentAudioId);\n    setTimeout(() => {\n      this.getTicketCloserAttachmentList();\n    }, 500);\n  }\n  // ----------- Audio section End -----------------------------------\n\n\n    // cleare Closer signature-pad\n    cleareEngineerSignature() {\n      this.EnginnerSingnaturePad.clear();\n    }\n    cleareCustomerCloserSignature() {\n      this.CustomerCloserSingnaturePad.clear();\n    }\n    oncheckedSignature(s: string) {\n      if(s === 'c') {\n        let cust_sign = <any>document.getElementById(\"cust_sign\");\n        this.customersignatureshow = Boolean(cust_sign.checked);\n      }\n      if(s === 'e') {\n        let eng_sign = <any>document.getElementById(\"eng_sign\");\n        this.engineersignatureshow = Boolean(eng_sign.checked);\n      }\n    }\n    close() {\n      this.dialogRef.close();\n    }\n}\n","<h4 class=\"dispaly-4\">Overwrite Closer Details\n  <button class=\"btn btn-outline-danger pull-right\" mat-dialog-close (click)=\"close()\">X</button>\n</h4>\n<h4 class=\"dispaly-4\">\n  Ticket #{{this.closerService.CloserDetailsData.TicketNo}} & Closer\n  #{{this.closerService.CloserDetailsData.CloserPrefix}}\n</h4>\n<hr>\n<form #form=\"ngForm\" autocomplete=\"off\" (submit)=\"onSubmit()\">\n  <div class=\"kt-portlet__body closeformbody\">\n    <div class=\"kt-section ktrSection\">\n      <div class=\"kt-section__content\">\n        <div class=\"form-row\">\n          <div class=\"form-group col-md-12\">\n            <div class=\"col-md-12\">\n              <div class=\"row\">\n                <div class=\"col-md-12 AttToBeAppend\">\n                  <div class=\"image-header\" style=\" margin: -14px -8px;\">\n                    <div class=\"alert alert-success\" style=\"\n                color: #2c77f4;\n                background-color: #2c77f457;\n                border-color: #2c77f457;\"> Images</div>\n                  </div>\n                  <div class=\"col-md-12 attachmentlistSection\" *ngIf=\"closerService.CloserAttachmentList\">\n                    <table\n                      class=\"tblTicketServiceform table table-bordered service-form-table-border service-form-table-border htBorder\">\n                      <thead>\n                        <tr>\n                          <th width=\"20%\">Attachment</th>\n                          <th width=\"45%\">Comment</th>\n                          <th width=\"30%\">Audio</th>\n                          <th width=\"5%\">Action</th>\n                        </tr>\n                      </thead>\n                      <tr *ngFor=\"let a of closerService.CloserAttachmentList;let i=index; async\">\n                        <td>\n                          <div class=\"col-md-3 customer-logo-container\">\n                            <div>\n                              <generic-ticket-icon-attachment [(Name)]=\"a.AttachmentExtenstion\"\n                                [(Path)]=\"a.AttachmentFile\" [Status]=\"2\">\n                              </generic-ticket-icon-attachment>\n                            </div>\n                            <div class=\"customer-logo-container-overlay\">\n                              <div class=\"row\">\n                                <div class=\"col-md-12\">\n                                  <a href=\"javascript:;\">\n                                    <i class=\"fa fa-upload\" (click)=\"onclickcloser('before', i)\"></i></a>\n                                  <input (change)=\"picked($event, 'closerattachment', a)\" class=\"custom-file-input-0\"\n                                    id=\"id_{{i}}\" type=\"file\">\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <textarea type=\"text\" class=\"form-control\" [value]=\"a.Remarks\"\n                            (blur)=\"UpdateCloserAttachmentRemark($event, a)\" placeholder=\"Comment\" rows=\"4\"></textarea>\n                        </td>\n                        <td>\n                          <div class=\"row\">\n                            <div class=\"col\">\n                              <div *ngIf=\"a.CloserAttachmentAduioList.length>0\" class=\"Closer-audio-section\">\n                                <div class=\"audio-list\" *ngFor=\"let au of a.CloserAttachmentAduioList;let ii =index\">\n                                  <audio controls>\n                                    <source src=\"{{au.AudioAttachment}}\" title=\"{{au.AttachmentAudioName}}\"\n                                      type=\"audio/webm\">\n                                  </audio>\n                                  <div class=\"audio-remove\">\n                                    <a (click)=\"ClearTempCloaseAudio(au.AttachmentAudioId)\" href=\"javascript:void(0)\"><i\n                                        class=\"fa fa-times\"></i></a>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div class=\"row\">\n                            <div class=\"col-lg-7\"></div>\n                            <div class=\"col-lg-4\">\n                              <div *ngIf=\"isRecording && this.recoudngId === a.CAID\" class=\"audio-timmer\">\n                                <ul>\n                                  <li><i class=\"fa fa-circle\" aria-hidden=\"true\"></i>\n                                  </li>\n                                  <li><span>{{recordedTime}}</span></li>\n                                </ul>\n                              </div>\n                            </div>\n                            <div class=\"col-lg-1\">\n                              <a class=\"audio-button\" *ngIf=\"!isRecording\" title=\"Start recording\"\n                                (click)=\"startRecording(a)\" href=\"javascript:void(0)\">\n                                <i class=\"fa fa-microphone\" aria-hidden=\"true\"></i>\n                              </a>\n                              <a class=\"audio-button\" *ngIf=\"isRecording && this.recoudngId === a.CAID\" title=\"Stop\"\n                                (click)=\"stopRecording(a)\" href=\"javascript:void(0)\">\n                                <i style=\"color: red;\" class=\"fa fa-stop-circle\" aria-hidden=\"true\"></i>\n                              </a>\n                            </div>\n                          </div>\n                        </td>\n                        <td style=\"text-align: center;\">\n                          <a href=\"javascript:void(0);\" (click)=\"removeAttachment(a)\">\n                            <i class=\"fa fa-trash text-danger\"></i>\n                          </a>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td colSpan=\"3\"></td>\n                        <td style=\"text-align: center;\">\n                          <a *ngIf=\"!CloserAttachmentSpinner\" href=\"javascript:void(0);\" style=\"font-size: 24px;\"\n                            (click)=\"addCloserAttachment()\"><i class=\"flaticon2-add text-success\"></i></a>\n                          <div *ngIf=\"CloserAttachmentSpinner\" class=\"spinnerSection\" style=\"width: 100px;\">\n                            <img alt=\"loader\" src=\"{{localPrependUrl}}/assets/svg/spinner.svg\">\n                          </div>\n                          <div *ngIf=\"loader\" class=\"spinnerSection\" style=\"width: 100px;\">\n                            <img alt=\"loader\" src=\"{{localPrependUrl}}/assets/svg/spinner.svg\" />\n                          </div>\n                        </td>\n                      </tr>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col-md-12 serviceby-section\">\n                  <div class=\"closer-header-t\">\n                    <div class=\"alert alert-success\">\n                      Closer Details\n                    </div>\n                  </div>\n                  <div class=\"closerbody-sec\">\n                    <div class=\"row\">\n                      <div class=\"col-sm-0 col-md-1 col-lg-1 col-xl-1\">\n                      </div>\n                      <div class=\"col-sm-6 col-md-5 col-lg-5 col-xl-5\" style=\"border: 1px solid #2827331c;\">\n                        <img title=\"{{closerService.CloserDetailsData.NameOfSignatory}}\" style=\"width:200px;\" src=\"{{closerService.CloserDetailsData.CustomerSignature}}\">\n                      </div>\n                      <div class=\"col-sm-6 col-md-5 col-lg-5 col-xl-5\" style=\"border: 1px solid #2827331c;\">\n                        <img title=\"{{closerService.CloserDetailsData.EnginnerName}}\" style=\"width:200px;\" src=\"{{closerService.CloserDetailsData.EngineerSignature}}\">\n                      </div>\n                      <div class=\"col-sm-0 col-md-1 col-lg-1 col-xl-1\">\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"closerbody-sec\">\n                    <div class=\"row\">\n                      <div class=\"col-sm-0 col-md-1 col-lg-1 col-xl-1\">\n                      </div>\n                      <div class=\"col-sm-6 col-md-5 col-lg-5 col-xl-5\">\n                        <div class=\"row forn-group\" style=\"display: none;\">\n                          <div class=\"col\">\n                            <label>Customer Name</label>\n                            <input type=\"text\" name=\"tempNameOfSignatory\" #NameOfSignatory=\"ngModel\"\n                              [(ngModel)]=\"closerService.CloserDetailsData.NameOfSignatory\" class=\"form-control\"\n                              placeholder=\"Customer Name\" />\n                          </div>\n                        </div>\n                        <div class=\"row forn-group\">\n                          <div class=\"col\">\n                            <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--brand\">\n                              <input type=\"checkbox\" id=\"cust_sign\" (change)=\"oncheckedSignature('c')\"\n                                class=\"dynamic-value-reader\">\n                              <span></span>\n                              Overwrite Customer Signature </label>\n                          </div>\n                        </div>\n                        <div class=\"row forn-group\" *ngIf=\"customersignatureshow\">\n                          <div class=\"col\">\n                            <label>Customer Signature</label>\n                            <div id=\"CloseSignarePad\" class=\"m-signature-pad CloseSignarePad\">\n                              <div class=\"m-signature-pad-body\">\n                                <signature-pad #SignaturePad2 [options]=\"configPad\"></signature-pad>\n                              </div>\n                            </div>\n                            <a style=\"float:right\" class=\"btnRemoveSection\" (click)=\"cleareCustomerCloserSignature()\">\n                              Clear\n                              signature</a>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-sm-6 col-md-6 col-lg-6 col-xl-6\">\n                        <div class=\"row forn-group\">\n                          <div class=\"col\">\n                            <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--brand\">\n                              <input type=\"checkbox\" id=\"eng_sign\" (change)=\"oncheckedSignature('e')\"\n                                class=\"dynamic-value-reader\">\n                              <span></span>\n                              Overwrite {{this.currentUser.Engineer}} Signature </label>\n                          </div>\n                        </div>\n                        <div class=\"row forn-group\" *ngIf=\"engineersignatureshow\">\n                          <div class=\"\">\n                            <label>{{this.currentUser.Engineer}} Signature</label>\n                            <div id=\"CloseSignarePad\" class=\"m-signature-pad CloseSignarePad\">\n                              <div class=\"m-signature-pad-body\">\n                                <signature-pad #SignaturePad1 [options]=\"configPad\"></signature-pad>\n                              </div>\n                            </div>\n                            <a style=\"float:right\" class=\"btnRemoveSection\" (click)=\"cleareEngineerSignature()\"> Clear\n                              signature</a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row forn-group\">\n                      <div class=\"col\">\n                        <label>Remarks<sup>*</sup></label>\n                        <input type=\"hidden\" />\n                        <textarea class=\"form-control requst-for-jobs\" name=\"RamarksOnClose\" #RamarksOnClose=\"ngModel\"\n                          [(ngModel)]=\"closerService.CloserDetailsData.Remarks\" placeholder=\"Remarks\" rows=\"3\"\n                          required></textarea>\n                        <input type=\"hidden\" name=\"Status\" #Status=\"ngModel\"\n                          [(ngModel)]=\"closerService.CloserDetailsData.TicketFlag\" />\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col bottom-btn\">\n                        <hr>\n                        <button class=\"btn btn-warning btnCloseCloserForm\" mat-dialog-close>Close</button>&nbsp;\n                        <button *ngIf=\"!loader\" type=\"submit\" class=\"btn btn-primary\">Save changes</button>\n                        <button *ngIf=\"loader\" disabled class=\"btn btn-primary\">\n                          <div *ngIf=\"loader\" class=\"spinner-border text-warning\" role=\"status\"></div>\n                          Loading...\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>"]}