{"version":3,"sources":["webpack:///src/app/application/invoices/invoice-plane-invoice-customer-property-popup/invoice-plane-invoice-customer-property-popup.component.ts","webpack:///src/app/application/invoices/invoice-plane-invoice-customer-property-popup/invoice-plane-invoice-customer-property-popup.component.html","webpack:///src/app/generic-utils/Ticket-Icon-Attachment/TicketIconAttachment.module.ts","webpack:///src/app/application/invoices/invoice-customer-popup/invoice-customer-popup.component.ts","webpack:///src/app/application/invoices/invoice-customer-popup/invoice-customer-popup.component.html","webpack:///src/app/application/invoices/invoice-change-status-popup/invoice-change-status-popup.component.ts","webpack:///src/app/application/invoices/invoice-change-status-popup/invoice-change-status-popup.component.html","webpack:///src/app/application/invoices/invoices.component.ts","webpack:///src/app/services/ticket.module.ts","webpack:///src/app/application/invoices/invoice-add/invoice-add.component.ts","webpack:///src/app/application/invoices/invoice-add/invoice-add.component.html","webpack:///src/app/ngb-time-to-string-adapter.ts","webpack:///src/app/application/invoices/invoice-details/invoice-details.component.ts","webpack:///src/app/application/invoices/invoice-details/invoice-details.component.html","webpack:///src/app/services/CommanExtendsClass.module.ts","webpack:///src/app/application/invoices/invoice-payment-and-receipt/invoice-payment-and-receipt.component.ts","webpack:///src/app/application/invoices/invoice-payment-and-receipt/invoice-payment-and-receipt.component.html","webpack:///src/app/application/invoices/invoice-list/invoice-list.component.ts","webpack:///src/app/application/invoices/invoice-list/invoice-list.component.html","webpack:///src/app/application/invoices/invoices.module.ts","webpack:///src/app/application/invoices/invoice-ticket-popup/invoice-ticket-popup.component.ts","webpack:///src/app/application/invoices/invoice-ticket-popup/invoice-ticket-popup.component.html","webpack:///src/app/ngb-date-to-string-adapter.ts","webpack:///src/app/generic-utils/Ticket-Icon-Attachment/TicketIconAttachment.component.ts"],"names":["InvoicePlaneInvoiceCustomerPropertyPopupComponent","router","rout","genicprofileservice","http","toastr","dialogRef","invoiceService","service","customerService","loginservice","isValidZipCode","isValidCountry","IsPropertyCreate","zoom","options","componentRestrictions","country","street_number","route","neighborhood","sublocality_level_3","sublocality_level_2","sublocality_level_1","locality","administrative_area_level_2","administrative_area_level_1","postal_code","currentUser","subscribe","x","localPrependUrl","apiUrl","Propertylist","refrestPropertylistCustomerWise","Token","formData","Id","res","response","Message","locallist","result","error","console","log","setTimeout","filter","IsActive","CustomerId","AddressZipCode","undefined","warning","AddressCountry","AddNewProperty","success","AddressStreet1","AddressStreet2","AddressCity","AddressState","AddressUnitNo","a","close","InvoiceData","CustomerAddress","CustomerEmail","ArrayofKeys","s","IsDefault","Type","Value","CustomerContactNo","navigate","getCountryList","countrylist","value","item","toLowerCase","match","address","lat","geometry","location","lng","address_components","forEach","element","types","long_name","Latitude","toString","Longitude","selector","templateUrl","styleUrls","TicketIconAttachmentModule","imports","declarations","exports","InvoiceCustomerPopupComponent","dialog","customerservice","IsCustomerCreate","isValidTitle","isValidFirstname","isValidLastname","isValidCompanyname","isDone","LocalList","getCustomerListSync","CustomerList","CustomerLocalList","Status","c","Object","assign","CompanyName","FirstName","LastName","NameTitle","UseCompanyNameAsPrimaryName","AddNewCustomer","refreshcustomerlist","MessageDescription","refrestCustomerList","InvoiceChangeStatusPopupComponent","logService","getPaymentSummary","tempPaymentlist","PaymentSummary","IsShowPaymentSection","IsShowInvStatus","UpdateInvoiceStatus","des","InvoiceId","CustomerName","UserName","Date","Activity","postUserLog","byInvoiceStatusChange","CollapseInvStatus","InvoicesComponent","template","Ticket","TicketTeam","TicketItem","TicketAttachment","TicketIssueType","TicketWiseIssueType","TicketTimer","TicketReminder","TicketEquipment","TicketEquipmentMasterData","TicketRecurringHelper","InvoiceAddComponent","titleService","productservice","quoteService","docservice","genicProfile","propertyService","fileToUpload","InvoiceDateIsValid","InvoiceDueDateIsValid","uploader","ProductItemArray","tempArray","ItemBtn","ItemIsValid","ItemProductIsValid","ItemQuantityIsValid","ItemUnitCosttIsValid","ItemUniqueIsValid","InvoiceNosChange","InvoiceNosChangeBtn","loader","tempIndexQty","IshowStockSection","tempInWarranty","locateInvoiceUniqueID","InvoiceUniqueID","isQtyValid","isUnitCostValid","productdata","btnloader","newUniqueID","getGenicProfile","getTaxList","TextList","url","Permissions","InvoiceCreate","setTitle","createbuttontext","InvoiceDate","TODAY_DATE_IN_STRING","InvoiceDueDate","NEXT_MONTH_DATE_IN_STRING","InvoiceEdit","setlocalcount","refrestServicesList","serviceformList","refrestProductsList","Productlist","getInvoiceItems","InitialazeProductDropdown","tempurl","InvoiceItemData","prod","Product","multiple","placeholder","minimumInputLength","ajax","dataType","delay","data","params","q","term","page","processResults","results","items","pagination","more","total_count","cache","escapeMarkup","markup","templateResult","templateSelection","repo","loading","text","full_name","description","event","t","type","moduleid","remark","Files","target","files","file","uploadDocument","info","getInvoiceAttachments","QuoteAttamentId","Attachment","confirm","deleteInvoiceAttachment","then","status","Activity1","statusText","err","InvoiceItemList","InvoiceAttachmentList","ItemSubTotalByArry","map","Total","length","SubTotal","NetAmount","TaxAmount","TaxRate","DiscountAmount","DiscountTextValue","reduce","b","EditSubTotalValue","Number","EditTaxRate","EditTaxAmt","DiscountType","EditDisTextValue","z","id","ItemName","Qty","UnitCost","deleteInvoiceItems","Activity2","tempqty","temcost","toFixed","total","ItemDescription","ProductWarranty","InWarranty","UniqId","WarrantyDays","Activity3","postInvoiceItemDetails","putInvoiceItemDetails","descc","Activity4","QuoteItemData","ReqDepositeType","ReqDepositeTextValue","ReqDepositeAmount","v","SubTotalValue","DisTextValue","TempTaxRate","tempTaxAmt","tempDiscAmount","zz","DisctAmt","TaxAmt","InvoiceTitle","putInvoice","des1","ClientRemark","InternalNotes","parse","Activity5","Activity6","SetAsDefaultValue","QuoteData","QuoteUniqueID","ValidateInvoiceNo","body","InvoicePrefix","charCode","which","keyCode","titem","warrantyvalue","tempAvailableStock","Quantity","tempSalePrice","SalePrice","ProductName","Description","ServiceName","ServiceDescription","GenerateUniqueRandom","GetRandamUniqueId","customwarrantyShow","customwarrantyShowEdit","provide","useClass","deps","useValue","CalculateInvoiceProductCost","numberwithDecimalOnly","addProductToInvoice","CleareProductToInvoice","changeDiscountValue","CalculateInvoiceTax","changeInvoiceDepositeValue","picked","providers","isInteger","isFinite","Math","floor","isString","NgbTimeToStringAdapter","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","dateString","date","isValidDate","isNaN","valueOf","hour","getUTCHours","minute","getUTCMinutes","second","getUTCSeconds","time","padStart","InvoiceDetailsComponent","InvoiceView","getPaymentDetailsByInvoiceNo","TotalPaymentData","iAmount","pAmount","PaymentAmount","PaymentData","refrestArrayofKeyslist","InvoiceAttamentId","i","dialogConfig","autoFocus","width","open","afterClosed","downoadInvoicePDF","$","attr","Path","appendTo","click","remove","emailInvoiceCopy","downloadInvoice","SendInvoiceByMail","ReminderBase","InvoicePaymentAndReceiptComponent","getPaymentModeDetails","PaymentModeList","PaymentMethod","PaymentNote","TransactionId","PModeId","PaymentDate","InvoiceNo","postPayment","BalanceAmount","CreatedDate","UpdatedDate","SendOutStatus","emailPaymentReceipt","styles","InvoiceListComponent","ticketService","propertyservice","dtOptions","dtTrigger","TicketFilter","IsReady","IsReadyQuote","pagingType","paging","ordering","lengthMenu","refreshInvoiceList","TotalInvoice","InvoiceList","TotalDraftInvoice","TotalCancelledInvoice","TotalSendOutParticalPaidInvoice","TotalPaidInvoices","TotalUnpaidInvoice","TotalOverDueInvoice","next","unsubscribe","customerData","OpenAddTicketToInvoiceDialog","postTempInvoice","res0","InvoiceConvertedFrom","InvoiceConvertedID","Title","PropertyId","InternalNoteDescription","TicketId","TaxId","posTciketitemToInvoiceItemTicketId","getPropertyData","res1","JobTitle","Attention","RefranceNo","SalesRepresentative","QuoteId","posQuoteItemToInvoiceItem","getQuoteDetails","obj","getQuoteItems","QuoteItemList","getQuoteAttachments","getTicketById","routes","path","component","children","InvoicesModule","forChild","InvoiceTicketPopupComponent","PropertyAdrresssVisible","getInvoiceTicketList","LocalTicketList","InvoiceTicketList","getInvoiceQuoteList","LocalQuoteList","QuoteList","queryParams","onTicketKeypress","onQuoteKeypress","OpenAddClienPropertyForPlaneInvoiceDialog","NgbDateToStringAdapter","TicketIconAttachmentComponent","Name","ext","split","pop"],"mappings":"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iD;AAAA,qBAAS,IAAAC,sBAAA,EAAT;AAAiC,aAAjC;;AAE/C;;AACA;;AACF;;AACF;;AACF;;AACF;;AACF;;AAEF;;AACA;;AACE;;AACF;;AACA;;AACE;;AAEE;;AACE;;AACE;;AACF;;AACF;;AACA;;AAAI;;AAAsD;;AAC5D;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;AAAA;AAAA;;AAGF;;AAAA;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACA;;AAAO;;AAAW;;AACpB;;AACA;;AACE;;AAGF;;AACA;;AACE;;AACE;;AACE;AAAA;AAAA;;AADF;;AAC0D;;AAC1D;;AACF;;AACA;;AACE;;AACE;AAAA;AAAA;;AADF;;AAC+D;;AAE/D;;AACF;;AACA;;AACE;;AACE;AAAA;AAAA;;AADF;;AAEA;;AACA;;AACF;;AACA;;AACE;;AACE;AAAA;AAAA;;AADF;;AAEA;;AACA;;AACF;;AACA;;AACE;;AACE;AAAA;AAAA;;AADF;;AACsD;;AAEtD;;AACF;;AACF;;AACF;;AACF;;AAEF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AAA8B;;AAAQ;;AACxC;;AACA;;AAC6C;;AAAmD;;AAClG;;AACA;;AACE;;AACE;;AAA8B;;AAAQ;;AACxC;;AACA;;AACE;;AACE;;AACE;AAAA,qBAAS,IAAAC,mBAAA,EAAT;AAA8B,aAA9B,EAA+B,SAA/B,EAA+B;AAAA,qBAAY,IAAAA,mBAAA,EAAZ;AAAiC,aAAhE,EAA+B,QAA/B,EAA+B;AAAA,qBACrB,IAAAA,mBAAA,EADqB;AACA,aAD/B,EAA+B,UAA/B,EAA+B;AAAA,qBAEnB,IAAAH,qBAAA,QAFmB;AAEU,aAFzC,EAA+B,eAA/B,EAA+B;AAAA;AAAA,aAA/B;;AADF;;AAKA;;AAA6B;AAAA,qB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AACE;;AACE;;AACE;;AACF;;AACA;;AAGF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAM;;AAA0C;;AAAO;;AACzD;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAmC;;AAAe;;AACpD;;AACA;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAmC;;AAAa;;AAClD;;AACA;;AACE;;;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAmC;;AAAiB;;AACtD;;AACA;;AACE;;;;AACF;;AACF;;AACF;;AACA;;AAUA;;AAUA;;AAUA;;AAUF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AAEA;;AACA;;AA+BA;;AACE;;AACA;;AACE;;AACE;;AACE;;AAAG;;AAA2C;;AAChD;;AACA;;AACE;;AACE;;AACE;;AACE;;AAA8B;;AAAQ;;AAExC;;AACA;;AAC6C;;AAAmD;;AAClG;;AACA;;AACE;;AACE;;AAA8B;;AAAQ;;AACxC;;AACA;;AACE;;AACE;;AAC6C;;AAAyD;;AACxG;;AACF;;AACF;;AACA;;AACE;;AACE;;AAA8B;;AAAG;;AACnC;;AACA;;AACE;;AACE;;AAC6C;;AAAoD;;AACnG;;AACF;;AACF;;AACA;;AACE;;AACE;;AAA8B;;AAAG;;AAAK;;AAAI;;AAC5C;;AACA;;AAC6C;;AAAG;;AAAoD;;AAAI;;AAC1G;;AACA;;AACE;;AACE;;AAA8B;;AAAgB;;AAChD;;AACA;;AAC4C;;AAA4D;;AAC1G;;AACF;;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,QAAZ,CAAqB,CAAC,8BAAD,CAArB;AACD;AACF,aALD,EAKG,UAAA7B,KAAK;AAAA,qBAAKC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAL;AAAA,aALR;AAMD;;;;;;;yBA3MU8X,oB,EAAoB,gI,EAAA,mI,EAAA,uH,EAAA,2I,EAAA,wI,EAAA,0I,EAAA,4I,EAAA,iJ,EAAA,+J,EAAA,sI,EAAA,4I,EAAA,oJ;AAAA,O;;;cAApBA,oB;AAAoB,yC;AAAA,kB;AAAA,e;AAAA,glJ;AAAA;AAAA;ACQjC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACJ;;AACA;;AACA;;AACA;;AACE;;AACA;;AACA;;AACF;;AACF;;AACA;;AACE;;AAGF;;AACF;;AACF;;AACA;;AAEE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAA;;AACE;;AACE;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;AACA;;AAAA;;AACE;;AACE;;AAAmB;;AAAc;;AACnC;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAA;;AACE;;AACE;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;AACA;;AAAA;;AACE;;AACE;;AAAmB;;AAAc;;AACnC;;AACA;;AACI;;AACJ;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAA;;AACE;;AACE;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;AACA;;AAAA;;AACE;;AACE;;AAAmB;;AAAa;;AAClC;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAA;;AACE;;AACE;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;AA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","file":"application-invoices-invoices-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { PropertyService } from 'src/app/services/property.service';\nimport { Property } from 'src/app/services/property.model';\nimport { CustomerService } from 'src/app/services/customer.service';\nimport { AuthenticationService, Login } from 'src/app/services';\nimport { environment } from 'src/environments/environment';\nimport { ToastrService } from 'ngx-toastr';\nimport { GenicProfileService } from 'src/app/services/genicprofile.service';\n\n@Component({\n  selector: 'app-invoice-plane-invoice-customer-property-popup',\n  templateUrl: './invoice-plane-invoice-customer-property-popup.component.html',\n  styleUrls: ['./invoice-plane-invoice-customer-property-popup.component.css']\n})\nexport class InvoicePlaneInvoiceCustomerPropertyPopupComponent implements OnInit {\n  localPrependUrl: string;\n  isValidZipCode = true;\n  isValidCountry = true;\n  IsPropertyCreate = true;\n  lat: number;\n  lng: number;\n  zoom = 8;\n  IsPostalSearch: boolean;\n  options = {componentRestrictions: { country: ['SG']}};\n  street_number = '';\n  route = '';\n  neighborhood = '';\n  sublocality_level_3 = '';\n  sublocality_level_2 = '';\n  sublocality_level_1 = '';\n  locality = '';\n  administrative_area_level_2 = '';\n  administrative_area_level_1 = '';\n  country = '';\n  postal_code = '';\n  currentUser: Login;\n  countrylist: any;\n  constructor(\n    public router: Router,\n    public rout: ActivatedRoute,\n    public genicprofileservice: GenicProfileService,\n    public http: HttpClient,\n    private toastr: ToastrService,\n    public dialogRef: MatDialogRef<InvoicePlaneInvoiceCustomerPropertyPopupComponent>,\n    public invoiceService: InvoiceService,\n    public service: PropertyService,\n    public customerService: CustomerService,\n    public loginservice: AuthenticationService\n  ) { this.loginservice.currentUser.subscribe(x => this.currentUser = x); this.localPrependUrl = environment.apiUrl;}\n\n  ngOnInit() {\n    this.IsPropertyCreate = true;\n    this.service.Propertylist = [];\n    this.service.refrestPropertylistCustomerWise(this.currentUser.Token, this.customerService.formData.Id).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.service.Propertylist = this.service.locallist = response.result as Property[]\n                  }\n    }}, error =>  console.log(error));\n    setTimeout(() => {\n      this.service.locallist = this.service.Propertylist.filter(x => x.IsActive === true);\n      }, 1000);\n    this.service.formData.CustomerId = this.customerService.formData.Id;\n  }\n  onSubmit() {\n    if (this.service.formData.AddressZipCode === '' ||\n    this.service.formData.AddressZipCode === undefined) {\n      this.isValidZipCode = false;\n      this.toastr.warning('', 'ZipCode is required!');\n      return false;\n    }\n    if (this.service.formData.AddressCountry === '' ||\n     this.service.formData.AddressCountry === undefined) {\n      this.isValidCountry = false;\n      this.toastr.warning('', 'Country is required!');\n      return false;\n    }\n\n    this.service.AddNewProperty()\n    .subscribe( res => {\n      if (res) {\n        setTimeout(() => {\n          this.toastr.success('', 'Property is added');\n          this.service.Propertylist = res as [];\n        }, 400);\n        setTimeout(() => {\n          this.service.locallist = this.service.Propertylist.filter(x => x.IsActive === true);\n          }, 1000);\n        this.IsPropertyCreate = true;\n        setTimeout(() => {\n          this.service.formData.AddressStreet1 = '';\n          this.service.formData.AddressStreet2 = '';\n          this.service.formData.AddressCity = '';\n          this.service.formData.AddressState = '';\n          this.service.formData.AddressUnitNo = '';\n          this.service.formData.AddressZipCode = '';\n        }, 1500);\n\n      }\n    }, error =>  console.log(error));\n  }\n  onClick(a?: Property) {\n    if (a === undefined) {\n      this.dialogRef.close();\n    } else {\n      this.dialogRef.close({a});\n      this.invoiceService.InvoiceData.CustomerAddress = a.AddressStreet1 + ' ' + a.AddressStreet2 + ' ' + a.AddressUnitNo + ' ' + a.AddressCountry + ' ' + a.AddressZipCode;\n      try{\n      this.invoiceService.InvoiceData.CustomerEmail = this.customerService.formData.ArrayofKeys.filter(s=> s.IsDefault === true && s.Type === 'Email')[0].Value;\n      } catch{}\n      try{\n      this.invoiceService.InvoiceData.CustomerContactNo = this.customerService.formData.ArrayofKeys.filter(s=> s.IsDefault === true && s.Type === 'Phone')[0].Value;\n    } catch{}\n      setTimeout(() => {\n      this.router.navigate(['/invoices/invoice-add-plane-url']);\n      }, 500);\n    }\n  }\n  redirect() {\n    this.IsPropertyCreate = false;\n    this.genicprofileservice.getCountryList(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                   this.countrylist = response.result;\n                  }\n    }}, error =>  console.log(error));\n  }\n  onBack() {\n    this.IsPropertyCreate = true;\n  }\n  onkeypress(value: string) {\n    this.service.locallist = this.service.Propertylist.filter(item =>\n      item.AddressStreet1.toLowerCase().match(value.toLowerCase()) ||\n      item.AddressStreet2.toLowerCase().match(value.toLowerCase()) ||\n      item.AddressCity.toLowerCase().match(value.toLowerCase()) ||\n      item.AddressState.toLowerCase().match(value.toLowerCase()) ||\n      item.AddressZipCode.toLowerCase().match(value.toLowerCase()) ||\n      item.AddressCountry.toLowerCase().match(value.toLowerCase())\n      );\n  }\n  public handleAddressChange(address: any) {\n    this.service.formData.AddressStreet1 = '';\n    this.service.formData.AddressStreet2 = '';\n    this.service.formData.AddressCity = '';\n    this.service.formData.AddressState =  '';\n    this.service.formData.AddressUnitNo = '';\n    this.service.formData.AddressZipCode = '';\n    this.service.formData.AddressCountry = '';\n\n    this.lat = address.geometry.location.lat();\n    this.lng = address.geometry.location.lng();\n    address.address_components.forEach((element: any) => {\n      switch (element.types[0]) {\n        case 'postal_code': { this.postal_code = element.long_name; break; }\n        case 'country': { this.country = element.long_name; break; }\n        case 'administrative_area_level_1': { this.administrative_area_level_1 = element.long_name + ' '; break; }\n        case 'administrative_area_level_2': { this.administrative_area_level_2 = element.long_name + ' '; break; }\n        case 'locality': { this.locality = element.long_name + ' '; break; }\n        case 'sublocality_level_1': { this.sublocality_level_1 = element.long_name + ' '; break; }\n        case 'sublocality_level_2': { this.sublocality_level_2 = element.long_name + ' '; break; }\n        case 'sublocality_level_3': { this.sublocality_level_3 = element.long_name + ' '; break; }\n        case 'neighborhood': { this.neighborhood = element.long_name + ' '; break; }\n        case 'route': { this.route = element.long_name + ' '; break; }\n        case 'street_number': { this.street_number = element.long_name + ' '; break; }\n      }\n    });\n\n    this.service.formData.Latitude = this.lat.toString();\n    this.service.formData.Longitude = this.lng.toString();\n\n    this.service.formData.AddressStreet1 = this.street_number + this.route;\n    this.service.formData.AddressStreet2 =  this.administrative_area_level_2 + this.sublocality_level_3 +\n    this.sublocality_level_2 +\n    this.sublocality_level_1 + this.neighborhood + this.administrative_area_level_1;\n    this.service.formData.AddressCity = '';\n    this.service.formData.AddressState =  '';\n    this.service.formData.AddressZipCode = this.postal_code;\n    this.service.formData.AddressCountry = this.country;\n\n    this.street_number = '';\n    this.route = '';\n    this.administrative_area_level_2 = '';\n    this.sublocality_level_3 = '';\n    this.sublocality_level_2 = '';\n    this.sublocality_level_1 = '';\n    this.neighborhood = '';\n    this.administrative_area_level_1 = '';\n    this.locality = '';\n    this.postal_code = '';\n    this.country = '';\n  }\n}\n","<div class=\"modal-header select-new-properties\">\n    <h5 class=\"modal-title\" id=\"exampleModalLabel\">Select or create a Property</h5>\n    <button class=\"btn btn-default pull-right\" mat-dialog-close>x</button>\n</div>\n<div class=\"modal-body property-modal-body\" *ngIf=\"IsPropertyCreate\">\n    <p>Which property would you like to select for ticket ?</p>\n    <div class=\"row forn-group\">\n        <div class=\"col-md-7\">\n            <input type=\"text\" (keydown)=\"onkeypress($event.target.value)\" (keyup)=\"onkeypress($event.target.value)\"\n                class=\"form-control\" placeholder=\"Search Clients...\">\n        </div>\n        <div class=\"col-md-1 text-center\" *ngIf=\"currentUser.Permissions.PropertyCreate\">\n            or\n        </div>\n        <div class=\"col-md-4\" *ngIf=\"currentUser.Permissions.PropertyCreate\">\n            <a on class=\"btn btn-brand text-white \" (click)=\"redirect()\">\n                <i class=\"la la-plus\"></i> Create new Property </a>\n        </div>\n    </div>\n    <div class=\"kt-portlet__body new_clients_properties_body\">\n        <div class=\"kt-widget4 kt-scroll ps\" data-scroll=\"true\" data-height=\"220\"\n            style=\"height: 220px; overflow: hidden;\">\n            <div *ngFor=\"let x of service.locallist\" class=\"kt-widget4__item create-quote-client-item\"\n                (click)=\"onClick(x)\">\n                <div class=\"kt-widget4__pic kt-widget4__pic--logo\">\n                    <img src=\"{{localPrependUrl}}/assets/media/client-logos/logo1.png\" alt=\"\">\n                </div>\n                <div class=\"kt-widget4__info\">\n                    <p class=\"kt-widget4__text\">\n                        {{ x.AddressStreet1 }} {{ x.AddressStreet2 }} {{ x.AddressUnitNo }}\n                        {{ x.AddressCountry }} {{ x.AddressZipCode }}\n                    </p>\n                    <a class=\"kt-widget4__title\">\n\n                        {{ x.CustomerName }}\n                    </a>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"modal-body property-modal-body\" *ngIf=\"!IsPropertyCreate\">\n    <div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\n        <input type=\"hidden\" name=\"Id\" #Id=\"ngModel\" [(ngModel)]=\"service.formData.Id\">\n        <input type=\"hidden\" name=\"CustomerId\" #CustomerId=\"ngModel\" [(ngModel)]=\"service.formData.CustomerId\">\n        <input type=\"hidden\" name=\"CustomerName\" #CustomerName=\"ngModel\" [(ngModel)]=\"service.formData.CustomerName\">\n        <input type=\"hidden\" name=\"Latitude\" #Latitude=\"ngModel\" [(ngModel)]=\"service.formData.Latitude\">\n        <input type=\"hidden\" name=\"Longitude\" #Longitude=\"ngModel\" [(ngModel)]=\"service.formData.Longitude\">\n        <div class=\"creat-properties-form-main-section\">\n            <div class=\"kt-container kt-container--fluid\">\n                <div class=\"create_properties-filter_form create_properties-filter_form-1\">\n                    <div class=\"form-group form-group-last\">\n                        <div class=\"alert alert-secondary\" role=\"alert\">\n                            <div class=\"alert-icon\"><i class=\"fa fa-building\"></i></div>\n                            <div class=\"new-properties-popupcreate-text\">\n                                New Property for {{ invoiceService.InvoiceData.CustomerName }}\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row property-applications\">\n                        <div class=\"col-md-12\">\n                            <div class=\"create_properties-filter_form\">\n\n                                <div class=\"form-group row creat-properties-form-group\">\n                                    <div class=\"col-lg-12\">\n                                        <div class=\"form-group\">\n                                            <label for=\"\" class=\"label\">Address Street 1</label>\n                                            <input name=\"AddressStreet1\" #AddressStreet1=\"ngModel\"\n                                                ngx-google-places-autocomplete [options]=\"options\"\n                                                (onAddressChange)=\"handleAddressChange($event)\"\n                                                [(ngModel)]=\"service.formData.AddressStreet1\" class=\"form-control\"\n                                                placeholder=\"Address Street 1\" maxlength=\"128\">\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"form-group row creat-properties-form-group\">\n                                    <div class=\"col-lg-12\">\n                                        <div class=\"form-group\">\n                                            <label for=\"\" class=\"label\">Address Street 2</label>\n                                            <input name=\"AddressStreet2\" #AddressStreet2=\"ngModel\"\n                                                [(ngModel)]=\"service.formData.AddressStreet2\" class=\"form-control\"\n                                                placeholder=\"Address Street 2\" maxlength=\"128\">\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"form-group row creat-properties-form-group\">\n                                    <div class=\"col-lg-12\">\n                                        <div class=\"form-group\">\n                                            <label for=\"\" class=\"label\">Address Unit No</label>\n                                            <input name=\"AddressUnitNo\" #AddressUnitNo=\"ngModel\"\n                                                [(ngModel)]=\"service.formData.AddressUnitNo\" class=\"form-control\"\n                                                placeholder=\"Address Unit No\" maxlength=\"16\">\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"form-group row creat-properties-form-group\">\n                                    <div class=\"col-lg-6 padding-right-mo-10\" style=\"padding-right:0px;\">\n                                        <label for=\"\" class=\"label\">Postal Code</label>\n                                        <div class=\"input-group\">\n\n                                            <input name=\"AddressZipCode\" #AddressZipCode=\"ngModel\" min=\"5\" maxlength=\"6\"\n                                                [(ngModel)]=\"service.formData.AddressZipCode\" class=\"form-control\"\n                                                placeholder=\"Postal Code\">\n                                            <div class=\"input-group-prepend\">\n                                                <div class=\"input-group-text\">\n                                                    <a href=\"javascript:;\"\n                                                        *ngIf=\"service.formData.AddressZipCode.toString().length === 6\">\n                                                        <i *ngIf=\"!IsPostalSearch\" class=\"la la-refresh\"></i>\n                                                        <i *ngIf=\"IsPostalSearch\" class=\"la la-spinner fa-spin\"></i>\n                                                    </a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-lg-6 padding-left-mo-10\" style=\"padding-left:0px;\">\n                                        <div class=\"form-group\">\n                                            <label for=\"\" class=\"label\">Country</label>\n                                            <select name=\"AddressCountry\" #AddressCountry=\"ngModel\"\n                                                [(ngModel)]=\"service.formData.AddressCountry\" class=\"form-control\">\n                                                <option value=\"\">select</option>\n                                                <option *ngFor=\"let x of countrylist\" value=\"{{x.CountryName}}\">\n                                                    {{x.CountryName}}\n                                                </option>\n                                            </select>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-xl-12\">\n                            <button type=\"button\" (click)=\"onBack()\" class=\"btn btn-secondary\"><i\n                                    class=\"fas fa-angle-double-left\"></i>Back</button>&nbsp;&nbsp;&nbsp;\n                            <button type=\"submit\" (click)=\"onSubmit()\" class=\"btn btn-brand\">\n                                Create\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TicketIconAttachmentComponent } from './TicketIconAttachment.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule],\r\n  declarations: [TicketIconAttachmentComponent],\r\n  exports: [TicketIconAttachmentComponent]\r\n})\r\nexport class TicketIconAttachmentModule {}\r\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef, MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { CustomerService } from '../../../services/customer.service';\nimport { Customer } from '../../../services/customer.model';\nimport { environment } from 'src/environments/environment';\nimport { ToastrService } from 'ngx-toastr';\nimport { Login } from 'src/app/services/login.mudule';\nimport { AuthenticationService } from 'src/app/services';\n\n@Component({\n  selector: 'app-invoice-customer-popup',\n  templateUrl: './invoice-customer-popup.component.html',\n  styleUrls: ['./invoice-customer-popup.component.css']\n})\nexport class InvoiceCustomerPopupComponent implements OnInit {\n  LocalList: Customer[];\n  localPrependUrl: string;\n  IsCustomerCreate = true;\n  isValidTitle = true;\n  isValidFirstname = true;\n  isValidLastname = true;\n  isValidCompanyname = true;\n  currentUser: Login;\n  isDone: boolean;\n  constructor(\n    public router: Router,\n    public http: HttpClient,\n    public dialog: MatDialog,\n    private toastr: ToastrService,\n    public loginservice: AuthenticationService,\n    public dialogRef: MatDialogRef<InvoiceCustomerPopupComponent>,\n    public customerservice: CustomerService,\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl; this.isDone = false;\n  }\n\n  ngOnInit() {\n    this.LocalList = [];\n    this.customerservice.getCustomerListSync(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.customerservice.CustomerList = response.result as Customer[];\n                  setTimeout(() => {\n                    this.customerservice.CustomerLocalList = [];\n                    this.customerservice.CustomerLocalList = this.customerservice.CustomerList.filter(x => x.Status === true);\n                    this.LocalList = this.customerservice.CustomerLocalList;\n                  }, 200);\n                  }\n      }}, error =>  console.log(error));\n  }\n  onClick(c: Customer) {\n    if (c === undefined) {\n      this.dialogRef.close();\n    } else {\n      this.dialogRef.close({ c });\n      this.customerservice.formData = Object.assign({}, c);\n    }\n  }\n  CreateNewClient() {\n    this.dialogRef.close();\n  }\n  onkeypress(value: string) {\n    this.LocalList = this.customerservice.CustomerList.filter(item =>\n      item.CompanyName.toLowerCase().match(value.toLowerCase()) ||\n      item.FirstName.toLowerCase().match(value.toLowerCase()) ||\n      item.LastName.toLowerCase().match(value.toLowerCase()));\n  }\n  redirect() {\n    this.customerservice.formData.NameTitle = '';\n    this.customerservice.formData.FirstName = '';\n    this.customerservice.formData.LastName = '';\n    this.customerservice.formData.CompanyName = '';\n    this.customerservice.formData.UseCompanyNameAsPrimaryName = true;\n    this.customerservice.formData.AddressStreet1 = '';\n    this.customerservice.formData.AddressStreet2 = '';\n    this.IsCustomerCreate = false;\n  }\n  onSubmit() {\n    if (this.customerservice.formData.FirstName === '' || this.customerservice.formData.FirstName === undefined) {\n      this.isValidFirstname = false;\n      this.toastr.warning('', 'First Name is required!');\n      return false;\n    }\n    if (this.customerservice.formData.LastName === '' || this.customerservice.formData.LastName === undefined) {\n      this.isValidLastname = false;\n      this.toastr.warning('', 'Last Name is required!');\n      return false;\n    }\n    if (this.customerservice.formData.CompanyName === '' || this.customerservice.formData.CompanyName === undefined) {\n      this.isValidCompanyname = false;\n      this.toastr.warning('', 'Company Name is required!');\n      return false;\n    }\n    this.customerservice.AddNewCustomer(this.currentUser.Token)\n      .subscribe(res => {\n        const response = res as any;\n        if (response.Message === 'success') {\n          this.toastr.success('success',\n            'User ' +\n            this.customerservice.formData.NameTitle + ' ' +\n            this.customerservice.formData.FirstName + ' ' +\n            this.customerservice.formData.LastName +\n            ' is added Successfully!');\n          this.customerservice.formData = res;\n          this.isDone = false;\n          this.refreshcustomerlist();\n          this.IsCustomerCreate = true;\n        }\n        if (response.Message === 'failure') {\n          this.toastr.warning('warning', response.MessageDescription);\n          this.isDone = false;\n        }\n      }, error => console.log(error));\n  }\n  refreshcustomerlist() {\n    this.customerservice.refrestCustomerList(this.currentUser.Token);\n    setTimeout(() => {\n      this.customerservice.CustomerLocalList = [];\n      this.customerservice.CustomerLocalList = this.customerservice.CustomerList.filter(x => x.Status === true);\n      this.LocalList = this.customerservice.CustomerLocalList;\n    }, 1000);\n  }\n}\n","<div class=\"modal-header select-new-properties\">\r\n  <h5 class=\"modal-title\" id=\"exampleModalLabel\">Select or create a Client</h5>\r\n  <button class=\"btn btn-default pull-right\" mat-dialog-close>x</button>\r\n</div>\r\n<div class=\"modal-body property-modal-body\" *ngIf=\"IsCustomerCreate\">\r\n  <div>\r\n      <p>Which client would you like to create this invoice for?</p>\r\n      <div class=\"row forn-group\">\r\n          <div class=\"col-md-7\">\r\n              <input type=\"text\" (keydown)=\"onkeypress($event.target.value)\" (keyup)=\"onkeypress($event.target.value)\" class=\"form-control\" placeholder=\"Search Clients...\">\r\n          </div>\r\n          <div class=\"col-md-1 text-center\" *ngIf=\"currentUser.Permissions.CustomerCreate\">\r\n              or\r\n          </div>\r\n          <div class=\"col-md-4 text-right\">\r\n              <a on class=\"btn btn-brand text-white \" (click)=\"redirect()\" *ngIf=\"currentUser.Permissions.CustomerCreate\">\r\n                  <i class=\"la la-plus\"></i> Create new client </a>\r\n          </div>\r\n      </div>\r\n      <div class=\"kt-portlet__body new_clients_properties_body\">\r\n          <div class=\"kt-widget4 kt-scroll ps\" data-scroll=\"true\" data-height=\"220\"\r\n              style=\"height: 220px; overflow: hidden;\" id=\"style-3\">\r\n\r\n              <div *ngFor = \"let x of LocalList\" class=\"kt-widget4__item create-quote-client-item\" (click)=\"onClick(x)\">\r\n                  <div class=\"kt-widget4__pic kt-widget4__pic--logo\">\r\n                      <img *ngIf=\"x.CustomerLogo===null\"\r\n                      width=\"30px\"\r\n                      src=\"{{localPrependUrl}}/assets/svg/noimage.svg\" alt=\"{{ x.CompanyName }}\" title=\"{{ x.CompanyName }}\" />\r\n                  <img *ngIf=\"x.CustomerLogo!==null\"\r\n                      width=\"30px\"\r\n                      src=\"{{ x.CustomerLogo }}\" alt=\"{{ x.CompanyName }}\" title=\"{{ x.CompanyName }}\">\r\n                  </div>\r\n                  <div class=\"kt-widget4__info\" *ngIf=\"!x.UseCompanyNameAsPrimaryName\">\r\n                      <a class=\"kt-widget4__title\" href=\"javascript:;\">\r\n                         {{ x.NameTitle }} {{ x.FirstName }} {{ x.LastName }}\r\n                      </a>\r\n                      <i class=\"\">\r\n                          {{ x.CompanyName }}\r\n                      </i>\r\n                  </div>\r\n                  <div class=\"kt-widget4__info\" *ngIf=\"x.UseCompanyNameAsPrimaryName\">\r\n                      <a class=\"kt-widget4__title\" href=\"javascript:;\">\r\n                              {{ x.CompanyName }}\r\n                      </a>\r\n                      <i class=\"\">\r\n                              {{ x.NameTitle }} {{ x.FirstName }} {{ x.LastName }}\r\n                      </i>\r\n                   </div>\r\n                  <span class=\"kt-widget4__number kt-font-brand\"> {{ x.Properties.length }} Properties</span>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal-body property-modal-body\" *ngIf=\"!IsCustomerCreate\">\r\n  <p>Create New Customer</p>\r\n  <div class=\"form-group row\">\r\n      <div class=\"col-xl-2 no-spacing\">\r\n          <div class=\"form-group\">\r\n              <label for=\"\" class=\"label whole-text-required\">Title<span class=\"text-danger\">*</span></label>\r\n              <select class=\"form-control\" name=\"NameTitle\" #NameTitle=\"ngModel\" [class.is-invalid]=\"!isValidTitle\"\r\n                  [(ngModel)]=\"customerservice.formData.NameTitle\">\r\n                  <option value=\"\">Title</option>\r\n                  <option value=\"Mrs.\">Mrs.</option>\r\n                  <option value=\"Mr.\">Mr.</option>\r\n                  <option value=\"Ms.\">Ms.</option>\r\n                  <option value=\"Mss.\">Mss.</option>\r\n                  <option value=\"Dr.\">Dr.</option>\r\n              </select>\r\n\r\n          </div>\r\n      </div>\r\n      <div class=\"col-xl-5 no-spacing\">\r\n          <div class=\"form-group\">\r\n              <label for=\"\" class=\"label whole-text-required\">First Name<span class=\"text-danger\">*</span></label>\r\n              <input name=\"FirstName\" #FirstName=\"ngModel\" [(ngModel)]=\"customerservice.formData.FirstName\"\r\n                  class=\"form-control\" placeholder=\"First Name\" [class.is-invalid]=\"!isValidFirstname\" min=\"0\"\r\n                  maxlength=\"64\">\r\n          </div>\r\n      </div>\r\n      <div class=\"col-xl-5 no-spacing\">\r\n          <div class=\"form-group\">\r\n              <label for=\"\" class=\"label\">Last Name <span class=\"text-danger\">*</span></label>\r\n              <input name=\"LastName\" #LastName=\"ngModel\" [(ngModel)]=\"customerservice.formData.LastName\" class=\"form-control\"\r\n                  placeholder=\"Last Name\" [class.is-invalid]=\"!isValidLastname\" maxlength=\"64\">\r\n          </div>\r\n      </div>\r\n      <div class=\"col-lg-12 no-spacing\">\r\n          <label for=\"\" class=\"label\">Company Name <span class=\"text-danger\">*</span></label>\r\n          <input name=\"CompanyName\" #CompanyName=\"ngModel\" [(ngModel)]=\"customerservice.formData.CompanyName\"\r\n              class=\"form-control\" placeholder=\"Company Name\" maxlength=\"128\"\r\n              [class.is-invalid]=\"!isValidCompanyname\">\r\n      </div>\r\n      <div class=\"col-lg-12\">\r\n          <span class=\"kt-switch kt-switch--sm kt-switch--brand\"><label><input\r\n                      name=\"customerservice.formData.UseCompanyNameAsPrimaryName\" #UseCompanyNameAsPrimaryName=\"ngModel\"\r\n                      [(ngModel)]=\"customerservice.formData.UseCompanyNameAsPrimaryName\" type=\"checkbox\"><span></span>\r\n                  <strong>\r\n                      Use company name as the primary name\r\n                  </strong></label></span>\r\n      </div>\r\n  </div>\r\n  <div class=\"form-group row\">\r\n      <div class=\"col-xl-6 no-spacing\">\r\n          <div class=\"form-group\">\r\n              <label for=\"\" class=\"label\">Email Address</label>\r\n              <input name=\"AddressStreet1\" #AddressStreet1=\"ngModel\" [(ngModel)]=\"customerservice.formData.AddressStreet1\"\r\n                  class=\"form-control\" placeholder=\"Email\">\r\n          </div>\r\n      </div>\r\n      <div class=\"col-xl-6 no-spacing\">\r\n          <div class=\"form-group\">\r\n              <label for=\"\" class=\"label\">Phone Number </label>\r\n              <input name=\"AddressStreet2\" #AddressStreet2=\"ngModel\" [(ngModel)]=\"customerservice.formData.AddressStreet2\"\r\n                  class=\"form-control\" placeholder=\"Phone Number\">\r\n          </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n      <div class=\"modal-footer create-proprty-model-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\">Back</button>\r\n          <button type=\"submit\" (click)=\"onSubmit()\" class=\"btn btn-brand\">Create</button>\r\n      </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { Login } from 'src/app/services/login.mudule';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\n\n@Component({\n  selector: 'app-invoice-change-status-popup',\n  templateUrl: './invoice-change-status-popup.component.html',\n  styleUrls: ['./invoice-change-status-popup.component.css']\n})\nexport class InvoiceChangeStatusPopupComponent implements OnInit {\n  currentUser: Login;\n  tempPaymentlist: any;\n  IsShowInvStatus: string;\n  IsShowPaymentSection: string;\n  constructor(\n    public router: Router,\n    public rout: ActivatedRoute,\n    public http: HttpClient,\n    public invoiceService: InvoiceService,\n    public toastr: ToastrService,\n    public dialogRef: MatDialogRef<InvoiceChangeStatusPopupComponent>,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n  ) { }\n\n  ngOnInit() {\n    this.invoiceService.getPaymentSummary(this.invoiceService.InvoiceData.Id);\n    this.tempPaymentlist = this.invoiceService.PaymentSummary;\n    this.IsShowPaymentSection = 'false';\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.IsShowInvStatus = 'true';\n  }\n  byInvoiceStatusChange(Id: string, Status: string) {\n    this.invoiceService.UpdateInvoiceStatus(Id, Status).subscribe( res => {\n      if (res) { const response = res as any;\n        if (response.Message === 'success') {\n          this.invoiceService.InvoiceData.Status = Status;\n          this.toastr.success('success', response.MessageDescription);\n          const des = 'Status of Invoice No : ' + this.invoiceService.InvoiceData.InvoiceId +\n            ' has been changed as :' + Status + ', of Customer : ' + this.invoiceService.InvoiceData.CustomerName +\n            ', by user : ' + this.currentUser.UserName + ', on dated : ' + new Date();\n          const Activity = 'Invoice Status changed as : ' + Status + ', against Invoice no : '\n            + this.invoiceService.InvoiceData.InvoiceId;\n          this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n            this.invoiceService.InvoiceData.Id, 'Modify', des, Activity).subscribe();\n          this.dialogRef.close();\n         }\n        if (response.Message === 'failure') {\n           this.toastr.warning('warning', response.MessageDescription);\n         }\n      }}, error =>  console.log(error));\n  }\n  CollapseInvStatus() {\n    if (this.IsShowInvStatus === 'true') {\n      this.IsShowInvStatus = 'false';\n    } else {\n      this.IsShowInvStatus = 'true';\n    }\n  }\n}\n","<style>\n.collapse-status{\n    margin: 0 0 0 59px;\n  }\n</style>\n<div class=\"modal-header select-new-properties\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Change Invoice Status</h5>\n        <button class=\"btn btn-default pull-right\" mat-dialog-close>x</button>\n      </div>\n      <div class=\"modal-body\">\n        <div>\n                <div class=\"kt-portlet__body\">\n                        <div class=\"tab-content\">\n                          <div class=\"tab-pane active\" id=\"kt_widget2_tab1_content\">\n                            <div class=\"kt-widget2\">\n                          <form autocomplete=\"off\">\n                                <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                  <div class=\"kt-widget2__checkbox\">\n                                    <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                      <input type=\"checkbox\" value=\"Draft\" [checked]=\"invoiceService.InvoiceData.Status == 'Draft'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'Draft')\">\n                                      <span></span>\n                                    </label>\n                                  </div>\n                                  <div class=\"kt-widget2__info status-Info\">\n                                    <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'Draft')\" class=\"kt-widget2__title\">\n                                      Mark as Draft\n                                    </a>\n                                  </div>\n                                </div>\n          \n                                <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                    <div class=\"kt-widget2__checkbox\">\n                                      <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                        <input type=\"checkbox\" (click)=\"CollapseInvStatus()\" readonly  \n                                        [checked]=\"invoiceService.InvoiceData.Status == 'SendOutPaid' \n                                        || invoiceService.InvoiceData.Status == 'PartiallyPaid'\n                                        || invoiceService.InvoiceData.Status == 'SendOutUnPaid'\n                                        || invoiceService.InvoiceData.Status == 'SendOutOverDue'\">\n                                        <span></span>\n                                      </label>\n                                    </div>\n                                    <div class=\"kt-widget2__info status-Info\">\n                                      <a href=\"javascript:void(0)\" (click)=\"CollapseInvStatus()\" class=\"kt-widget2__title\">\n                                        Mark as Send out\n                                      </a>\n                                    </div>\n                                  </div>\n                                  <div class=\"collapse-status\" *ngIf=\"IsShowInvStatus==='true'\">\n          \n                                    <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                      <div class=\"kt-widget2__checkbox\">\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                          <input type=\"checkbox\" value=\"SendOutUnPaid\" [checked]=\"invoiceService.InvoiceData.Status == 'SendOutPaid'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutPaid')\">\n                                          <span></span>\n                                        </label>\n                                      </div>\n                                      <div class=\"kt-widget2__info status-Info\">\n                                        <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutPaid')\" class=\"kt-widget2__title\">\n                                          Mark as Paid\n                                        </a>\n                                      </div>\n                                    </div>\n                                    <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                      <div class=\"kt-widget2__checkbox\">\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                          <input type=\"checkbox\" value=\"PartiallyPaid\" [checked]=\"invoiceService.InvoiceData.Status == 'PartiallyPaid'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'PartiallyPaid')\">\n                                          <span></span>\n                                        </label>\n                                      </div>\n                                      <div class=\"kt-widget2__info status-Info\">\n                                        <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'PartiallyPaid')\" class=\"kt-widget2__title\">\n                                          Mark as Partially Paid\n                                        </a>\n                                      </div>\n                                    </div>\n                                    <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                      <div class=\"kt-widget2__checkbox\">\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                          <input type=\"checkbox\" value=\"SendOutUnPaid\" [checked]=\"invoiceService.InvoiceData.Status == 'SendOutUnPaid'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutUnPaid')\">\n                                          <span></span>\n                                        </label>\n                                      </div>\n                                      <div class=\"kt-widget2__info status-Info\">\n                                        <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutUnPaid')\" class=\"kt-widget2__title\">\n                                          Mark as Un paid\n                                        </a>\n                                      </div>\n                                    </div>\n                                    <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                      <div class=\"kt-widget2__checkbox\">\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                          <input type=\"checkbox\" value=\"SendOutOverDue\" [checked]=\"invoiceService.InvoiceData.Status == 'SendOutOverDue'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutOverDue')\">\n                                          <span></span>\n                                        </label>\n                                      </div>\n                                      <div class=\"kt-widget2__info status-Info\">\n                                        <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'SendOutOverDue')\" class=\"kt-widget2__title\">\n                                          Mark as Over due\n                                        </a>\n                                      </div>\n                                    </div>\n          \n                                  </div>\n                                  <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                                      <div class=\"kt-widget2__checkbox\">\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                          <input type=\"checkbox\" value=\"cancelled\" [checked]=\"invoiceService.InvoiceData.Status == 'cancelled'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'cancelled')\">\n                                          <span></span>\n                                        </label>\n                                      </div>\n                                      <div class=\"kt-widget2__info status-Info\">\n                                        <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'cancelled')\" class=\"kt-widget2__title\">\n                                          Mark as Cancelled\n                                        </a>\n                                      </div>\n                                    </div>\n                            </form>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n        </div>\n      </div>\n      \n\n\n\n<!-- <div class=\"col-md-12\">\n          <div class=\"kt-portlet kt-portlet--tabs kt-portlet--height-fluid\">\n            <div class=\"kt-portlet__head\">\n              <div class=\"kt-portlet__head-label\">\n                <h3 class=\"kt-portlet__head-title\">\n                  Change Invoice Status\n                </h3>\n              </div>\n            </div>\n            <div class=\"kt-portlet__body\">\n              <div class=\"tab-content\">\n                <div class=\"tab-pane active\" id=\"kt_widget2_tab1_content\">\n                  <div class=\"kt-widget2\">\n                <form autocomplete=\"off\">\n                      <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                        <div class=\"kt-widget2__checkbox\">\n                          <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                            <input type=\"checkbox\" value=\"Draft\" [checked]=\"invoiceService.InvoiceData.Status == 'Draft'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'Draft')\">\n                            <span></span>\n                          </label>\n                        </div>\n                        <div class=\"kt-widget2__info status-Info\">\n                          <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'Draft')\" class=\"kt-widget2__title\">\n                            Make as Draft\n                          </a>\n                        </div>\n                      </div>\n\n                      <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                          <div class=\"kt-widget2__checkbox\">\n                            <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                              <input type=\"checkbox\" readonly  value=\"SendOut\" [checked]=\"invoiceService.InvoiceData.Status == 'SendOut'\">\n                              <span></span>\n                            </label>\n                          </div>\n                          <div class=\"kt-widget2__info status-Info\">\n                            <a href=\"javascript:void(0)\" (click)=\"CollapseInvStatus()\" class=\"kt-widget2__title\">\n                              Make as Send out\n                            </a>\n                          </div>\n                        </div>\n                        <div class=\"collapse-status\" *ngIf=\"IsShowInvStatus==='true'\">\n\n                          <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                            <div class=\"kt-widget2__checkbox\">\n                              <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                <input type=\"checkbox\" value=\"PAID\" [checked]=\"invoiceService.InvoiceData.SendOutStatus == 'PAID'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'PAID')\">\n                                <span></span>\n                              </label>\n                            </div>\n                            <div class=\"kt-widget2__info status-Info\">\n                              <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'PAID')\" class=\"kt-widget2__title\">\n                                Make as Paid\n                              </a>\n                            </div>\n                          </div>\n                          <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                            <div class=\"kt-widget2__checkbox\">\n                              <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                <input type=\"checkbox\" value=\"UNPAID\" [checked]=\"invoiceService.InvoiceData.SendOutStatus == 'UNPAID'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'UNPAID')\">\n                                <span></span>\n                              </label>\n                            </div>\n                            <div class=\"kt-widget2__info status-Info\">\n                              <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'UNPAID')\" class=\"kt-widget2__title\">\n                                Make as Un paid\n                              </a>\n                            </div>\n                          </div>\n                          <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                            <div class=\"kt-widget2__checkbox\">\n                              <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                <input type=\"checkbox\" value=\"OVERDUE\" [checked]=\"invoiceService.InvoiceData.SendOutStatus == 'OVERDUE'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'OVERDUE')\">\n                                <span></span>\n                              </label>\n                            </div>\n                            <div class=\"kt-widget2__info status-Info\">\n                              <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'OVERDUE')\" class=\"kt-widget2__title\">\n                                Make as Over due\n                              </a>\n                            </div>\n                          </div>\n\n                        </div>\n                        <div class=\"kt-widget2__item kt-widget2__item--primary\">\n                            <div class=\"kt-widget2__checkbox\">\n                              <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--single\">\n                                <input type=\"checkbox\" value=\"cancelled\" [checked]=\"invoiceService.InvoiceData.Status == 'cancelled'\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'cancelled')\">\n                                <span></span>\n                              </label>\n                            </div>\n                            <div class=\"kt-widget2__info status-Info\">\n                              <a href=\"javascript:void(0)\" (click)=\"byInvoiceStatusChange(invoiceService.InvoiceData.Id, 'cancelled')\" class=\"kt-widget2__title\">\n                                Make as Cancelled\n                              </a>\n                            </div>\n                          </div>\n                  </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n</div> -->\n","import { Component, OnInit } from '@angular/core';\n@Component({template: '<router-outlet></router-outlet>'})\nexport class InvoicesComponent implements OnInit  {\n  ngOnInit() {}\n}\n","import { ReminderBase } from './CommanExtendsClass.module';\nimport { Customer } from './customer.model';\nimport { Property } from './property.model';\n\nexport class Ticket {\n    Id?: string;\n    RecurringId?: number;\n    TicketUniqueID?: number;\n    TicketId?: string;\n    CustomerId?: string;\n    PropertyId?: string;\n    CustomerName?: string;\n    CustomerContactNo: string;\n    CustomerEmail?: string;\n    CustomerAddress?: string;\n    CustomerCompanyName?: string;\n    Title?: string;\n    Description?: string;\n    TicketType?: string;\n    OneOffScheduled?: boolean;\n    OneOffAppointmentDate?: string;\n    OneOffStartTime?: string;\n    OneOffEndTime?: string;\n    AppointmentStart: string;\n    AppointmentEnd: string;\n    OneOffInvoice?: boolean;\n    RecurringScheduled?: boolean;\n    RecurringStartDate?: string;\n    RecurringEndDate?: string;\n    RecurringDuration?: number;\n    RecurringVisitFrequency?: number;\n    RecurringTotalVisit?: number;\n    RecurringInvoice?: string;\n    Status?: string;\n    InternalNoteDescription?: string;\n    TermsAndConditions?: string;\n    InternalNoteQuote?: boolean;\n    InternalNoteTicket?: boolean;\n    InternalNoteInvoice?: boolean;\n    InternalNoteAllowPayment?: boolean;\n    WhenInvoiceClosed?: boolean;\n    CreatedUtcDate?: string;\n    Rescheduled?: boolean;\n    Reallocate?: boolean;\n    RequestId?: string;\n    IsRequestExists?: boolean;\n    Priority?: number;\n    OverDueDays?: number;\n    NetAmount?: number;\n    InvoiceId?: string;\n    InvoiceNo?: string;\n    QuoteId?: string;\n    TicketConvertedFrom?: string;\n    TicketConvertedID?: string;\n    Customers?: Customer;\n    Properties?: Property;\n    TicketTeams?: TicketTeam[];\n    TicketTeamList?: TicketTeam[];\n    TicketItems?: TicketItem[];\n    TicketItemList?: TicketItem[];\n    TicketAttachments?: TicketAttachment[];\n    TicketAttachmentList?: TicketAttachment[];\n    TicketWiseIssueType?: TicketWiseIssueType[];\n    TicketClosedDate?: string;\n    CreatedBy?: string;\n    SMTPId?: number;\n    DepartmentName?: string;\n    TicketReminder?: TicketReminder[];\n    Rating?: number;\n    RatingFeedback?: string;\n}\nexport class TicketTeam {\n    Id?: number;\n    TicketId?: string;\n    EngineerId?: string;\n    EngineerName?: string;\n    EngineerLogo?: string;\n    TicketAssignDate?: Date;\n    Type?: number;\n}\nexport class TicketItem {\n    Id?: number;\n    TicketId?: string;\n    ItemName?: string;\n    Type?: string;\n    ItemDescription?: string;\n    ItemQuantity?: number;\n    ItemUnitCost?: number;\n    ItemTotalCost?: number;\n    IsPriseRevised?: boolean;\n    ItemAddredBy?: boolean;\n    ItemAddredById?: string;\n    ItemAddredByName?: string;\n    ItemBatch?: string;\n    BatchQty?: string;\n    UniqId?: string;\n    InWarranty?: boolean;\n    WarrantyDays?: number;\n    InstallationDate?: Date;\n    IsMaintance?: boolean;\n    MaintanceRemarks?: string;\n}\nexport class TicketAttachment {\n    Id?: number;\n    AttachmentName?: string;\n    TicketId?: string;\n    AttachmentPath?: string;\n    AttachmentSize?: number;\n}\nexport class TicketIssueType {\n    Id?: number;\n    Name?: string;\n    IsAssigned: boolean;\n}\nexport class TicketWiseIssueType {\n    Id?: number;\n    TicketId?: string;\n    TicketIssueTypeId?: number;\n    IssueTypeName?: string;\n}\nexport class TicketTimer {\n    ID?: number;\n    EngineerID?: string;\n    TicketID?: string;\n    StartDate?: Date;\n    EndDate?: Date;\n    StartTime?: string;\n    EndTime?: string;\n    Status?: number;\n    }\nexport class TicketReminder extends ReminderBase {\n    Id?: number; \n    TicketId?: string;\n}\nexport class TicketEquipment {\n    Id: number;\n    TicketId: string;\n    Name: string;\n    Remark: string;\n    Quantity: number;\n}\nexport class TicketEquipmentMasterData {\n    Id: number;\n    Name: string;\n    IsActive: boolean;\n}\nexport class TicketRecurringHelper {\n    Id?: number;\n    Type?: number;\n    IsFor: number;\n    RecurringStartDate?: string;\n    RecurringDuration?: number;\n    RecurringVisitFrequency?: number;\n    SundayIsActive?: boolean;\n    MondayIsActive?: boolean;\n    TuesdayIsActive?: boolean;\n    WednesdayIsActive?: boolean;\n    ThursdayIsActive?: boolean;\n    FridayIsActive?: boolean;\n    SaturdayIsActive?: boolean;\n    Date1?: boolean;\n    Date2?: boolean;\n    Date3?: boolean;\n    Date4?: boolean;\n    Date5?: boolean;\n    Date6?: boolean;\n    Date7?: boolean;\n    Date8?: boolean;\n    Date9?: boolean;\n    Date10?: boolean;\n    Date11?: boolean;\n    Date12?: boolean;\n    Date13?: boolean;\n    Date14?: boolean;\n    Date15?: boolean;\n    Date16?: boolean;\n    Date17?: boolean;\n    Date18?: boolean;\n    Date19?: boolean;\n    Date20?: boolean;\n    Date21?: boolean;\n    Date22?: boolean;\n    Date23?: boolean;\n    Date24?: boolean;\n    Date25?: boolean;\n    Date26?: boolean;\n    Date27?: boolean;\n    Date28?: boolean;\n    Date29?: boolean;\n    Date30?: boolean;\n    Date31?: boolean;\n    }\n","import { Component, OnInit, AfterViewInit, OnDestroy } from '@angular/core';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { Router } from '@angular/router';\nimport { ProductService } from 'src/app/services/product.service';\nimport { FileUploader } from 'ng2-file-upload';\nimport { ToastrService } from 'ngx-toastr';\nimport { environment } from 'src/environments/environment';\nimport { InvoiceItem } from 'src/app/services/Invoice.module';\nimport { QuoteService } from 'src/app/services/quote.service';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { Login } from 'src/app/services/login.mudule';\nimport { GenicProfileService } from 'src/app/services/genicprofile.service';\nimport {MAT_MOMENT_DATE_FORMATS, MomentDateAdapter } from '@angular/material-moment-adapter';\nimport {DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE} from '@angular/material/core';\nimport { NgbDateAdapter, NgbTimeAdapter } from '@ng-bootstrap/ng-bootstrap';\nimport { NgbDateToStringAdapter } from 'src/app/ngb-date-to-string-adapter';\nimport { NgbTimeToStringAdapter } from 'src/app/ngb-time-to-string-adapter';\nimport { PropertyService } from 'src/app/services/property.service';\nimport { Product, Service } from 'src/app/services/product.module';\nimport { Tax } from 'src/app/services/quote.module';\nimport { DocumentUploadService } from 'src/app/services/DocumentUpload.service';\nimport { Title } from '@angular/platform-browser';\n\n\n@Component({\n  selector: 'app-invoice-add',\n  templateUrl: './invoice-add.component.html',\n  styleUrls: ['./invoice-add.component.css'],\n  providers: [\n    {provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE]},\n    {provide: MAT_DATE_FORMATS, useValue: MAT_MOMENT_DATE_FORMATS},\n    { provide: NgbDateAdapter, useClass: NgbDateToStringAdapter },\n    { provide: NgbTimeAdapter, useClass: NgbTimeToStringAdapter },\n  ],\n})\nexport class InvoiceAddComponent implements OnInit, AfterViewInit, OnDestroy {\n  fileToUpload: File = null;\n  InvoiceDateIsValid = true;\n  InvoiceDueDateIsValid = true;\n  currentUser: Login;\n  createbuttontext: string;\n  public uploader: FileUploader = new FileUploader({});\n  ProductItemArray = [];\n  tempArray = [];\n  ItemBtn = 'Add';\n  isQtyValid: boolean;\n  ItemIsValid = true;\n  ItemProductIsValid = true;\n  ItemQuantityIsValid = true;\n  ItemUnitCosttIsValid = true;\n  ItemUniqueIsValid = true;\n  ItemSubTotalAmount: number;\n  ItemSubTotalByArry: any;\n  ItemTotalAmount: number;\n  ActionType: string;\n  localPrependUrl: string;\n  InvoiceNosChange = false;\n  InvoiceNosChangeBtn  = 'Change';\n  newUniqueID;\n  locateInvoiceUniqueID;\n  btnloader: boolean;\n  loader: boolean = false;\n  tempAvailableStock: number;\n  tempSalePrice: number;\n  tempIndexQty = 0;\n  IshowStockSection = true;\n  tempInWarranty: boolean = false;\n  customwarrantyShow: boolean;\n  customwarrantyShowEdit: boolean;\n  isUnitCostValid: boolean;\n  public productoptions: any;\n  productdata: any;\n  data: Array<any>;\n  constructor(\n    public titleService: Title,\n    public invoiceService: InvoiceService,\n    public productservice: ProductService,\n    public quoteService: QuoteService,\n    public docservice: DocumentUploadService,\n    public router: Router,\n    public toastr: ToastrService,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n    public genicProfile: GenicProfileService,\n    public propertyService: PropertyService\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n    this.locateInvoiceUniqueID = this.invoiceService.InvoiceData.InvoiceUniqueID;\n    this.isQtyValid = true;\n    this.isUnitCostValid = true;\n    this.productdata = [];\n  }\n\n  ngOnInit() {\n    this.btnloader = false;\n    this.newUniqueID = 0;\n    this.genicProfile.getGenicProfile(this.currentUser.Token);\n    this.quoteService.getTaxList(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                this.quoteService.TextList = response.result as Tax[]\n              }}, error =>  console.log(error));\n    if (this.invoiceService.InvoiceData.InvoiceId === '' || this.invoiceService.InvoiceData.InvoiceId === undefined) {\n      this.router.navigate(['/invoices/']);\n    }\n    if (this.router.url === '/invoices/invoice-add') {\n      if (!this.currentUser.Permissions.InvoiceCreate) { this.router.navigate(['/dashboard']); }\n      this.titleService.setTitle('Invoice Create | Genic Solution');\n      this.createbuttontext = 'Create';\n      this.invoiceService.InvoiceData.InvoiceDate = this.genicProfile.TODAY_DATE_IN_STRING;\n      this.invoiceService.InvoiceData.InvoiceDueDate = this.genicProfile.NEXT_MONTH_DATE_IN_STRING;\n    } else if (this.router.url === '/invoices/invoice-add-plane-url') {\n      if (!this.currentUser.Permissions.InvoiceCreate) { this.router.navigate(['/dashboard']); }\n      this.createbuttontext = 'Create';\n      this.invoiceService.InvoiceData.InvoiceDate = this.genicProfile.TODAY_DATE_IN_STRING;\n      this.invoiceService.InvoiceData.InvoiceDueDate = this.genicProfile.NEXT_MONTH_DATE_IN_STRING;\n    } else if (this.router.url === '/invoices/invoice-edit') {\n      if (!this.currentUser.Permissions.InvoiceEdit) { this.router.navigate(['/dashboard']); }\n      this.createbuttontext = 'Update';\n      this.titleService.setTitle('Invoice Edit | Genic Solution');\n    } else if (this.router.url === '/invoices/invoice-from-quote') {\n      if (!this.currentUser.Permissions.InvoiceCreate) { this.router.navigate(['/dashboard']); }\n      this.createbuttontext = 'Create';\n      this.invoiceService.InvoiceData.InvoiceDate = this.genicProfile.TODAY_DATE_IN_STRING;\n      this.invoiceService.InvoiceData.InvoiceDueDate = this.genicProfile.NEXT_MONTH_DATE_IN_STRING;\n      setTimeout(() => { this.setlocalcount(); }, 1000);\n    } else {\n      if (!this.currentUser.Permissions.InvoiceCreate) { this.router.navigate(['/dashboard']); }\n      this.createbuttontext = 'Create';\n      this.invoiceService.InvoiceData.InvoiceDate = this.genicProfile.TODAY_DATE_IN_STRING;\n      this.invoiceService.InvoiceData.InvoiceDueDate = this.genicProfile.NEXT_MONTH_DATE_IN_STRING;\n      setTimeout(() => { this.setlocalcount(); }, 1000);\n    }\n    this.productservice.refrestServicesList(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                this.productservice.serviceformList = response.result as Service[];\n              }}, error =>  console.log(error));\n    this.productservice.refrestProductsList(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                this.productservice.Productlist = response.result as Product[];\n                console.log(this.productservice.Productlist);\n      }}, error =>  console.log(error));\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.getInvoiceItems();\n    }, 1000);\n    setTimeout(() => {\n      this.InitialazeProductDropdown();\n    }, 3000);\n  }\n\n  InitialazeProductDropdown(): void {\n    let tempurl = '';\n    if (this.invoiceService.InvoiceItemData.Type === 'Product'){\n      tempurl = '/api/products/GetProductsForSelect2Dropdown/';\n    }\n    if (this.invoiceService.InvoiceItemData.Type === 'Service'){\n      tempurl = '/api/products/GetServicesForSelect2Dropdown/';\n    }\n    let prod = this.invoiceService.InvoiceItemData.Type;\n      if(this.invoiceService.InvoiceItemData.Type === 'Product') { prod = this.currentUser.Product; }\n    this.productdata = {\n      multiple: false,\n      placeholder: 'Select ' + prod,\n      minimumInputLength: 1,\n      ajax: {\n        url:  environment.apiUrl + tempurl + this.currentUser.Token,\n        dataType: 'json',\n        delay: 250,\n        data: function (params) {\n          return {\n            q: params.term,\n            page: params.page\n          };\n        },\n        processResults: function (data, params) {\n          params.page = params.page || 1;\n          return {\n            results: data.items,\n            pagination: {\n              more: (params.page * 30) < data.total_count\n            }\n          };\n        },\n        cache: true\n      },\n      escapeMarkup: function (markup) { return markup; },\n      templateResult: this.templateResult,\n      templateSelection: this.templateSelection\n    };\n  }\n  // function for result template\n  public templateResult(repo) {\n    if (repo.loading) { return repo.text; }\n    return '<div class=\"select2-result-repository clearfix\"><div class=\"select2-result-repository__meta\">' +\n    '<div class=\"select2-result-repository__title\"><strong>' + repo.full_name + '</strong></div>' +\n    '<div class=\"select2-result-repository__description\">' + repo.description + '</div></div></div>';\n  }\n  templateSelection(repo) {\n    return repo.full_name || repo.text;\n  }\n  picked(event) {\n    this.loader = true;\n    let t = this.currentUser.Token;\n    let type = 'invoiceattachment';\n    let moduleid = this.invoiceService.InvoiceData.Id;\n    let remark = '';\n    let Files = event.target.files;\n    let file = Files.item(0);\n    this.docservice.uploadDocument(t , type, moduleid, '', remark, file).subscribe( res => {\n      if (res) { const response = res as any;\n        console.log(response);\n                 if (response.Message === 'success') {\n                  this.toastr.info('upload successfully');\n                  this.getInvoiceAttachments();\n                  this.loader = false;\n                  }\n                  if (response.Message === 'failure') {\n                    this.toastr.warning(response.MessageDescription);\n                    this.loader = false;\n                  }\n    }}, error =>  console.log(error));\n    this.loader = false;\n  }\n\n  // remove invice attachment\n  RemoveInvoiceAttachement(QuoteAttamentId: number, Attachment: string) {\n    if (confirm('Are you sure to delete this attachment?')) {\n      this.invoiceService.deleteInvoiceAttachment(QuoteAttamentId).then(\n        res => {\n          if (res.status === 204) {\n            this.getInvoiceAttachments();\n            const des = 'An attachment : ' + Attachment + ', has been Removed from the Invoice No : ' +\n            this.invoiceService.InvoiceData.InvoiceId + ' of Customer : ' + this.invoiceService.InvoiceData.CustomerName +\n            ' by user : ' + this.currentUser.UserName;\n            const Activity1 =  'An attachment ' + Attachment + ' has been removed from the Invoice No : '\n            + this.invoiceService.InvoiceData.InvoiceId ;\n            this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n            this.invoiceService.InvoiceData.Id, 'Removed', des, Activity1 ).subscribe();\n            this.toastr.info('info', 'Deleted successfully');\n          } else if (res.status === 404) {\n            this.toastr.warning('Warning', 'Record Not Found');\n          } else {\n            this.toastr.error('Error', res.statusText);\n          }\n        },\n        err => {\n          this.toastr.error('Error', err.statusText);\n          console.log(err.error);\n        });\n    }\n  }\n  getInvoiceItems() {\n    this.invoiceService.getInvoiceItems(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.invoiceService.InvoiceItemList = [];\n                  this.invoiceService.InvoiceItemList = response.result;\n                  this.setlocalcount();\n                  }\n    }}, error =>  console.log(error));\n  }\n  getInvoiceAttachments() {\n    this.invoiceService.getInvoiceAttachments(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.invoiceService.InvoiceAttachmentList = response.result;\n                  }\n    }}, error =>  console.log(error));\n  }\n  setlocalcount() {\n    this.ItemSubTotalByArry = [];\n    this.ItemSubTotalByArry = this.invoiceService.InvoiceItemList.map(element => element.Total);\n    if (this.ItemSubTotalByArry.length < 0) {\n      this.invoiceService.InvoiceData.SubTotal = 0;\n      this.invoiceService.InvoiceData.NetAmount = 0;\n      this.invoiceService.InvoiceData.TaxAmount = 0;\n      this.invoiceService.InvoiceData.TaxRate = 0;\n      this.invoiceService.InvoiceData.DiscountAmount = 0;\n      this.invoiceService.InvoiceData.DiscountTextValue = 0;\n    } else {\n      this.invoiceService.InvoiceData.SubTotal = this.ItemSubTotalByArry.reduce((a, b) => a + b, 0);\n\n      let EditSubTotalValue = Number(this.ItemSubTotalByArry.reduce((a, b) => a + b, 0));\n      let EditTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n      let EditTaxAmt = Number(EditSubTotalValue * EditTaxRate) / 100;\n      this.invoiceService.InvoiceData.TaxAmount = EditTaxAmt;\n      this.invoiceService.InvoiceData.SubTotal = EditSubTotalValue;\n\n      if (Number(this.invoiceService.InvoiceData.DiscountType) === 0) {\n        const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n        if (Number(EditSubTotalValue) < EditDisTextValue) {\n          this.invoiceService.InvoiceData.DiscountAmount = 0;\n        } else {\n          this.invoiceService.InvoiceData.DiscountAmount = Number(EditDisTextValue);\n          this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - EditDisTextValue);\n        }\n      } else if (Number(this.invoiceService.InvoiceData.DiscountType) === 1) {\n        const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n        const z = Number(EditSubTotalValue * EditDisTextValue / 100);\n        if (Number(EditSubTotalValue) < z) {\n          this.invoiceService.InvoiceData.DiscountAmount = 0;\n        } else {\n          this.invoiceService.InvoiceData.DiscountAmount = Number(z);\n          this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - z);\n        }\n      }\n    }\n  }\n  RemoveInvoiceItem(id: number, ItemName: string, Qty: number, UnitCost: number) {\n    this.invoiceService.deleteInvoiceItems(id).then(\n      res => {\n        switch (res.status) {\n          case 204:\n            this.toastr.info('success', 'Item removed from invoice');\n            this.getInvoiceItems();\n\n            const des = 'An Item : ' + ItemName + ', Qty : ' + Qty +\n            ', Amount of $: ' + (Qty * UnitCost) + ', has been Removed from the Invoice No: ' +\n            this.invoiceService.InvoiceData.InvoiceId + ' of Customer : '\n            + this.invoiceService.InvoiceData.CustomerName + ', by user : ' + this.currentUser.UserName;\n            const Activity2 =  'An item : ' + ItemName + ' Amount of :$ ' + Qty * UnitCost + 'has been removed from the Invoice No : '\n            + this.invoiceService.InvoiceData.InvoiceId ;\n            this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n            this.invoiceService.InvoiceData.Id, 'Removed', des, Activity2 ).subscribe();\n\n            // calculate invoice total value start\n            setTimeout(() => {\n              this.ItemSubTotalByArry = [];\n              this.ItemSubTotalByArry = this.invoiceService.InvoiceItemList.map(element => element.Total);\n              this.invoiceService.InvoiceData.SubTotal = this.ItemSubTotalByArry.reduce((a, b) => a + b, 0);\n\n              const EditSubTotalValue = Number(this.ItemSubTotalByArry.reduce((a, b) => a + b, 0));\n              const EditTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n              const EditTaxAmt = Number(EditSubTotalValue * EditTaxRate) / 100 ;\n              this.invoiceService.InvoiceData.TaxAmount = EditTaxAmt;\n              this.invoiceService.InvoiceData.SubTotal = EditSubTotalValue;\n\n              if (Number(this.invoiceService.InvoiceData.DiscountType) === 0) {\n                const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n                if (Number(EditSubTotalValue) < EditDisTextValue) {\n                  this.invoiceService.InvoiceData.DiscountAmount = 0;\n                } else {\n                  this.invoiceService.InvoiceData.DiscountAmount = Number(EditDisTextValue);\n                  this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - EditDisTextValue);\n                }\n              } else if (Number(this.invoiceService.InvoiceData.DiscountType) === 1) {\n                const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n                const z = Number(EditSubTotalValue * EditDisTextValue / 100);\n                if (Number(EditSubTotalValue) < z) {\n                  this.invoiceService.InvoiceData.DiscountAmount = 0;\n                } else {\n                  this.invoiceService.InvoiceData.DiscountAmount = Number(z);\n                  this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - z);\n                }\n              }\n            }, 1000);\n            // calculate invoice total value end\n\n            break;\n          case 404: break;\n          default: this.toastr.error('error', res.statusText); break;\n        }\n      }, err => { console.log(err); });\n  }\n  public CalculateInvoiceProductCost() {\n    const tempqty: any = Number(this.invoiceService.InvoiceItemData.Qty);\n    const temcost: any = Number(this.invoiceService.InvoiceItemData.UnitCost).toFixed(2);\n    const total: any = Number(tempqty * temcost);\n    this.invoiceService.InvoiceItemData.Total = total.toFixed(2).toString();\n  }\n\n  // Id,InvoiceId,ItemName,Qty,UnitCost,Total,ItemDescription\n  public addProductToInvoice(Id: number, InvoiceId: string,\n                             ItemName: string, Qty: number, UnitCost: number, Total: number, ItemDescription: string) {\n    this.ItemIsValid = true;\n    if (this.invoiceService.InvoiceData.Id === undefined || this.invoiceService.InvoiceData.Id === '00000000-0000-0000-0000-000000000000') {\n      this.router.navigate(['/invoices/invoice-add']);\n      return false;\n    }\n    if (ItemName === undefined || ItemName === 'select') {\n      this.toastr.warning('Warning', 'Please select a product');\n      this.ItemProductIsValid = false;\n      this.ItemIsValid = false;\n      return false;\n    }\n    if (Qty === undefined || Qty === 0) {\n      this.toastr.warning('Warning', 'Please enter quantity');\n      this.ItemQuantityIsValid = false;\n      this.ItemIsValid = false;\n      return false;\n    }\n    if (UnitCost === undefined || UnitCost === 0) {\n      this.toastr.warning('Warning', 'Please enter unit cost');\n      this.ItemUnitCosttIsValid = false;\n      this.ItemIsValid = false;\n      return false;\n    }\n    if (this.currentUser.Permissions.ProductWarranty) {\n      if (this.invoiceService.InvoiceItemData.InWarranty) {\n        if (this.invoiceService.InvoiceItemData.UniqId === '' || this.invoiceService.InvoiceItemData.UniqId.length === 0) {\n          this.toastr.warning('Warning', 'Please enter a unique id');\n          this.ItemUniqueIsValid = false;\n          this.ItemIsValid = false;\n          return false;\n        }\n      }\n    }\n    this.invoiceService.InvoiceItemData.Id = Id;\n    this.invoiceService.InvoiceItemData.InvoiceId = InvoiceId;\n    this.invoiceService.InvoiceItemData.ItemName = ItemName;\n    this.invoiceService.InvoiceItemData.Qty = Number(Qty);\n    this.invoiceService.InvoiceItemData.UnitCost = Number(UnitCost);\n    this.invoiceService.InvoiceItemData.Total = Number(Total);\n    this.invoiceService.InvoiceItemData.ItemDescription = ItemDescription;\n    this.invoiceService.InvoiceItemData.WarrantyDays = Number(this.invoiceService.InvoiceItemData.WarrantyDays);\n\n    const des = 'A Product : ' + this.invoiceService.InvoiceItemData.ItemName + ', has been Added to the Invoice No : ' +\n    this.invoiceService.InvoiceData.InvoiceId + ' of Customer ' + this.invoiceService.InvoiceData.CustomerName + ' and Qty ' +\n    this.invoiceService.InvoiceItemData.Qty + ' Amount of : $ '\n    + this.invoiceService.InvoiceItemData.Total + ' by user ' + this.currentUser.UserName ;\n    const Activity3 =  'An item : ' + ItemName + ' Amount of :$ ' + Qty * UnitCost + ' is added to the Invoice No : '\n    + this.invoiceService.InvoiceData.InvoiceId ;\n    this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n    this.invoiceService.InvoiceData.Id, 'Added', des, Activity3 ).subscribe();\n\n\n    if (Id === 0) {\n      this.invoiceService.postInvoiceItemDetails(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.getInvoiceItems();\n                    }\n      }}, error =>  console.log(error));\n    } else {\n      this.invoiceService.putInvoiceItemDetails().subscribe(\n        res => {\n          switch (res.status) {\n            case 202:\n              this.getInvoiceItems();\n\n\n            setTimeout(() => {\n              this.ItemSubTotalByArry = [];\n              this.ItemSubTotalByArry = this.invoiceService.InvoiceItemList.map(element => element.Total);\n              this.invoiceService.InvoiceData.SubTotal = this.ItemSubTotalByArry.reduce((a, b) => a + b, 0);\n\n              const EditSubTotalValue = Number(this.ItemSubTotalByArry.reduce((a, b) => a + b, 0));\n              const EditTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n              const EditTaxAmt = Number(EditSubTotalValue * EditTaxRate) / 100 ;\n              this.invoiceService.InvoiceData.TaxAmount = EditTaxAmt;\n              this.invoiceService.InvoiceData.SubTotal = EditSubTotalValue;\n\n              if (Number(this.invoiceService.InvoiceData.DiscountType) === 0) {\n                const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n                if (Number(EditSubTotalValue) < EditDisTextValue) {\n                  this.invoiceService.InvoiceData.DiscountAmount = 0;\n                } else {\n                  this.invoiceService.InvoiceData.DiscountAmount = Number(EditDisTextValue);\n                  this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - EditDisTextValue);\n                }\n              } else if (Number(this.invoiceService.InvoiceData.DiscountType) === 1) {\n                const EditDisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n                const z = Number(EditSubTotalValue * EditDisTextValue / 100);\n                if (Number(EditSubTotalValue) < z) {\n                  this.invoiceService.InvoiceData.DiscountAmount = 0;\n                } else {\n                  this.invoiceService.InvoiceData.DiscountAmount = Number(z);\n                  this.invoiceService.InvoiceData.NetAmount = Number(EditSubTotalValue + EditTaxAmt - z);\n                }\n              }\n            }, 200);\n\n            const descc = 'A Product : ' + this.invoiceService.InvoiceItemData.ItemName + ', has been Modify to the Invoice No : ' +\n            this.invoiceService.InvoiceData.InvoiceId + ' of Customer ' + this.invoiceService.InvoiceData.CustomerName + ' and Qty ' +\n            this.invoiceService.InvoiceItemData.Qty + ' Amount of : $ '\n            + this.invoiceService.InvoiceItemData.Total + ' by user ' + this.currentUser.UserName ;\n            const Activity4 =  'An item : ' + this.invoiceService.InvoiceItemData.ItemName + ' Amount of :$ '\n             + this.invoiceService.InvoiceItemData.Total + ' is updated against Invoice No : ' +\n            + this.invoiceService.InvoiceData.InvoiceId ;\n            this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n            this.invoiceService.InvoiceData.Id, 'Modify', descc, Activity4 ).subscribe();\n\n            break;\n            case 208: this.toastr.warning('Unique id already exist. use an other'); break;\n            case 404: break;\n            default: this.toastr.error('error', res.statusText); break;\n          }\n        }, err => { console.log(err); });\n      this.ItemBtn = 'Add';\n    }\n    this.ItemUnitCosttIsValid = true;\n    this.invoiceService.InvoiceItemData.Id = 0;\n    this.invoiceService.InvoiceItemData.InvoiceId = '00000000-0000-0000-0000-000000000000';\n    this.invoiceService.InvoiceItemData.ItemName = '';\n    this.invoiceService.InvoiceItemData.Qty = null;\n    this.invoiceService.InvoiceItemData.UnitCost = null;\n    this.invoiceService.InvoiceItemData.Total = null;\n    this.invoiceService.InvoiceItemData.ItemDescription = '';\n    this.invoiceService.InvoiceItemData.UniqId = '';\n    this.invoiceService.InvoiceItemData.InWarranty = false;\n    this.invoiceService.InvoiceItemData.WarrantyDays = 365;\n\n    if (this.quoteService.QuoteItemData.Type === 'Product') {\n      this.quoteService.QuoteItemData.Type = 'Service';\n      this.InitialazeProductDropdown();\n      setTimeout(() => { this.quoteService.QuoteItemData.Type = 'Product'; this.InitialazeProductDropdown(); }, 200);\n    } else {\n      this.quoteService.QuoteItemData.Type = 'Product';\n      this.InitialazeProductDropdown();\n      setTimeout(() => { this.quoteService.QuoteItemData.Type = 'Service'; this.InitialazeProductDropdown(); }, 200);\n    }\n\n    setTimeout(() => {\n      this.invoiceService.InvoiceData.NetAmount = 0;\n      this.invoiceService.InvoiceItemList.forEach(element => {\n      this.invoiceService.InvoiceData.NetAmount += element.Total;\n    });\n    }, 1000);\n  }\n  PupulateInvoiceProductList(x: InvoiceItem) {\n    this.invoiceService.InvoiceItemData = Object.assign({}, x);\n    if (x.InWarranty) { this.tempInWarranty = true; } else { this.tempInWarranty = false; }\n    this.ItemBtn = 'Update';\n    setTimeout(() => {\n      this.invoiceService.InvoiceItemData.Qty = x.Qty;\n    }, 800);\n  }\n  OnInvoiceItemTypeChange() {\n    this.ItemQuantityIsValid = true;\n    this.ItemUnitCosttIsValid = true;\n    if (this.currentUser.Permissions.ProductWarranty) {\n      if (this.invoiceService.InvoiceItemData.InWarranty) {\n        this.ItemUniqueIsValid = true;\n      }\n    }\n    if (this.invoiceService.InvoiceItemData.Type === 'Service') {\n      this.invoiceService.InvoiceItemData.Qty = 1;\n      this.invoiceService.InvoiceItemData.UnitCost = null;\n      this.invoiceService.InvoiceItemData.Total = null;\n      this.invoiceService.InvoiceItemData.InWarranty = false;\n      this.invoiceService.InvoiceItemData.UniqId = null;\n      this.invoiceService.InvoiceItemData.WarrantyDays = 365;\n    }\n    if (this.invoiceService.InvoiceItemData.Type === 'Product') {\n      this.invoiceService.InvoiceItemData.Qty = null;\n      this.invoiceService.InvoiceItemData.UnitCost = null;\n      this.invoiceService.InvoiceItemData.Total = null;\n      this.invoiceService.InvoiceItemData.InWarranty = false;\n      this.invoiceService.InvoiceItemData.UniqId = null;\n      this.invoiceService.InvoiceItemData.WarrantyDays = 365;\n    }\n    this.InitialazeProductDropdown();\n    this.invoiceService.InvoiceItemData.ItemDescription = null;\n  }\n  // change deposite value\n  changeInvoiceDepositeValue() {\n    if (Number(this.invoiceService.InvoiceData.ReqDepositeType) === 0) {\n      //const v = this.invoiceService.InvoiceData.NetAmount;\n      const x = Number(this.invoiceService.InvoiceData.ReqDepositeTextValue);\n      if (Number(this.invoiceService.InvoiceData.NetAmount) < x) {\n        this.invoiceService.InvoiceData.ReqDepositeAmount = Number(0);\n        this.toastr.info('Deposit amount is always less than from total amount.');\n      } else {\n        this.invoiceService.InvoiceData.ReqDepositeAmount = Number(x);\n      }\n    } else if (Number(this.invoiceService.InvoiceData.ReqDepositeType) === 1) {\n      const v = Number(this.invoiceService.InvoiceData.NetAmount);\n      const x = Number(this.invoiceService.InvoiceData.ReqDepositeTextValue);\n      const z = v * x / 100;\n      if (Number(this.invoiceService.InvoiceData.NetAmount) < z) {\n        this.invoiceService.InvoiceData.ReqDepositeAmount = Number(0);\n        this.toastr.info('Deposit amount is always less than from total amount.');\n      } else {\n        this.invoiceService.InvoiceData.ReqDepositeAmount = Number(z);\n      }\n    }\n  }\n  changeDiscountValue() {\n    if(this.invoiceService.InvoiceData.DiscountType == null || this.invoiceService.InvoiceData.DiscountType == undefined){\n      this.invoiceService.InvoiceData.DiscountType = 0\n    }\n    if (Number(this.invoiceService.InvoiceData.DiscountType) === 0) {\n      let SubTotalValue = Number(this.invoiceService.InvoiceData.SubTotal);\n      const DisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n      if (Number(SubTotalValue) < DisTextValue) {\n        this.invoiceService.InvoiceData.DiscountAmount = 0;\n        let TempTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n        let tempTaxAmt = Number(SubTotalValue) * TempTaxRate / 100;\n        this.invoiceService.InvoiceData.TaxAmount = tempTaxAmt;\n        this.invoiceService.InvoiceData.NetAmount = Number(SubTotalValue + tempTaxAmt);\n      } else {\n        this.invoiceService.InvoiceData.DiscountAmount = Number(DisTextValue);\n        let TempTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n        let tempTaxAmt = (Number(SubTotalValue) - Number(DisTextValue)) * TempTaxRate / 100;\n        this.invoiceService.InvoiceData.TaxAmount = tempTaxAmt;\n        let z = SubTotalValue - DisTextValue + tempTaxAmt;\n        this.invoiceService.InvoiceData.NetAmount = Number(z);\n      }\n    } else if (Number(this.invoiceService.InvoiceData.DiscountType) === 1) {\n      let SubTotalValue = Number(this.invoiceService.InvoiceData.SubTotal);\n      let DisTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n      const tempDiscAmount = Number(SubTotalValue * DisTextValue / 100);\n      if (Number(SubTotalValue) < tempDiscAmount) {\n        this.invoiceService.InvoiceData.DiscountAmount = 0;\n        let TempTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n        let tempTaxAmt = Number(SubTotalValue) * Number(TempTaxRate) / 100;\n        this.invoiceService.InvoiceData.TaxAmount = Number(tempTaxAmt);\n        this.invoiceService.InvoiceData.NetAmount = Number(SubTotalValue + tempTaxAmt);\n      } else {\n        this.invoiceService.InvoiceData.DiscountAmount = Number(tempDiscAmount);\n        let TempTaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n        let tempTaxAmt = (Number(SubTotalValue) - Number(tempDiscAmount)) * TempTaxRate / 100;\n        this.invoiceService.InvoiceData.TaxAmount = tempTaxAmt;\n        let zz = SubTotalValue - tempDiscAmount + tempTaxAmt;\n        this.invoiceService.InvoiceData.NetAmount = Number(zz);\n      }\n    }\n  }\n  // calculate tax\n  CalculateInvoiceTax() {\n    let SubTotalValue = Number(this.invoiceService.InvoiceData.SubTotal);\n    let DisctAmt = Number(this.invoiceService.InvoiceData.DiscountAmount);\n    let TaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n    let z = SubTotalValue - DisctAmt;\n    let TaxAmt = Number(z * TaxRate) / 100;\n    this.invoiceService.InvoiceData.TaxAmount = TaxAmt;\n    this.invoiceService.InvoiceData.NetAmount = z + TaxAmt;\n  }\n  // post invoice\n  putInvoice() {\n    if (this.invoiceService.InvoiceData.InvoiceDate === undefined || this.invoiceService.InvoiceData.InvoiceDate === null) {\n      this.toastr.warning('Warning', 'Please select Invoice date');\n      this.InvoiceDateIsValid = false;\n      return this.InvoiceDateIsValid;\n    }\n    if (this.invoiceService.InvoiceData.InvoiceDueDate === undefined || this.invoiceService.InvoiceData.InvoiceDueDate === null) {\n      this.toastr.warning('Warning', 'Please select Invoice due date');\n      this.InvoiceDueDateIsValid = false;\n      return this.InvoiceDueDateIsValid;\n    }\n    if (this.invoiceService.InvoiceData.InvoiceTitle === null || this.invoiceService.InvoiceData.InvoiceTitle === '' || this.invoiceService.InvoiceData.InvoiceTitle === undefined) {\n      this.toastr.warning('warning', 'Add Invoice title.');\n    } else if (this.invoiceService.InvoiceItemList.length === 0 || this.invoiceService.InvoiceItemList === [] || this.invoiceService.InvoiceItemList === undefined) {\n      this.toastr.warning('warning', 'Add product to the Invoice.');\n    } else {\n    this.btnloader = true;\n    this.createbuttontext = 'Loading...';\n    this.invoiceService.InvoiceData.DiscountType = Number(this.invoiceService.InvoiceData.DiscountType);\n    this.invoiceService.InvoiceData.DiscountAmount = Number(this.invoiceService.InvoiceData.DiscountAmount);\n    this.invoiceService.InvoiceData.DiscountTextValue = Number(this.invoiceService.InvoiceData.DiscountTextValue);\n    this.invoiceService.InvoiceData.SubTotal = Number(this.invoiceService.InvoiceData.SubTotal);\n    this.invoiceService.InvoiceData.TaxRate = Number(this.invoiceService.InvoiceData.TaxRate);\n    this.invoiceService.InvoiceData.TaxAmount = Number(this.invoiceService.InvoiceData.TaxAmount);\n    this.invoiceService.InvoiceData.ReqDepositeType = Number(this.invoiceService.InvoiceData.ReqDepositeType);\n    this.invoiceService.InvoiceData.ReqDepositeTextValue = Number(this.invoiceService.InvoiceData.ReqDepositeTextValue);\n    this.invoiceService.InvoiceData.ReqDepositeAmount = Number(this.invoiceService.InvoiceData.ReqDepositeAmount);\n    this.invoiceService.InvoiceData.NetAmount = Number(this.invoiceService.InvoiceData.NetAmount);\n    this.invoiceService.putInvoice(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.toastr.success('success', response.MessageDescription);\n                    if(response.type === 'insert') {\n                      const des1 = 'Invoice No : ' + this.invoiceService.InvoiceData.InvoiceId +\n                      ' is Added :  by user : ' + this.currentUser.UserName + ' for Customer : ' +\n                      this.invoiceService.InvoiceData.CustomerName + 'invoice title : ' +\n                      ', Client Description : ' + this.invoiceService.InvoiceData.ClientRemark + ',Internal note : ' +\n                      this.invoiceService.InvoiceData.InternalNotes +\n                      this.invoiceService.InvoiceData.InvoiceTitle + ', Amount of : $ ' + this.invoiceService.InvoiceData.NetAmount + '0.00' +\n                      ', Discount : $ ' + this.invoiceService.InvoiceData.DiscountAmount + ', Tax : $ ' + this.invoiceService.InvoiceData.TaxAmount +\n                      ', and required to deposite amount : $' + this.invoiceService.InvoiceData.ReqDepositeAmount +\n                      ', on dated : ' + new Date(Date.parse(Date()));\n                      const Activity5 =  'New invoice No : ' + this.invoiceService.InvoiceData.InvoiceId + ' , Amount :$ '\n                      + this.invoiceService.InvoiceData.NetAmount + '0.00' + ' is created';\n                      this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n                      this.invoiceService.InvoiceData.Id, 'Added', des1, Activity5 ).subscribe();\n                      this.btnloader = false;\n                      this.router.navigate(['/invoices/']);\n                    }\n                    if(response.type === 'update') {\n                      const des = 'Invoice No : ' + this.invoiceService.InvoiceData.InvoiceId +\n                      ' is modified :  by user : ' + this.currentUser.UserName + ' for Customer : ' +\n                      this.invoiceService.InvoiceData.CustomerName + 'invoice title : ' +\n                      ', Client Description : ' + this.invoiceService.InvoiceData.ClientRemark + ',Internal note : ' +\n                      this.invoiceService.InvoiceData.InternalNotes +\n                      this.invoiceService.InvoiceData.InvoiceTitle + ', Amount of : $ ' + this.invoiceService.InvoiceData.NetAmount + '0.00' +\n                      ', Discount : $ ' + this.invoiceService.InvoiceData.DiscountAmount + ', Tax : $ ' + this.invoiceService.InvoiceData.TaxAmount +\n                      ', and required to deposite amount : $' + this.invoiceService.InvoiceData.ReqDepositeAmount +\n                      ', on dated : ' + new Date(Date.parse(Date()));\n                      const Activity6 =  'Invoice No : ' + this.invoiceService.InvoiceData.InvoiceId + ' , Amount :$ '\n                      + this.invoiceService.InvoiceData.NetAmount + '0.00' + ' is updated';\n                      this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n                      this.invoiceService.InvoiceData.Id, 'Modify', des, Activity6 );\n                      this.btnloader = false;\n                      this.router.navigate(['/invoices/']);\n                    }\n                  }\n                  if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n}\n  CleareProductToInvoice() {\n    this.invoiceService.InvoiceItemData.ItemName = null;\n    this.invoiceService.InvoiceItemData.Qty = null;\n    this.invoiceService.InvoiceItemData.ItemDescription = null;\n    this.invoiceService.InvoiceItemData.UnitCost = null;\n    this.invoiceService.InvoiceItemData.Total = null;\n    this.invoiceService.InvoiceItemData.UniqId = '';\n    this.invoiceService.InvoiceItemData.InWarranty = false;\n    this.invoiceService.InvoiceItemData.WarrantyDays = 0;\n  }\n  ngOnDestroy() {\n    this.invoiceService.SetAsDefaultValue();\n  }\n  onInvoiceNosChange() {\n    if (this.InvoiceNosChange) {\n      this.InvoiceNosChange = false;\n      this.InvoiceNosChangeBtn = 'Change';\n      if (this.locateInvoiceUniqueID === this.quoteService.QuoteData.QuoteUniqueID) {\n      } else {\n        this.ValidateInvoiceNo();\n      }\n    } else {\n      this.InvoiceNosChange = true;\n      this.InvoiceNosChangeBtn = 'Save';\n    }\n  }\n  ValidateInvoiceNo() {\n    this.invoiceService.ValidateInvoiceNo(this.invoiceService.InvoiceData.InvoiceUniqueID).subscribe(\n      res => {\n        switch (res.status) {\n          case 201:\n          this.newUniqueID = res.body;\n          this.invoiceService.InvoiceData.InvoiceId = this.genicProfile.formData.InvoicePrefix + this.newUniqueID;\n          this.toastr.success('success', 'Invoice number available.');\n          break;\n          case 202:\n          this.toastr.warning('warning', 'Invoice number already taken, choose another.');\n          break;\n          default: this.toastr.error('error', res.statusText); break;\n        }\n      }, err => { console.log(err); });\n  }\n  numberOnly(event): boolean {\n    if (Number(event.target.value) === 0) {\n      event.target.value = null;\n    }\n    const charCode = (event.which) ? event.which : event.keyCode;\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\n      return false;\n    }\n    return true;\n  }\n  numberwithDecimalOnly(event): boolean {\n    if (event.target.value === 0 || event.target.value === '') {\n      this.isUnitCostValid = false;\n    } else {\n      this.isUnitCostValid = true;\n    }\n    if (Number(event.target.value) === 0) {\n      event.target.value = null;\n    }\n    const charCode = (event.which) ? event.which : event.keyCode;\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\n      if (charCode === 46) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  WhenSelectProductChange(event) {\n    if (this.invoiceService.InvoiceItemData.Type === 'Product') {\n      const titem = this.productservice.Productlist.filter(x => x.Id === event.id);\n      const warrantyvalue = titem[0].InWarranty;\n      this.ItemQuantityIsValid = true;\n      this.ItemUnitCosttIsValid = true;\n      if (titem.length === 0) {\n        this.invoiceService.InvoiceItemData.Qty = 0;\n        this.invoiceService.InvoiceItemData.Total = 0;\n        this.invoiceService.InvoiceItemData.UnitCost = 0;\n        this.invoiceService.InvoiceItemData.ItemDescription = '';\n        this.invoiceService.InvoiceItemData.WarrantyDays = 0;\n        this.IshowStockSection = false;\n        this.tempInWarranty = false;\n      } else {\n        this.tempAvailableStock = Number(titem[0].Quantity);\n        this.tempSalePrice = Number(titem[0].SalePrice);\n        this.invoiceService.InvoiceItemData.WarrantyDays = Number(titem[0].WarrantyDays);\n        this.IshowStockSection = true;\n        this.invoiceService.InvoiceItemData.Qty = 1;\n        this.invoiceService.InvoiceItemData.ItemName = titem[0].ProductName;\n        this.invoiceService.InvoiceItemData.UnitCost = Number(titem[0].SalePrice);\n        this.invoiceService.InvoiceItemData.Total = this.tempSalePrice * this.invoiceService.InvoiceItemData.Qty;\n        this.invoiceService.InvoiceItemData.ItemDescription = titem[0].Description;\n        this.ItemQuantityIsValid = true;\n        this.ItemUnitCosttIsValid = true;\n      }\n      if (warrantyvalue === true) {this.tempInWarranty = true; } else {this.tempInWarranty = false; }\n    }\n    if (this.invoiceService.InvoiceItemData.Type === 'Service') {\n      const titem = this.productservice.serviceformList.filter(x => x.Id === event.id);\n      const warrantyvalue = titem[0].InWarranty;\n      if (titem.length === 0) {\n        this.invoiceService.InvoiceItemData.ItemDescription = '';\n        this.invoiceService.InvoiceItemData.WarrantyDays = 0;\n        this.tempInWarranty = false;\n      } else {\n        this.invoiceService.InvoiceItemData.Qty = 1;\n        this.invoiceService.InvoiceItemData.ItemName = titem[0].ServiceName;\n        this.invoiceService.InvoiceItemData.ItemDescription = titem[0].ServiceDescription;\n        this.invoiceService.InvoiceItemData.WarrantyDays = titem[0].WarrantyDays;\n        this.invoiceService.InvoiceItemData.UnitCost = 0;\n        this.invoiceService.InvoiceItemData.Total = 0;\n        this.ItemUnitCosttIsValid = true;\n      }\n      if (warrantyvalue === true) {this.tempInWarranty = true; } else {this.tempInWarranty = false; }\n    }\n    if (this.currentUser.Permissions.ProductWarranty) {\n      if (this.invoiceService.InvoiceItemData.InWarranty) {\n        this.ItemUniqueIsValid = true;\n        this.GenerateUniqueRandom();\n      }\n    }\n    this.InitialazeProductDropdown();\n  }\n\n  GenerateUniqueRandom() {\n    if (this.ItemBtn === 'Add') {\n      this.productservice.GetRandamUniqueId(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.invoiceService.InvoiceItemData.UniqId  = response.MessageDescription;\n                    }\n      }}, error =>  console.log(error));\n    }\n  }\n\n  public customwarrantyShowMethor() {\n    if (this.invoiceService.InvoiceItemData.WarrantyDays === undefined) {\n      this.customwarrantyShow = false;\n    } else {\n    switch (this.invoiceService.InvoiceItemData.WarrantyDays.toString()) {\n      case '90':\n      case '180':\n      case '270':\n      case '365': this.customwarrantyShow = true; break;\n      default: this.customwarrantyShow = false; break;\n    }\n  }\n  }\n  enablewarrantchange() {\n    if (this.customwarrantyShowEdit) { this.customwarrantyShowEdit = false; } else { this.customwarrantyShowEdit = true; }\n  }\n}\n","<form #form=\"ngForm\" (submit)=\"putInvoice()\" autocomplete=\"off\">\r\n  <div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\r\n    <div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\r\n      <div class=\"kt-container kt-container--fluid breadcud-kt-container \">\r\n        <div class=\"kt-subheader__main\">\r\n          <h3 class=\"kt-subheader__title\">\r\n            <a href=\"javascript:;\" routerLink=\"/dashboard\">\r\n              Dashboard\r\n            </a>\r\n          </h3>\r\n          <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n          <div class=\"kt-subheader__breadcrumbs\">\r\n            <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n            <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n            <a href=\"javascript:;\" routerLink=\"/invoices\" class=\"kt-subheader__breadcrumbs-link\"> Invoices </a>\r\n          </div>\r\n          <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n          <div class=\"kt-subheader__breadcrumbs\">\r\n            <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n            <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n            Invoice\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <input type=\"hidden\" name=\"Id\" #Id=\"ngModel\" [(ngModel)]=\"invoiceService.InvoiceData.Id\">\r\n    `<input type=\"hidden\" name=\"CustomerId\" #CustomerId=\"ngModel\" [(ngModel)]=\"invoiceService.InvoiceData.CustomerId\">\r\n    <div class=\"new-request-main-section jobs-for-client-section\">\r\n      <div class=\"kt-container kt-container--fluid\">\r\n        <div class=\"new-requst-filter_form\">\r\n          <div class=\"container\">\r\n            <div class=\"col-md-12 section-client-requst-form\">\r\n              <div class=\"\">\r\n                <div class=\"kt-section\">\r\n                  <h3 class=\"kt-section__title\">\r\n                    <p>INVOICE FOR\r\n                      <span>\r\n                        {{invoiceService.InvoiceData.CustomerName}}\r\n                      </span>\r\n                    </p>\r\n                    <i data-toggle=\"kt-tooltip\" data-width=\"auto\" class=\"kt-section__help\" title=\"\"\r\n                      data-original-title=\"If different than the corresponding address\"></i>\r\n                  </h3>\r\n                </div>\r\n              </div>\r\n              <div class=\"kt-section__content col-md-7 requst-for-client-name\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-11 padd-left-0\">\r\n                    <input type=\"text\" name=\"billing_address_1\" class=\"form-control\" name=\"InvoiceTitle\"\r\n                      [(ngModel)]=\"invoiceService.InvoiceData.InvoiceTitle\" placeholder=\"Title\" maxlength=\"64\">\r\n                    <br />\r\n                  </div>\r\n                  <div class=\"col-lg-6 property-addres-info\">\r\n                    <div class=\"kt-widget4--sticky\">\r\n                      <div class=\"kt-widget4__items kt-widget4__items--bottom kt-portlet__space-x kt-margin-b-20\">\r\n                        <div class=\"kt-widget4__item\">\r\n                          <div class=\"kt-widget4__info\">\r\n                            <h4 class=\"kt-widget4__title\"> Property address </h4>\r\n                            <span class=\"kt-widget4__sub\">\r\n                              {{invoiceService.InvoiceData.CustomerAddress}}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6 property-addres-info\">\r\n                    <div class=\"kt-widget4 kt-widget4--sticky\">\r\n                      <div class=\"kt-widget4__items kt-widget4__items--bottom kt-portlet__space-x kt-margin-b-20\">\r\n                        <div class=\"kt-widget4__item\">\r\n                          <div class=\"kt-widget4__info\">\r\n                            <label>Contact Details &nbsp;</label><br />\r\n                            <label>{{invoiceService.InvoiceData.CustomerName}}</label><br>\r\n                            <span class=\"kt-widget4__sub\">\r\n                              <span>{{invoiceService.InvoiceData.CustomerEmail}}</span><br />\r\n                              <span>{{invoiceService.InvoiceData.CustomerContactNo}}</span>\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-12\">\r\n                    <label for=\"\">Description</label>\r\n                      <textarea class=\"form-control\" name=\"Description\" #Description=\"ngModel\"\r\n                      [(ngModel)]=\"invoiceService.InvoiceData.Description\" rows=\"3\"\r\n                      placeholder=\"Description\"></textarea><br>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-5 new-requst-client-name\">\r\n                <div class=\"kt-widget4 kt-widget4--sticky\">\r\n                  <table class=\"table table-bordered service-form-table-border service-form-table-border htBorder\">\r\n                    <tr>\r\n                      <th colspan=\"2\"><span>Invoice Details</span></th>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>Invoice No</th>\r\n                      <td>\r\n                        <div class=\"row\" style=\"padding: 0;margin: 0;\">\r\n                          <div class=\"col-md-9\">\r\n                            <div class=\"InvoiceNN\" *ngIf=\"!InvoiceNosChange\">\r\n                              <span class=\"btn btn-label-primary\">{{invoiceService.InvoiceData.InvoiceId}}</span>\r\n                            </div>\r\n                            <div class=\"InviceCC\" *ngIf=\"InvoiceNosChange\">\r\n                              <span class=\"btn btn-label-primary\">{{genicProfile.formData.InvoicePrefix}}</span>\r\n                              <input type=\"number\" min=\"0\" maxlength=\"5\" class=\"form-control btnChangeQuote\"\r\n                                name=\"InvoiceUniqueID\" [(ngModel)]=\"invoiceService.InvoiceData.InvoiceUniqueID\" style=\"height: 32px !important;\r\n                                    width: 66px;text-align: right;\r\n                                    display: inline-block;\" />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>Invoice Date</th>\r\n                      <td>\r\n                        <input placeholder=\"mm-dd-yyyy\" class=\"form-control\" name=\"InvoiceDate\" #InvoiceDate=\"ngModel\"\r\n                          ngbDatepicker [class.is-invalid]=\"!InvoiceDateIsValid\"\r\n                          (click)=\"datePickerInvoiceDate.toggle()\" #datePickerInvoiceDate=\"ngbDatepicker\"\r\n                          [(ngModel)]=\"invoiceService.InvoiceData.InvoiceDate\">\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>Due Date</th>\r\n                      <td>\r\n                        <input placeholder=\"mm-dd-yyyy\" class=\"form-control\" name=\"InvoiceDueDate\"\r\n                          #InvoiceDueDate=\"ngModel\" [class.is-invalid]=\"!InvoiceDueDateIsValid\" ngbDatepicker\r\n                          (click)=\"datePickerInvoiceDueDate.toggle()\" #datePickerInvoiceDueDate=\"ngbDatepicker\"\r\n                          [(ngModel)]=\"invoiceService.InvoiceData.InvoiceDueDate\">\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>Refrance No</th>\r\n                      <td>\r\n                        <input placeholder=\"Refrance No\" class=\"form-control\" name=\"RefranceNo\"\r\n                          #RefranceNo=\"ngModel\" [(ngModel)]=\"invoiceService.InvoiceData.RefranceNo\">\r\n                      </td>\r\n                    </tr>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-12 new-request-service-details-form\">\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 job-for-tab-content\">\r\n                  <div class=\"kt-portlet kt-portlet--height-fluid kt-widget19\">\r\n                    <div class=\"kt-portlet__head\">\r\n                      <div class=\"kt-portlet__head-label\">\r\n                        <h3 class=\"kt-portlet__head-title\">\r\n                          LINE ITEMS<span class=\"text-danger\">*</span>\r\n                        </h3>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                      <div class=\"kt-portlet__body\">\r\n                        <div class=\"col-md-12\">\r\n                          <table class=\"table table-borderless table-sm\">\r\n\r\n                            <tr>\r\n                              <th colspan=\"2\" width=\"50%\">\r\n                                <div class=\"product-service-colun-name\">PRODUCT\r\n                                  / SERVICE</div>\r\n                              </th>\r\n                              <th width=\"15%\">\r\n                                <div class=\"product-service-colun-name\">QTY\r\n                                </div>\r\n                              </th>\r\n                              <th width=\"15%\">\r\n                                <div class=\"product-service-colun-name\">UNIT\r\n                                  COST</div>\r\n                              </th>\r\n                              <th width=\"15%\">\r\n                                <div class=\"product-service-colun-name\">TOTAL\r\n                                </div>\r\n                              </th>\r\n                              <th width=\"5%\"></th>\r\n                            </tr>\r\n                            <tr>\r\n                              <td colspan=\"6\">\r\n                                <div class=\"client-view-border-info\"></div>\r\n                              </td>\r\n                            </tr>\r\n                            <tr class=\"border\" *ngFor=\"let x of invoiceService.InvoiceItemList; let i=index\">\r\n                              <td colspan=\"2\">\r\n                                <b>{{ x.ItemName }}</b><br>{{ x.ItemDescription}}\r\n                                <div *ngIf=\"x.InWarranty\">\r\n                                  {{x.WarrantyDays}} Days warranty\r\n                                  <span *ngIf=\"x.UniqId.length > 0\">({{x.UniqId}})</span>\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div *ngIf=\"x.Type === 'Product'\"> {{ x.Qty}}</div>\r\n                              </td>\r\n                              <td>${{ x.UnitCost}}</td>\r\n                              <td>{{ x.Total}}</td>\r\n                              <td>\r\n                                <div class=\"btn-group btnOpp\">\r\n                                  <a href=\"javascript:;\" class=\"btn-Edit\" (click)=\"PupulateInvoiceProductList(x)\"\r\n                                    title=\"edit\">\r\n                                    <i class=\"la la-edit\"></i>\r\n                                  </a>\r\n                                  <a href=\"javascript:;\" class=\" btn-remove\"\r\n                                    (click)=\"RemoveInvoiceItem(x.Id,x.ItemName, x.Qty, x.UnitCost)\" title=\"remove\">\r\n                                    <i class=\"la la-trash-o\"></i>\r\n                                  </a>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                            <tr> \r\n                              <td colspan=\"2\">\r\n                                <div class=\"row radio-service\">\r\n                                  <div *ngIf=\"!currentUser.Permissions.IsProductOnly\" class=\"col-md-4\">\r\n                                    <label class=\"radio-inline\"><input type=\"radio\" name=\"InvoiceItemData.Type\"\r\n                                        #InvoiceItemData.Type=\"ngModel\" [(ngModel)]=\"invoiceService.InvoiceItemData.Type\"\r\n                                        (change)=\"OnInvoiceItemTypeChange()\" value=\"Product\">Product</label>\r\n                                  </div>\r\n                                  <div *ngIf=\"!currentUser.Permissions.IsProductOnly\" class=\"col-md-4\">\r\n                                    <label class=\"radio-inline\"><input type=\"radio\" name=\"InvoiceItemData.Type\"\r\n                                        #InvoiceItemData.Type=\"ngModel\" [(ngModel)]=\"invoiceService.InvoiceItemData.Type\"\r\n                                        (change)=\"OnInvoiceItemTypeChange()\" value=\"Service\">Service</label>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                              <td colspan=\"4\"></td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td colspan=\"2\">\r\n                                <div class=\"row radio-service\">\r\n                                    <div class=\"col-md-12\" *ngIf=\"ItemBtn === 'Add'\">\r\n                                        <l-select2 \r\n                                         name=\"product_formcontrol\"\r\n                                        class=\"select2customcss\" [options]=\"productdata\"\r\n                                        (valueChange)=\"WhenSelectProductChange($event)\">\r\n                                        </l-select2>\r\n                                    </div>\r\n                                    <div class=\"col-md-12\" *ngIf=\"ItemBtn === 'update'\">\r\n                                        <label class=\"form-control\">\r\n                                            {{invoiceService.InvoiceItemData.ItemName}}\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n                            </td>\r\n                              <td>\r\n                                <input *ngIf=\"invoiceService.InvoiceItemData.Type === 'Product'\"\r\n                                  name=\"InvoiceItemData.Qty\" #InvoiceItemData.Qty=\"ngModel\"\r\n                                  [(ngModel)]=\"invoiceService.InvoiceItemData.Qty\" height=\"30px\" type=\"text\" min=\"0\"\r\n                                  maxlength=\"3\" class=\"form-control\" [ngClass]=\"{'InvalidInput': isQtyValid===false}\"\r\n                                  (keyup)=\"CalculateInvoiceProductCost()\" (keypress)=\"numberOnly($event)\"\r\n                                  placeholder=\"Quantity\">\r\n                              </td>\r\n                              <td>\r\n                                <div class=\"input-group\">\r\n                                  <div class=\"input-group-prepend\">\r\n                                    <span class=\"input-group-text\" id=\"basic-addon1\">\r\n                                      <i class=\"fa fa-dollar-sign\"></i>\r\n                                    </span>\r\n                                  </div>\r\n                                  <input name=\"InvoiceItemData.UnitCost\" #InvoiceItemData.UnitCost=\"ngModel\" type=\"text\"\r\n                                    min=\"0\" maxlength=\"6\" [(ngModel)]=\"invoiceService.InvoiceItemData.UnitCost\"\r\n                                    class=\"form-control\" [ngClass]=\"{'InvalidInput': ItemUnitCosttIsValid===false}\"\r\n                                    (keyup)=\"CalculateInvoiceProductCost()\" (keypress)=\"numberwithDecimalOnly($event)\"\r\n                                    placeholder=\"Unit Cost\">\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div class=\"input-group\">\r\n                                  <div class=\"input-group-prepend\">\r\n                                    <span class=\"input-group-text\" id=\"basic-addon1\">\r\n                                      <i class=\"fa fa-dollar-sign\"></i>\r\n                                    </span>\r\n                                  </div>\r\n                                  <input name=\"invoiceService.InvoiceItemData.Total\"\r\n                                    #invoiceService.InvoiceItemData.Total=\"ngModel\" type=\"text\" min=\"0\"\r\n                                    [(ngModel)]=\"invoiceService.InvoiceItemData.Total\" height=\"30px\"\r\n                                    class=\"form-control\" placeholder=\"Total Cost\" readonly>\r\n                                </div>\r\n                              </td>\r\n                              <td></td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td colspan=\"2\">\r\n                                <textarea name=\"invoiceService.InvoiceItemData.ItemDescription\"\r\n                                  #invoiceService.InvoiceItemData.ItemDescription=\"ngModel\"\r\n                                  [(ngModel)]=\"invoiceService.InvoiceItemData.ItemDescription\" class=\"form-control\"\r\n                                  placeholder=\"Description\" rows=\"3\"></textarea>\r\n                              </td>\r\n                              <td colspan=\"4\">\r\n                                <div class=\"row\" *ngIf=\"currentUser.Permissions.ProductWarranty\">\r\n                                  <div class=\"col-lg-12 col-md-12\" *ngIf=\"tempInWarranty\">\r\n                                    <div class=\"row\">\r\n                                      <div class=\"col-lg-7 col-md-7 padd-top-10\" style=\"margin:auto;\">\r\n                                        <label class=\"kt-checkbox kt-checkbox--solid kt-checkbox--brand\">\r\n                                          <input type=\"checkbox\" name=\"invoiceService.InvoiceItemData.InWarranty\"\r\n                                            #invoiceService.InvoiceItemData.InWarranty=\"ngModel\" (change)=\"GenerateUniqueRandom()\"\r\n                                            [(ngModel)]=\"invoiceService.InvoiceItemData.InWarranty\">\r\n                                          want to give Warranty on\r\n                                          <i *ngIf=\"invoiceService.InvoiceItemData.Type === 'Product'\">\r\n                                            Product\r\n                                          </i>\r\n                                          <i *ngIf=\"invoiceService.InvoiceItemData.Type === 'Service'\">\r\n                                            Service\r\n                                          </i>\r\n                                          <span></span>\r\n                                        </label>\r\n\r\n                                      </div>\r\n                                      <div class=\"col-lg-5 col-md-5\" style=\"margin:auto;\"\r\n                                        *ngIf=\"invoiceService.InvoiceItemData.InWarranty\">\r\n                                        {{invoiceService.InvoiceItemData.WarrantyDays}}\r\n                                        Days Warranty\r\n                                      </div>\r\n                                      <div class=\"col-lg-5 col-md-5\" *ngIf=\"!invoiceService.InvoiceItemData.InWarranty\">\r\n                                      </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"row\" *ngIf=\"invoiceService.InvoiceItemData.InWarranty\">\r\n                                      <div class=\"col-lg-7 col-md-7\">\r\n                                        <input name=\"invoiceService.InvoiceItemData.UniqId\"\r\n                                          #invoiceService.InvoiceItemData.UniqId=\"ngModel\"\r\n                                          [(ngModel)]=\"invoiceService.InvoiceItemData.UniqId\"\r\n                                          [ngClass]=\"{'InvalidInput': ItemUniqueIsValid===false}\" height=\"30px\"\r\n                                          type=\"text\" min=\"0\" maxlength=\"64\" class=\"form-control\"\r\n                                          placeholder=\"Unique Id\">\r\n                                      </div>\r\n                                      <div class=\"col-lg-5 col-md-5\">\r\n                                        <a class=\"text-warning btnStockUpdate\" href=\"javascript:void(0)\"\r\n                                          (click)=\"enablewarrantchange()\">\r\n                                          <span *ngIf=\"!customwarrantyShowEdit\"><i class=\"fa fa-plus\"\r\n                                              aria-hidden=\"true\"></i>\r\n                                            Edit Warranty</span>\r\n                                          <span *ngIf=\"customwarrantyShowEdit\"><i class=\"fa fa-minus\"\r\n                                              aria-hidden=\"true\"></i>\r\n                                            Hide </span>\r\n                                        </a>\r\n                                        <div class=\"kt-radio-list\" *ngIf=\"customwarrantyShowEdit\">\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" value=\"90\"\r\n                                              name=\"WarrantyDays\" #WarrantyDays=\"ngModel\"\r\n                                              (change)=\"customwarrantyShowMethor()\"\r\n                                              [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\">\r\n                                            90 Days\r\n                                            <span></span>\r\n                                          </label>\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" value=\"180\"\r\n                                              name=\"WarrantyDays\" #WarrantyDays=\"ngModel\"\r\n                                              (change)=\"customwarrantyShowMethor()\"\r\n                                              [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\">\r\n                                            180 Days\r\n                                            <span></span>\r\n                                          </label>\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" value=\"270\"\r\n                                              name=\"WarrantyDays\" #WarrantyDays=\"ngModel\"\r\n                                              (change)=\"customwarrantyShowMethor()\"\r\n                                              [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\">\r\n                                            270 Days\r\n                                            <span></span>\r\n                                          </label>\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" value=\"365\"\r\n                                              name=\"WarrantyDays\" #WarrantyDays=\"ngModel\"\r\n                                              (change)=\"customwarrantyShowMethor()\"\r\n                                              [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\">\r\n                                            365 Days\r\n                                            <span></span>\r\n                                          </label>\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\"\r\n                                            *ngIf=\"customwarrantyShow\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" name=\"WarrantyDays\"\r\n                                              #WarrantyDays=\"ngModel\" (change)=\"customwarrantyShowMethor()\"\r\n                                              [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\">\r\n                                            Custom\r\n                                            <span></span>\r\n                                          </label>\r\n                                          <label class=\"kt-radio kt-radio--bold kt-radio--brand\"\r\n                                            *ngIf=\"!customwarrantyShow\">\r\n                                            <input type=\"radio\" class=\"custom-control-input\" name=\"WarrantyDays\" checked\r\n                                              (change)=\"customwarrantyShowMethor()\">\r\n                                            Custom\r\n                                            <span></span>\r\n                                          </label>\r\n\r\n                                        </div>\r\n                                        <div *ngIf=\"!customwarrantyShow\">\r\n                                          <input *ngIf=\"customwarrantyShowEdit\"\r\n                                            name=\"invoiceService.InvoiceItemData.WarrantyDays\"\r\n                                            #invoiceService.InvoiceItemData.WarrantyDays=\"ngModel\"\r\n                                            [(ngModel)]=\"invoiceService.InvoiceItemData.WarrantyDays\" height=\"30px\"\r\n                                            type=\"text\" min=\"0\" maxlength=\"3\" class=\"form-control\" placeholder=\"Days\">\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td colspan=\"6\">\r\n                                <div class=\"form-group form-group-last\">\r\n                                  <div class=\"col-lg-4\">\r\n                                    <a href=\"javascript:;\"\r\n                                      (click)=\"addProductToInvoice(invoiceService.InvoiceItemData.Id,invoiceService.InvoiceData.Id,invoiceService.InvoiceItemData.ItemName,invoiceService.InvoiceItemData.Qty,invoiceService.InvoiceItemData.UnitCost,invoiceService.InvoiceItemData.Total,invoiceService.InvoiceItemData.ItemDescription)\"\r\n                                      class=\"btn btn-brand btn-sm add-line-item-btn\">\r\n                                      <i class=\"la la-plus\"></i>\r\n                                      {{ ItemBtn }}\r\n                                    </a>\r\n                                    <a style=\"margin-left: 2px;\" href=\"javascript:;\" (click)=\"CleareProductToInvoice()\"\r\n                                      class=\"btn btn-brand btn-sm add-line-item-btn\">\r\n                                      <i class=\"la la-times\"></i>\r\n                                      Cancel\r\n                                    </a>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n\r\n                          </table>\r\n                          <div class=\"col-md-12\">\r\n                            <div class=\"quots-client-view-border-info\"></div>\r\n                          </div>\r\n                          <div class=\"row kt-widget4 total-job-price-client\">\r\n                            <div class=\"kt-widget4__item\">\r\n\r\n                              <div class=\"kt-widget4__info\">\r\n                                <p>\r\n                                  TOTAL\r\n                                </p>\r\n                              </div>\r\n                              <p> ${{ invoiceService.InvoiceData.SubTotal.toFixed(2) }} </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12 job-for-tab-content\">\r\n                  <div class=\"kt-portlet kt-portlet--height-fluid kt-widget19\">\r\n                    <div class=\"kt-portlet__head\">\r\n                      <div class=\"kt-portlet__head-label\">\r\n                        <h3 class=\"kt-portlet__head-title\">\r\n                          Invoice value\r\n                        </h3>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                      <div class=\"kt-portlet__body\">\r\n                        <div class=\"col-md-12\">\r\n                          <div class=\"tab-content\" style=\"overflow-x: scroll;overflow:hidden;\">\r\n                            <div class=\"tab-pane active\" id=\"kt_widget11_tab1_content\">\r\n                              <div class=\"kt-widget11\">\r\n                                <div id=\"kt_repeater_1\">\r\n                                  <div id=\"kt_repeater_1\">\r\n                                    <div class=\"row col-md-12\">\r\n                                      <div class=\"col-md-6 col-sm-6 col-xs-6 qty-unit-total\">\r\n                                        <div class=\"clientRemarkSection\">\r\n                                          <div class=\"row\">\r\n                                            <div class=\"CLRemark\">\r\n                                              <textarea name=\"ClientRemark\" #ClientRemark=\"ngModel\"\r\n                                                [(ngModel)]=\"invoiceService.InvoiceData.ClientRemark\"\r\n                                                class=\"form-control\" placeholder=\"Client Message\" maxlength=\"1024\"\r\n                                                rows=\"12\">\r\n                                              </textarea>\r\n                                            </div>\r\n                                          </div>\r\n                                          <div class=\"row\" style=\"display: none;\">\r\n                                            <div class=\"clientViewSection\">\r\n                                              <div class=\"form-group\">\r\n                                                <span class=\"clView\">\r\n                                                  <i class=\"fa fa-eye\" aria-hidden=\"true\"></i>\r\n                                                  <label>Client View</label>\r\n                                                </span>\r\n                                                <label>\r\n                                                  Adjust what your client will see on this quote. To change the default\r\n                                                  for ​all future quotes, visit the\r\n                                                  PDF Configuration.\r\n                                                </label>\r\n                                                <div class=\"kt-checkbox-inline\">\r\n                                                  <label class=\"kt-checkbox\">\r\n                                                    <input type=\"checkbox\" name=\"ClientViewQty\"\r\n                                                      [(ngModel)]=\"invoiceService.InvoiceData.ClientViewQty\"> Quantities\r\n                                                    <span></span>\r\n                                                  </label>\r\n                                                  <label class=\"kt-checkbox\">\r\n                                                    <input type=\"checkbox\" name=\"ClientViewUnitCost\"\r\n                                                      [(ngModel)]=\"invoiceService.InvoiceData.ClientViewUnitCost\"> Unit\r\n                                                    Cost\r\n                                                    <span></span>\r\n                                                  </label>\r\n                                                  <label class=\"kt-checkbox\">\r\n                                                    <input type=\"checkbox\" name=\"ClientViewLineItemTotal\"\r\n                                                      [(ngModel)]=\"invoiceService.InvoiceData.ClientViewLineItemTotal\">\r\n                                                    Line item totals\r\n                                                    <span></span>\r\n                                                  </label>\r\n                                                  <label class=\"kt-checkbox\">\r\n                                                    <input type=\"checkbox\" name=\"ClientAccountBalance\"\r\n                                                      [(ngModel)]=\"invoiceService.InvoiceData.ClientAccountBalance\">\r\n                                                    Account balance\r\n                                                    <span></span>\r\n                                                  </label>\r\n                                                  <label class=\"kt-checkbox\">\r\n                                                    <input type=\"checkbox\" name=\"LateStamp\"\r\n                                                      [(ngModel)]=\"invoiceService.InvoiceData.LateStamp\"> Late stamp (if\r\n                                                    overdue)\r\n                                                    <span></span>\r\n                                                  </label>\r\n                                                </div>\r\n                                              </div>\r\n                                            </div>\r\n\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                      <div class=\"col-md-6 invoicing-list-view-border-left\">\r\n                                        <div class=\"kt-widget1\">\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Subtotal</h3>\r\n                                            </div>\r\n                                            <span\r\n                                              class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.SubTotal.toFixed(2)}}</span>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\" >\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Discount</h3>\r\n                                            </div>\r\n                                            <div class=\"discountSection\">\r\n                                              <div class=\"discountInput\" style=\"display: block;\">\r\n                                                <input class=\"form-control\" min=\"0\" type=\"number\" maxlength=\"4\"\r\n                                                  (keyup)=\"changeDiscountValue()\" (keydown)=\"changeDiscountValue()\"\r\n                                                  (change)=\"changeDiscountValue()\"\r\n                                                  (keypress)=\"numberwithDecimalOnly($event)\" name=\"DiscountTextValue\"\r\n                                                  [(ngModel)]=\"invoiceService.InvoiceData.DiscountTextValue\" />\r\n                                                <select class=\"form-control\" (change)=\"changeDiscountValue()\"\r\n                                                  name=\"DiscountType\"\r\n                                                  [(ngModel)]=\"invoiceService.InvoiceData.DiscountType\">\r\n                                                  <option value=\"0\">SGD</option>\r\n                                                  <option value=\"1\">%</option>\r\n                                                </select>\r\n                                                <span\r\n                                                  class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.DiscountAmount.toFixed(2)}}</span>\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Tax</h3>\r\n                                            </div>\r\n                                            <div class=\"tax-block\">\r\n                                              <div class=\"taxToshow\" style=\"display: block;\">\r\n                                                <span\r\n                                                  class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.TaxAmount.toFixed(2)}}</span>\r\n                                                <select class=\"form-control\" (change)=\"CalculateInvoiceTax()\"\r\n                                                  name=\"TaxRate\" [(ngModel)]=\"invoiceService.InvoiceData.TaxRate\">\r\n                                                  <option value=\"0\">---Select Tax---</option>\r\n                                                  <option *ngFor=\"let t of quoteService.TextList\" value=\"{{t.TaxRate}}\">\r\n                                                    {{t.TaxName}}</option>\r\n                                                </select>\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item quotes-list-view-total-info\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\"><b>Total</b></h3>\r\n                                            </div>\r\n                                            <span\r\n                                              class=\"kt-widget1__number kt-font-primary\"><b>${{invoiceService.InvoiceData.NetAmount.toFixed(2)}}</b></span>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Require to deposit</h3>\r\n                                            </div>\r\n                                            <div class=\"requestedSectionInput\">\r\n                                              <span><input class=\"form-control\" min=\"0\" maxlength=\"4\" type=\"number\"\r\n                                                  (keyup)=\"changeInvoiceDepositeValue()\" name=\"ReqDepositeTextValue\"\r\n                                                  [(ngModel)]=\"invoiceService.InvoiceData.ReqDepositeTextValue\" /></span>\r\n                                              <span>\r\n                                                <select class=\"form-control\" (change)=\"changeInvoiceDepositeValue()\"\r\n                                                  name=\"ReqDepositeType\"\r\n                                                  [(ngModel)]=\"invoiceService.InvoiceData.ReqDepositeType\">\r\n                                                  <option value=\"0\" selected>$</option>\r\n                                                  <option value=\"1\">%</option>\r\n                                                </select>\r\n                                              </span>\r\n                                              <span\r\n                                                class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.ReqDepositeAmount.toFixed(2)}}</span>\r\n                                            </div>\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"on-site-client-required\">\r\n                <div class=\"kt-portlet kt-portlet--height-fluid kt-widget19 internal-notes-attachment\">\r\n                  <div class=\"kt-portlet__head\">\r\n                    <div class=\"kt-portlet__head-label\">\r\n                      <h3 class=\"kt-portlet__head-title\">\r\n                        <strong>\r\n                         &nbsp;&nbsp; INTERNAL NOTES & ATTACHMENTS\r\n                        </strong>\r\n                      </h3>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"kt-portlet__body\">\r\n                    <div class=\"kt-widget19__wrapper\">\r\n                      <textarea name=\"InternalNotes\" [(ngModel)]=\"invoiceService.InvoiceData.InternalNotes\"\r\n                        class=\"form-control\" id=\"exampleTextarea\" rows=\"3\" maxlength=\"1024\"\r\n                        placeholder=\"Internal Notes\">\r\n                      </textarea>\r\n                      <div class=\"row\">\r\n                        <div class=\"col-md-1\" *ngFor=\"let x of invoiceService.InvoiceAttachmentList\">\r\n                          <div class=\"row\">\r\n                            <generic-ticket-icon-attachment [(Name)]=\"x.AttachmentExtension\" [(Path)]=\"x.Attachment\"\r\n                              [Status]=\"1\"></generic-ticket-icon-attachment>\r\n                            <div class=\"col-md-3\"></div>\r\n                            <div class=\"col-md-3\">\r\n                              <a href=\"javascript:;\" (click)=\"RemoveInvoiceAttachement(x.Id, x.Attachment)\"><i\r\n                                  class=\"fa fa-trash text-danger\"></i></a>\r\n                            </div>\r\n                            <div class=\"col-md-3\">\r\n                              <a href=\"{{x.Attachment}}\" target=\"_blank\"><i class=\"fa fa-download text-success\"></i></a>\r\n                            </div>\r\n                            <div class=\"col-md-3\"></div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"file-upload\">\r\n                        <label for=\"upload\" class=\"file-upload__label\"><i title=\"Add Attachment\"\r\n                            class=\"fa fa-paperclip\"></i>\r\n                          <br></label>\r\n                        <input id=\"upload\" class=\"file-upload__input\" type=\"file\" name=\"file-upload\"\r\n                          (change)=\"picked($event)\">\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row new-request-footer-bottom\">\r\n                  <input type=\"hidden\" name=\"Id\" [(ngModel)]=\"invoiceService.InvoiceData.Id\" />\r\n                  <button type=\"reset\" routerLink=\"/invoices\" class=\"btn btn-secondary\">CANCEL</button>\r\n                  <div class=\"btn-group\">\r\n                    <button type=\"submit\" [disabled]=\"btnloader\" class=\"btn btn-brand\">{{ createbuttontext }}</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>","/** Outer dependencies */\r\nimport { Injectable } from '@angular/core';\r\nimport { NgbTimeStruct, NgbTimeAdapter } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nfunction isInteger(value: any): value is number {\r\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n}\r\n\r\nfunction isString(value: any): value is string {\r\n  return typeof value === 'string';\r\n}\r\n\r\n@Injectable()\r\nexport class NgbTimeToStringAdapter extends NgbTimeAdapter<string> {\r\n  private year: number = new Date().getUTCFullYear();\r\n  private month: number = new Date().getUTCMonth() + 1;\r\n  private day: number = new Date().getUTCDate();\r\n\r\n  /**\r\n   * Converts user-model date into an NgbTimeStruct for internal use in the library\r\n   */\r\n  public fromModel(dateString: string): NgbTimeStruct {\r\n    const date = new Date(dateString);\r\n    const isValidDate = !isNaN(date.valueOf());\r\n\r\n    if (!dateString || !isString(dateString) || !isValidDate) {\r\n      return null;\r\n    }\r\n\r\n    this.year = date.getUTCFullYear();\r\n    this.month = date.getUTCMonth() + 1;\r\n    this.day = date.getUTCDate();\r\n\r\n    return { hour: date.getUTCHours(), minute: date.getUTCMinutes(), second: date.getUTCSeconds() };\r\n  }\r\n\r\n  /**\r\n   * Converts internal time value NgbTimeStruct to user-model date\r\n   * The returned type is supposed to be of the same type as fromModel() input-value param\r\n   */\r\n  public toModel(time: NgbTimeStruct): string {\r\n    if (time && isInteger(time.hour) && isInteger(time.minute) && isInteger(time.second)) {\r\n      const year = this.year.toString().padStart(2, '0');\r\n      const month = this.month.toString().padStart(2, '0');\r\n      const day = this.day.toString().padStart(2, '0');\r\n\r\n      const hour = time.hour.toString().padStart(2, '0');\r\n      const minute = time.minute.toString().padStart(2, '0');\r\n      const second = time.second.toString().padStart(2, '0');\r\n\r\n      return `${year}-${month}-${day}T${hour}:${minute}:${second}Z`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { FileUploader } from 'ng2-file-upload';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { ProductService } from 'src/app/services/product.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { Router } from '@angular/router';\nimport { environment } from 'src/environments/environment';\nimport { Invoice } from 'src/app/services/invoice.module';\nimport { MatDialogConfig, MatDialog } from '@angular/material/dialog';\nimport { NgbDateAdapter, NgbTimeAdapter } from '@ng-bootstrap/ng-bootstrap';\nimport { NgbDateToStringAdapter } from 'src/app/ngb-date-to-string-adapter';\nimport { NgbTimeToStringAdapter } from 'src/app/ngb-time-to-string-adapter';\nimport { InvoiceChangeStatusPopupComponent } from '../invoice-change-status-popup/invoice-change-status-popup.component';\nimport { InvoicePaymentAndReceiptComponent } from '../invoice-payment-and-receipt/invoice-payment-and-receipt.component';\nimport { Login } from 'src/app/services/login.mudule';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { Property } from 'src/app/services/property.model';;\nimport { Title } from '@angular/platform-browser';\n\n\n@Component({\n  selector: 'app-invoice-details',\n  templateUrl: './invoice-details.component.html',\n  styleUrls: ['./invoice-details.component.css'],\n  providers: [\n    { provide: NgbDateAdapter, useClass: NgbDateToStringAdapter },\n    { provide: NgbTimeAdapter, useClass: NgbTimeToStringAdapter }\n  ],\n\n})\nexport class InvoiceDetailsComponent implements OnInit, AfterViewInit {\n  localPropertyData: Property;\n  currentUser: Login;\n  IsShowInvStatus: string;\n  IsShowPaymentSection: string;\n  tempPaymentlist: any;\n  iAmount: number;\n  pAmount: number;\n  localPrependUrl: string;\n  public uploader: FileUploader = new FileUploader({});\n  constructor(\n    public titleService: Title,\n    public invoiceService: InvoiceService,\n    public productservice: ProductService,\n    public toastr: ToastrService,\n    public router: Router,\n    public dialog: MatDialog,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n  }\n  ngOnInit() {\n    if (!this.currentUser.Permissions.InvoiceView) { this.router.navigate(['/dashboard']); this.toastr.info('Permission Not Granted') }\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    if (this.invoiceService.InvoiceData.InvoiceId === '' || this.invoiceService.InvoiceData.InvoiceId === undefined) {\n      this.router.navigate(['/invoices/']);\n    } else {\n      this.invoiceService.getPaymentDetailsByInvoiceNo(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe(res => {\n        if (res) {\n          const response = res as any;\n          if (response.Message === 'success') {\n            this.invoiceService.TotalPaymentData = response.result;\n          }\n        }\n      }, error => console.log(error));\n      this.titleService.setTitle('Invoice Details | Genic Solution');\n      this.iAmount = this.invoiceService.InvoiceData.NetAmount;\n      this.pAmount = this.invoiceService.TotalPaymentData.PaymentAmount;\n      if (this.iAmount > this.pAmount) {\n        this.IsShowPaymentSection = 'true';\n        this.invoiceService.PaymentData.PaymentAmount = this.iAmount - this.pAmount;\n      } else {\n        this.invoiceService.PaymentData.PaymentAmount = 0;\n        setTimeout(() => {\n          this.invoiceService.getPaymentSummary(this.invoiceService.InvoiceData.Id);\n          this.tempPaymentlist = this.invoiceService.PaymentSummary;\n          this.IsShowPaymentSection = 'false';\n        }, 100);\n      }\n    }\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.getInvoiceItems();\n      this.getInvoiceAttachments();\n      this.invoiceService.refrestArrayofKeyslist(this.invoiceService.InvoiceData.CustomerId);\n    }, 200);\n  }\n  getInvoiceItems() {\n    this.invoiceService.getInvoiceItems(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe(res => {\n      if (res) {\n        const response = res as any;\n        if (response.Message === 'success') {\n          this.invoiceService.InvoiceItemList = [];\n          this.invoiceService.InvoiceItemList = response.result;\n        }\n      }\n    }, error => console.log(error));\n  }\n  getInvoiceAttachments() {\n    this.invoiceService.getInvoiceAttachments(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe(res => {\n      if (res) {\n        const response = res as any;\n        if (response.Message === 'success') {\n          this.invoiceService.InvoiceAttachmentList = response.result;\n        }\n      }\n    }, error => console.log(error));\n  }\n  RemoveInvoiceAttachement(InvoiceAttamentId: number, Attachment: string) {\n    if (confirm('Are you sure to delete this attachment?')) {\n      this.invoiceService.deleteInvoiceAttachment(InvoiceAttamentId).then(\n        res => {\n          if (res.status === 204) {\n            this.getInvoiceAttachments();\n\n            const des = 'An attachment : ' + Attachment + ',has been Removed from the Invoice No : ' +\n              this.invoiceService.InvoiceData.InvoiceId + ', of Customer : ' + this.invoiceService.InvoiceData.CustomerName +\n              ', by user : ' + this.currentUser.UserName;\n            const Activity1 = 'An attachment : ' + Attachment + ', is removed from the Invoice no : '\n              + this.invoiceService.InvoiceData.InvoiceId;\n            this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n              this.invoiceService.InvoiceData.Id, 'Removed', des, Activity1).subscribe();\n\n            this.toastr.info('info', 'Deleted successfully');\n          } else if (res.status === 404) {\n            this.toastr.warning('Warning', 'Record Not Found');\n          } else {\n            this.toastr.error('Error', res.statusText);\n          }\n        },\n        err => {\n          this.toastr.error('Error', err.statusText);\n          console.log(err.error);\n        });\n    }\n  }\n  popolateInvoice(i: Invoice) {\n    this.invoiceService.InvoiceData = Object.assign({}, i);\n    this.router.navigate(['/invoices/invoice-edit']);\n  }\n\n  CollapseInvStatus() {\n    if (this.IsShowInvStatus === 'true') {\n      this.IsShowInvStatus = 'false';\n    } else {\n      this.IsShowInvStatus = 'true';\n    }\n  }\n  UpdateInvoiceStatus(i: Invoice) {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '30%';\n    dialogConfig.data = {};\n    this.dialog.open(InvoiceChangeStatusPopupComponent, dialogConfig).afterClosed().subscribe(res => {\n    });\n  }\n  getInvoicePayment(i: Invoice) {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '40%';\n    dialogConfig.data = {};\n    this.dialog.open(InvoicePaymentAndReceiptComponent, dialogConfig).afterClosed().subscribe(res => {\n    });\n  }\n  downloadInvoice(id: string) {\n    this.invoiceService.downoadInvoicePDF(id, this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.toastr.success('success', response.MessageDescription);\n                  const a = $(\"<a>\")\n                    .attr(\"href\", response.Path)\n                    .attr(\"target\", \"_blank\")\n                    .attr(\"download\", this.invoiceService.InvoiceData.InvoiceId + '.pdf')\n                    .appendTo(\"body\");\n                  a[0].click();\n                  a.remove();\n                 }\n                 if (response.Message === 'failure') {\n                this.toastr.warning('warning', response.MessageDescription);\n                }\n      }}, error =>  console.log(error));\n  }\n  SendInvoiceByMail(i: Invoice) {\n      const des = 'An email requrest sent by : ' + this.currentUser.UserName + ', of Invoice No : '\n        + i.InvoiceId + ', for Customer : '\n        + i.CustomerName + ', invoice title \" ' +\n        i.InvoiceTitle + ', Amount of $ ' + i.NetAmount + '0.00, on dated : ' + new Date();\n      const Activity3 = ' Invoice no : ' + this.invoiceService.InvoiceData.InvoiceId + ' is emailed on :' +\n        this.invoiceService.InvoiceData.CustomerEmail + ' dated : ' + new Date();\n      this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Invoice',\n        i.Id, 'Email', des, Activity3).subscribe();\n\n      this.invoiceService.emailInvoiceCopy(this.invoiceService.InvoiceData.Id);\n      this.toastr.success('success', 'Invoice copy is send to client ' + this.invoiceService.InvoiceData.CustomerEmail + ' registered email');\n  }\n}\n","<div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\r\n  <div class=\"kt-container kt-container--fluid breadcud-kt-container \">\r\n    <div class=\"kt-subheader__main\">\r\n      <h3 class=\"kt-subheader__title\">\r\n        <a href=\"javascript:;\" routerLink=\"/dashboard\">\r\n          Dashboard\r\n        </a>\r\n      </h3>\r\n      <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n      <div class=\"kt-subheader__breadcrumbs\">\r\n        <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n        <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n        <a href=\"javascript:;\" routerLink=\"/invoices\" class=\"kt-subheader__breadcrumbs-link\"> Invoices </a>\r\n      </div>\r\n      <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n      <div class=\"kt-subheader__breadcrumbs\">\r\n        <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n        <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n        Invoice Details & Payment Section\r\n      </div>\r\n    </div>\r\n    <div class=\"kt-subheader__toolbar\">\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"new-request-main-section jobs-for-client-section\">\r\n  <div class=\"kt-container kt-container--fluid\">\r\n    <div class=\"new-requst-filter_form\">\r\n      <div class=\"\">\r\n        <div class=\"col-md-12 section-client-requst-form\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n              <div class=\"\">\r\n                <div class=\"kt-section kt-customer-list-view-section\">\r\n                  <span class=\"flaticon-list pending-view-page-list\"></span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='Draft'\" class=\"view-pending\"> Draft</span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='SendOutPaid'\" class=\"view-pending\">SEND\r\n                    OUT(PAID)</span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='SendOutUnPaid'\" class=\"view-pending\">SEND OUT(UN\r\n                    PAID)</span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='SendOutOverDue'\" class=\"view-pending\">SEND OUT(OVER\r\n                    DUE)</span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='PartiallyPaid'\" class=\"view-pending\">PARTIALLY\r\n                    PAID</span>\r\n                  <span *ngIf=\"invoiceService.InvoiceData.Status ==='cancelled'\" class=\"view-pending\">CANCELLED</span>\r\n\r\n                  <h3 class=\"kt-section__title1\">\r\n                    <p> {{invoiceService.InvoiceData.CompanyName}} ({{invoiceService.InvoiceData.CustomerName}})\r\n                      <span></span></p>\r\n                    <i data-toggle=\"kt-tooltip\" data-width=\"auto\" class=\"kt-section__help\" title=\"\"\r\n                      data-original-title=\"If different than the corresponding address\"></i>\r\n                  </h3>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n              <div class=\"kt-section kt-customer-list-view-section\" style=\"float: right;\">\r\n                <a href=\"javascript:void(0);\" *ngIf=\"currentUser.Permissions.InvoiceEdit\"\r\n                  (click)=\"getInvoicePayment(invoiceService.InvoiceData)\" class=\"btn btn-primary\">Payment & Receipt</a>\r\n                <div class=\"btn-group btn-group-sm\">\r\n                  <a href=\"javascript:void(0);\" style=\"line-height: 21px;\" class=\"btn btn-primary dropdown-toggle\"\r\n                    data-toggle=\"dropdown\">More Action's <span class=\"caret\"></span></a>\r\n                  <ul class=\"dropdown-menu\" style=\"text-align: center;\">\r\n                    <li *ngIf=\"currentUser.Permissions.InvoiceEdit\"><a\r\n                        (click)=\"popolateInvoice(invoiceService.InvoiceData)\" href=\"javascript:void(0);\">Edit\r\n                        Invoice</a></li>\r\n                    <li *ngIf=\"currentUser.Permissions.InvoiceEdit\"><a\r\n                        (click)=\"UpdateInvoiceStatus(invoiceService.InvoiceData)\" href=\"javascript:void(0);\">Update\r\n                        Status</a></li>\r\n                    <li><a (click)=\"downloadInvoice(invoiceService.InvoiceData.Id)\" href=\"javascript:void(0);\">Download\r\n                        PDF</a></li>\r\n                    <li><a (click)=\"SendInvoiceByMail(invoiceService.InvoiceData)\" href=\"javascript:void(0);\">Send by\r\n                        Email</a></li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-7 requsted-property-addres\">\r\n              <div class=\"kt-section__content col-md-12 requst-for-client-name\">\r\n                <div class=\"form-group row\">\r\n                  <div class=\"col-lg-6 padd-left-0\">\r\n                    <label class=\"customer-view-full-title-name\">{{invoiceService.InvoiceData.InvoiceTitle}} </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 property-addres-info\">\r\n                  <div class=\"kt-widget4 kt-widget4--sticky\">\r\n                    <div class=\"kt-widget4__items kt-widget4__items--bottom kt-portlet__space-x kt-margin-b-20\">\r\n                      <div class=\"kt-widget4__item\">\r\n                        <div class=\"kt-widget4__info\">\r\n                          <h4 class=\"kt-widget4__title\">\r\n                            Billing address\r\n                          </h4>\r\n                          <span class=\"kt-widget4__sub\">\r\n                            <a href=\"https://maps.google.com/?q={{invoiceService.InvoiceData.CustomerAddress}}\"\r\n                            target=\"_blank\">\r\n                            <em *ngFor=\"let subCategory of invoiceService.InvoiceData.CustomerAddress?.split(',')\">\r\n                            {{ subCategory }} <br>\r\n                            </em>  </a>\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-6 property-addres-info\">\r\n                  <div class=\"kt-widget4 kt-widget4--sticky\">\r\n                    <div class=\"kt-widget4__item\">\r\n                      <div class=\"kt-widget4__info\">\r\n                        <h4 class=\"kt-widget4__title\">\r\n                          Contact details\r\n                        </h4>\r\n                        <span class=\"kt-widget4__sub\" *ngFor=\"let c of invoiceService.ArrayofKeys\">\r\n                          <span>{{c.Value}}</span><br />\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-12 property-addres-info\">\r\n                  <div class=\"kt-widget4 kt-widget4--sticky\">\r\n                    <div class=\"kt-widget4__item\">\r\n                      <div class=\"kt-widget4__info\">\r\n                        <h4 class=\"kt-widget4__title\">\r\n                          Description\r\n                        </h4>\r\n                        <span class=\"kt-widget4__sub\">\r\n                          <span>{{invoiceService.InvoiceData.Description}}</span><br />\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-5 new-requst-address-contact\">\r\n              <div class=\"kt-widget4\">\r\n                <div class=\"kt-widget4__items kt-widget4__items--bottom kt-portlet__space-x\">\r\n                  <div class=\"kt-widget4__item\">\r\n                    <div class=\"kt-widget4__info\" width=\"100%;\">\r\n                      <a href=\"javascript:;\" class=\"kt-widget4__title\">\r\n                        Invoice details\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Invoice Number:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.InvoiceId}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Invoice Date:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.InvoiceDate | date}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Invoice Due Date:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.InvoiceDueDate | date}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div *ngIf=\"invoiceService.InvoiceData.TicketId!\" class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">{{this.currentUser.Ticket}} Number:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.TicketId}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div *ngIf=\"invoiceService.InvoiceData.QuoteId!\" class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Quotation Number:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.QuoteId}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div *ngIf=\"invoiceService.InvoiceData.RefranceNo!\" class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Refrance Number:</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.RefranceNo}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div *ngIf=\"invoiceService.InvoiceData.RequestId!\" class=\"kt-portlet invoice-for-client-kt-portal\">\r\n                    <div class=\"kt-portlet__head padd-left-0 padd-right-0\">\r\n                      <div class=\"kt-portlet__head-label col-md-6\">\r\n                        <h3 class=\"kt-portlet__head-title\">Request Number</h3>\r\n                      </div>\r\n                      <div class=\"kt-portlet__head-toolbar col-md-6\">\r\n                        {{invoiceService.InvoiceData.RequestId}}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-12 new-request-service-details-form\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12 job-for-tab-content\">\r\n              <div class=\"kt-portlet kt-portlet--height-fluid kt-widget19\">\r\n                <div class=\"row\">\r\n                  <div class=\"kt-portlet__body\">\r\n                    <div class=\"col-md-12\">\r\n                      <div class=\"tab-content\">\r\n                        <div class=\"tab-pane active\" id=\"kt_widget11_tab1_content\">\r\n                          <div class=\"kt-widget11\">\r\n                            <div id=\"kt_repeater_1\">\r\n                              <div id=\"kt_repeater_1\">\r\n                                <div class=\"row col-md-12\">\r\n                                  <div class=\"col-md-6\">\r\n                                    <div class=\"product-service-colun-name\">\r\n                                      PRODUCT / SERVICE\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\">\r\n                                      QTY.\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\">\r\n                                      UNIT COST\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\">\r\n                                      TOTAL\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div class=\"add-data-ticket-list-view\"></div>\r\n                                <div class=\"row col-md-12\" *ngFor=\"let p of invoiceService.InvoiceItemList\">\r\n\r\n                                  <div class=\"col-md-6\">\r\n                                    <div class=\"product-service-colun-name invoice-list-view-product-service\">\r\n                                      <span>{{p.ItemName}}</span>\r\n                                      <p>{{p.ItemDescription}}</p>\r\n                                      <div *ngIf=\"p.InWarranty\">\r\n                                        <small>{{p.WarrantyDays}} Days warranty</small>\r\n                                        <small *ngIf=\"p.UniqId.length > 0\">({{p.UniqId}})</small>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\" *ngIf=\"p.Type === 'Product'\">\r\n                                      {{p.Qty}}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\">\r\n                                      $ {{p.UnitCost.toFixed(2)}}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div class=\"col-md-2\">\r\n                                    <div class=\"product-service-colun-name kt-align-right\">\r\n                                      $ {{p.Total.toFixed(2)}}\r\n                                    </div>\r\n                                  </div>\r\n                                  <hr class=\"myshap\" />\r\n                                </div>\r\n\r\n\r\n                                <div data-repeater-list=\"\" class=\"col-lg-12\">\r\n                                  <div class=\"add-invoicing-view-list-border\"></div>\r\n                                  <div class=\"kt-widget4\">\r\n                                    <div class=\"kt-widget4__item\">\r\n                                      <div class=\"col-md-6 no-spacing\">\r\n                                        <p>{{invoiceService.InvoiceData.ClientRemark}}</p>\r\n                                      </div>\r\n                                      <div class=\"col-md-6 invoicing-list-view-border-left\">\r\n                                        <div class=\"kt-widget1\">\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Subtotal</h3>\r\n\r\n                                            </div>\r\n                                            <span\r\n                                              class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.SubTotal.toFixed(2)}}</span>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Discount</h3>\r\n                                            </div>\r\n                                            <div class=\"discountSection\">\r\n                                              <div class=\"discountShow\">\r\n                                                <span\r\n                                                  class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.DiscountAmount.toFixed(2)}}</span>\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Tax</h3>\r\n                                            </div>\r\n                                            <div class=\"tax-block\">\r\n                                              <div class=\"TaxToHide\">\r\n                                                <span\r\n                                                  class=\"kt-widget1__number kt-font-success\">${{invoiceService.InvoiceData.TaxAmount.toFixed(2)}}</span>\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item quotes-list-view-total-info\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\"><b>Total</b></h3>\r\n                                            </div>\r\n                                            <span\r\n                                              class=\"kt-widget1__number kt-font-primary\"><b>${{invoiceService.InvoiceData.NetAmount.toFixed(2)}}</b></span>\r\n                                          </div>\r\n                                          <div class=\"kt-widget1__item\">\r\n                                            <div class=\"kt-widget1__info\">\r\n                                              <h3 class=\"kt-widget1__title\">Deposite balance</h3>\r\n                                            </div>\r\n                                            <span\r\n                                              class=\"kt-widget1__number kt-font-danger\">${{invoiceService.InvoiceData.ReqDepositeAmount.toFixed(2)}}</span>\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"on-site-client-required\">\r\n            <div class=\"kt-portlet kt-portlet--height-fluid kt-widget19 internal-notes-attachment\">\r\n              <div class=\"kt-portlet__head\">\r\n                <div class=\"kt-portlet__head-label\">\r\n                  <h3 class=\"kt-portlet__head-title\">\r\n                    <strong>&nbsp;&nbsp; INTERNAL NOTES &amp; ATTACHMENTS </strong>\r\n                  </h3>\r\n                </div>\r\n              </div>\r\n              <div class=\"kt-portlet__body\">\r\n                <div class=\"kt-widget19__wrapper\">\r\n                  <textarea readonly class=\"form-control\" id=\"exampleTextarea\" rows=\"3\" placeholder=\"Note details\"\r\n                    name=\"InternalNotes\" [(ngModel)]=\"invoiceService.InvoiceData.InternalNotes\"></textarea>\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-1\" *ngFor=\"let x of invoiceService.InvoiceAttachmentList\">\r\n                      <div class=\"row\">\r\n                        <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n                        <generic-ticket-icon-attachment [(Name)]=\"x.AttachmentExtension\" [(Path)]=\"x.Attachment\"\r\n                          [Status]=\"1\"></generic-ticket-icon-attachment>\r\n                        <div class=\"row\">\r\n                          <div class=\"col-md-3\"></div>\r\n                          <div class=\"col-md-3\"></div>\r\n                          <div class=\"col-md-3\">\r\n                            <a href=\"{{x.Attachment}}\" target=\"_blank\"><i class=\"fa fa-download text-success\"></i></a>\r\n                          </div>\r\n                          <div class=\"col-md-3\"></div>\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","export class ReminderBase {\r\n    Subject: string;\r\n    Body: string;\r\n    MailTo: string;\r\n    RecurringStartDate?: string;\r\n    RecurringEndDate?: string;\r\n    Duration: number;\r\n    VisitFrequency: number;\r\n    ReminderDate: string;\r\n    IsActive: boolean;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material/dialog';\nimport { Login } from 'src/app/services/login.mudule';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\n\n@Component({\n  selector: 'app-invoice-payment-and-receipt',\n  templateUrl: './invoice-payment-and-receipt.component.html',\n  styles: []\n})\nexport class InvoicePaymentAndReceiptComponent implements OnInit {\n  currentUser: Login;\n  IsShowInvStatus: string;\n  IsShowPaymentSection: string;\n  tempPaymentlist: any;\n  iAmount: number;\n  pAmount: number;\n  constructor(\n    public invoiceService: InvoiceService,\n    public dialog: MatDialog,\n    public dialogRef: MatDialogRef<InvoicePaymentAndReceiptComponent>,\n    public toastr: ToastrService,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n  ) { this.loginservice.currentUser.subscribe(x => this.currentUser = x); }\n\n  ngOnInit() {\n    \n    this.invoiceService.getPaymentModeDetails(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                   console.log(response.result);\n                  this.invoiceService.PaymentModeList = response.result;\n                  }\n    }}, error =>  console.log(error));\n    this.invoiceService.getPaymentDetailsByInvoiceNo(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.invoiceService.TotalPaymentData = response.result;\n                  }\n    }}, error =>  console.log(error));\n    this.iAmount = this.invoiceService.InvoiceData.NetAmount;\n    this.pAmount = this.invoiceService.TotalPaymentData.PaymentAmount;\n    if (this.iAmount > this.pAmount) {\n      this.IsShowPaymentSection = 'true';\n      this.invoiceService.PaymentData.PaymentAmount = this.iAmount - this.pAmount;\n    } else {\n      this.invoiceService.PaymentData.PaymentAmount = 0;\n\n      this.invoiceService.getPaymentSummary(this.invoiceService.InvoiceData.Id).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.tempPaymentlist = response.result;\n                    this.IsShowPaymentSection = 'false';\n                    }\n      }}, error =>  console.log(error));\n    }\n  }\n  setClearPaymentData() {\n    this.invoiceService.PaymentData.PaymentAmount = 0;\n    this.invoiceService.PaymentData.PaymentMethod = '';\n    this.invoiceService.PaymentData.PaymentNote = '';\n    this.invoiceService.PaymentData.TransactionId = '';\n    this.invoiceService.PaymentData.PModeId = 0;\n    this.invoiceService.PaymentData.PaymentDate = null;\n  }\n  onPaymentSubmit() {\n    if (this.invoiceService.PaymentData.PaymentAmount > this.invoiceService.InvoiceData.NetAmount) {\n      this.toastr.warning('warning', 'Invalid amount.');\n    } else {\n    this.invoiceService.PaymentData.InvoiceId = this.invoiceService.InvoiceData.Id;\n    this.invoiceService.PaymentData.InvoiceNo = this.invoiceService.InvoiceData.InvoiceId;\n    if (this.invoiceService.PaymentData.PModeId === 0) {\n      this.toastr.warning('warning', 'Select Payment mode');\n    } else if (this.invoiceService.PaymentData.PaymentAmount === 0) {\n      this.toastr.warning('warning', 'Invalid Amount');\n    } else if (this.invoiceService.PaymentData.PaymentDate === null || this.invoiceService.PaymentData.PaymentDate === undefined) {\n      this.toastr.warning('warning', 'Invalid payment date');\n    } else {\n    this.invoiceService.PaymentData.PaymentDate = new Date(Date.parse(Date()));\n    this.invoiceService.PaymentData.PModeId = Number(this.invoiceService.PaymentData.PModeId);\n\t  this.invoiceService.postPayment(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  const des = 'Amount of : $ ' +\n                  this.invoiceService.PaymentData.PaymentAmount + '0.00, received against Invoice No : '\n                  + this.invoiceService.InvoiceData.InvoiceId +\n                  ', from Customer : ' + this.invoiceService.InvoiceData.CustomerName +\n                    ', by user : ' + this.currentUser.UserName + ', on dated : ' + new Date();\n                  const Activity =  ' Payment of : $ ' + this.invoiceService.PaymentData.PaymentAmount +\n                  'received against invoice no : ' + this.invoiceService.InvoiceData.InvoiceId ;\n                  this.logService.postUserLog(this.currentUser.Id, this.currentUser.UserName, 'Payment', 'Added',\n                  this.invoiceService.InvoiceData.Id , des, Activity ).subscribe();\n        \n                  this.invoiceService.PaymentData = {\n                    Id: '00000000-0000-0000-0000-000000000000',\n                    InvoiceId: '00000000-0000-0000-0000-000000000000',\n                    InvoiceNo: '',\n                    PaymentAmount: 0,\n                    BalanceAmount: 0,\n                    PaymentDate: new Date(),\n                    PModeId: 0,\n                    PaymentMethod: '',\n                    TransactionId: '',\n                    PaymentNote: '',\n                    CreatedDate: new Date(),\n                    UpdatedDate: new Date(),\n                    Status: '',\n                    SendOutStatus: '',\n                    PaymentModeList: []\n                  };\n                  this.IsShowPaymentSection = 'false';\n                  this.invoiceService.getPaymentDetailsByInvoiceNo(this.invoiceService.InvoiceData.Id, this.currentUser.Token).subscribe( res => {\n                    if (res) { const response = res as any;\n                               if (response.Message === 'success') {\n                                this.invoiceService.TotalPaymentData = response.result;\n                                }\n                  }}, error =>  console.log(error));\n                  this.invoiceService.getPaymentSummary(this.invoiceService.InvoiceData.Id);\n                  this.dialogRef.close();\n                  }\n                  if (response.Message === 'failure') {\n                    this.toastr.warning(response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n    }\n  }\n  }\n  EmailReciptPDF() {\n    if (confirm('Are you sure want to send payment slip on email.')) {\n      this.invoiceService.emailPaymentReceipt(this.invoiceService.InvoiceData.Id);\n      this.toastr.success('success', 'Payment receipt send to your registered email');\n    }\n  }\n}\n","<style>\r\n.paymnetprintsection a, .paymnetprintsection button{\r\n  border: none;\r\n    background-color: #3c4596;\r\n    color: white;\r\n    padding: 5px 10px;\r\n    margin: 0 3px 0 0;\r\n    cursor: pointer;\r\n}\r\n  .paywidth-section {\r\n    width: 90%;\r\n  }\r\n\r\n  .payButtonSection {\r\n    margin: 0 40px 0 0;\r\n    text-align: right;\r\n  }\r\n\r\n  .receiptsection {\r\n    padding: 4px 5px 4px 5px;\r\n  }\r\n\r\n  .paymnetprintsection {\r\n    text-align: right;\r\n  }\r\n\r\n  .paymentHeadingSection {\r\n    margin: 34px 0 54px 0;\r\n  }\r\n\r\n    .paymentHeadingSection h1 {\r\n      font-size: 17px;\r\n    }\r\n\r\n  .totalAmountSection {\r\n    background: #84c529;\r\n    padding: 4px 26px;\r\n    text-align: center;\r\n    color: #fff;\r\n    margin-top: 25px;\r\n    font-size: 16px;\r\n  }\r\n  .mat-dialog-container{\r\n    padding: 6px 6px 4px 12px !important;\r\n  }\r\n  .modal-header.select-new-properties{\r\n    padding: 0 !important;\r\n  }\r\n  .kt-widget2__checkbox.paywidth-section{\r\n    padding: 4px 0px 0px 35px !important;\r\n  }\r\n  .ppp{\r\n    padding: 0px 0px 0px 0px !important;\r\n    margin-bottom: 9px !important;\r\n  }\r\n</style>\r\n<div class=\"modal-header select-new-properties\">\r\n  <h5 class=\"modal-title\" id=\"exampleModalLabel\">Payment & Receipt</h5>\r\n  <button class=\"btn btn-default pull-right\" mat-dialog-close>x</button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <div>\r\n    <div class=\"tab-pane\" id=\"kt_widget2_tab3_content\">\r\n      <div class=\"paymentsection\" *ngIf=\"IsShowPaymentSection==='true'\">\r\n        <form #form=\"ngForm\" autocomplete=\"off\" (submit)=\"onPaymentSubmit()\">\r\n          <div class=\"kt-widget2\">\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Amount Received</label>\r\n                <input type=\"number\" min=\"0\" minlength=\"0\" #PaymentAmount=\"ngModel\" name=\"PaymentAmount\" [(ngModel)]=\"invoiceService.PaymentData.PaymentAmount\" placeholder=\"Amount\" class=\"form-control\" required />\r\n                <div *ngIf=\"PaymentAmount.invalid && (PaymentAmount.dirty || PaymentAmount.touched)\"\r\n                     class=\"alert alert-danger\">\r\n                  <div *ngIf=\"PaymentAmount.errors.required\">\r\n                    Amount is required\r\n                  </div>\r\n                  <div *ngIf=\"PaymentAmount.errors.minlength\">\r\n                    envalid amount\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Payment Date</label>\r\n                <input type=\"text\" class=\"form-control\" #PaymentDate=\"ngModel\" ngbDatepicker (click)=\"datePickerPaymentDate.toggle()\"\r\n                       #datePickerPaymentDate=\"ngbDatepicker\" name=\"PaymentDate\" [(ngModel)]=\"invoiceService.PaymentData.PaymentDate\" placeholder=\"dd/MM/yyyy\" required />\r\n\r\n                <div *ngIf=\"PaymentDate.invalid && (PaymentDate.dirty || PaymentDate.touched)\"\r\n                     class=\"alert alert-danger\">\r\n                  <div *ngIf=\"PaymentDate.errors.required\">\r\n                    Payment date is required\r\n                  </div>\r\n                  <div *ngIf=\"PaymentDate.errors.minlength\">\r\n                    Envalid payment date\r\n                  </div>\r\n                  <div *ngIf=\"PaymentDate.errors.touched\">\r\n                    Envalid payment date\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Payment Mode</label>\r\n                <select class=\"form-control\" name=\"PModeId\" [(ngModel)]=\"invoiceService.PaymentData.PModeId\">\r\n                  <option *ngFor=\"let p of invoiceService.PaymentModeList\" value=\"{{p.Id}}\">{{p.ModeName}}</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Payment Method</label>\r\n                <input name=\"PaymentMethod\" #PaymentMethod=\"ngModel\" [(ngModel)]=\"invoiceService.PaymentData.PaymentMethod\" required placeholder=\"Payment Method\" class=\"form-control\" />\r\n                <div *ngIf=\"PaymentMethod.invalid && (PaymentMethod.dirty || PaymentMethod.touched)\"\r\n                     class=\"alert alert-danger\">\r\n                  <div *ngIf=\"PaymentMethod.errors.required\">\r\n                    Payment Mathod is Required.\r\n                  </div>\r\n                  <div *ngIf=\"PaymentMethod.errors.minlength\">\r\n                    Invalid Payment Pethod.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Transaction ID</label>\r\n                <input name=\"TransactionId\" [(ngModel)]=\"invoiceService.PaymentData.TransactionId\" placeholder=\"Transaction ID\" class=\"form-control\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"kt-widget2__item kt-widget2__item--warning ppp\">\r\n              <div class=\"kt-widget2__checkbox paywidth-section\">\r\n                <label>Ramark</label>\r\n                <textarea name=\"PaymentNote\" [(ngModel)]=\"invoiceService.PaymentData.PaymentNote\" placeholder=\"Payment Note\" class=\"form-control\"></textarea>\r\n              </div>\r\n            </div>\r\n            <div class=\"payButtonSection\">\r\n              <button type=\"button\" (click)=\"setClearPaymentData()\" class=\"btn btn-warning\">Clear</button> &nbsp;\r\n              <button type=\"submit\" class=\"btn btn-primary\">Save</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"receiptsection\" *ngIf=\"IsShowPaymentSection==='false'\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-3\">\r\n            <div class=\"paymentreceiptSection\">\r\n              <h4>Payment</h4>\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"col-md-9\">\r\n            <div class=\"paymnetprintsection\">\r\n              <span>\r\n                <span class=\"PrintSerction\">\r\n                  <button\r\n                          printSectionId=\"frmPrintReceipt\"\r\n                          ngxPrint>\r\n                    <i class=\"fa fa-print\" aria-hidden=\"true\"></i>\r\n                  </button>\r\n\r\n                </span>\r\n                <span class=\"PDFSerction\">\r\n                  <a href=\"javascript:void(0);\" (click)=\"EmailReciptPDF()\"> <i class=\"fa fa-envelope\" aria-hidden=\"true\"></i></a>\r\n                </span>\r\n                <span class=\"CloseSerction\">\r\n                  <a href=\"javascript:void(0);\" mat-dialog-close> <i class=\"fa fa-times\" aria-hidden=\"true\"></i></a>\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr>\r\n        <div class=\"row frmPrintReceipt\" id=\"frmPrintReceipt\">\r\n          <div class=\"col-md-12\" *ngFor=\"let p of tempPaymentlist.paymentSummary\">\r\n            <div class=\"payrmentPrintSection\">\r\n              <div class=\"paymentHeadingSection\">\r\n                <h1>PAYMENT RECEIPT</h1>\r\n              </div>\r\n            </div>\r\n            <div class=\"paymentDateSection\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <span>Payment Date: </span>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <span>{{p.PaymentDate | date}} </span>\r\n                </div>\r\n              </div>\r\n              <hr>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <span>Payment Mode: </span>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <span> {{p.PaymentMode}}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"totalAmountSection\">\r\n                  <h3>Total Amount</h3>\r\n                  <p>$ {{p.InvoiceAmount}}.00</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"invoiceDtSection\">\r\n              <h2>Payment For</h2>\r\n              <div class=\"InvoiceDtTable\">\r\n                <table class=\"table table-striped table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Invoice Number</th>\r\n                      <th>Invoice Date</th>\r\n                      <th>Invoice Amount</th>\r\n                      <th>Payment Amount</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td>{{p.InvoiceNo}}</td>\r\n                      <td>{{p.InvoiceDate | date}}</td>\r\n                      <td>${{p.InvoiceAmount}}.00</td>\r\n                      <td>${{p.PaymentAmount}}.00</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, AfterViewInit, OnDestroy } from '@angular/core';\nimport { MatDialogConfig, MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { InvoiceCustomerPopupComponent } from '../invoice-customer-popup/invoice-customer-popup.component';\nimport { CustomerService } from '../../../services/customer.service';\nimport { TicketService } from '../../../services/ticket.service';\nimport { InvoiceTicketPopupComponent } from '../invoice-ticket-popup/invoice-ticket-popup.component';\nimport { InvoiceService } from '../../../services/invoice.service';\nimport { Invoice } from '../../../services/invoice.module';\nimport { PropertyService } from '../../../services/property.service';\nimport { Login } from 'src/app/services/login.mudule';\nimport { UserlogService } from 'src/app/services/userlog.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { QuoteService } from '../../../services/quote.service';\nimport { Customer } from '../../../services/customer.model';\nimport { Property } from '../../../services/property.model';\nimport { Subject } from 'rxjs/internal/Subject';\nimport { GenicProfileService } from '../../../services/genicprofile.service';\nimport { Title } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-invoice-list',\n  templateUrl: './invoice-list.component.html',\n  styles: []\n})\nexport class InvoiceListComponent implements OnInit, AfterViewInit, OnDestroy {\n  dtOptions: DataTables.Settings = {};\n  dtTrigger: Subject<any> = new Subject();\n  customerData: Customer;\n  customerPropertyData: Property;\n  currentUser: Login;\n  TotalInvoice: number;\n  TotalDraftInvoice: number;\n  TotalCancelledInvoice: number;\n  TotalPaidInvoices: number;\n  TotalUnpaidInvoice: number;\n  TotalOverDueInvoice: number;\n  TotalSendOutParticalPaidInvoice: number;\n  localInvoiceDueDate: Date;\n  constructor(\n    public titleService: Title,\n    public dialog: MatDialog,\n    public router: Router,\n    public customerService: CustomerService,\n    public ticketService: TicketService,\n    public invoiceService: InvoiceService,\n    public propertyservice: PropertyService,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n    public quoteService: QuoteService,\n    public propertyService: PropertyService,\n    public genicprofileservice: GenicProfileService\n  ) { this.loginservice.currentUser.subscribe(x => this.currentUser = x); }\n\n  ngOnInit() {\n    if (!this.currentUser.Permissions.InvoiceView) { this.router.navigate(['/dashboard']); }\n    this.genicprofileservice.TicketFilter.IsReady = false;\n    this.genicprofileservice.TicketFilter.IsReadyQuote = false;\n    this.dtOptions = { pagingType: 'full_numbers', paging: true, ordering: false, lengthMenu: [5, 10, 25, 50, 75, 100] };\n    this.invoiceService.refreshInvoiceList(this.currentUser.Token);\n    this.titleService.setTitle('Invoices | Genic Solution');\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.TotalInvoice = this.invoiceService.InvoiceList.length;\n      this.TotalDraftInvoice = this.invoiceService.InvoiceList.filter(a => a.Status === 'Draft').length;\n      this.TotalCancelledInvoice = this.invoiceService.InvoiceList.filter(a => a.Status === 'cancelled').length;\n      this.TotalSendOutParticalPaidInvoice = this.invoiceService.InvoiceList.filter(a => a.Status === 'PartiallyPaid').length;\n      this.TotalPaidInvoices = this.invoiceService.InvoiceList.filter(a => a.Status === 'SendOutPaid').length;\n      this.TotalUnpaidInvoice = this.invoiceService.InvoiceList.filter(a => a.Status === 'SendOutUnPaid').length;\n      this.TotalOverDueInvoice = this.invoiceService.InvoiceList.filter(a => a.Status === 'SendOutOverDue').length;\n    }, 100);\n    setTimeout(() => {\n      this.dtTrigger.next();\n    }, 1000);\n  }\n  ngOnDestroy() {\n    this.dtTrigger.unsubscribe();\n  }\n  OpenAddCustomerToInvoiceDialog() {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '50%';\n    dialogConfig.data = {};\n    this.dialog.open(InvoiceCustomerPopupComponent, dialogConfig).afterClosed().subscribe(res => {\n      if (res !== '') {\n        this.customerService.formData.Id = res.c.Id;\n        this.customerService.formData.CustomerId = res.c.CustomerId;\n        this.customerService.formData.NameTitle = res.c.NameTitle;\n        this.customerService.formData.FirstName = res.c.FirstName;\n        this.customerService.formData.LastName = res.c.LastName;\n        this.customerService.formData.CompanyName = res.c.CompanyName;\n        this.customerData = new Customer();\n        this.customerData = res.c;\n        this.OpenAddTicketToInvoiceDialog();\n      }\n    });\n  }\n  OpenAddTicketToInvoiceDialog() {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '60%';\n    dialogConfig.data = {};\n    this.dialog.open(InvoiceTicketPopupComponent, dialogConfig).afterClosed().subscribe(res => {\n      if (res !== undefined) {\n        if(res !== ''){\n        if (res.x) {\n          this.invoiceService.postTempInvoice(this.currentUser.Token).subscribe(res0 => {\n            if (res0) {\n              const response = res0 as any;\n              if (response.Message === 'success') {\n                this.invoiceService.InvoiceData = response.result;\n                this.ticketService.formData = Object.assign({}, res.x);\n                this.invoiceService.InvoiceData.InvoiceConvertedFrom = 'TICKET';\n                this.invoiceService.InvoiceData.InvoiceConvertedID = res.x.Id;\n                this.invoiceService.InvoiceData.Status = 'Draft';\n                this.invoiceService.InvoiceData.InvoiceTitle = res.x.Title;\n                this.invoiceService.InvoiceData.Description = res.x.Description;\n                this.invoiceService.InvoiceData.CustomerName = res.x.CustomerName;\n                this.invoiceService.InvoiceData.CustomerId = res.x.CustomerId;\n                this.invoiceService.InvoiceData.PropertyId = res.x.PropertyId;\n                this.invoiceService.InvoiceData.CustomerContactNo = res.x.CustomerContactNo;\n                this.invoiceService.InvoiceData.CustomerEmail = res.x.CustomerEmail;\n                this.invoiceService.InvoiceData.CustomerAddress = res.x.CustomerAddress;\n                this.invoiceService.InvoiceData.ClientRemark = res.x.Description;\n                this.invoiceService.InvoiceData.InternalNotes = res.x.InternalNoteDescription;\n                this.invoiceService.InvoiceData.NetAmount = res.x.NetAmount;\n                this.invoiceService.InvoiceData.SubTotal = 0;\n                this.invoiceService.InvoiceData.TicketId = res.x.TicketId;\n                this.invoiceService.InvoiceData.TaxAmount = 0;\n                this.invoiceService.InvoiceData.TaxId = 0;\n                this.invoiceService.InvoiceData.TaxRate = 0;\n                this.invoiceService.InvoiceData.DiscountType = 0;\n                this.invoiceService.InvoiceData.DiscountTextValue = 0;\n                this.invoiceService.InvoiceData.DiscountAmount = 0;\n                this.invoiceService.InvoiceData.ReqDepositeAmount = 0;\n                this.invoiceService.InvoiceData.ReqDepositeTextValue = 0;\n                this.invoiceService.InvoiceData.ReqDepositeType = 0;\n                this.invoiceService.posTciketitemToInvoiceItemTicketId(res.x.Id, this.invoiceService.InvoiceData.Id);\n                this.propertyService.formData = new Property();\n                this.propertyService.getPropertyData(res.x.PropertyId);\n                this.router.navigate(['/invoices/invoice-from-ticket']);\n              }\n            }\n          }, error => console.log(error));\n        } else if (res.q) {\n          this.invoiceService.postTempInvoice(this.currentUser.Token).subscribe(res1 => {\n            if (res1) {\n              const response = res1 as any;\n              if (response.Message === 'success') {\n                this.invoiceService.InvoiceData = response.result;\n                this.quoteService.QuoteData = Object.assign({}, res.q);\n                this.invoiceService.InvoiceData.InvoiceConvertedFrom = 'QUOTE';\n                this.invoiceService.InvoiceData.InvoiceConvertedID = res.q.Id;\n                this.invoiceService.InvoiceData.Status = 'Draft';\n                this.invoiceService.InvoiceData.InvoiceTitle = res.q.JobTitle;\n                this.invoiceService.InvoiceData.Description = res.q.Attention;\n                this.invoiceService.InvoiceData.RefranceNo = res.q.SalesRepresentative;\n                this.invoiceService.InvoiceData.CustomerName = res.q.CustomerName;\n                this.invoiceService.InvoiceData.CustomerId = res.q.CustomerId;\n                this.invoiceService.InvoiceData.PropertyId = res.q.PropertyId;\n                this.invoiceService.InvoiceData.CustomerContactNo = res.q.CustomerContactNo;\n                this.invoiceService.InvoiceData.CustomerEmail = res.q.CustomerEmail;\n                this.invoiceService.InvoiceData.CustomerAddress = res.q.CustomerAddress;\n                this.invoiceService.InvoiceData.ClientRemark = res.q.ClientRemark;\n                this.invoiceService.InvoiceData.InternalNotes = res.q.InternalNotes;\n                this.invoiceService.InvoiceData.NetAmount = res.q.NetAmount;\n                this.invoiceService.InvoiceData.SubTotal = res.q.SubTotal;\n                this.invoiceService.InvoiceData.TaxAmount = res.q.TaxAmount;\n                this.invoiceService.InvoiceData.TaxId = res.q.TaxId;\n                this.invoiceService.InvoiceData.TaxRate = res.q.TaxRate;\n                this.invoiceService.InvoiceData.DiscountType = res.q.DiscountType;\n                this.invoiceService.InvoiceData.DiscountTextValue = res.q.DiscountTextValue;\n                this.invoiceService.InvoiceData.DiscountAmount = res.q.DiscountAmount;\n                this.invoiceService.InvoiceData.ReqDepositeAmount = res.q.ReqDepositeAmount;\n                this.invoiceService.InvoiceData.ReqDepositeTextValue = res.q.ReqDepositeTextValue;\n                this.invoiceService.InvoiceData.ReqDepositeType = res.q.ReqDepositeType;\n                this.invoiceService.InvoiceData.QuoteId = res.q.QuoteId;\n                this.invoiceService.posQuoteItemToInvoiceItem(res.q.Id, this.invoiceService.InvoiceData.Id);\n                this.propertyService.formData = new Property();\n                this.propertyService.getPropertyData(res.q.PropertyId);\n                this.router.navigate(['/invoices/invoice-from-quote']);\n              }\n            }\n          }, error => console.log(error));\n        }\n      }\n      }\n    });\n  }\n  popolateInvoice(i: Invoice) {\n    this.invoiceService.InvoiceData = Object.assign({}, i);\n    this.propertyService.formData = new Property();\n    this.propertyService.getPropertyData(i.PropertyId);\n    this.router.navigate(['/invoices/invoice-edit']);\n  }\n  getInvoiceDetails(i: Invoice) {\n    this.invoiceService.InvoiceData = i;\n    this.router.navigate(['/invoices/invoice-details']);\n  }\n  viewQuoteDetails(Id: string) {\n    this.quoteService.getQuoteDetails(Id)\n   .subscribe( res => {\n     if (res) {\n      let obj: any = new Object();\n      obj = res;\n      this.quoteService.QuoteData = obj;\n      this.quoteService.getQuoteItems(this.currentUser.Token, this.quoteService.QuoteData.Id).subscribe( res => {\n       if (res) { const response = res as any;\n                  if (response.Message === 'success') {\n                     this.quoteService.QuoteItemList = response.result;\n                   }\n     }}, error =>  console.log(error));\n      this.quoteService.getQuoteAttachments(Id);\n \n      setTimeout(() => {\n       this.router.navigate(['/quotes/quote-Details']);\n      }, 1000);\n     }\n   }, error =>  console.log(error)) ;\n  }\n  OnTicketDetails(Id: string) {\n    this.ticketService.getTicketById(this.currentUser.Token, Id).subscribe( res => {\n      if (res) { const response = res as any;\n        this.ticketService.formData = response.result;\n        this.router.navigate(['/tickets/ticket-view-detail/']);\n      }\n    }, error =>  console.log(error));\n  }\n}\n","<style>\r\n  .addInvoiceSection {\r\n    text-align: right;\r\n    /*padding-top: 14px;*/\r\n  }\r\n\r\n  .invoice-summary {\r\n    margin: 66px 0 0 0;\r\n  }\r\n\r\n  .summary-head h3 {\r\n    border-bottom: 2px solid #ccc3c3;\r\n    width: 59%;\r\n    margin: 0 0px 18px 2px;\r\n    font-size: 17px;\r\n  }\r\n  .dropdown-menu{\r\n    min-width: 80px !important;\r\n  }\r\n  .dropdown-menu li{\r\n    border-bottom: 1px solid gainsboro;\r\n  }\r\n  .dropdown-menu li:last-child{\r\n    border-bottom: none;\r\n  }\r\n  .dropdown-menu li:hover{\r\n    background-color: #ff8533 !important;\r\n  }\r\n  .dropdown-menu li a:hover{  \r\n    color: #fff !important;\r\n  }\r\n .btn.btn-primary{background-color:#FF8533;border-color:transparent;}\r\n</style>\r\n<div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\r\n  <div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\r\n    <div class=\"kt-container kt-container--fluid breadcud-kt-container \">\r\n      <div class=\"kt-subheader__main\">\r\n        <h3 class=\"kt-subheader__title\">\r\n          <a href=\"javascript:;\" routerLink=\"/dashboard\">\r\n            Dashboard\r\n        </a>\r\n        </h3>\r\n        <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n        <div class=\"kt-subheader__breadcrumbs\">\r\n          <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n          <span class=\"kt-subheader__breadcrumbs-separator\"></span> \r\n          Invoices\r\n        </div>\r\n      </div>\r\n      <div class=\"kt-subheader__toolbar\">\r\n        <div class=\"kt-subheader__wrapper\">\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"customer-list-main-section\">\r\n\r\n    <div class=\"kt-widget17\">\r\n      <div class=\"kt-widget17__stats\">\r\n        <div class=\"row mrg-top-10\">\r\n          <div class=\"col-lg-3\">\r\n            <div class=\"kt-portlet kt-iconbox kt-iconbox--brand kt-iconbox--animate-slower\">\r\n              <div class=\"kt-portlet__body\">\r\n                <div class=\"kt-iconbox__body\">\r\n                  <div class=\"kt-iconbox__icon\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" class=\"kt-svg-icon\">\r\n                      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n                        <rect id=\"bound\" x=\"0\" y=\"0\" width=\"24\" height=\"24\"></rect>\r\n                        <path d=\"M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z\" id=\"Combined-Shape\" fill=\"#000000\" opacity=\"0.3\"></path>\r\n                        <path d=\"M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z\" id=\"Combined-Shape\" fill=\"#000000\"></path>\r\n                        <rect id=\"Rectangle-152\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"9\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-2\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"9\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-3\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"13\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"13\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-5\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"17\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-4\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"17\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                      </g>\r\n                    </svg>\r\n                  </div>\r\n                  <div class=\"kt-iconbox__desc\">\r\n                    <h3 class=\"kt-iconbox__title\">\r\n                      <a class=\"kt-link\">Total Invoices</a>\r\n                    </h3>\r\n                    <div class=\"kt-iconbox__content\">\r\n                      {{TotalInvoice}} Total Invoices\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-3\">\r\n            <div class=\"kt-portlet kt-iconbox kt-iconbox--success kt-iconbox--animate-slow\">\r\n              <div class=\"kt-portlet__body\">\r\n                <div class=\"kt-iconbox__body\">\r\n                  <div class=\"kt-iconbox__icon\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" class=\"kt-svg-icon\">\r\n                      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n                        <rect id=\"bound\" x=\"0\" y=\"0\" width=\"24\" height=\"24\"></rect>\r\n                        <path d=\"M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z\" id=\"Combined-Shape\" fill=\"#000000\" opacity=\"0.3\"></path>\r\n                        <path d=\"M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z\" id=\"Combined-Shape\" fill=\"#000000\"></path>\r\n                        <rect id=\"Rectangle-152\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"9\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-2\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"9\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-3\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"13\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"13\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-5\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"17\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-4\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"17\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                      </g>\r\n                    </svg>\r\n                  </div>\r\n                  <div class=\"kt-iconbox__desc\">\r\n                    <h3 class=\"kt-iconbox__title\">\r\n                      <a class=\"kt-link\">Draft Invoices</a>\r\n                    </h3>\r\n                    <div class=\"kt-iconbox__content\">\r\n                        {{TotalDraftInvoice}} Draft Invoices\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-3\">\r\n            <div class=\"kt-portlet kt-iconbox kt-iconbox--warning kt-iconbox--animate-fast\">\r\n              <div class=\"kt-portlet__body\">\r\n                <div class=\"kt-iconbox__body\">\r\n                  <div class=\"kt-iconbox__icon\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" class=\"kt-svg-icon\">\r\n                      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n                        <rect id=\"bound\" x=\"0\" y=\"0\" width=\"24\" height=\"24\"></rect>\r\n                        <path d=\"M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z\" id=\"Combined-Shape\" fill=\"#000000\" opacity=\"0.3\"></path>\r\n                        <path d=\"M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z\" id=\"Combined-Shape\" fill=\"#000000\"></path>\r\n                        <rect id=\"Rectangle-152\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"9\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-2\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"9\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-3\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"13\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"13\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-5\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"17\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-4\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"17\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                      </g>\r\n                    </svg>\r\n                  </div>\r\n                  <div class=\"kt-iconbox__desc\">\r\n                    <h3 class=\"kt-iconbox__title\">\r\n                      <a class=\"kt-link\">Paid Invoices</a>\r\n                    </h3>\r\n                    <div class=\"kt-iconbox__content\">\r\n                      {{TotalPaidInvoices}} Paid Invoices\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-lg-3\">\r\n            <div class=\"kt-portlet kt-iconbox kt-iconbox--danger kt-iconbox--animate-faster\">\r\n              <div class=\"kt-portlet__body\">\r\n                <div class=\"kt-iconbox__body\">\r\n                  <div class=\"kt-iconbox__icon\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" class=\"kt-svg-icon\">\r\n                      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n                        <rect id=\"bound\" x=\"0\" y=\"0\" width=\"24\" height=\"24\"></rect>\r\n                        <path d=\"M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z\" id=\"Combined-Shape\" fill=\"#000000\" opacity=\"0.3\"></path>\r\n                        <path d=\"M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z\" id=\"Combined-Shape\" fill=\"#000000\"></path>\r\n                        <rect id=\"Rectangle-152\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"9\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-2\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"9\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-3\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"13\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"13\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-5\" fill=\"#000000\" opacity=\"0.3\" x=\"7\" y=\"17\" width=\"2\" height=\"2\" rx=\"1\"></rect>\r\n                        <rect id=\"Rectangle-152-Copy-4\" fill=\"#000000\" opacity=\"0.3\" x=\"10\" y=\"17\" width=\"7\" height=\"2\" rx=\"1\"></rect>\r\n                      </g>\r\n                    </svg>\r\n                  </div>\r\n                  <div class=\"kt-iconbox__desc\">\r\n                    <h3 class=\"kt-iconbox__title\">\r\n                      <a class=\"kt-link\">Unpaid Invoices</a>\r\n                    </h3>\r\n                    <div class=\"kt-iconbox__content\">\r\n                      {{TotalUnpaidInvoice}} Unpaid Invoices\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"kt-section kt-drop-section\">\r\n          <div class=\"kt-section__content\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-12 no-spacing\">\r\n                <div class=\"\">\r\n                  <div class=\"col\" style=\"margin: 0;padding: 0;\" *ngIf=\"currentUser.Permissions.InvoiceCreate\">\r\n                    <div class=\"addInvoiceSection\">\r\n                      <a href=\"javascript:void(0);\" (click)=\"OpenAddCustomerToInvoiceDialog()\" class=\"btn btn-primary\">New Invoice</a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"kt-portlet__body customer-listing-datatable\">\r\n            <div class=\"dataTables_wrapper dt-bootstrap4 no-footer\">\r\n              <div class=\"row\">\r\n                <div class=\"col-sm-12\">\r\n                  <div class=\"panel panel-primary list-panel\" id=\"list-panel\">\r\n                    <div class=\"panel-heading list-panel-heading\">\r\n                        <h1 class=\"panel-title list-panel-title\"><i class=\"fa fa-list\"></i> Invoice List</h1>\r\n                        \r\n                    </div>\r\n                    <div class=\"panel-body\">\r\n                      <table datatable [dtOptions]=\"dtOptions\" [dtTrigger]=\"dtTrigger\" class=\"table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline\" style=\"width: 1064px;\">\r\n                        <thead>\r\n                          <tr role=\"row\">\r\n                            <th style=\"width: 5%;\">Invoice&nbsp;No</th> \r\n                            <th style=\"width: 15%;\">Date</th>\r\n                            <th style=\"width: 10%;\">Title</th>\r\n                            <th style=\"width: 30%;\">Customer Info</th>\r\n                            <th style=\"width: 20%;\">Amount</th>\r\n                            <th style=\"width: 10%;\">Status</th>\r\n                            <th style=\"width: 10%;\">Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr class=\"invoice-list-view-info odd\" role=\"row\" *ngFor=\"let i of invoiceService.InvoiceList; let ii=index\">\r\n                            <td tabindex=\"0\" class=\"sorting_1\">\r\n                              <span class=\"btn btn-label-danger btn-pill invoices-btn\"><a href=\"javascript:;\" (click)=\"getInvoiceDetails(i)\">{{i.InvoiceId}}</a><br></span>\r\n                              <span *ngIf=\"i.TicketId!\" class=\"btn btn-label-primary\"><a href=\"javascript:;\" (click)=\"OnTicketDetails(i.InvoiceConvertedID)\">{{i.TicketId}}</a><br></span>\r\n                              <span *ngIf=\"i.QuoteId!\" class=\"btn btn-label-success btn-pill reallocated-one\"><a href=\"javascript:;\" (click)=\"viewQuoteDetails(i.InvoiceConvertedID)\">{{i.QuoteId}}</a></span>\r\n                            </td> \r\n                             <td>\r\n                                <strong> Invoice Date: </strong> <br> {{i.InvoiceDate | date}} <br>\r\n                                <strong> Due Date: </strong> <br> {{i.InvoiceDueDate | date}}\r\n                              </td>\r\n                             <td>{{i.InvoiceTitle}}</td>\r\n                            <td>\r\n                           <strong>Name: </strong>   {{i.CustomerName}} <br>\r\n                           <strong>Company: </strong>   {{i.CompanyName}}\r\n                            </td>\r\n                          \r\n                            \r\n                            <td>\r\n                             <strong>Total: </strong> ${{i.SubTotal}} <br>\r\n                             <!-- <strong>Discount: </strong> ${{i.DiscountAmount}} <br> -->\r\n                             <strong>Tax: </strong> ${{i.TaxAmount}} <br>\r\n                             <strong>Net Amount: </strong> ${{i.SubTotal}} <br>\r\n                             <strong>Deposite: </strong> ${{i.ReqDepositeAmount}}\r\n                            </td>\r\n                            <td>\r\n                              <span *ngIf=\"i.Status==='Draft'\">\r\n                                <span class=\"btn btn-label-info\"> Draft </span>\r\n                              </span>\r\n                              <span *ngIf=\"i.Status==='SendOutPaid'\">\r\n                                <span class=\"btn btn-label-primary\"> Paid </span>\r\n                              </span>\r\n                              <span *ngIf=\"i.Status==='SendOutUnPaid'\">\r\n                                <span class=\"btn btn-label-primary\">Un Paid </span>\r\n                              </span> \r\n                              <span *ngIf=\"i.Status==='SendOutOverDue'\">\r\n                                <span class=\"btn btn-label-primary\">Over Due </span>\r\n                              </span> \r\n                              <span *ngIf=\"i.Status==='PartiallyPaid'\">\r\n                                <span class=\"btn btn-label-primary\">Partially Paid </span>\r\n                              </span> \r\n                              <span *ngIf=\"i.Status==='cancelled'\">\r\n                                <span class=\"btn btn-label-warning\"> Cancelled </span>\r\n                              </span>\r\n                            </td>\r\n                            <td nowrap=\"\">\r\n                                <span class=\"dropdown\">\r\n                                  <div class=\"btn-group btn-group-sm\">\r\n                                    <button class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">Action <span class=\"caret\"></span></button>\r\n                                    <ul class=\"dropdown-menu\">\r\n                                      <li *ngIf=\"currentUser.Permissions.InvoiceEdit\"><a (click)=\"popolateInvoice(i)\" href=\"javascript:void(0);\">Edit</a></li>\r\n                                      <li *ngIf=\"currentUser.Permissions.InvoiceView\"><a (click)=\"getInvoiceDetails(i)\" href=\"javascript:void(0);\">View</a></li>\r\n                                    </ul>\r\n                                  </div>\r\n                                </span>\r\n                              </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                  <!--end: Datatable -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common'; \r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { DataTablesModule } from 'angular-datatables';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { MatNativeDateModule } from '@angular/material/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { FileUploadModule } from 'ng2-file-upload';\r\nimport { GooglePlaceModule } from 'ngx-google-places-autocomplete';\r\nimport { LSelect2Module } from 'ngx-select2';\r\nimport { SelectDropDownModule } from 'ngx-select-dropdown';\r\nimport { NgMultiSelectDropDownModule } from 'ng-multiselect-dropdown';\r\n\r\nimport { InvoiceAddComponent } from './invoice-add/invoice-add.component';\r\nimport { InvoiceChangeStatusPopupComponent } from './invoice-change-status-popup/invoice-change-status-popup.component';\r\nimport { InvoiceCustomerPopupComponent } from './invoice-customer-popup/invoice-customer-popup.component';\r\nimport { InvoiceDetailsComponent } from './invoice-details/invoice-details.component';\r\nimport { InvoiceListComponent } from './invoice-list/invoice-list.component';\r\nimport { InvoicePaymentAndReceiptComponent } from './invoice-payment-and-receipt/invoice-payment-and-receipt.component';\r\nimport { InvoicePlaneInvoiceCustomerPropertyPopupComponent } from './invoice-plane-invoice-customer-property-popup/invoice-plane-invoice-customer-property-popup.component';\r\nimport { InvoiceTicketPopupComponent } from './invoice-ticket-popup/invoice-ticket-popup.component';\r\nimport { InvoicesComponent } from './invoices.component';\r\nimport { ReminderModuleModule } from 'src/app/generic-utils/Reminder-Module/ReminderModule.module';\r\nimport { TicketIconAttachmentModule } from 'src/app/generic-utils/Ticket-Icon-Attachment/TicketIconAttachment.module';\r\nconst routes: Routes = [\r\n  { path: '', component: InvoicesComponent,\r\n            children: [\r\n              { path: '', component: InvoiceListComponent },\r\n              { path: 'invoice-add', component: InvoiceAddComponent },\r\n              { path: 'invoice-edit', component: InvoiceAddComponent },\r\n              { path: 'invoice-details', component: InvoiceDetailsComponent },\r\n              { path: 'invoice-add-customer', component: InvoiceCustomerPopupComponent },\r\n              { path: 'invoice-add-ticket', component: InvoiceTicketPopupComponent },\r\n              { path: 'invoice-add-Plane-Invoice-cust-property', component: InvoicePlaneInvoiceCustomerPropertyPopupComponent },\r\n              { path: 'invoice-add-plane-url', component: InvoiceAddComponent },\r\n              { path: 'invoice-change-status', component: InvoiceChangeStatusPopupComponent },\r\n              { path: 'invoice-from-quote', component: InvoiceAddComponent },\r\n              { path: 'invoice-from-ticket', component: InvoiceAddComponent },\r\n              { path: 'invoice-payment-and-receipt', component: InvoicePaymentAndReceiptComponent },\r\n            ]},\r\n];\r\n@NgModule({\r\n  declarations: [\r\n    InvoicesComponent,\r\n    InvoiceListComponent,\r\n    InvoiceAddComponent,\r\n    InvoiceDetailsComponent,\r\n    InvoiceCustomerPopupComponent,\r\n    InvoiceTicketPopupComponent,\r\n    InvoicePlaneInvoiceCustomerPropertyPopupComponent,\r\n    InvoiceChangeStatusPopupComponent,\r\n    InvoicePaymentAndReceiptComponent\r\n    ],\r\n  imports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    DataTablesModule,\r\n    FormsModule,\r\n    MatDialogModule,\r\n    MatDatepickerModule,\r\n    MatFormFieldModule,\r\n    MatNativeDateModule,\r\n    MatInputModule,\r\n    NgbModule,\r\n    FileUploadModule,\r\n    LSelect2Module,\r\n    SelectDropDownModule,\r\n    TicketIconAttachmentModule,\r\n    NgMultiSelectDropDownModule,\r\n    ReactiveFormsModule,\r\n    GooglePlaceModule,\r\n    RouterModule.forChild(routes),\r\n    ReminderModuleModule\r\n  ],\r\n  exports: [\r\n    MatDatepickerModule,\r\n    MatFormFieldModule,\r\n    MatNativeDateModule,\r\n    MatInputModule\r\n  ],\r\n})\r\nexport class InvoicesModule { }\r\n","import { Component, OnInit } from '@angular/core';\nimport { InvoiceService } from 'src/app/services/invoice.service';\nimport { Ticket } from 'src/app/services/ticket.module';\nimport { MatDialog, MatDialogRef, MatDialogConfig } from '@angular/material/dialog';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { CustomerService } from 'src/app/services/customer.service';\nimport { PropertyService } from 'src/app/services/property.service';\nimport { InvoicePlaneInvoiceCustomerPropertyPopupComponent } from '../invoice-plane-invoice-customer-property-popup/invoice-plane-invoice-customer-property-popup.component';\nimport { Quote } from 'src/app/services/quote.module';\nimport { Property } from 'src/app/services/property.model';\nimport { AuthenticationService, Login } from 'src/app/services';\n\n@Component({\n  selector: 'app-invoice-ticket-popup',\n  templateUrl: './invoice-ticket-popup.component.html',\n  styleUrls: ['./invoice-ticket-popup.component.css']\n})\nexport class InvoiceTicketPopupComponent implements OnInit {\n  LocalQuoteList: Quote[];\n  LocalTicketList: Ticket[];\n  currentUser: Login;\n  PropertyAdrresssVisible = false;\n  constructor(\n    public router: Router,\n    public rout: ActivatedRoute,\n    public http: HttpClient,\n    public dialog: MatDialog,\n    public loginservice: AuthenticationService,\n    public dialogRef: MatDialogRef<InvoiceTicketPopupComponent>,\n    public invoiceService: InvoiceService,\n    public customerService: CustomerService,\n    public propertyservice: PropertyService,\n  ) {  this.loginservice.currentUser.subscribe(x => this.currentUser = x); }\n\n  ngOnInit() {\n      this.invoiceService.getInvoiceTicketList(this.customerService.formData.Id, this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.LocalTicketList = [];\n                    this.LocalTicketList = this.invoiceService.InvoiceTicketList = response.result;\n                    }\n      }}, error =>  console.log(error));\n      this.invoiceService.getInvoiceQuoteList(this.customerService.formData.Id, this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                    this.LocalQuoteList = [];\n                    this.LocalQuoteList = this.invoiceService.QuoteList = response.result;\n                    }\n      }}, error =>  console.log(error));\n  }\n  onTicketClick(x: Ticket) {\n    if (x === undefined) {\n        this.dialogRef.close();\n    } else {\n        this.dialogRef.close({ x });\n    }\n}\nonQuoteClick(q: Quote) {\n  if (q === undefined) {\n      this.dialogRef.close();\n  } else {\n      this.dialogRef.close({ q });\n  }\n}\nOpenAddClienPropertyForPlaneInvoiceDialog() {\n  this.invoiceService.postTempInvoice(this.currentUser.Token).subscribe( res => {\n    if (res) { const response = res as any;\n               if (response.Message === 'success') {\n                this.invoiceService.InvoiceData = response.result;\n                this.dialogRef.close();\n                }\n  }}, error =>  console.log(error));\n  const dialogConfig = new MatDialogConfig();\n  dialogConfig.autoFocus = true;\n  dialogConfig.width = '50%';\n  dialogConfig.data = {};\n  this.dialog.open(InvoicePlaneInvoiceCustomerPropertyPopupComponent, dialogConfig).afterClosed().subscribe(res => {\n    if (res !== '') {\n      if (res === undefined) {\n        this.router.navigate(['/properties/property-add/'], { queryParams:\n          { ' id': this.invoiceService.InvoiceData.CustomerId, ' name': this.invoiceService.InvoiceData.CustomerName }\n        });\n      } else {\n        this.PropertyAdrresssVisible = true;\n        this.invoiceService.InvoiceData.CustomerName = this.customerService.formData.NameTitle + ' ' +\n                                                        this.customerService.formData.FirstName + ' ' +\n                                                        this.customerService.formData.LastName;\n        this.invoiceService.InvoiceData.CustomerId = res.a.CustomerId;\n        this.invoiceService.InvoiceData.PropertyId = res.a.Id;\n        // this.invoiceService.InvoiceData.CustomerAddress = res.a.Id;\n        // this.invoiceService.InvoiceData.CustomerEmail = res.a.Id;\n        // this.invoiceService.InvoiceData.CustomerContactNo = res.a.Id;\n        this.propertyservice.formData = new Property();\n        this.propertyservice.formData = Object.assign({}, res.a);\n      }\n    }\n  });\n }\n\n onQuoteKeypress(value: string) {\n  this.LocalQuoteList = this.invoiceService.QuoteList.filter(item =>\n    item.JobTitle.toLowerCase().match(value.toLowerCase()) ||\n    item.CompanyName.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerName.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerEmail.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerContactNo.toLowerCase().match(value.toLowerCase()) ||\n    item.QuoteId.toLowerCase().match(value.toLowerCase()));\n }\n onTicketKeypress(value: string) {\n  this.LocalTicketList = this.invoiceService.InvoiceTicketList.filter(item =>\n    item.Title.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerName.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerEmail.toLowerCase().match(value.toLowerCase()) ||\n    item.CustomerAddress.toLowerCase().match(value.toLowerCase()));\n }\n}\n","<style>\n.ticketDetailsInfo{\n  width: 100%;\n    border: 1px solid #2c77f41c;\n    padding: 5px 0 0 5px;\n}\n</style>\n<div class=\"modal-header select-new-properties\">\n    <h5 class=\"modal-title\" id=\"exampleModalLabel\">Select Quote or {{this.currentUser.Ticket}} or create new Invoice</h5>\n    <button class=\"btn btn-default pull-right\" mat-dialog-close>x</button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"row\">\n        <div class=\"col-md-5 \">\n            <p>Which {{this.currentUser.Ticket}} would you like to select for invoice ?</p>\n            <div class=\"row col-md-12\">\n                <input type=\"email\" (keydown)=\"onTicketKeypress($event.target.value)\" (keyup)=\"onTicketKeypress($event.target.value)\" class=\"form-control\" placeholder=\"Search ticket...\">\n                <div class=\"kt-widget4__info ticketDetailsInfo\" *ngFor=\"let x of LocalTicketList\">\n                    <a (click)=\"onTicketClick(x)\" class=\"kt-widget4__title\">\n                      {{ x.CustomerName }} ({{ x.TicketId }}) | {{x.Status}}\n                    </a>\n                    <p (click)=\"onTicketClick(x)\" style=\"cursor: pointer;\" class=\"kt-widget4__text\">\n                      {{ x.Title }}\n                    </p>\n                  </div>\n              </div>\n        </div>\n        <div class=\"col-md-5\">\n            <p>Which quote would you like to select for invoice ?</p>\n                <input type=\"email\" (keydown)=\"onQuoteKeypress($event.target.value)\" (keyup)=\"onQuoteKeypress($event.target.value)\" class=\"form-control\" placeholder=\"Search Quote...\">\n                <div class=\"kt-widget4__info ticketDetailsInfo invoice-select-text\" *ngFor=\"let q of LocalQuoteList\">\n                    <a (click)=\"onQuoteClick(q)\" class=\"kt-widget4__title\">\n                      {{ q.CustomerName }} ({{ q.QuoteId }})  | Accepted<br>\n                      <p class=\"kt-widget4__text\">\n                        {{ q.JobTitle }} \n                      </p>\n                    </a>\n                    \n                  </div>\n        </div>\n        <div class=\"col-md-2\">\n            <a on class=\"btn btn-brand text-white\" (click)=\"OpenAddClienPropertyForPlaneInvoiceDialog()\">\n              <i class=\"la la-plus\"></i> Create new Invoice\n            </a>\n        </div>\n    </div>\n</div>\n  ","/** Outer dependencies */\r\nimport { Injectable } from '@angular/core';\r\nimport { NgbDateStruct, NgbDateAdapter } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nfunction isInteger(value: any): value is number {\r\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n}\r\n\r\nfunction isString(value: any): value is string {\r\n  return typeof value === 'string';\r\n}\r\n\r\n@Injectable()\r\nexport class NgbDateToStringAdapter extends NgbDateAdapter<string> {\r\n  private hour = 0;\r\n  private minute = 0;\r\n  private second = 0;\r\n\r\n  /**\r\n   * Converts user-model date into an NgbDateStruct for internal use in the library\r\n   */\r\n  public fromModel(dateString: string): NgbDateStruct {\r\n    const date = new Date(dateString);\r\n\r\n    const isValidDate = (!isNaN(date.valueOf()));\r\n\r\n    if (!dateString || !isString(dateString) || !isValidDate) {\r\n      return null;\r\n    }\r\n\r\n    this.hour = date.getUTCHours();\r\n    this.minute = date.getUTCMinutes();\r\n    this.second = date.getUTCSeconds();\r\n\r\n    return { year: date.getUTCFullYear(), month: date.getUTCMonth() + 1, day: date.getUTCDate() };\r\n  }\r\n\r\n  /**\r\n   * Converts internal date value NgbDateStruct to user-model date\r\n   * The returned type is supposed to be of the same type as fromModel() input-value param\r\n   */\r\n  public toModel(date: NgbDateStruct): string {\r\n    if (date && isInteger(date.year) && isInteger(date.month) && isInteger(date.day)) {\r\n      const year = date.year.toString().padStart(2, '0');\r\n      const month = date.month.toString().padStart(2, '0');\r\n      const day = date.day.toString().padStart(2, '0');\r\n\r\n      const hour = this.hour.toString().padStart(2, '0');\r\n      const minute = this.minute.toString().padStart(2, '0');\r\n      const second = this.second.toString().padStart(2, '0');\r\n\r\n      return `${year}-${month}-${day}T${hour}:${minute}:${second}Z`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\n@Component({\r\n  selector: 'generic-ticket-icon-attachment',\r\n  template: `\r\n   \t<div class=\"col-md-12\" *ngIf=\"Status === 1\">\r\n        <img title=\"{{Name}}\" style=\"width:100px;\" src=\"{{localPrependUrl}}/assets/svg/{{ext}}.svg\">\r\n    </div>\r\n    <div class=\"col-md-12\" *ngIf=\"Status === 2\">\r\n        <div [ngSwitch]=\"ext\">\r\n              <div *ngSwitchCase=\"'png'\"><img title=\"{{Name}}\" style=\"width:100px;\" src=\"{{Path}}\"></div>\r\n              <div *ngSwitchCase=\"'jpg'\"><img title=\"{{Name}}\" style=\"width:100px;\" src=\"{{Path}}\"></div>\r\n              <div *ngSwitchCase=\"'jpeg'\"><img title=\"{{Name}}\" style=\"width:100px;\" src=\"{{Path}}\"></div>\r\n              <div *ngSwitchDefault><img title=\"{{Name}}\" style=\"width:100px;\" src=\"{{localPrependUrl}}/assets/svg/{{ext}}.svg\"></div>\r\n        </div>\r\n    </div>\r\n  `\r\n})\r\nexport class TicketIconAttachmentComponent implements OnInit {\r\n  @Input() Name: string;\r\n  @Input() Path: string;\r\n  @Input() Status: number;\r\n  localPrependUrl: string;\r\n  ext: string;\r\n  constructor() {\r\n    this.localPrependUrl =  environment.apiUrl;\r\n   }\r\n   ngOnInit() { \r\n         if(this.Name?.length > 0) {\r\n            this.ext = this.Name.toLowerCase().split('.').pop();\r\n            } else { this.ext = 'noimage'; }\r\n    }\r\n}\r\n"]}