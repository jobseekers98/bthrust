{"version":3,"sources":["webpack:///node_modules/@fullcalendar/resource-common/main.esm.js","webpack:///src/app/application/calendar/month-ticket/month-ticket.component.ts","webpack:///src/app/application/calendar/month-ticket/month-ticket.component.html","webpack:///src/app/services/calendar.service.ts","webpack:///src/app/generic-utils/Ticket-Status-Component/TicketStatusComponent.module.ts","webpack:///src/app/application/calendar/calendar.component.ts","webpack:///src/app/application/calendar/map/map.component.ts","webpack:///src/app/application/calendar/map/map.component.html","webpack:///node_modules/@fullcalendar/interaction/main.esm.js","webpack:///node_modules/@fullcalendar/resource-timeline/main.esm.js","webpack:///src/app/services/ticket.module.ts","webpack:///src/app/generic-utils/Ticket-Status-Component/TicketStatusComponent.component.ts","webpack:///src/app/application/calendar/month-resource/month-resource.component.ts","webpack:///src/app/application/calendar/month-resource/month-resource.component.html","webpack:///node_modules/@fullcalendar/daygrid/main.esm.js","webpack:///src/app/services/CommanExtendsClass.module.ts","webpack:///node_modules/@fullcalendar/timegrid/main.esm.js","webpack:///node_modules/@fullcalendar/timeline/main.esm.js","webpack:///src/app/application/calendar/calendar.module.ts","webpack:///node_modules/ngx-select2/__ivy_ngcc__/fesm2015/ngx-select2.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","massageEventDragMutation","eventMutation","hit0","hit1","resource0","dateSpan","resourceId","resource1","resourceMutation","matchResourceId","setResourceId","applyEventDefMutation","eventDef","mutation","calendar","computeResourceEditable","index","resourceIds","indexOf","slice","splice","push","resourceEditable","source","sourceId","state","eventSources","extendedProps","opt","transformEventDrop","oldResource","getResourceById","newResource","ResourceDataAdder","filterResources","transform","viewProps","viewSpec","calendarProps","allOptions","needsResourceData","resourceStore","filterResourcesWithEvents","eventStore","dateProfile","activeRange","resourceEntityExpansions","doFilterResourcesWithEvents","instancesInRange","filterEventInstancesInRange","instances","hasEvents_1","computeHasEvents","defs","computeAncestorHasEvents","resource","eventInstances","eventInstance","range","eventDefs","hasEvents","instanceId","instance","_i","_a","defId","res","parentId","ResourceEventConfigAdder","buildResourceEventUis","injectResourceEventUis","eventUiBases","ui","resourceEventUis","eventUi","injectResourceEventUi","origEventUi","parts","unshift","transformIsDraggable","val","view","context","RESOURCE_SOURCE_PROPS","id","String","uid","registerResourceSourceDef","def","getResourceSourceDef","doesSourceIgnoreRange","Boolean","sourceDefId","ignoreRange","parseResourceSource","input","meta","parseMeta","parseResourceSourceProps","_raw","props","publicId","isFetching","latestFetchId","fetchRange","reduceResourceSource","action","type","createSource","resourceSourceInput","handleRange","receiveResponse","fetchId","fetchSource","uid$1","forceFetch","sourceDef","fetch","resourceSource","afterSizingTriggers","_resourcesRendered","dispatch","rawResources","error","RESOURCE_PROPS","title","businessHours","children","PRIVATE_ID_PREFIX","uid$2","parseResource","store","leftovers0","leftovers1","freeze","classNames","childInput","getPublicId","reduceResourceStore","receiveRawResources","addResource","resourceHash","removeResource","setResourceProp","propName","propValue","existingStore","inputs","nextStore","inputs_1","additions","newStore","childResourceId","name","value","_b","existingResource","reduceResourceEntityExpansions","expansions","isExpanded","resourcesReducers","loadingLevel","RESOURCE_RELATED_PROPS","items","map","item","parseEventDef","leftovers","resourceRelatedProps","transformDateSelectionJoin","resourceId0","resourceId1","component","allowAcrossResources","ResourceApi","rawResource","_calendar","_resource","setProp","remove","getParent","getChildren","thisResourceId","childApis","getEvents","eventApis","defineProperty","get","enumerable","configurable","constraints","overlap","allows","backgroundColor","borderColor","textColor","scrollTo","addScroll","forcedRowId","getResources","resourceApis","getTopLevelResources","rerenderResources","refetchResources","transformDatePoint","transformDateSpan","ResourceSplitter","_super","getKeyInfo","getKeysForDateSpan","getKeysForEventDef","isPropsValidWithResources","splitter","sets","splitProps","props_1","filterConfig","bind","config","filterConstraints","constraint","transformExternalDef","transformEventResizeJoin","_def","setResources","resources","resources_1","console","warn","mutate","standardProps","RELEASE_DATE","UPGRADE_WINDOW","LICENSE_INFO_URL","PRESET_LICENSE_KEYS","CSS","position","bottom","left","background","padding","injectLicenseWarning","containerEl","key","isImmuneUrl","window","location","href","isValidKey","match","purchaseDate","Date","parseInt","releaseDate","mockSchedulerReleaseDate","minPurchaseDate","url","test","optionChangeHandlers","handleResources","newSourceInput","deepEqual","oldSourceInput","raw","isArray","arg","successCallback","success","failure","dateEnv","func","publicArg","start","toDate","end","startStr","formatIso","endStr","timeZone","method","toUpperCase","extraParams","failureCallback","requestParams","buildRequestParams","xhr","message","startParam","endParam","timeZoneParam","customRequestParams","params","buildResourceTextFunc","resourceTextSetting","ResourceDayHeader","parentEl","_this","processOptions","_processOptions","options","datesAboveResources","resourceTextFunc","resourceText","render","theme","innerHTML","appendChild","el","getClass","thead","querySelector","html","dateFormat","columnHeaderFormat","datesRepDistinctDays","dates","renderResourceRow","renderDayAndResourceRows","renderResourceAndDayRows","processResourceEls","destroy","cellHtmls","renderResourceCell","buildTr","dateHtmls","resourceHtmls","dates_1","date","renderDateCell","resources_2","dates_2","colspan","omitTime","renderIntroHtml","concat","isRtl","reverse","join","forEach","node","col","publiclyTrigger","AbstractResourceDayTable","dayTable","resourceIndex","ResourceIndex","rowCnt","colCnt","cells","buildCells","rows","row","rowCells","dateCol","resourceCol","htmlAttrs","computeCol","ResourceDayTable","dateI","resourceI","computeColRanges","dateStartI","dateEndI","firstCol","lastCol","isStart","isEnd","DayResourceTable","segs","indicesById","ids","VResourceSplitter","resourceDayTable","hash","NO_SEGS","VResourceJoiner","joinDateSelection","joinSegs","joinBusinessHours","joinFgEvents","joinBgEvents","joinEventDrags","joinInteractions","joinEventResizes","joinProps","propSets","dateSelectionSets","businessHoursSets","fgEventSets","bgEventSets","eventDrags","eventResizes","eventSelection","keys","keys_1","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","eventDrag","eventResize","segGroups","resourceCnt","transformedSegs","seg","transformSeg","_c","_d","expandSegs","segs_1","interactions","affectedInstances","isEvent","sourceSeg","interaction","flattenResources","orderSpecs","buildRowNodes","groupSpecs","isVGrouping","expansionDefault","complexNodes","buildHierarchy","flatNodes","flattenNodes","rowSpans","depth","complexNode","group","firstRowIndex","rowSpanIndex","firstRow","firstRowSpans","spec","field","hasChildren","resourceFields","maxDepth","resourceNodes","buildResourceNodes","builtNodes","resourceNode","insertResourceNode","nodeHash","buildResourceFields","parentNode","insertResourceNodeInSiblings","nodes","groupNode","ensureGroupNodes","groupSpec","groupValue","newGroupIndex","order","cmp","siblings","obj","isGroupsEqual","group0","group1","main","reducers","eventDefParsers","isDraggableTransformers","eventDragMutationMassagers","eventDefMutationAppliers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","viewPropsTransformers","isPropsValid","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","MonthTicketComponent","titleService","modal","customerservice","calendarservice","ticketservice","engineerservice","router","dialog","toastr","logService","loginservice","genicprofileservice","CalendarView","Month","viewDate","activeDayIsOpen","refresh","OneOffIsVisible","Iscalendarshow","IsTeamShow","currentUTCDate","monthcellvisits","Islegendshow","IsTenderlegendshow","localdate1","UTC","getFullYear","getMonth","getDate","minDate","year","Number","month","day","maxDate","currentUser","subscribe","x","localPrependUrl","apiUrl","events","event","newStart","newEnd","allDay","externalIndex","externalEvents","formData","OneOffScheduled","OneOffAppointmentDate","toLocaleString","Id","toString","sdate","utcdate","JSON","stringify","edate","AppointmentStart","AppointmentEnd","OneOffStartTime","split","OneOffEndTime","setTimeout","DateDragAction","filter","iEvent","DateDragActionExternal","eventToDelete","setTitle","TicketFilter","IsReady","IsReadyQuote","IsReadyInvoice","Ticketlist","TicketTeamList","Engineerlist","RefreshCalendar","openpopup","refreshCalendarTicketList","Token","response","Message","TicketUnscheduledList","result","TicketScheduledList","Status","element1","CustomerCompanyName","color","blue","resizable","beforeStart","afterEnd","draggable","Priority","StatusTemp","TicketTeams","Subject","Title","IsTicket","element2","localdate","warning","MessageDescription","log","e","locatdate","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getHours","getMinutes","getSeconds","getMilliseconds","getTicketById","loadEngineerList","open","viewmodalContent","size","tenderData","modalTender","dismissAll","dialogConfig","autoFocus","width","height","data","afterClosed","releseTemporaryEngineerFromTicket","navigate","stime","replace","etime","refrestUnallocatedTimeEngineerList","demoClasseslist","document","querySelectorAll","element","style","display","demoClasses","showcalendar","showtenderlegendpopup","showlegendpopup","externalDrop","templateUrl","styleUrls","CalendarService","http","SetAsDefaultValues","EngineerLocation","ResourceParamData","TokenNo","CustomerId","EngineerId","pipe","token","TicketId","Response","post","providedIn","TicketStatusComponentModule","imports","declarations","exports","CalendarComponent","template","MapComponent","propertyservice","genericservice","service","TotalClosed","TotalInprogress","TotalClosedList","TotalInprogressList","locallist","CalendarTicketDetailsData","Permissions","MapView","IsLeftSection","IsRightSection","IsLeftSectionLive","lat","lng","zoom","markers","CalenderList","CalendarTicketList","InternalObject","TodayDate","TODAY_DATE_IN_STRING","_date","loadData","refrestEngineerMapList","refrestTicketMapList","refrestTicketDetailsMapList","LiveTracking","engineerlocation","Latitude","Longitude","EngineerName","address","LocationAddress","Type","DateFrom","DateTo","datetime","newdate","CustomerName","CustomerAddress","undefined","refrestGetEngineerLeftTaskList","IsLeftLiveSectionMethod","IsLeftSectionMethod","IsRightSectionMethod","modalContent","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","subjectEl","downEl","selector","handleSelector","shouldIgnoreMove","shouldWatchScroll","isDragging","isTouchDragging","wasTouchScroll","handleMouseDown","ev","shouldIgnoreMouse","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","trigger","initScrollWatch","addEventListener","handleMouseMove","handleMouseUp","recordCoords","removeEventListener","cleanup","handleTouchStart","createEventFromTouch","target","handleTouchMove","handleTouchEnd","handleTouchScroll","startIgnoringMouse","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","passive","listenerCreated","listenerDestroyed","querySubjectEl","destroyScrollWatch","cancelTouchScroll","isFirst","touches","button","ctrlKey","onWindowTouchMove","preventDefault","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","body","zIndex","revertDuration","getBoundingClientRect","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","top","getMirrorEl","cloneNode","classList","add","visibility","boxSizing","right","margin","ScrollGeomCache","scrollController","doesListening","scrollTop","getScrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","clientWidth","getClientWidth","clientHeight","getClientHeight","clientRect","computeClientRect","getEventTarget","setScrollTop","Math","max","min","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ElementScrollGeomCache","WindowScrollGeomCache","getTime","performance","now","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","animate","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","buildCaches","yDelta","xDelta","scrollCache","requestAnimationFrame","seconds","invDistance","distance","velocity","sign","bestSide","rect","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","els","query","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","distanceSq","autoScroller","onPointerUp","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","OffsetTracker","origRect","computeLeft","computeTop","isWithinClipping","point","isIgnoredClipping","tagName","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","prepareHits","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","origPoint","adjustedPoint","subjectRect","queryHitForOffset","slicedSubjectRect","coordAdjust","forceHandle","hit","isHitsEqual","offsetTrackers","interactionSettings","buildPositionCaches","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","positionLeft","positionTop","queryHit","layer","DateClicking","settings","isValidDateDownEl","hitDragging","triggerDateClick","dayEl","DateSelecting","dragSelection","canSelect","selectable","getComponentTouchDelay","unselect","handleHitUpdate","isFinal","isInvalid","joinHitsIntoSelection","pluginSystem","hooks","isDateSelectionValid","selection","triggerDateSelect","selectMinDistance","dragScroll","selectLongPressDelay","longPressDelay","dateSpan0","dateSpan1","ms","sort","dateSelectionTransformers_1","transformer","EventDragging","subjectSeg","eventRange","relevantEvents","receivingCalendar","validMutation","mutatedRelevantEvents","origTarget","initialCalendar","eventInstanceId","eventDragMinDistance","getComponentTouchDelay$1","dragRevertDuration","isValid","isValidSegDownEl","contains","jsEvent","affectedEvents","mutatedEvents","origSeg","receivingComponent","receivingOptions","editable","droppable","computeEventMutation","isInteractionValid","displayDrag","initialCalendar_1","initialView","eventApi","relevantEvents_1","clearDrag","transformed","eventDropArg","delta","datesDelta","oldEvent","revert","draggedEl","dropArg","buildDatePointApi","SELECTOR","useEventCenter","nextCalendar","prevCalendar","massagers","date0","date1","hasEnd","allDayMaintainDuration","largeUnit","milliseconds","massagers_1","massager","eventLongPressDelay","EventDragging$1","draggingSeg","querySeg","computeMutation","startDelta","endDelta","prevEvent","fgSegSelector","isFromStart","instanceRange","transforms","transforms_1","UnselectAuto","isRecentPointerDateSelect","onSelect","selectInfo","onDocumentPointerUp","documentPointer","dateSelection","unselectAuto","viewOpt","unselectCancel","off","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","canDropElOnCalendar","computeEventForDateSpan","finalView","getDragMetaFromEl","dropAccept","defProps","leftoverProps","duration","startTime","getDefaultEventEnd","str","getEmbeddedElData","parse","dataAttrPrefix","prefix","prefixedName","getAttribute","ExternalDraggable","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","componentInteractions","calendarInteractions","elementDraggingImpl","Row","spreadsheetParent","spreadsheetNextSibling","timeAxisParent","timeAxisNextSibling","isSizeDirty","insertBefore","spreadsheetTr","createElement","timeAxisTr","updateSize","isResize","updateExpanderIcon","clearExpanderIcon","updateTrResourceId","tr","setAttribute","GroupRow","_renderCells","renderCells","unrenderCells","_updateExpanderIcon","onExpanderClick","spreadsheetColCnt","unrender","spreadsheetContentEl","renderSpreadsheetContent","className","colSpan","spreadsheetHeightEl","expanderIconEl","parentElement","timeAxisHeightEl","text","renderCellText","contentEl","getHeightEls","addEqualityFuncs","SpreadsheetRow","_renderRow","renderRow","unrenderRow","_updateTrResourceId","colSpecs","mainTd","colSpec","rowSpan","isMain","renderIconHtml","td","rowspan","heightEl","childNodes","expanderEl","ResourceRow","a","c","timeAxis","renderSkeleton","_renderSkeleton","_unrenderSkeleton","spreadsheetRow","receiveProps","lane","nextDayThreshold","cellEl","innerContainerEl","COL_MIN_WIDTH","SpreadsheetHeader","resizables","colWidths","colTags","superHeaderText","o","isLast","labelText","tableEl","thEls","colEls","resizerEls","initColResizing","ElementDraggingImpl","handleEl","colIndex","startWidth","Spreadsheet","headParentEl","bodyParentEl","_unrenderCells","layout","bodyEnhancedScroller","bodyScroller","enhancedScroll","canvas","bodyContainerEl","bodyColGroup","bodyTbody","headerEnhancedScroller","headerScroller","header","applyColWidths","renderColTags","bodyColEls","colSpecs_1","totalHeight","isAuto","setHeight","colWidth","headEl","bodyEl","styleVal","MIN_RESOURCE_AREA_WIDTH","ResourceTimelineView","isStickyScrollDirty","rowNodes","rowComponents","rowComponentsById","resourceAreaWidthDraggings","hasResourceBusinessHours","hasNesting","updateHasNesting","_updateHasNesting","startInteractive","_startInteractive","_stopInteractive","timeAxisEl","registerInteractiveComponent","unregisterInteractiveComponent","spreadsheet","dateProfileGenerator","slats","newRowNodes","resourcesInitiallyExpanded","diffRows","updateRowProps","startNowIndicator","allColSpecs","resourceColumns","resourceLabelText","defaultLabelText","plainColSpecs","groupColSpecs","isHGrouping","allColSpecs_1","hGroupField","resourceGroupField","resourceGroupText","resourceGroupRender","allOrderSpecs","resourceOrder","plainOrderSpecs","allOrderSpecs_1","orderSpec","isGroup","groupSpecs_1","eventOverlap","renderSkeletonHtml","resourceAreaHeadEl","setResourceAreaWidth","resourceAreaWidth","initResourceAreaWidthDragging","miscHeight","timeAxisRowContainer","timeAxisTbody","bgEl","bodyScrollJoiner","spreadsheetBodyStickyScroller","destroyRows","isNesting","newNodes","oldNodes","oldLen","oldIndexHash","oldI","newI","newNode","oldIFound","removeRows","addRow","rowNode","nextComponent","newComponent","buildChildComponent","startIndex","len","oldRowNodes","rowComponent","spreadsheetTbody","spreadsheetNext","timeAxisNext","fallbackBusinessHours","viewHeight","isBaseSizing","isViewUpdated","isDatesUpdated","isEventsUpdated","syncHeadHeights","rowSizingCnt","updateRowSizes","update","scrollJoiner","rowPositions","build","spreadsheetHeadEl","timeAxisHeadEl","dirtyRowComponents","elArrays","elArrays_1","elArray","elArray_1","dirtyRowComponents_1","maxHeights","maxHeight","elArray_2","resourceAreaWidthDragging","getNowIndicatorUnit","renderNowIndicator","unrenderNowIndicator","queryScroll","scroll","queryResourceScroll","applyScroll","applyResourceScroll","updateStickyScrollers","computeDateScroll","queryDateScroll","applyDateScroll","scrollerTop","elBottom","rowId","innerTop","rowRect","rowIndex","topToIndex","slatHit","positionToHit","tops","bottoms","widthVal","resourceAreaDividerEls","dragStartWidth","viewWidth","newWidth","nodes_1","deps","defaultView","views","resourceTimeline","eventResizableFromStart","resourceTimelineDay","days","resourceTimelineWeek","weeks","resourceTimelineMonth","months","resourceTimelineYear","years","Ticket","TicketTeam","TicketItem","TicketAttachment","TicketIssueType","TicketWiseIssueType","TicketTimer","TicketReminder","TicketEquipment","TicketEquipmentMasterData","TicketRecurringHelper","TicketStatusComponent","OverDueDays","MonthResourceComponent","aspectRatio","plugins","center","resourceTimelineThreeDays","buttonText","CustomerdropdownList","CustomerselectedItems","CustomerdropdownSettings","displayKey","search","limitTo","placeholder","EngineerdropdownList","EngineerselectedItems","EngineerdropdownSettings","StatusdropdownList","StatusselectedItems","StatusdropdownSettings","ticketlist","isDtInitialized","Engineer","ResourceView","showFilte","RefreshData","ResourceFullCalendarSetting","external","nativeElement","eventEl","innerText","model","sTime","dateStr","eTime","setMinutes","PropertyId","toISOString","padStart","ResourceViewDropableEvent","fire","getCustomerListSync","custList","w","Name","CompanyName","IsAssigned","getEngineerListSync","engList","calendarApi","calendarComponent","getApi","gotoDate","_instance","ResourceViewDraggableEvent","OldEngineerId","NewEngineerId","removeAllEvents","refetchEvents","calendarEvents","refrestResourceViewList","Item1","Item2","getUnAssignedTickets","res2","response2","v","DraggableEvent","eventDrop","eventrender","eventDragStop","eventClick","drop","resourcetime","DayGridDateProfileGenerator","buildRenderRange","currentRange","currentRangeUnit","isRangeAllDay","renderRange","endOfWeek","startOfWeek","valueOf","monthMode","fixedWeekCount","ceil","Popover","isHidden","documentMousedown","hide","show","content","autoHide","elDims","origin","offsetParent","clippingRect","SimpleDayGridEventRenderer","renderSegHtml","mirrorInfo","isDraggable","isResizableFromStart","isResizableFromEnd","classes","getSegClasses","skinCss","getSkinCss","timeHtml","timeText","titleHtml","getTimeText","dir","computeEventTimeFormat","hour","minute","omitZeroMinute","meridiem","computeDisplayEventEnd","DayGridEventRenderer","dayGrid","attachSegs","rowStructs","renderSegRows","rowEls","tbodyEl","removeSegPopover","detachSegs","rowStruct","pop","segRows","groupSegRows","renderSegRow","rowSegs","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","j","emptyCellsUntil","endCol","leftCol","rightCol","introHtml","renderProps","levels","sortEventSegs","isDaySegCollision","level","compareDaySegCols","otherSegs","otherSeg","DayGridMirrorRenderer","skeletonEl","skeletonTopEl","skeletonTop","EMPTY_CELL_HTML","DayGridFillRenderer","fillSegTag","renderSegs","renderFillRow","startCol","trEl","toLowerCase","getElementsByTagName","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","_renderFrame","renderFgEvents","renderEventSelection","selectByInstanceId","unselectByInstanceId","renderEventDrag","hideByHash","showByHash","renderEventResize","firstContext","fgSegs","eventDragInstances","eventResizeInstances","format","dayPopoverFormat","getIconClass","segContainerEl","elWidth","elHeight","dayTile","segs_2","DayBgRow","renderHtml","cell","renderCellHtml","otherAttrs","isDateValid","DAY_NUM_FORMAT","WEEK_NUM_FORMAT","week","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderBusinessHours","renderDateSelection","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","renderDayRowHtml","cellEls","colPositions","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","weekDow","getUTCDay","computeSizes","assignSizes","buildColPositions","buildRowPositions","leftPosition","topPosition","leftToIndex","relativeRect","lefts","rights","isResizing","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowEl","rowBottom","trEls","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","moreEls","limitedEls","limitedEl","hiddenSegs","getMoreLinkText","clickOption","eventLimitClick","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","showSegPopover","zoomTo","topEl","releaseAfterSizingTriggers","dayDate","dayStart","dayEnd","dayRange","newSegs","origRange","slicedRange","durationEditable","num","eventLimitText","startLevel","WEEK_NUM_FORMAT$1","AbstractDayGridView","renderHeadIntroHtml","weekNumberStyleAttr","weekLabel","renderDayGridNumberIntroHtml","weekStart","forceOff","renderDayGridBgIntroHtml","renderDayGridIntroHtml","weekNumbers","weekNumbersWithinDays","scroller","dayGridContainerEl","dayGridEl","columnHeader","weekNumberWidth","hasRigidRows","eventLimit","updateBaseSize","headRowEl","scrollerHeight","scrollbarWidths","computeScrollerHeight","clear","setGridHeight","getScrollbarWidths","lockOverflow","dateProfileGeneratorClass","SimpleDayGrid","slicer","DayGridSlicer","sliceProps","rawHit","sliceRange","dateRange","DayGridView","buildDayTable","headerDates","simpleDayGrid","daySeries","dayGridDay","dayGridWeek","dayGridMonth","ReminderBase","TimeGridEventRenderer","timeGrid","fullTimeFormat","separator","defaultRangeSeparator","segsByCol","groupSegsByCol","attachSegsByCol","fgContainerEls","computeSegSizes","computeSegVerticals","computeSegHorizontals","assignSegSizes","assignSegVerticals","assignSegCss","fullTimeText","startTimeText","unzonedStart","unzonedEnd","_getTimeText","level0","buildSlotSegLevels","computeForwardSlotSegs","computeSlotSegPressures","computeSegForwardBack","seriesBackwardPressure","seriesBackwardCoord","forwardSegs","forwardCoord","sortForwardSegs","backwardCoord","objs","buildTimeGridSegCompareObj","specs","eventOrderSpecs","obj0","obj1","_seg","generateSegCss","shouldOverlap","slotEventOverlap","generateSegVerticalCss","forwardPressure","computeSlotSegCollisions","k","forwardSeg","results","isSlotSegCollision","seg1","seg2","TimeGridMirrorRenderer","mirrorContainerEls","sourceSegProps","marginLeft","marginRight","TimeGridFillRenderer","containerEls","bgContainerEls","businessContainerEls","highlightContainerEls","AGENDA_STOCK_SUB_DURATIONS","hours","minutes","TimeGrid","isSlatSizesDirty","isColSizesDirty","renderSlats","_renderSlats","renderColumns","_renderColumns","_unrenderColumns","_renderDateSelection","_unrenderDateSelection","slotDuration","snapDuration","snapsPerSlot","slotLabelFormat","labelFormat","slotLabelInterval","labelInterval","computeLabelInterval","slotsPerLabel","buildSlatPositions","rootBgContainerEl","slatContainerEl","bottomRuleEl","renderSlatRowHtml","slatEls","slatPositions","slotTime","minTime","slotIterator","slotDate","isLabeled","axisHtml","maxTime","renderContentSkeleton","unrenderContentSkeleton","contentSkeletonEl","colContainerEls","computeDateTop","lineEl","arrowEl","nowIndicatorEls","getTotalSlatHeight","when","startOfDayDate","computeTimeTop","slatCoverage","slatIndex","slatRemainder","floor","getHeight","eventMinHeight","timeGridEventMinHeight","slatTop","slatHeight","partial","localSnapIndex","snapIndex","time","selectMirror","isSelecting","AllDaySplitter","timed","TIMEGRID_ALL_DAY_EVENT_LIMIT","WEEK_HEADER_FORMAT","AbstractTimeGridView","dayCnt","weekText","axisStyleAttr","renderTimeGridBgIntroHtml","renderTimeGridIntroHtml","timeGridWrapEl","timeGridEl","allDaySlot","dividerEl","axisWidth","noScrollRowEls","usesMinMaxTime","SimpleTimeGrid","buildDayRanges","TimeGridSlicer","dayRanges","receiveContext","sliceNowDate","ranges","segRange","TimeGridView","simpleTimeGrid","timeGridDay","timeGridWeek","ScrollerCanvas","gutters","setGutters","setWidth","setMinWidth","minWidth","clearWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","EnhancedScroller","overflowX","overflowY","reportScroll","isScrolling","reportScrollStart","isMoving","requestMovingEnd","isTouching","reportTouchStart","reportTouchEnd","isTouchScrollEnabled","unbindPreventTouchScroll","reportScrollEnd","reportMovingEnd","applyOverflow","bindHandlers","unbindHandlers","disableTouchScroll","bindPreventTouchScroll","enableTouchScroll","preventTouchScrollHandler","direction","getComputedStyle","getRtlScrollSystem","getScrollFromLeft","mixInto","_rtlScrollSystem","detectRtlScrollSystem","system","ClippedScroller","isHScrollbarsClipped","isVScrollbarsClipped","scrollEl","edges","cssProps","marginTop","marginBottom","scrollbarLeft","scrollbarRight","scrollbarBottom","widths","ScrollJoiner","axis","scrollers","initScroller","onScroll","assignMasterScroller","evName","masterScroller","otherScroller","unassignMasterScroller","allWidths","maxLeft","maxRight","maxTop","maxBottom","allWidths_1","HeaderBodyLayout","headerContainerEl","verticalScroll","bodyHeight","queryHeadHeight","TimelineHeader","renderDates","tDateProfile","cellRows","lastRow","isChrono","oneDay","slotCnt","cellRows_1","rowCells_1","headerCellClassNames","isWeekStart","isTimeScale","omitTimeZoneOffset","spanHtml","slatColEls","innerEls","innerEl","TimelineSlats","slotDates","isWeekStarts","slatCellHtml","outerCoordCache","innerCoordCache","isEm","countDurationsBetween","normalizedRange","slatWidth","getWidth","MIN_AUTO_LABELS","MAX_AUTO_SLOTS_PER_LABEL","MAX_AUTO_CELLS","MAX_TIMELINE_SLOTS","STOCK_SUB_DURATIONS","buildTimelineDateProfile","queryDurationOption","validateLabelAndSlot","ensureLabelInterval","ensureSlotDuration","rawFormats","computeHeaderFormats","headerFormats","rawFormat","slotUnit","unit","emphasizeWeeks","currentRangeAs","rawSnapDuration","timeWindowMs","normalizedStart","normalizeDate","normalizedEnd","isValidDate","snapDiff","snapDiffToIndex","snapIndexToDiff","snapCnt","buildIsWeekStarts","buildCellRows","normalDate","startOf","normalizeRange","isHiddenDay","timeMs","labelCnt","STOCK_SUB_DURATIONS_1","tryLabelInterval","STOCK_SUB_DURATIONS_2","STOCK_SUB_DURATIONS_3","trySlotDuration","format1","format2","weekNumbersVisible","format0","weekday","omitCommas","second","millisecond","diffWholeYears","diffWholeMonths","prevWeekNumber","slotDates_1","weekNumber","computeWeekNumber","formats","rowUnits","getLargestUnit","leadingCell","isSuperRow","newCell","buildCellObject","rowUnit","TimelineNowIndicator","headParent","bodyParent","coord","styleProps","STICKY_PROP_VAL","computeStickyPropVal","IS_MS_EDGE","navigator","userAgent","IS_SAFARI","STICKY_CLASSNAME","StickyScroller","isVertical","usingRelative","elGeoms","queryElGeoms","viewportWidth","elDestinations","computeElDestinations","assignRelativePositions","assignStickyPositions","canvasOrigin","els_1","parentBound","elRect","computedStyles","computedTextAlign","textAlign","intendedTextAlign","naturalBound","parseFloat","hasAttribute","viewportLeft","viewportTop","viewportRight","elGeom","destLeft","destTop","stickyLeft","TimeAxis","headStickyScroller","bodyStickyScroller","nowIndicator","dateToCoord","applySlotWidth","computeSlotWidth","slotWidth","computeDefaultSlotWidth","maxInnerWidth","headingCellWidth","containerWidth","containerMinWidth","nonLastSlotWidth","round","availableWidth","computeDateSnapCoverage","snapDiffInt","snapCoverage","slotCoverage","slotIndex","originClientRect","rangeToCoords","TimelineLaneEventRenderer","masterContainerEl","computeDisplayEventTime","segs_3","coords","segs_4","computeOffsetForSegs","segs_5","segs_6","unplacedSeg","above","isLevelCollision","placedSeg","timeRowSegsCollide","belowSeg","segs_7","computeOffsetForSeg","seg0","TimelineLaneFillRenderer","TimelineLane","fgContainerEl","bgContainerEl","TimelineLaneSlicer","slicedProps","segsForHighlight","normalRange","TimelineView","timeline","timelineDay","timelineWeek","timelineMonth","timelineYear","routes","path","CalendarTicketModule","provide","useClass","forRoot","apiKey","googleapiKey","forChild","providers","_c0","_c1","_c2","LSelect2Component_1","LSelect2Component","_renderer","required","maxCount","MAX_SAFE_INTEGER","minCount","MIN_SAFE_INTEGER","valueChange","_onChange","_","_onTouched","_jqueryElement","$","selectControll","initSelect2","select2","disabled","selected","multiple","selectedValue","emit","setSelect2Value","changes","hasChanged","fn","isDisabled","hasClass","setProperty","targetVal","previousValue","currentValue","ɵfac","LSelect2Component_Factory","ɵcmp","selectors","viewQuery","LSelect2Component_Query","rf","ctx","_t","first","outputs","features","useExisting","multi","ngContentSelectors","decls","vars","consts","LSelect2Component_Template","encapsulation","ctorParameters","LSelect2Module","ɵmod","ɵinj","factory","LSelect2Module_Factory","args","ngJitMode"],"mappings":"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CE;;AACE;;AAEE;;AAAM;;AAA6B;;AACnC;;AAAG;;AAAG;;AACR;;AACF;;AAEA;;AACE;;AACE;;AAAM;;AAAiB;;AACvB;;AAAG;;AAAM;;AACX;;AACF;;AACA;;AACE;;AACE;;AAAM;;AAAmB;;AACzB;;AAAG;;AAAU;;AACf;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AA4BF;;AACA;;AACE;;AA4BF;;AACA;;AACE;;AA6BF;;AACF;;AACF;;AACF;;AACF;;AACF;;AAEA;;AAEE;;AAME;;AAQF;;AACF;;AACA;;AACE;;AAAwC;AAAA,qBAAS,IAAAC,oBAAA,EAAT;AAA+B,aAA/B;;AACtC;;AACF;;AACA;;AACE;;AACE;;AAAoB;;AAA8B;;AACpD;;AACA;;AACE;;AACE;;AACE;;AACE;;AAqDF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AACE;;AAAwB;;AAAsC;;AAC9D;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAA2D;;AAAY;;AACzE;;AACA;;AACE;;AAAoD;;AAAiB;;AACvE;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAI;;AAAmC;;AACvC;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAI;;AAA2B;;AACjC;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAA4B;;AAAO;;AACvC;;AAAI;;AAAoC;;AAC1C;;AACA;;AACE;;AAAI;;AAA6B;;AAAmB;;AACpD;;AAAI;;AAA6C;;AACnD;;AACA;;AACE;;AAAI;;AAA6B;;AAAgB;;AACjD;;AAAI;;AAA2C;;AACjD;;AACA;;AACE;;AAAI;;AAA6B;;AAAqB;;AACtD;;AAAI;;;;AAAgE;;AACtE;;AACF;;AACF;;AAEF;;AACF;;AACA;;AACE;;AACE;;AAAI;;AAAQ;;AACZ;;AACE;;AAAI;;AAA4B;;AAA0C;;AAC1E;;A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","file":"application-calendar-calendar-module-es5.js","sourcesContent":["/*!\nFullCalendar Resources Common Plugin v4.4.2\nDocs & License: https://fullcalendar.io/scheduler\n(c) 2019 Adam Shaw\n*/\n\nimport { memoize, filterHash, rangesIntersect, memoizeOutput, isPropsEqual, mapHash, combineEventUis, refineProps, rangesEqual, processScopedUiProps, parseBusinessHours, EventApi, Calendar, Splitter, mergeEventStores, isPropsValid, appendToElement, htmlEscape, cssToStr, config, isValidDate, addDays, unpromisify, requestJson, htmlToElement, createFormatter, computeFallbackHeaderFormat, removeElement, renderDateCell, findElements, Component, flexibleCompare, compareByFieldSpecs, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction massageEventDragMutation(eventMutation, hit0, hit1) {\n    var resource0 = hit0.dateSpan.resourceId;\n    var resource1 = hit1.dateSpan.resourceId;\n    if (resource0 && resource1 &&\n        resource0 !== resource1) {\n        eventMutation.resourceMutation = {\n            matchResourceId: resource0,\n            setResourceId: resource1\n        };\n    }\n}\n/*\nTODO: all this would be much easier if we were using a hash!\n*/\nfunction applyEventDefMutation(eventDef, mutation, calendar) {\n    var resourceMutation = mutation.resourceMutation;\n    if (resourceMutation && computeResourceEditable(eventDef, calendar)) {\n        var index = eventDef.resourceIds.indexOf(resourceMutation.matchResourceId);\n        if (index !== -1) {\n            var resourceIds = eventDef.resourceIds.slice(); // copy\n            resourceIds.splice(index, 1); // remove\n            if (resourceIds.indexOf(resourceMutation.setResourceId) === -1) { // not already in there\n                resourceIds.push(resourceMutation.setResourceId); // add\n            }\n            eventDef.resourceIds = resourceIds;\n        }\n    }\n}\n/*\nHACK\nTODO: use EventUi system instead of this\n*/\nfunction computeResourceEditable(eventDef, calendar) {\n    var resourceEditable = eventDef.resourceEditable;\n    if (resourceEditable == null) {\n        var source = eventDef.sourceId && calendar.state.eventSources[eventDef.sourceId];\n        if (source) {\n            resourceEditable = source.extendedProps.resourceEditable; // used the Source::extendedProps hack\n        }\n        if (resourceEditable == null) {\n            resourceEditable = calendar.opt('eventResourceEditable');\n            if (resourceEditable == null) {\n                resourceEditable = calendar.opt('editable'); // TODO: use defaults system instead\n            }\n        }\n    }\n    return resourceEditable;\n}\nfunction transformEventDrop(mutation, calendar) {\n    var resourceMutation = mutation.resourceMutation;\n    if (resourceMutation) {\n        return {\n            oldResource: calendar.getResourceById(resourceMutation.matchResourceId),\n            newResource: calendar.getResourceById(resourceMutation.setResourceId)\n        };\n    }\n    else {\n        return {\n            oldResource: null,\n            newResource: null\n        };\n    }\n}\n\nvar ResourceDataAdder = /** @class */ (function () {\n    function ResourceDataAdder() {\n        this.filterResources = memoize(filterResources);\n    }\n    ResourceDataAdder.prototype.transform = function (viewProps, viewSpec, calendarProps, allOptions) {\n        if (viewSpec.class.needsResourceData) {\n            return {\n                resourceStore: this.filterResources(calendarProps.resourceStore, allOptions.filterResourcesWithEvents, calendarProps.eventStore, calendarProps.dateProfile.activeRange),\n                resourceEntityExpansions: calendarProps.resourceEntityExpansions\n            };\n        }\n    };\n    return ResourceDataAdder;\n}());\nfunction filterResources(resourceStore, doFilterResourcesWithEvents, eventStore, activeRange) {\n    if (doFilterResourcesWithEvents) {\n        var instancesInRange = filterEventInstancesInRange(eventStore.instances, activeRange);\n        var hasEvents_1 = computeHasEvents(instancesInRange, eventStore.defs);\n        __assign(hasEvents_1, computeAncestorHasEvents(hasEvents_1, resourceStore));\n        return filterHash(resourceStore, function (resource, resourceId) {\n            return hasEvents_1[resourceId];\n        });\n    }\n    else {\n        return resourceStore;\n    }\n}\nfunction filterEventInstancesInRange(eventInstances, activeRange) {\n    return filterHash(eventInstances, function (eventInstance) {\n        return rangesIntersect(eventInstance.range, activeRange);\n    });\n}\nfunction computeHasEvents(eventInstances, eventDefs) {\n    var hasEvents = {};\n    for (var instanceId in eventInstances) {\n        var instance = eventInstances[instanceId];\n        for (var _i = 0, _a = eventDefs[instance.defId].resourceIds; _i < _a.length; _i++) {\n            var resourceId = _a[_i];\n            hasEvents[resourceId] = true;\n        }\n    }\n    return hasEvents;\n}\n/*\nmark resources as having events if any of their ancestors have them\nNOTE: resourceStore might not have all the resources that hasEvents{} has keyed\n*/\nfunction computeAncestorHasEvents(hasEvents, resourceStore) {\n    var res = {};\n    for (var resourceId in hasEvents) {\n        var resource = void 0;\n        while ((resource = resourceStore[resourceId])) {\n            resourceId = resource.parentId; // now functioning as the parentId\n            if (resourceId) {\n                res[resourceId] = true;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    return res;\n}\n// for when non-resource view should be given EventUi info (for event coloring/constraints based off of resource data)\nvar ResourceEventConfigAdder = /** @class */ (function () {\n    function ResourceEventConfigAdder() {\n        this.buildResourceEventUis = memoizeOutput(buildResourceEventUis, isPropsEqual);\n        this.injectResourceEventUis = memoize(injectResourceEventUis);\n    }\n    ResourceEventConfigAdder.prototype.transform = function (viewProps, viewSpec, calendarProps) {\n        if (!viewSpec.class.needsResourceData) { // is a non-resource view?\n            return {\n                eventUiBases: this.injectResourceEventUis(viewProps.eventUiBases, viewProps.eventStore.defs, this.buildResourceEventUis(calendarProps.resourceStore))\n            };\n        }\n    };\n    return ResourceEventConfigAdder;\n}());\nfunction buildResourceEventUis(resourceStore) {\n    return mapHash(resourceStore, function (resource) {\n        return resource.ui;\n    });\n}\nfunction injectResourceEventUis(eventUiBases, eventDefs, resourceEventUis) {\n    return mapHash(eventUiBases, function (eventUi, defId) {\n        if (defId) { // not the '' key\n            return injectResourceEventUi(eventUi, eventDefs[defId], resourceEventUis);\n        }\n        else {\n            return eventUi;\n        }\n    });\n}\nfunction injectResourceEventUi(origEventUi, eventDef, resourceEventUis) {\n    var parts = [];\n    // first resource takes precedence, which fights with the ordering of combineEventUis, thus the unshifts\n    for (var _i = 0, _a = eventDef.resourceIds; _i < _a.length; _i++) {\n        var resourceId = _a[_i];\n        if (resourceEventUis[resourceId]) {\n            parts.unshift(resourceEventUis[resourceId]);\n        }\n    }\n    parts.unshift(origEventUi);\n    return combineEventUis(parts);\n}\n// for making sure events that have editable resources are always draggable in resource views\nfunction transformIsDraggable(val, eventDef, eventUi, view) {\n    if (!val) {\n        if (view.viewSpec.class.needsResourceData) {\n            if (computeResourceEditable(eventDef, view.context.calendar)) { // yuck\n                return true;\n            }\n        }\n    }\n    return val;\n}\n\nvar RESOURCE_SOURCE_PROPS = {\n    id: String\n};\nvar defs = [];\nvar uid = 0;\nfunction registerResourceSourceDef(def) {\n    defs.push(def);\n}\nfunction getResourceSourceDef(id) {\n    return defs[id];\n}\nfunction doesSourceIgnoreRange(source) {\n    return Boolean(defs[source.sourceDefId].ignoreRange);\n}\nfunction parseResourceSource(input) {\n    for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(input);\n        if (meta) {\n            var res = parseResourceSourceProps((typeof input === 'object' && input) ? input : {}, meta, i);\n            res._raw = input;\n            return res;\n        }\n    }\n    return null;\n}\nfunction parseResourceSourceProps(input, meta, sourceDefId) {\n    var props = refineProps(input, RESOURCE_SOURCE_PROPS);\n    props.sourceId = String(uid++);\n    props.sourceDefId = sourceDefId;\n    props.meta = meta;\n    props.publicId = props.id;\n    props.isFetching = false;\n    props.latestFetchId = '';\n    props.fetchRange = null;\n    delete props.id;\n    return props;\n}\n\nfunction reduceResourceSource (source, action, dateProfile, calendar) {\n    switch (action.type) {\n        case 'INIT':\n            return createSource(calendar.opt('resources'), calendar);\n        case 'RESET_RESOURCE_SOURCE':\n            return createSource(action.resourceSourceInput, calendar, true);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            return handleRange(source, dateProfile.activeRange, calendar);\n        case 'RECEIVE_RESOURCES':\n        case 'RECEIVE_RESOURCE_ERROR':\n            return receiveResponse(source, action.fetchId, action.fetchRange);\n        case 'REFETCH_RESOURCES':\n            return fetchSource(source, dateProfile.activeRange, calendar);\n        default:\n            return source;\n    }\n}\nvar uid$1 = 0;\nfunction createSource(input, calendar, forceFetch) {\n    if (input) {\n        var source = parseResourceSource(input);\n        if (forceFetch || !calendar.opt('refetchResourcesOnNavigate')) { // because assumes handleRange will do it later\n            source = fetchSource(source, null, calendar);\n        }\n        return source;\n    }\n    return null;\n}\nfunction handleRange(source, activeRange, calendar) {\n    if (calendar.opt('refetchResourcesOnNavigate') &&\n        !doesSourceIgnoreRange(source) &&\n        (!source.fetchRange || !rangesEqual(source.fetchRange, activeRange))) {\n        return fetchSource(source, activeRange, calendar);\n    }\n    else {\n        return source;\n    }\n}\nfunction fetchSource(source, fetchRange, calendar) {\n    var sourceDef = getResourceSourceDef(source.sourceDefId);\n    var fetchId = String(uid$1++);\n    sourceDef.fetch({\n        resourceSource: source,\n        calendar: calendar,\n        range: fetchRange\n    }, function (res) {\n        // HACK\n        // do before calling dispatch in case dispatch renders synchronously\n        calendar.afterSizingTriggers._resourcesRendered = [null]; // fire once\n        calendar.dispatch({\n            type: 'RECEIVE_RESOURCES',\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawResources: res.rawResources\n        });\n    }, function (error) {\n        calendar.dispatch({\n            type: 'RECEIVE_RESOURCE_ERROR',\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error\n        });\n    });\n    return __assign({}, source, { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(source, fetchId, fetchRange) {\n    if (fetchId === source.latestFetchId) {\n        return __assign({}, source, { isFetching: false, fetchRange: fetchRange });\n    }\n    return source;\n}\n\nvar RESOURCE_PROPS = {\n    id: String,\n    title: String,\n    parentId: String,\n    businessHours: null,\n    children: null,\n    extendedProps: null\n};\nvar PRIVATE_ID_PREFIX = '_fc:';\nvar uid$2 = 0;\n/*\nneeds a full store so that it can populate children too\n*/\nfunction parseResource(input, parentId, store, calendar) {\n    if (parentId === void 0) { parentId = ''; }\n    var leftovers0 = {};\n    var props = refineProps(input, RESOURCE_PROPS, {}, leftovers0);\n    var leftovers1 = {};\n    var ui = processScopedUiProps('event', leftovers0, calendar, leftovers1);\n    if (!props.id) {\n        props.id = PRIVATE_ID_PREFIX + (uid$2++);\n    }\n    if (!props.parentId) { // give precedence to the parentId property\n        props.parentId = parentId;\n    }\n    props.businessHours = props.businessHours ? parseBusinessHours(props.businessHours, calendar) : null;\n    props.ui = ui;\n    props.extendedProps = __assign({}, leftovers1, props.extendedProps);\n    // help out ResourceApi from having user modify props\n    Object.freeze(ui.classNames);\n    Object.freeze(props.extendedProps);\n    if (store[props.id]) ;\n    else {\n        store[props.id] = props;\n        if (props.children) {\n            for (var _i = 0, _a = props.children; _i < _a.length; _i++) {\n                var childInput = _a[_i];\n                parseResource(childInput, props.id, store, calendar);\n            }\n            delete props.children;\n        }\n    }\n    return props;\n}\n/*\nTODO: use this in more places\n*/\nfunction getPublicId(id) {\n    if (id.indexOf(PRIVATE_ID_PREFIX) === 0) {\n        return '';\n    }\n    return id;\n}\n\nfunction reduceResourceStore (store, action, source, calendar) {\n    switch (action.type) {\n        case 'INIT':\n            return {};\n        case 'RECEIVE_RESOURCES':\n            return receiveRawResources(store, action.rawResources, action.fetchId, source, calendar);\n        case 'ADD_RESOURCE':\n            return addResource(store, action.resourceHash);\n        case 'REMOVE_RESOURCE':\n            return removeResource(store, action.resourceId);\n        case 'SET_RESOURCE_PROP':\n            return setResourceProp(store, action.resourceId, action.propName, action.propValue);\n        case 'RESET_RESOURCES':\n            // must make the calendar think each resource is a new object :/\n            return mapHash(store, function (resource) {\n                return __assign({}, resource);\n            });\n        default:\n            return store;\n    }\n}\nfunction receiveRawResources(existingStore, inputs, fetchId, source, calendar) {\n    if (source.latestFetchId === fetchId) {\n        var nextStore = {};\n        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n            var input = inputs_1[_i];\n            parseResource(input, '', nextStore, calendar);\n        }\n        return nextStore;\n    }\n    else {\n        return existingStore;\n    }\n}\nfunction addResource(existingStore, additions) {\n    // TODO: warn about duplicate IDs\n    return __assign({}, existingStore, additions);\n}\nfunction removeResource(existingStore, resourceId) {\n    var newStore = __assign({}, existingStore);\n    delete newStore[resourceId];\n    // promote children\n    for (var childResourceId in newStore) { // a child, *maybe* but probably not\n        if (newStore[childResourceId].parentId === resourceId) {\n            newStore[childResourceId] = __assign({}, newStore[childResourceId], { parentId: '' });\n        }\n    }\n    return newStore;\n}\nfunction setResourceProp(existingStore, resourceId, name, value) {\n    var _a, _b;\n    var existingResource = existingStore[resourceId];\n    // TODO: sanitization\n    if (existingResource) {\n        return __assign({}, existingStore, (_a = {}, _a[resourceId] = __assign({}, existingResource, (_b = {}, _b[name] = value, _b)), _a));\n    }\n    else {\n        return existingStore;\n    }\n}\n\nfunction reduceResourceEntityExpansions(expansions, action) {\n    var _a;\n    switch (action.type) {\n        case 'INIT':\n            return {};\n        case 'SET_RESOURCE_ENTITY_EXPANDED':\n            return __assign({}, expansions, (_a = {}, _a[action.id] = action.isExpanded, _a));\n        default:\n            return expansions;\n    }\n}\n\nfunction resourcesReducers (state, action, calendar) {\n    var resourceSource = reduceResourceSource(state.resourceSource, action, state.dateProfile, calendar);\n    var resourceStore = reduceResourceStore(state.resourceStore, action, resourceSource, calendar);\n    var resourceEntityExpansions = reduceResourceEntityExpansions(state.resourceEntityExpansions, action);\n    var loadingLevel = state.loadingLevel + ((resourceSource && resourceSource.isFetching) ? 1 : 0);\n    return __assign({}, state, { resourceSource: resourceSource,\n        resourceStore: resourceStore,\n        resourceEntityExpansions: resourceEntityExpansions,\n        loadingLevel: loadingLevel });\n}\n\nvar RESOURCE_RELATED_PROPS = {\n    resourceId: String,\n    resourceIds: function (items) {\n        return (items || []).map(function (item) {\n            return String(item);\n        });\n    },\n    resourceEditable: Boolean\n};\nfunction parseEventDef(def, props, leftovers) {\n    var resourceRelatedProps = refineProps(props, RESOURCE_RELATED_PROPS, {}, leftovers);\n    var resourceIds = resourceRelatedProps.resourceIds;\n    if (resourceRelatedProps.resourceId) {\n        resourceIds.push(resourceRelatedProps.resourceId);\n    }\n    def.resourceIds = resourceIds;\n    def.resourceEditable = resourceRelatedProps.resourceEditable;\n}\n\nfunction transformDateSelectionJoin(hit0, hit1) {\n    var resourceId0 = hit0.dateSpan.resourceId;\n    var resourceId1 = hit1.dateSpan.resourceId;\n    if (resourceId0 && resourceId1) {\n        if (hit0.component.allowAcrossResources === false &&\n            resourceId0 !== resourceId1) {\n            return false;\n        }\n        else {\n            return { resourceId: resourceId0 };\n        }\n    }\n}\n\nvar ResourceApi = /** @class */ (function () {\n    function ResourceApi(calendar, rawResource) {\n        this._calendar = calendar;\n        this._resource = rawResource;\n    }\n    ResourceApi.prototype.setProp = function (name, value) {\n        this._calendar.dispatch({\n            type: 'SET_RESOURCE_PROP',\n            resourceId: this._resource.id,\n            propName: name,\n            propValue: value\n        });\n    };\n    ResourceApi.prototype.remove = function () {\n        this._calendar.dispatch({\n            type: 'REMOVE_RESOURCE',\n            resourceId: this._resource.id\n        });\n    };\n    ResourceApi.prototype.getParent = function () {\n        var calendar = this._calendar;\n        var parentId = this._resource.parentId;\n        if (parentId) {\n            return new ResourceApi(calendar, calendar.state.resourceSource[parentId]);\n        }\n        else {\n            return null;\n        }\n    };\n    ResourceApi.prototype.getChildren = function () {\n        var thisResourceId = this._resource.id;\n        var calendar = this._calendar;\n        var resourceStore = calendar.state.resourceStore;\n        var childApis = [];\n        for (var resourceId in resourceStore) {\n            if (resourceStore[resourceId].parentId === thisResourceId) {\n                childApis.push(new ResourceApi(calendar, resourceStore[resourceId]));\n            }\n        }\n        return childApis;\n    };\n    /*\n    this is really inefficient!\n    TODO: make EventApi::resourceIds a hash or keep an index in the Calendar's state\n    */\n    ResourceApi.prototype.getEvents = function () {\n        var thisResourceId = this._resource.id;\n        var calendar = this._calendar;\n        var _a = calendar.state.eventStore, defs = _a.defs, instances = _a.instances;\n        var eventApis = [];\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            var def = defs[instance.defId];\n            if (def.resourceIds.indexOf(thisResourceId) !== -1) { // inefficient!!!\n                eventApis.push(new EventApi(calendar, def, instance));\n            }\n        }\n        return eventApis;\n    };\n    Object.defineProperty(ResourceApi.prototype, \"id\", {\n        get: function () { return this._resource.id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"title\", {\n        get: function () { return this._resource.title; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventConstraint\", {\n        get: function () { return this._resource.ui.constraints[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventOverlap\", {\n        get: function () { return this._resource.ui.overlap; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventAllow\", {\n        get: function () { return this._resource.ui.allows[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventBackgroundColor\", {\n        get: function () { return this._resource.ui.backgroundColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventBorderColor\", {\n        get: function () { return this._resource.ui.borderColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventTextColor\", {\n        get: function () { return this._resource.ui.textColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"eventClassNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._resource.ui.classNames; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ResourceApi.prototype, \"extendedProps\", {\n        get: function () { return this._resource.extendedProps; },\n        enumerable: true,\n        configurable: true\n    });\n    return ResourceApi;\n}());\n\nCalendar.prototype.addResource = function (input, scrollTo) {\n    var _a;\n    if (scrollTo === void 0) { scrollTo = true; }\n    var resourceHash;\n    var resource;\n    if (input instanceof ResourceApi) {\n        resource = input._resource;\n        resourceHash = (_a = {}, _a[resource.id] = resource, _a);\n    }\n    else {\n        resourceHash = {};\n        resource = parseResource(input, '', resourceHash, this);\n    }\n    // HACK\n    if (scrollTo) {\n        this.component.view.addScroll({ forcedRowId: resource.id });\n    }\n    this.dispatch({\n        type: 'ADD_RESOURCE',\n        resourceHash: resourceHash\n    });\n    return new ResourceApi(this, resource);\n};\nCalendar.prototype.getResourceById = function (id) {\n    id = String(id);\n    if (this.state.resourceStore) { // guard against calendar with no resource functionality\n        var rawResource = this.state.resourceStore[id];\n        if (rawResource) {\n            return new ResourceApi(this, rawResource);\n        }\n    }\n    return null;\n};\nCalendar.prototype.getResources = function () {\n    var resourceStore = this.state.resourceStore;\n    var resourceApis = [];\n    if (resourceStore) { // guard against calendar with no resource functionality\n        for (var resourceId in resourceStore) {\n            resourceApis.push(new ResourceApi(this, resourceStore[resourceId]));\n        }\n    }\n    return resourceApis;\n};\nCalendar.prototype.getTopLevelResources = function () {\n    var resourceStore = this.state.resourceStore;\n    var resourceApis = [];\n    if (resourceStore) { // guard against calendar with no resource functionality\n        for (var resourceId in resourceStore) {\n            if (!resourceStore[resourceId].parentId) {\n                resourceApis.push(new ResourceApi(this, resourceStore[resourceId]));\n            }\n        }\n    }\n    return resourceApis;\n};\nCalendar.prototype.rerenderResources = function () {\n    this.dispatch({\n        type: 'RESET_RESOURCES'\n    });\n};\nCalendar.prototype.refetchResources = function () {\n    this.dispatch({\n        type: 'REFETCH_RESOURCES'\n    });\n};\nfunction transformDatePoint(dateSpan, calendar) {\n    return dateSpan.resourceId ?\n        { resource: calendar.getResourceById(dateSpan.resourceId) } :\n        {};\n}\nfunction transformDateSpan(dateSpan, calendar) {\n    return dateSpan.resourceId ?\n        { resource: calendar.getResourceById(dateSpan.resourceId) } :\n        {};\n}\n\n/*\nsplits things BASED OFF OF which resources they are associated with.\ncreates a '' entry which is when something has NO resource.\n*/\nvar ResourceSplitter = /** @class */ (function (_super) {\n    __extends(ResourceSplitter, _super);\n    function ResourceSplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ResourceSplitter.prototype.getKeyInfo = function (props) {\n        return __assign({ '': {} }, props.resourceStore // already has `ui` and `businessHours` keys!\n        );\n    };\n    ResourceSplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        return [dateSpan.resourceId || ''];\n    };\n    ResourceSplitter.prototype.getKeysForEventDef = function (eventDef) {\n        var resourceIds = eventDef.resourceIds;\n        if (!resourceIds.length) {\n            return [''];\n        }\n        return resourceIds;\n    };\n    return ResourceSplitter;\n}(Splitter));\n\nfunction isPropsValidWithResources(props, calendar) {\n    var splitter = new ResourceSplitter();\n    var sets = splitter.splitProps(__assign({}, props, { resourceStore: calendar.state.resourceStore }));\n    for (var resourceId in sets) {\n        var props_1 = sets[resourceId];\n        // merge in event data from the non-resource segment\n        if (resourceId && sets['']) { // current segment is not the non-resource one, and there IS a non-resource one\n            props_1 = __assign({}, props_1, { eventStore: mergeEventStores(sets[''].eventStore, props_1.eventStore), eventUiBases: __assign({}, sets[''].eventUiBases, props_1.eventUiBases) });\n        }\n        if (!isPropsValid(props_1, calendar, { resourceId: resourceId }, filterConfig.bind(null, resourceId))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction filterConfig(resourceId, config) {\n    return __assign({}, config, { constraints: filterConstraints(resourceId, config.constraints) });\n}\nfunction filterConstraints(resourceId, constraints) {\n    return constraints.map(function (constraint) {\n        var defs = constraint.defs;\n        if (defs) { // we are dealing with an EventStore\n            // if any of the events define constraints to resources that are NOT this resource,\n            // then this resource is unconditionally prohibited, which is what a `false` value does.\n            for (var defId in defs) {\n                var resourceIds = defs[defId].resourceIds;\n                if (resourceIds.length && resourceIds.indexOf(resourceId) === -1) { // TODO: use a hash?!!! (for other reasons too)\n                    return false;\n                }\n            }\n        }\n        return constraint;\n    });\n}\n\nfunction transformExternalDef(dateSpan) {\n    return dateSpan.resourceId ?\n        { resourceId: dateSpan.resourceId } :\n        {};\n}\n\nfunction transformEventResizeJoin(hit0, hit1) {\n    var component = hit0.component;\n    if (component.allowAcrossResources === false &&\n        hit0.dateSpan.resourceId !== hit1.dateSpan.resourceId) {\n        return false;\n    }\n}\n\nEventApi.prototype.getResources = function () {\n    var calendar = this._calendar;\n    return this._def.resourceIds.map(function (resourceId) {\n        return calendar.getResourceById(resourceId);\n    });\n};\nEventApi.prototype.setResources = function (resources) {\n    var resourceIds = [];\n    // massage resources -> resourceIds\n    for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n        var resource = resources_1[_i];\n        var resourceId = null;\n        if (typeof resource === 'string') {\n            resourceId = resource;\n        }\n        else if (typeof resource === 'number') {\n            resourceId = String(resource);\n        }\n        else if (resource instanceof ResourceApi) {\n            resourceId = resource.id; // guaranteed to always have an ID. hmmm\n        }\n        else {\n            console.warn('unknown resource type: ' + resource);\n        }\n        if (resourceId) {\n            resourceIds.push(resourceId);\n        }\n    }\n    this.mutate({\n        standardProps: {\n            resourceIds: resourceIds\n        }\n    });\n};\n\nvar RELEASE_DATE = '2020-05-28'; // for Scheduler\nvar UPGRADE_WINDOW = 365 + 7; // days. 1 week leeway, for tz shift reasons too\nvar LICENSE_INFO_URL = 'http://fullcalendar.io/scheduler/license/';\nvar PRESET_LICENSE_KEYS = [\n    'GPL-My-Project-Is-Open-Source',\n    'CC-Attribution-NonCommercial-NoDerivatives'\n];\nvar CSS = {\n    position: 'absolute',\n    'z-index': 99999,\n    bottom: '1px',\n    left: '1px',\n    background: '#eee',\n    'border-color': '#ddd',\n    'border-style': 'solid',\n    'border-width': '1px 1px 0 0',\n    padding: '2px 4px',\n    'font-size': '12px',\n    'border-top-right-radius': '3px'\n};\nfunction injectLicenseWarning(containerEl, calendar) {\n    var key = calendar.opt('schedulerLicenseKey');\n    if (!isImmuneUrl(window.location.href) && !isValidKey(key)) {\n        appendToElement(containerEl, '<div class=\"fc-license-message\" style=\"' + htmlEscape(cssToStr(CSS)) + '\">' +\n            'Please use a valid license key. <a href=\"' + LICENSE_INFO_URL + '\">More Info</a>' +\n            '</div>');\n    }\n}\n/*\nThis decryption is not meant to be bulletproof. Just a way to remind about an upgrade.\n*/\nfunction isValidKey(key) {\n    if (PRESET_LICENSE_KEYS.indexOf(key) !== -1) {\n        return true;\n    }\n    var parts = (key || '').match(/^(\\d+)\\-fcs\\-(\\d+)$/);\n    if (parts && (parts[1].length === 10)) {\n        var purchaseDate = new Date(parseInt(parts[2], 10) * 1000);\n        var releaseDate = new Date(config.mockSchedulerReleaseDate || RELEASE_DATE);\n        if (isValidDate(releaseDate)) { // token won't be replaced in dev mode\n            var minPurchaseDate = addDays(releaseDate, -UPGRADE_WINDOW);\n            if (minPurchaseDate < purchaseDate) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction isImmuneUrl(url) {\n    return /\\w+\\:\\/\\/fullcalendar\\.io\\/|\\/examples\\/[\\w-]+\\.html$/.test(url);\n}\n\nvar optionChangeHandlers = {\n    resources: handleResources\n};\nfunction handleResources(newSourceInput, calendar, deepEqual) {\n    var oldSourceInput = calendar.state.resourceSource._raw;\n    if (!deepEqual(oldSourceInput, newSourceInput)) {\n        calendar.dispatch({\n            type: 'RESET_RESOURCE_SOURCE',\n            resourceSourceInput: newSourceInput\n        });\n    }\n}\n\nregisterResourceSourceDef({\n    ignoreRange: true,\n    parseMeta: function (raw) {\n        if (Array.isArray(raw)) {\n            return raw;\n        }\n        else if (Array.isArray(raw.resources)) {\n            return raw.resources;\n        }\n        return null;\n    },\n    fetch: function (arg, successCallback) {\n        successCallback({\n            rawResources: arg.resourceSource.meta\n        });\n    }\n});\n\nregisterResourceSourceDef({\n    parseMeta: function (raw) {\n        if (typeof raw === 'function') {\n            return raw;\n        }\n        else if (typeof raw.resources === 'function') {\n            return raw.resources;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.calendar.dateEnv;\n        var func = arg.resourceSource.meta;\n        var publicArg = {};\n        if (arg.range) {\n            publicArg = {\n                start: dateEnv.toDate(arg.range.start),\n                end: dateEnv.toDate(arg.range.end),\n                startStr: dateEnv.formatIso(arg.range.start),\n                endStr: dateEnv.formatIso(arg.range.end),\n                timeZone: dateEnv.timeZone\n            };\n        }\n        // TODO: make more dry with EventSourceFunc\n        // TODO: accept a response?\n        unpromisify(func.bind(null, publicArg), function (rawResources) {\n            success({ rawResources: rawResources }); // needs an object response\n        }, failure // send errorObj directly to failure callback\n        );\n    }\n});\n\nregisterResourceSourceDef({\n    parseMeta: function (raw) {\n        if (typeof raw === 'string') {\n            raw = { url: raw };\n        }\n        else if (!raw || typeof raw !== 'object' || !raw.url) {\n            return null;\n        }\n        return {\n            url: raw.url,\n            method: (raw.method || 'GET').toUpperCase(),\n            extraParams: raw.extraParams\n        };\n    },\n    fetch: function (arg, successCallback, failureCallback) {\n        var meta = arg.resourceSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n        requestJson(meta.method, meta.url, requestParams, function (rawResources, xhr) {\n            successCallback({ rawResources: rawResources, xhr: xhr });\n        }, function (message, xhr) {\n            failureCallback({ message: message, xhr: xhr });\n        });\n    }\n});\n// TODO: somehow consolidate with event json feed\nfunction buildRequestParams(meta, range, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    if (range) {\n        // startParam = meta.startParam\n        // if (startParam == null) {\n        startParam = calendar.opt('startParam');\n        // }\n        // endParam = meta.endParam\n        // if (endParam == null) {\n        endParam = calendar.opt('endParam');\n        // }\n        // timeZoneParam = meta.timeZoneParam\n        // if (timeZoneParam == null) {\n        timeZoneParam = calendar.opt('timeZoneParam');\n        // }\n        params[startParam] = dateEnv.formatIso(range.start);\n        params[endParam] = dateEnv.formatIso(range.end);\n        if (dateEnv.timeZone !== 'local') {\n            params[timeZoneParam] = dateEnv.timeZone;\n        }\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    return params;\n}\n\nfunction buildResourceTextFunc(resourceTextSetting, calendar) {\n    if (typeof resourceTextSetting === 'function') {\n        return function (resource) {\n            return resourceTextSetting(new ResourceApi(calendar, resource));\n        };\n    }\n    else {\n        return function (resource) {\n            return resource.title || getPublicId(resource.id);\n        };\n    }\n}\n\nvar ResourceDayHeader = /** @class */ (function (_super) {\n    __extends(ResourceDayHeader, _super);\n    function ResourceDayHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    ResourceDayHeader.prototype._processOptions = function (options, calendar) {\n        this.datesAboveResources = options.datesAboveResources;\n        this.resourceTextFunc = buildResourceTextFunc(options.resourceText, calendar);\n    };\n    ResourceDayHeader.prototype.render = function (props, context) {\n        var options = context.options, calendar = context.calendar, theme = context.theme;\n        this.processOptions(options, calendar);\n        this.parentEl.innerHTML = ''; // because might be nbsp\n        this.parentEl.appendChild(this.el = htmlToElement('<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<thead></thead>' +\n            '</table>' +\n            '</div>'));\n        this.thead = this.el.querySelector('thead');\n        var html;\n        this.dateFormat = createFormatter(options.columnHeaderFormat ||\n            computeFallbackHeaderFormat(props.datesRepDistinctDays, props.dates.length));\n        if (props.dates.length === 1) {\n            html = this.renderResourceRow(props.resources);\n        }\n        else {\n            if (this.datesAboveResources) {\n                html = this.renderDayAndResourceRows(props.dates, props.resources);\n            }\n            else {\n                html = this.renderResourceAndDayRows(props.resources, props.dates);\n            }\n        }\n        this.thead.innerHTML = html;\n        this.processResourceEls(props.resources);\n    };\n    ResourceDayHeader.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    ResourceDayHeader.prototype.renderResourceRow = function (resources) {\n        var _this = this;\n        var cellHtmls = resources.map(function (resource) {\n            return _this.renderResourceCell(resource, 1);\n        });\n        return this.buildTr(cellHtmls);\n    };\n    ResourceDayHeader.prototype.renderDayAndResourceRows = function (dates, resources) {\n        var dateHtmls = [];\n        var resourceHtmls = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            dateHtmls.push(this.renderDateCell(date, resources.length));\n            for (var _a = 0, resources_1 = resources; _a < resources_1.length; _a++) {\n                var resource = resources_1[_a];\n                resourceHtmls.push(this.renderResourceCell(resource, 1, date));\n            }\n        }\n        return this.buildTr(dateHtmls) +\n            this.buildTr(resourceHtmls);\n    };\n    ResourceDayHeader.prototype.renderResourceAndDayRows = function (resources, dates) {\n        var resourceHtmls = [];\n        var dateHtmls = [];\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            resourceHtmls.push(this.renderResourceCell(resource, dates.length));\n            for (var _a = 0, dates_2 = dates; _a < dates_2.length; _a++) {\n                var date = dates_2[_a];\n                dateHtmls.push(this.renderDateCell(date, 1, resource));\n            }\n        }\n        return this.buildTr(resourceHtmls) +\n            this.buildTr(dateHtmls);\n    };\n    // Cell Rendering Utils\n    // ----------------------------------------------------------------------------------------------\n    // a cell with the resource name. might be associated with a specific day\n    ResourceDayHeader.prototype.renderResourceCell = function (resource, colspan, date) {\n        var dateEnv = this.context.dateEnv;\n        return '<th class=\"fc-resource-cell\"' +\n            ' data-resource-id=\"' + resource.id + '\"' +\n            (date ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            (colspan > 1 ?\n                ' colspan=\"' + colspan + '\"' :\n                '') +\n            '>' +\n            htmlEscape(this.resourceTextFunc(resource)) +\n            '</th>';\n    };\n    // a cell with date text. might have a resource associated with it\n    ResourceDayHeader.prototype.renderDateCell = function (date, colspan, resource) {\n        var props = this.props;\n        return renderDateCell(date, props.dateProfile, props.datesRepDistinctDays, props.dates.length * props.resources.length, this.dateFormat, this.context, colspan, resource ? 'data-resource-id=\"' + resource.id + '\"' : '');\n    };\n    ResourceDayHeader.prototype.buildTr = function (cellHtmls) {\n        if (!cellHtmls.length) {\n            cellHtmls = ['<td>&nbsp;</td>'];\n        }\n        if (this.props.renderIntroHtml) {\n            cellHtmls = [this.props.renderIntroHtml()].concat(cellHtmls);\n        }\n        if (this.context.isRtl) {\n            cellHtmls.reverse();\n        }\n        return '<tr>' +\n            cellHtmls.join('') +\n            '</tr>';\n    };\n    // Post-rendering\n    // ----------------------------------------------------------------------------------------------\n    // given a container with already rendered resource cells\n    ResourceDayHeader.prototype.processResourceEls = function (resources) {\n        var _a = this.context, calendar = _a.calendar, isRtl = _a.isRtl, view = _a.view;\n        findElements(this.thead, '.fc-resource-cell').forEach(function (node, col) {\n            col = col % resources.length;\n            if (isRtl) {\n                col = resources.length - 1 - col;\n            }\n            var resource = resources[col];\n            calendar.publiclyTrigger('resourceRender', [\n                {\n                    resource: new ResourceApi(calendar, resource),\n                    el: node,\n                    view: view\n                }\n            ]);\n        });\n    };\n    return ResourceDayHeader;\n}(Component));\n\nvar AbstractResourceDayTable = /** @class */ (function () {\n    function AbstractResourceDayTable(dayTable, resources) {\n        this.dayTable = dayTable;\n        this.resources = resources;\n        this.resourceIndex = new ResourceIndex(resources);\n        this.rowCnt = dayTable.rowCnt;\n        this.colCnt = dayTable.colCnt * resources.length;\n        this.cells = this.buildCells();\n    }\n    AbstractResourceDayTable.prototype.buildCells = function () {\n        var _a = this, rowCnt = _a.rowCnt, dayTable = _a.dayTable, resources = _a.resources;\n        var rows = [];\n        for (var row = 0; row < rowCnt; row++) {\n            var rowCells = [];\n            for (var dateCol = 0; dateCol < dayTable.colCnt; dateCol++) {\n                for (var resourceCol = 0; resourceCol < resources.length; resourceCol++) {\n                    var resource = resources[resourceCol];\n                    var htmlAttrs = 'data-resource-id=\"' + resource.id + '\"';\n                    rowCells[this.computeCol(dateCol, resourceCol)] = {\n                        date: dayTable.cells[row][dateCol].date,\n                        resource: resource,\n                        htmlAttrs: htmlAttrs\n                    };\n                }\n            }\n            rows.push(rowCells);\n        }\n        return rows;\n    };\n    return AbstractResourceDayTable;\n}());\n/*\nresources over dates\n*/\nvar ResourceDayTable = /** @class */ (function (_super) {\n    __extends(ResourceDayTable, _super);\n    function ResourceDayTable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ResourceDayTable.prototype.computeCol = function (dateI, resourceI) {\n        return resourceI * this.dayTable.colCnt + dateI;\n    };\n    /*\n    all date ranges are intact\n    */\n    ResourceDayTable.prototype.computeColRanges = function (dateStartI, dateEndI, resourceI) {\n        return [\n            {\n                firstCol: this.computeCol(dateStartI, resourceI),\n                lastCol: this.computeCol(dateEndI, resourceI),\n                isStart: true,\n                isEnd: true\n            }\n        ];\n    };\n    return ResourceDayTable;\n}(AbstractResourceDayTable));\n/*\ndates over resources\n*/\nvar DayResourceTable = /** @class */ (function (_super) {\n    __extends(DayResourceTable, _super);\n    function DayResourceTable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayResourceTable.prototype.computeCol = function (dateI, resourceI) {\n        return dateI * this.resources.length + resourceI;\n    };\n    /*\n    every single day is broken up\n    */\n    DayResourceTable.prototype.computeColRanges = function (dateStartI, dateEndI, resourceI) {\n        var segs = [];\n        for (var i = dateStartI; i <= dateEndI; i++) {\n            var col = this.computeCol(i, resourceI);\n            segs.push({\n                firstCol: col,\n                lastCol: col,\n                isStart: i === dateStartI,\n                isEnd: i === dateEndI\n            });\n        }\n        return segs;\n    };\n    return DayResourceTable;\n}(AbstractResourceDayTable));\nvar ResourceIndex = /** @class */ (function () {\n    function ResourceIndex(resources) {\n        var indicesById = {};\n        var ids = [];\n        for (var i = 0; i < resources.length; i++) {\n            var id = resources[i].id;\n            ids.push(id);\n            indicesById[id] = i;\n        }\n        this.ids = ids;\n        this.indicesById = indicesById;\n        this.length = resources.length;\n    }\n    return ResourceIndex;\n}());\n/*\nTODO: just use ResourceHash somehow? could then use the generic ResourceSplitter\n*/\nvar VResourceSplitter = /** @class */ (function (_super) {\n    __extends(VResourceSplitter, _super);\n    function VResourceSplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VResourceSplitter.prototype.getKeyInfo = function (props) {\n        var resourceDayTable = props.resourceDayTable;\n        var hash = mapHash(resourceDayTable.resourceIndex.indicesById, function (i) {\n            return resourceDayTable.resources[i]; // has `ui` AND `businessHours` keys!\n        }); // :(\n        hash[''] = {};\n        return hash;\n    };\n    VResourceSplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        return [dateSpan.resourceId || ''];\n    };\n    VResourceSplitter.prototype.getKeysForEventDef = function (eventDef) {\n        var resourceIds = eventDef.resourceIds;\n        if (!resourceIds.length) {\n            return [''];\n        }\n        return resourceIds;\n    };\n    return VResourceSplitter;\n}(Splitter));\n// joiner\nvar NO_SEGS = []; // for memoizing\nvar VResourceJoiner = /** @class */ (function () {\n    function VResourceJoiner() {\n        this.joinDateSelection = memoize(this.joinSegs);\n        this.joinBusinessHours = memoize(this.joinSegs);\n        this.joinFgEvents = memoize(this.joinSegs);\n        this.joinBgEvents = memoize(this.joinSegs);\n        this.joinEventDrags = memoize(this.joinInteractions);\n        this.joinEventResizes = memoize(this.joinInteractions);\n    }\n    /*\n    propSets also has a '' key for things with no resource\n    */\n    VResourceJoiner.prototype.joinProps = function (propSets, resourceDayTable) {\n        var dateSelectionSets = [];\n        var businessHoursSets = [];\n        var fgEventSets = [];\n        var bgEventSets = [];\n        var eventDrags = [];\n        var eventResizes = [];\n        var eventSelection = '';\n        var keys = resourceDayTable.resourceIndex.ids.concat(['']); // add in the all-resource key\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var props = propSets[key];\n            dateSelectionSets.push(props.dateSelectionSegs);\n            businessHoursSets.push(key ? props.businessHourSegs : NO_SEGS); // don't include redundant all-resource businesshours\n            fgEventSets.push(key ? props.fgEventSegs : NO_SEGS); // don't include fg all-resource segs\n            bgEventSets.push(props.bgEventSegs);\n            eventDrags.push(props.eventDrag);\n            eventResizes.push(props.eventResize);\n            eventSelection = eventSelection || props.eventSelection;\n        }\n        return {\n            dateSelectionSegs: this.joinDateSelection.apply(this, [resourceDayTable].concat(dateSelectionSets)),\n            businessHourSegs: this.joinBusinessHours.apply(this, [resourceDayTable].concat(businessHoursSets)),\n            fgEventSegs: this.joinFgEvents.apply(this, [resourceDayTable].concat(fgEventSets)),\n            bgEventSegs: this.joinBgEvents.apply(this, [resourceDayTable].concat(bgEventSets)),\n            eventDrag: this.joinEventDrags.apply(this, [resourceDayTable].concat(eventDrags)),\n            eventResize: this.joinEventResizes.apply(this, [resourceDayTable].concat(eventResizes)),\n            eventSelection: eventSelection\n        };\n    };\n    VResourceJoiner.prototype.joinSegs = function (resourceDayTable) {\n        var segGroups = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            segGroups[_i - 1] = arguments[_i];\n        }\n        var resourceCnt = resourceDayTable.resources.length;\n        var transformedSegs = [];\n        for (var i = 0; i < resourceCnt; i++) {\n            for (var _a = 0, _b = segGroups[i]; _a < _b.length; _a++) {\n                var seg = _b[_a];\n                transformedSegs.push.apply(transformedSegs, this.transformSeg(seg, resourceDayTable, i));\n            }\n            for (var _c = 0, _d = segGroups[resourceCnt]; _c < _d.length; _c++) { // one beyond. the all-resource\n                var seg = _d[_c];\n                transformedSegs.push.apply(// one beyond. the all-resource\n                transformedSegs, this.transformSeg(seg, resourceDayTable, i));\n            }\n        }\n        return transformedSegs;\n    };\n    /*\n    for expanding non-resource segs to all resources.\n    only for public use.\n    no memoizing.\n    */\n    VResourceJoiner.prototype.expandSegs = function (resourceDayTable, segs) {\n        var resourceCnt = resourceDayTable.resources.length;\n        var transformedSegs = [];\n        for (var i = 0; i < resourceCnt; i++) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                transformedSegs.push.apply(transformedSegs, this.transformSeg(seg, resourceDayTable, i));\n            }\n        }\n        return transformedSegs;\n    };\n    VResourceJoiner.prototype.joinInteractions = function (resourceDayTable) {\n        var interactions = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            interactions[_i - 1] = arguments[_i];\n        }\n        var resourceCnt = resourceDayTable.resources.length;\n        var affectedInstances = {};\n        var transformedSegs = [];\n        var isEvent = false;\n        var sourceSeg = null;\n        for (var i = 0; i < resourceCnt; i++) {\n            var interaction = interactions[i];\n            if (interaction) {\n                for (var _a = 0, _b = interaction.segs; _a < _b.length; _a++) {\n                    var seg = _b[_a];\n                    transformedSegs.push.apply(transformedSegs, this.transformSeg(seg, resourceDayTable, i) // TODO: templateify Interaction::segs\n                    );\n                }\n                __assign(affectedInstances, interaction.affectedInstances);\n                isEvent = isEvent || interaction.isEvent;\n                sourceSeg = sourceSeg || interaction.sourceSeg;\n            }\n            if (interactions[resourceCnt]) { // one beyond. the all-resource\n                for (var _c = 0, _d = interactions[resourceCnt].segs; _c < _d.length; _c++) {\n                    var seg = _d[_c];\n                    transformedSegs.push.apply(transformedSegs, this.transformSeg(seg, resourceDayTable, i) // TODO: templateify Interaction::segs\n                    );\n                }\n            }\n        }\n        return {\n            affectedInstances: affectedInstances,\n            segs: transformedSegs,\n            isEvent: isEvent,\n            sourceSeg: sourceSeg\n        };\n    };\n    return VResourceJoiner;\n}());\n\n/*\ndoesn't accept grouping\n*/\nfunction flattenResources(resourceStore, orderSpecs) {\n    return buildRowNodes(resourceStore, [], orderSpecs, false, {}, true)\n        .map(function (node) {\n        return node.resource;\n    });\n}\nfunction buildRowNodes(resourceStore, groupSpecs, orderSpecs, isVGrouping, expansions, expansionDefault) {\n    var complexNodes = buildHierarchy(resourceStore, isVGrouping ? -1 : 1, groupSpecs, orderSpecs);\n    var flatNodes = [];\n    flattenNodes(complexNodes, flatNodes, isVGrouping, [], 0, expansions, expansionDefault);\n    return flatNodes;\n}\nfunction flattenNodes(complexNodes, res, isVGrouping, rowSpans, depth, expansions, expansionDefault) {\n    for (var i = 0; i < complexNodes.length; i++) {\n        var complexNode = complexNodes[i];\n        var group = complexNode.group;\n        if (group) {\n            if (isVGrouping) {\n                var firstRowIndex = res.length;\n                var rowSpanIndex = rowSpans.length;\n                flattenNodes(complexNode.children, res, isVGrouping, rowSpans.concat(0), depth, expansions, expansionDefault);\n                if (firstRowIndex < res.length) {\n                    var firstRow = res[firstRowIndex];\n                    var firstRowSpans = firstRow.rowSpans = firstRow.rowSpans.slice();\n                    firstRowSpans[rowSpanIndex] = res.length - firstRowIndex;\n                }\n            }\n            else {\n                var id = group.spec.field + ':' + group.value;\n                var isExpanded = expansions[id] != null ? expansions[id] : expansionDefault;\n                res.push({ id: id, group: group, isExpanded: isExpanded });\n                if (isExpanded) {\n                    flattenNodes(complexNode.children, res, isVGrouping, rowSpans, depth + 1, expansions, expansionDefault);\n                }\n            }\n        }\n        else if (complexNode.resource) {\n            var id = complexNode.resource.id;\n            var isExpanded = expansions[id] != null ? expansions[id] : expansionDefault;\n            res.push({\n                id: id,\n                rowSpans: rowSpans,\n                depth: depth,\n                isExpanded: isExpanded,\n                hasChildren: Boolean(complexNode.children.length),\n                resource: complexNode.resource,\n                resourceFields: complexNode.resourceFields\n            });\n            if (isExpanded) {\n                flattenNodes(complexNode.children, res, isVGrouping, rowSpans, depth + 1, expansions, expansionDefault);\n            }\n        }\n    }\n}\nfunction buildHierarchy(resourceStore, maxDepth, groupSpecs, orderSpecs) {\n    var resourceNodes = buildResourceNodes(resourceStore, orderSpecs);\n    var builtNodes = [];\n    for (var resourceId in resourceNodes) {\n        var resourceNode = resourceNodes[resourceId];\n        if (!resourceNode.resource.parentId) {\n            insertResourceNode(resourceNode, builtNodes, groupSpecs, 0, maxDepth, orderSpecs);\n        }\n    }\n    return builtNodes;\n}\nfunction buildResourceNodes(resourceStore, orderSpecs) {\n    var nodeHash = {};\n    for (var resourceId in resourceStore) {\n        var resource = resourceStore[resourceId];\n        nodeHash[resourceId] = {\n            resource: resource,\n            resourceFields: buildResourceFields(resource),\n            children: []\n        };\n    }\n    for (var resourceId in resourceStore) {\n        var resource = resourceStore[resourceId];\n        if (resource.parentId) {\n            var parentNode = nodeHash[resource.parentId];\n            if (parentNode) {\n                insertResourceNodeInSiblings(nodeHash[resourceId], parentNode.children, orderSpecs);\n            }\n        }\n    }\n    return nodeHash;\n}\nfunction insertResourceNode(resourceNode, nodes, groupSpecs, depth, maxDepth, orderSpecs) {\n    if (groupSpecs.length && (maxDepth === -1 || depth <= maxDepth)) {\n        var groupNode = ensureGroupNodes(resourceNode, nodes, groupSpecs[0]);\n        insertResourceNode(resourceNode, groupNode.children, groupSpecs.slice(1), depth + 1, maxDepth, orderSpecs);\n    }\n    else {\n        insertResourceNodeInSiblings(resourceNode, nodes, orderSpecs);\n    }\n}\nfunction ensureGroupNodes(resourceNode, nodes, groupSpec) {\n    var groupValue = resourceNode.resourceFields[groupSpec.field];\n    var groupNode;\n    var newGroupIndex;\n    // find an existing group that matches, or determine the position for a new group\n    if (groupSpec.order) {\n        for (newGroupIndex = 0; newGroupIndex < nodes.length; newGroupIndex++) {\n            var node = nodes[newGroupIndex];\n            if (node.group) {\n                var cmp = flexibleCompare(groupValue, node.group.value) * groupSpec.order;\n                if (cmp === 0) {\n                    groupNode = node;\n                    break;\n                }\n                else if (cmp < 0) {\n                    break;\n                }\n            }\n        }\n    }\n    else { // the groups are unordered\n        for (newGroupIndex = 0; newGroupIndex < nodes.length; newGroupIndex++) {\n            var node = nodes[newGroupIndex];\n            if (node.group && groupValue === node.group.value) {\n                groupNode = node;\n                break;\n            }\n        }\n    }\n    if (!groupNode) {\n        groupNode = {\n            group: {\n                value: groupValue,\n                spec: groupSpec\n            },\n            children: []\n        };\n        nodes.splice(newGroupIndex, 0, groupNode);\n    }\n    return groupNode;\n}\nfunction insertResourceNodeInSiblings(resourceNode, siblings, orderSpecs) {\n    var i;\n    for (i = 0; i < siblings.length; i++) {\n        var cmp = compareByFieldSpecs(siblings[i].resourceFields, resourceNode.resourceFields, orderSpecs);\n        if (cmp > 0) { // went 1 past. insert at i\n            break;\n        }\n    }\n    siblings.splice(i, 0, resourceNode);\n}\nfunction buildResourceFields(resource) {\n    var obj = __assign({}, resource.extendedProps, resource.ui, resource);\n    delete obj.ui;\n    delete obj.extendedProps;\n    return obj;\n}\nfunction isGroupsEqual(group0, group1) {\n    return group0.spec === group1.spec && group0.value === group1.value;\n}\n\nvar main = createPlugin({\n    reducers: [resourcesReducers],\n    eventDefParsers: [parseEventDef],\n    isDraggableTransformers: [transformIsDraggable],\n    eventDragMutationMassagers: [massageEventDragMutation],\n    eventDefMutationAppliers: [applyEventDefMutation],\n    dateSelectionTransformers: [transformDateSelectionJoin],\n    datePointTransforms: [transformDatePoint],\n    dateSpanTransforms: [transformDateSpan],\n    viewPropsTransformers: [ResourceDataAdder, ResourceEventConfigAdder],\n    isPropsValid: isPropsValidWithResources,\n    externalDefTransforms: [transformExternalDef],\n    eventResizeJoinTransforms: [transformEventResizeJoin],\n    viewContainerModifiers: [injectLicenseWarning],\n    eventDropTransformers: [transformEventDrop],\n    optionChangeHandlers: optionChangeHandlers\n});\n\nexport default main;\nexport { AbstractResourceDayTable, DayResourceTable, ResourceApi, ResourceDayHeader, ResourceDayTable, ResourceSplitter, VResourceJoiner, VResourceSplitter, buildResourceFields, buildResourceTextFunc, buildRowNodes, flattenResources, isGroupsEqual };\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\nimport { CalendarEvent, CalendarEventTimesChangedEvent, CalendarView, CalendarModule, DateAdapter,\n   CalendarEventAction } from 'angular-calendar';\nimport { Subject } from 'rxjs';\nimport { colors } from '../../../demo-utils/colors';\nimport { Router } from '@angular/router';\nimport { isSameMonth, isSameDay } from 'date-fns';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ToastrService } from 'ngx-toastr';\nimport { Login } from '../../../services/login.mudule';\nimport { CustomerService } from '../../../services/customer.service';\nimport { environment } from '../../../../environments/environment';\nimport { AuthenticationService } from '../../../services';\nimport { CalendarService } from '../../../services/calendar.service';\nimport { Customer } from '../../../services/customer.model';\nimport { EngineerService } from '../../../services/engineer.service';\nimport { GenicProfileService } from '../../../services/genicprofile.service';\nimport { TicketService } from '../../../services/ticket.service';\nimport { UserlogService } from '../../../services/userlog.service';\nimport { MatDialogConfig, MatDialog } from '@angular/material/dialog';\nimport { TicketReschedulePopupComponent } from '../../ticket-reschedule-popup/ticket-reschedule-popup.component';\nimport { Title } from '@angular/platform-browser';\n\n@Component({\n  templateUrl: './month-ticket.component.html',\n  styleUrls: ['./month-ticket.component.css']\n})\nexport class MonthTicketComponent implements OnInit {\n  currentUser: Login;\n  @ViewChild('modalTender', { static: true }) modalTender: TemplateRef<any>;\n  @ViewChild('viewmodalContent', { static: true }) viewmodalContent: TemplateRef<any>;\n  \n  CalendarView = CalendarView;\n  view = CalendarView.Month;\n  viewDate = new Date();\n  TicketUnscheduledList: any;\n  TicketScheduledList: any;\n  externalEvents: CalendarEvent[];\n  activeDayIsOpen = false;\n  refresh = new Subject<void>();\n  actions: CalendarEventAction[];\n  events: CalendarEvent[];\n  TotalUnscheduled: number;\n  localPrependUrl: string;\n  modalData: { action: string; event: CalendarEvent; };\n  OneOffIsVisible = true;\n  Iscalendarshow = false;\n  JsonOneOffStartDate: string;\n  IsTeamShow =  false;\n  currentUTCDate = new Date();\n  spinnerShow: boolean;\n  monthcellvisits = false;\n  Islegendshow = false;\n  IsTenderlegendshow = false;\n  date: {year: number, month: number};\n  localdate1 = new Date(Date.UTC(this.currentUTCDate.getFullYear(),\n                  this.currentUTCDate.getMonth(),\n                  this.currentUTCDate.getDate(), 0, 0, 0));\n  minDate = {\n              year: Number(this.currentUTCDate.getFullYear()),\n              month: Number(this.currentUTCDate.getMonth() + 1),\n              day: Number(this.currentUTCDate.getDate())\n            };\n  maxDate = {\n              year: Number(this.currentUTCDate.getFullYear()) + 2,\n              month: Number(this.currentUTCDate.getMonth() + 1),\n              day: Number(this.currentUTCDate.getDate())\n            };\n  tenderData: any;\n  constructor(\n    public titleService: Title,\n    private modal: NgbModal,\n    public customerservice: CustomerService,\n    public calendarservice: CalendarService,\n    public ticketservice: TicketService,\n    public engineerservice: EngineerService,\n    private router: Router,\n    private dialog: MatDialog,\n    private toastr: ToastrService,\n    public logService: UserlogService,\n    public loginservice: AuthenticationService,\n    public genicprofileservice: GenicProfileService\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n   }\n\n  dayClicked({ date, events }: { date: Date; events: CalendarEvent[] }): void {\n    if (isSameMonth(date, this.viewDate)) {\n      if (\n        (isSameDay(this.viewDate, date) && this.activeDayIsOpen === true) ||\n        events.length === 0\n      ) {\n        this.activeDayIsOpen = false;\n      } else {\n        this.activeDayIsOpen = true;\n      }\n      this.viewDate = date;\n    }\n    // console.log('dayClicked');\n  }\n\n  eventDropped({ event, newStart, newEnd, allDay }: CalendarEventTimesChangedEvent): void {\n    const externalIndex = this.externalEvents.indexOf(event);\n    if (typeof allDay !== 'undefined') {\n      event.allDay = allDay;\n    }\n    if (externalIndex > -1) {\n      this.externalEvents.splice(externalIndex, 1);\n      this.events.push(event);\n    }\n    event.start = newStart;\n    if (newEnd) {\n      event.end = newEnd;\n    }\n    if (this.view === 'month') {\n      this.viewDate = newStart;\n      this.activeDayIsOpen = true;\n    }\n    this.events = [...this.events];\n\n    if (!this.ticketservice.formData.OneOffScheduled) {\n      this.ticketservice.formData.OneOffAppointmentDate = event.start.toLocaleString();\n      this.ticketservice.formData.Id = event.id.toString();\n      const sdate = this.utcdate(JSON.stringify(event.start).slice(1, -1));\n      const edate = this.utcdate(JSON.stringify(event.end).slice(1, -1));\n      this.ticketservice.formData.AppointmentStart = sdate;\n      this.ticketservice.formData.AppointmentEnd = edate;\n      this.ticketservice.formData.OneOffStartTime = (sdate.split('T')[1]).slice(0, -1).toString();\n      this.ticketservice.formData.OneOffEndTime = (edate.split('T')[1]).slice(0, -1).toString();\n    }\n    setTimeout(() => {\n      this.DateDragAction();\n    }, 200);\n  }\n\n  externalDrop(event: CalendarEvent) {\n    if (this.externalEvents.indexOf(event) === -1) {\n      this.events = this.events.filter(iEvent => iEvent !== event);\n      this.externalEvents.push(event);\n      this.DateDragActionExternal(event.id.toString());\n    }\n    // console.log('externalDrop');\n  }\n\n  deleteEvent(eventToDelete: CalendarEvent) {\n    this.events = this.events.filter(event => event !== eventToDelete);\n    // console.log('deleteEvent');\n  }\n\n  setView(view: CalendarView) {\n    this.view = view;\n    // console.log('setView');\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Calendar Month | Genic Solution');\n    this.genicprofileservice.TicketFilter.IsReady = false;\n    this.genicprofileservice.TicketFilter.IsReadyQuote = false;\n    this.genicprofileservice.TicketFilter.IsReadyInvoice = false;\n    this.externalEvents = [];\n    this.ticketservice.Ticketlist = [];\n    this.ticketservice.TicketTeamList = [];\n    this.engineerservice.Engineerlist = [];\n    this.RefreshCalendar();\n  }\n  private DateDragAction() {\n    this.openpopup(this.ticketservice.formData.Id);\n  }\n  private DateDragActionExternal(Id) {\n\n  }\n  private RefreshCalendar() {\n    this.ticketservice.Ticketlist = [];\n\n    this.ticketservice.refreshCalendarTicketList(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.TicketUnscheduledList = this.ticketservice.Ticketlist = response.result;\n                  this.TicketUnscheduledList = [];\n                  this.TicketScheduledList = [];\n                  this.TicketUnscheduledList = this.ticketservice.Ticketlist.filter(x => x.OneOffScheduled === true && x.Status !== 'CANCELLED');\n                  this.externalEvents = [];\n                  this.TicketUnscheduledList.forEach(element1 => {\n                    this.externalEvents.push({\n                      id: element1.Id,\n                      start: new Date(),\n                      end: new Date(),\n                      title: element1.CustomerCompanyName,\n                      color: colors.blue,\n                      resizable: {  beforeStart: false, afterEnd: false },\n                      draggable: true,\n                      meta: { Priority: this.ticketservice.formData.Priority, Status: this.ticketservice.formData.Status,\n                        StatusTemp: this.ticketservice.formData.Status,\n                        TicketTeams: this.ticketservice.formData.TicketTeams, Subject: this.ticketservice.formData.Title, IsTicket: true }\n                    });\n                  });\n                  this.TicketScheduledList = this.ticketservice.Ticketlist.filter(x => x.OneOffScheduled === false && x.Status !== 'CANCELLED');\n                  this.events = [];\n                  this.TicketScheduledList.forEach(element2 => {\n                    this.events.push({\n                      id: element2.Id,\n                      start: this.localdate(element2.AppointmentStart),\n                      end: this.localdate(element2.AppointmentEnd),\n                      title: element2.CustomerCompanyName,\n                      color: colors.blue,\n                      resizable: { beforeStart: false, afterEnd: false },\n                      draggable: true,\n                      meta: { Priority: element2.Priority, Status: element2.Status, StatusTemp: element2.Status,\n                         TicketTeams: element2.TicketTeams, Subject: element2.Title, IsTicket: true }\n                    });\n                  });\n                  // this.tenderservice.getTenderListForCalendar(this.currentUser.Token).subscribe( tenderres => {\n                  //   if (tenderres) { const tenderresponse = tenderres as any;\n                  //                    if (tenderresponse.Message === 'success') {\n                  //                       tenderresponse.item1.forEach(el => {\n                  //                         this.events.push({\n                  //                           id: el.Id,\n                  //                           start: this.localdate(el.TenderClosing),\n                  //                           end: this.localdate(el.TenderClosing),\n                  //                           title: 'Tender Closing',\n                  //                           color: colors.blue,\n                  //                           resizable: { beforeStart: false, afterEnd: false },\n                  //                           draggable: true,\n                  //                           meta: { data: el, Status: el.Status , StatusTemp: el.StatusTemp, IsTicket: false }\n                  //                         });\n                  //                       });\n                  //                       tenderresponse.item2.forEach(el => {\n                  //                         this.events.push({\n                  //                           id: el.Id,\n                  //                           start: this.localdate(el.SitewalkDate),\n                  //                           end: this.localdate(el.SitewalkDate),\n                  //                           title: 'SiteWalk',\n                  //                           color: colors.blue,\n                  //                           resizable: { beforeStart: false, afterEnd: false },\n                  //                           draggable: true,\n                  //                           meta: { data: el, Status: el.Status , StatusTemp: el.StatusTemp, IsTicket: false }\n                  //                         });\n                  //                       });\n                  //                       this.refresh.next();\n                  //               }\n                  //   }}, error =>  console.log(error));\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  public OneOffScheduledLater() {\n    if (this.ticketservice.formData.OneOffScheduled === true) {\n      this.OneOffIsVisible = false;\n    } else {\n      this.OneOffIsVisible = true;\n    }\n  }\n  showcalendar() {\n    if (this.Iscalendarshow) {\n      this.Iscalendarshow = false;\n    } else {\n      this.Iscalendarshow = true;\n    }\n  }\n  showlegendpopup() {\n    if (this.Islegendshow) {\n      this.Islegendshow = false;\n    } else {\n      this.Islegendshow = true;\n    }\n  }\n  showtenderlegendpopup() {\n    if (this.IsTenderlegendshow) {\n      this.IsTenderlegendshow = false;\n    } else {\n      this.IsTenderlegendshow = true;\n    }\n  }\n  onDateSelect(e: any) {\n    this.Iscalendarshow = false;\n    this.viewDate = new Date(e.year, e.month - 1, e.day, 0 ,0 , 0, 0);\n  }\n  private localdate(locatdate: string): Date {\n    let date = new Date(locatdate);\n    return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(),\n                    date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(),\n                    date.getUTCMilliseconds());\n  }\n  private utcdate(locatdate: string): string {\n    let date = new Date(locatdate);\n    return JSON.stringify(new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(),\n                    date.getHours(), date.getMinutes(), date.getSeconds(),\n                    date.getMilliseconds()))).slice(1, -1);\n  }\n  openpopup(id: string) {\n    this.engineerservice.Engineerlist = [];\n    this.ticketservice.getTicketById(this.currentUser.Token, id).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.ticketservice.formData = response.result;\n                    this.loadEngineerList();\n                    this.modal.open(this.viewmodalContent, { size: 'lg' });\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  opentenderpopup(x: any) {\n    this.tenderData = new Object();\n    this.tenderData = x;\n    this.modal.open(this.modalTender, { size: 'md' });\n  }\n  openeditticket() {\n    this.modal.dismissAll();\n    setTimeout(() => {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '720px';\n    dialogConfig.height = '720px';\n    dialogConfig.data = {};\n    this.dialog.open(TicketReschedulePopupComponent, dialogConfig).afterClosed().subscribe(res => {\n      this.engineerservice.releseTemporaryEngineerFromTicket(this.ticketservice.formData.Id,\n        this.currentUser.Token, 'revert').subscribe( res => {\n          this.RefreshCalendar();\n      }, error =>  console.log(error));\n    });\n    }, 200);\n  }\n  detailscustomer(x: Customer) {\n    this.modal.dismissAll();\n    setTimeout(() => {\n      this.customerservice.formData = Object.assign({}, x);\n      this.router.navigate(['/customers/customer-details/']);\n     }, 200);\n  }\n\n  private loadEngineerList() {\n    setTimeout(() => {\n      let stime = this.ticketservice.formData.AppointmentStart.replace('-', '').replace('-', '');\n      stime = stime.replace(':', '').replace(':', '').replace('T', '').replace('Z', '');\n\n      let etime = this.ticketservice.formData.AppointmentEnd.replace('-', '').replace('-', '');\n      etime = etime.replace(':', '').replace(':', '').replace('T', '').replace('Z', '');\n      this.engineerservice.refrestUnallocatedTimeEngineerList(stime, etime, this.currentUser.Token);\n      // console.log(this.ticketservice.formData);\n    }, 200);\n  }\n\n  monthcellvisitslist(index?: string) {\n    let demoClasseslist = null;\n    demoClasseslist = document.querySelectorAll('.agent-row-inner');\n    demoClasseslist.forEach(element => {\n      element.style.display = 'none';\n    });\n    let demoClasses = null;\n    demoClasses = document.querySelectorAll('#agent-row-inner-' + index);\n    demoClasses.forEach(element2 => {\n      element2.style.display = 'block';\n    });\n}\nmonthcellvisitslistclose() {\n  let demoClasseslist = null;\n  demoClasseslist = document.querySelectorAll('.agent-row-inner');\n  demoClasseslist.forEach(element => {\n    element.style.display = 'none';\n  });\n}\n  ///// Ticket Team End\n  /***********************************************************************************************************/\n}\n","<div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\r\n    <div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\r\n        <div class=\"kt-container kt-container--fluid breadcud-kt-container \">\r\n            <div class=\"kt-subheader__main\">\r\n                <h3 class=\"kt-subheader__title\">\r\n                    <a href=\"javascript:;\" routerLink=\"/dashboard\">\r\n                        Dashboard\r\n                    </a>\r\n                </h3>\r\n                <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n                <div class=\"kt-subheader__breadcrumbs\">\r\n                    <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n                    <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n                    <a class=\"kt-subheader__breadcrumbs-link\"> Calendar </a>\r\n                </div>\r\n                <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n                <div class=\"kt-subheader__breadcrumbs\">\r\n                    <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n                    <span class=\"kt-subheader__breadcrumbs-separator\"></span> Calendar\r\n                </div>\r\n            </div>\r\n            <div class=\"kt-subheader__toolbar\">\r\n                <div class=\"kt-subheader__wrapper\">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"new-quote-main-section\">\r\n        <div class=\"kt-container kt-container--fluid\">\r\n            <div class=\"new-requst-filter_form create-new-client-popup\">\r\n                <div class=\"accordion accordion-solid\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-12 col-sm-12 col-xs-12 no-spacing\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-12 left-enlarge\">\r\n                                    <div class=\"kt-portlet\" id=\"kt_portlet\">\r\n                                        <div class=\"kt-portlet__head\">\r\n\r\n                                            <div class=\"col-sm-12 col-md-12\">\r\n                                                <div class=\"row\">\r\n                                                    <div class=\"col-sm-5 col-md-5 col-lg-5\">\r\n                                                        <span class=\"btn\">\r\n                                                            <i class=\"flaticon-map-location\"></i>\r\n                                                            <span style=\"font-size: 1.2rem;\r\n                                                          font-weight: 500;\r\n                                                          color: #48465b;\">\r\n                                                                Calendar\r\n                                                            </span>\r\n                                                        </span>\r\n\r\n                                                    </div>\r\n                                                    <div class=\"col-sm-1 col-md-1 col-lg-1\">\r\n                                                        <div class=\"btn\">\r\n                                                            <a href=\"javascript:;\" (click)=\"showcalendar()\">\r\n                                                                <i class=\"fa fa-calendar\"></i>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                        <div *ngIf=\"Iscalendarshow\"\r\n                                                            style=\"position: absolute; z-index: 99999; background-color: white;\">\r\n                                                            <ngb-datepicker name=\"CalendarResourceData\"\r\n                                                                (select)=\"onDateSelect($event)\" (navigate)=\"date=$event.next\">\r\n                                                            </ngb-datepicker>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                   \r\n                                                    <div class=\"col-sm-6 col-md-6 col-lg-6\">\r\n                                                        <div class=\"kt-portlet__head-toolbar\" style=\"float: right;\">\r\n\r\n                                                            <a style=\"display: none;\" href=\"javascript:;\" class=\"btn\" (click)=\"showtenderlegendpopup()\" ><i class=\"fa text-warning\" title=\"Tender Legend\" aria-hidden=\"true\">Tender Legend</i>\r\n                                                                <div *ngIf=\"IsTenderlegendshow\" style=\"position: absolute; z-index: 99999; background-color: white;\">\r\n                                                                    <div class=\"row\">\r\n                                                                        <div class=\"col-lg-12 left-enlarge\">\r\n                                                                            <div class=\"kt-portlet\">\r\n                                                                                <table class=\"table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline\">\r\n                                                                                    <thead>\r\n                                                                                        <tr>\r\n                                                                                            <th>Status</th>\r\n                                                                                        </tr>\r\n                                                                                    </thead>\r\n                                                                                    <tbody>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-Submitted\" style=\"color:#000;font-weight: bold;\">Submitted</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-Awarded\" style=\"color:#000;font-weight: bold;\">Awarded</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-RequireAttention\" style=\"color:#000;font-weight: bold;\">Require Attention</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-ToParticipate\" style=\"color:#000;font-weight: bold;\">To Participate</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-NotParticipating\" style=\"color:#000;font-weight: bold;\">Not Participating</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-UpcomingSiteSurvey\" style=\"color:#000;font-weight: bold;\">Upcoming SiteSurvey</div></td>                                                                                                                                                                       \r\n                                                                                        </tr>             \r\n                                                                                    </tbody>\r\n                                                                                </table>                                                                                                                \r\n                                                                            </div>                                        \r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                            <a href=\"javascript:;\" class=\"btn\" (click)=\"showlegendpopup()\" ><i class=\"fa text-warning\" title=\"Legend\" aria-hidden=\"true\">Ticket Legend</i>\r\n                                                                <div *ngIf=\"Islegendshow\" style=\"position: absolute; z-index: 99999; background-color: white;right: 0;\">\r\n                                                                    <div class=\"row\">\r\n                                                                        <div class=\"col-lg-12 left-enlarge\">\r\n                                                                            <div class=\"kt-portlet\">\r\n                                                                                <table class=\"table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline\">\r\n                                                                                    <thead>\r\n                                                                                        <tr>\r\n                                                                                            <th>Status</th>\r\n                                                                                            <th>Priority</th>\r\n                                                                                        </tr>\r\n                                                                                    </thead>\r\n                                                                                    <tbody>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-UPCOMING\" style=\"color:#000;font-weight: bold;\">Upcoming</div></td>                                                                                    \r\n                                                                                            <td>\r\n                                                                                                <div class=\"row\">\r\n                                                                                                    <div class=\"col-sm-3\"><i class=\"fas fa-circle text-danger\" title=\"High Priority\"></i></div>\r\n                                                                                                    <div class=\"col-sm-9\" style=\"text-align: left;\">High</div>\r\n                                                                                                </div>\r\n                                                                                            </td>                                                                                    \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-INPROGRESS\" style=\"color:#000;font-weight: bold;\">Inprogress</div></td>\r\n                                                                                            <td>\r\n                                                                                                <div class=\"row\">\r\n                                                                                                    <div class=\"col-sm-3\"><i class=\"fas fa-circle text-info\" title=\"Medium Priority\"></i></div>\r\n                                                                                                    <div class=\"col-sm-9\" style=\"text-align: left;\">Medium</div>\r\n                                                                                                </div>\r\n                                                                                            </td>                                                                                                                                                                                                                                                        \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-HOLD\" style=\"color:#000;font-weight: bold;\">Hold</div></td>\r\n                                                                                            <td>\r\n                                                                                                <div class=\"row\">\r\n                                                                                                    <div class=\"col-sm-3\"><i class=\"fas fa-circle text-success\" title=\"Low Priority\"></i></div>\r\n                                                                                                    <div class=\"col-sm-9\" style=\"text-align: left;\">Low</div>\r\n                                                                                                </div>\r\n                                                                                            </td>                                                                                                                                                                                                                                                        \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-CLOSED\" style=\"color:#000;font-weight: bold;\">CLOSED<small style=\"font-size: 12px;\" class=\"fas fa-check-double\"></small></div></td>\r\n                                                                                            <td></td>                                                                                                                                                                                                                                                        \r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <td><div class=\"calendar-ticket-status status-OVERDUE\" style=\"color:#000;font-weight: bold;\">OVERDUE</div></td>\r\n                                                                                            <td></td>                                                                                                                                                                                                                                                        \r\n                                                                                        </tr>                                                                               \r\n                                                                                    </tbody>\r\n                                                                                </table>                                                                                                                \r\n                                                                            </div>                                        \r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                            <div class=\"btn btn-group\"\r\n                                                                *ngIf=\"currentUser.Permissions.ResourceView\">\r\n                                                                <a routerLink=\"/calendar/month-tickets\"\r\n                                                                    href=\"javascript:;\"\r\n                                                                    class=\"btn btn-primary\">Calendar</a>\r\n                                                                <a routerLink=\"/calendar/month-resource\"\r\n                                                                    href=\"javascript:;\"\r\n                                                                    class=\"btn btn-secondary\">Resource</a>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                        </div>\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-md-10\">\r\n                                                <ng-template #customCellTemplate let-day=\"day\" let-locale=\"locale\">\r\n                                                    <div class=\"cal-cell-top\">\r\n                                                        <span\r\n                                                            class=\"cal-day-number\">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>\r\n                                                    </div>\r\n                                                    <span class=\"calendar-ticket-priority-visit\"\r\n                                                        *ngIf=\"day.badgeTotal === 1\">&nbsp;\r\n                                                    </span>\r\n                                                    <span class=\"calendar-ticket-priority-visit\"\r\n                                                        *ngIf=\"day.badgeTotal > 1\"\r\n                                                        (click)=\"monthcellvisitslist(day.events[0].id)\">{{ day.badgeTotal }}\r\n                                                        Visits\r\n                                                    </span>\r\n                                                    <div class=\"agent-row-inner\" *ngIf=\"day.badgeTotal > 1\"\r\n                                                        id=\"agent-row-inner-{{day.events[0].id}}\">\r\n                                                        <div class=\"close-btn\"><a (click)=\"monthcellvisitslistclose()\"\r\n                                                                href=\"javascript:;\">X</a></div>\r\n                                                        <div class=\"agent-header clearfix\">\r\n                                                            <div class=\"agent-image-info \">\r\n                                                                <div *ngFor=\"let x of day.events\"\r\n                                                                    class=\"calendar-ticket-status status-{{x.meta.StatusTemp}}\">\r\n                                                                    <a *ngIf=\"x.meta.IsTicket\" href=\"javascript:;\"\r\n                                                                        (click)=\"openpopup(x.id)\">\r\n                                                                        <div class=\"row\">\r\n                                                                            <div class=\"col-sm-2 col-md-2\">\r\n                                                                                <i *ngIf=\"x.meta.Priority === 1\"\r\n                                                                                    class=\"fas fa-circle text-danger\"\r\n                                                                                    title=\"High Priority\"></i>\r\n                                                                                <i *ngIf=\"x.meta.Priority === 2\"\r\n                                                                                    class=\"fas fa-circle text-info\"\r\n                                                                                    title=\"Medium Priority\"></i>\r\n                                                                                <i *ngIf=\"x.meta.Priority === 3\"\r\n                                                                                    class=\"fas fa-circle text-success\"\r\n                                                                                    title=\"Low Priority\"></i>\r\n                                                                            </div>\r\n                                                                            <div class=\"col-sm-10 col-md-10\"\r\n                                                                                style=\"padding: 0px;\">\r\n                                                                                <b\r\n                                                                                    title=\"{{x.title}}\">{{ x.title.substring(0,15) }}...</b>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                        <div class=\"row\">\r\n                                                                            <div class=\"col-sm-10 col-md-10\">\r\n                                                                                <span>{{x.meta.Subject}} </span>\r\n\r\n                                                                            </div>\r\n                                                                            <div class=\"col-sm-2 col-md-2\">\r\n                                                                                <i *ngIf=\"x.meta.Status === 'CLOSED'\"\r\n                                                                                    class=\"fas fa-check-double closed-text\"></i>\r\n                                                                                <i *ngIf=\"x.meta.TicketTeams.length === 0\"\r\n                                                                                    class=\"fa fa-user-times right-text\"\r\n                                                                                    title=\"{{this.currentUser.Engineer}} not assigne yet!\"></i>\r\n                                                                                <div class=\"btooltipTeam\"> <i\r\n                                                                                        class=\"fa fa-user text-info\"></i>\r\n                                                                                    <span class=\"btooltipTeamtext\">\r\n                                                                                        <div\r\n                                                                                            *ngFor=\"let t of x.meta.TicketTeams\">\r\n                                                                                            {{t.EngineerName}}</div>\r\n                                                                                    </span>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </a>\r\n                                                                    <a *ngIf=\"!x.meta.IsTicket\" href=\"javascript:;\"\r\n                                                                        (click)=\"opentenderpopup(x)\">\r\n                                                                        <div class=\"row\">\r\n                                                                            <div class=\"col-sm-12 col-md-12\">\r\n                                                                                <b>{{x.title}}</b>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                        <div class=\"row\">\r\n                                                                            <div class=\"col-sm-10 col-md-10\">\r\n                                                                                <span>{{x.start | date:'h:mm a'}}</span>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </a>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <small *ngIf=\"day.events.length > 0\"\r\n                                                        class=\"calendar-ticket-status status-{{day.events[0].meta.StatusTemp}}\">\r\n                                                        <div *ngIf=\"day.events[0].meta.IsTicket === true\">\r\n                                                            <a href=\"javascript:;\"\r\n                                                                (click)=\"openpopup(day.events[0].id)\">\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"day.events[0].meta.Priority === 1\"\r\n                                                                            class=\"fas fa-circle text-danger\"\r\n                                                                            title=\"High Priority\"></i>\r\n                                                                        <i *ngIf=\"day.events[0].meta.Priority === 2\"\r\n                                                                            class=\"fas fa-circle text-info\"\r\n                                                                            title=\"Medium Priority\"></i>\r\n                                                                        <i *ngIf=\"day.events[0].meta.Priority === 3\"\r\n                                                                            class=\"fas fa-circle text-success\"\r\n                                                                            title=\"Low Priority\"></i>\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-10 col-md-10\"\r\n                                                                        style=\"padding: 0px;\">\r\n                                                                        <b\r\n                                                                            title=\"{{day.events[0].title}}\">{{ day.events[0].title.substring(0,15) }}...</b>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-10 col-md-10\">\r\n                                                                        <span>{{day.events[0].meta.Subject}}</span>\r\n\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"day.events[0].meta.Status === 'CLOSED'\"\r\n                                                                            class=\"fas fa-check-double closed-text\"></i>\r\n                                                                        <i *ngIf=\"day.events[0].meta.TicketTeams.length === 0\"\r\n                                                                            class=\"fa fa-user-times right-text\"\r\n                                                                            title=\"{{this.currentUser.Engineer}} not assigne yet!\"></i>\r\n                                                                        <div class=\"btooltipTeam\"> <i\r\n                                                                                class=\"fa fa-user text-info\"></i>\r\n                                                                            <span class=\"btooltipTeamtext\">\r\n                                                                                <div\r\n                                                                                    *ngFor=\"let t of day.events[0].meta.TicketTeams\">\r\n                                                                                    {{t.EngineerName}}</div>\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                        <div *ngIf=\"day.events[0].meta.IsTicket  === false\">\r\n                                                            <a href=\"javascript:;\"\r\n                                                                (click)=\"opentenderpopup(day.events[0])\">\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-12 col-md-12\">\r\n                                                                        <b>{{day.events[0].title}}</b>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-12 col-md-12\">\r\n                                                                        <span>{{day.events[0].start | date:'h:mm a'}}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                    </small>\r\n                                                </ng-template>\r\n                                                <ng-template #customCellWeekTemplate let-weekEvent=\"weekEvent\"\r\n                                                    let-locale=\"locale\">\r\n                                                    <div\r\n                                                        class=\"calendar-ticket-status status-{{weekEvent.event.meta.StatusTemp}}\">\r\n                                                        <div *ngIf=\"weekEvent.event.meta.IsTicket === true\">\r\n                                                            <a href=\"javascript:;\"\r\n                                                                (click)=\"openpopup(weekEvent.event.id)\">\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"weekEvent.event.meta.Priority === 1\"\r\n                                                                            class=\"fas fa-circle text-danger\"\r\n                                                                            title=\"High Priority\"></i>\r\n                                                                        <i *ngIf=\"weekEvent.event.meta.Priority === 2\"\r\n                                                                            class=\"fas fa-circle text-info\"\r\n                                                                            title=\"Medium Priority\"></i>\r\n                                                                        <i *ngIf=\"weekEvent.event.meta.Priority === 3\"\r\n                                                                            class=\"fas fa-circle text-success\"\r\n                                                                            title=\"Low Priority\"></i>\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-10 col-md-10\"\r\n                                                                        style=\"padding: 0px;\">\r\n                                                                        <b\r\n                                                                            title=\"{{weekEvent.event.title}}\">{{ weekEvent.event.title.substring(0,15) }}...</b>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-10 col-md-10\">\r\n                                                                        <span>{{weekEvent.event.meta.Subject}}</span>\r\n\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"weekEvent.event.meta.Status === 'CLOSED'\"\r\n                                                                            class=\"fas fa-check-double closed-text\"></i>\r\n                                                                        <i *ngIf=\"weekEvent.event.meta.TicketTeams.length === 0\"\r\n                                                                            class=\"fa fa-user-times right-text\"\r\n                                                                            title=\"{{this.currentUser.Engineer}} not assigne yet!\"></i>\r\n                                                                        <div class=\"btooltipTeam\"> <i\r\n                                                                                class=\"fa fa-user text-info\"></i>\r\n                                                                            <span class=\"btooltipTeamtext\">\r\n                                                                                <div\r\n                                                                                    *ngFor=\"let t of weekEvent.event.meta.TicketTeams\">\r\n                                                                                    {{t.EngineerName}}</div>\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                        <div *ngIf=\"weekEvent.event.meta.IsTicket  === false\">\r\n                                                            <a href=\"javascript:;\"\r\n                                                                (click)=\"opentenderpopup(weekEvent.event)\">\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-12 col-md-12\">\r\n                                                                        <b>{{weekEvent.event.title}}</b>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-12 col-md-12\">\r\n                                                                        <span>{{weekEvent.event.meta.Subject}}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </ng-template>\r\n                                                <ng-template #customCellDayTemplate let-dayEvent=\"dayEvent\"\r\n                                                    let-locale=\"locale\">\r\n                                                    <div\r\n                                                        class=\"calendar-ticket-status status-{{dayEvent.event.meta.StatusTemp}}\">\r\n                                                        <div *ngIf=\"dayEvent.event.meta.IsTicket === true\">\r\n                                                            <a href=\"javascript:;\"\r\n                                                                (click)=\"openpopup(dayEvent.event.id)\">\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"dayEvent.event.meta.Priority === 1\"\r\n                                                                            class=\"fas fa-circle text-danger\"\r\n                                                                            title=\"High Priority\"></i>\r\n                                                                        <i *ngIf=\"dayEvent.event.meta.Priority === 2\"\r\n                                                                            class=\"fas fa-circle text-info\"\r\n                                                                            title=\"Medium Priority\"></i>\r\n                                                                        <i *ngIf=\"dayEvent.event.meta.Priority === 3\"\r\n                                                                            class=\"fas fa-circle text-success\"\r\n                                                                            title=\"Low Priority\"></i>\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-10 col-md-10\"\r\n                                                                        style=\"padding: 0px;\">\r\n                                                                        <b\r\n                                                                            title=\"{{dayEvent.event.title}}\">{{ dayEvent.event.title.substring(0,15) }}...</b>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"row\">\r\n                                                                    <div class=\"col-sm-10 col-md-10\">\r\n                                                                        <span>{{dayEvent.event.meta.Subject}}</span>\r\n\r\n                                                                    </div>\r\n                                                                    <div class=\"col-sm-2 col-md-2\">\r\n                                                                        <i *ngIf=\"dayEvent.event.meta.Status === 'CLOSED'\"\r\n                                                                            class=\"fas fa-check-double closed-text\"></i>\r\n                                                                        <i *ngIf=\"dayEvent.event.meta.TicketTeams.length === 0\"\r\n                                                                            class=\"fa fa-user-times right-text\"\r\n                                                                            title=\"{{this.currentUser.Engineer}} not assigne yet!\"></i>\r\n                                                                        <div class=\"btooltipTeam\"> <i\r\n                                                                                class=\"fa fa-user text-info\"></i>\r\n                                                                            <span class=\"btooltipTeamtext\">\r\n                                                                                <div\r\n                                                                                    *ngFor=\"let t of dayEvent.event.meta.TicketTeams\">\r\n                                                                                    {{t.EngineerName}}</div>\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </a>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div *ngIf=\"dayEvent.event.meta.IsTicket  === false\">\r\n                                                        <a href=\"javascript:;\"\r\n                                                            (click)=\"opentenderpopup(dayEvent.event)\">\r\n                                                            <div class=\"row\">\r\n                                                                <div class=\"col-sm-12 col-md-12\">\r\n                                                                    <b>{{dayEvent.event.title}}</b>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div class=\"row\">\r\n                                                                <div class=\"col-sm-12 col-md-12\">\r\n                                                                    <span>{{dayEvent.event.meta.Subject}}</span>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                </ng-template>\r\n                                                <mwl-demo-utils-calendar-header [(view)]=\"view\" [(viewDate)]=\"viewDate\">\r\n                                                </mwl-demo-utils-calendar-header>\r\n\r\n                                                <div [ngSwitch]=\"view\">\r\n                                                    <mwl-calendar-month-view *ngSwitchCase=\"CalendarView.Month\"\r\n                                                        [viewDate]=\"viewDate\" [events]=\"events\"\r\n                                                        [activeDayIsOpen]=\"activeDayIsOpen\" [refresh]=\"refresh\"\r\n                                                        [cellTemplate]=\"customCellTemplate\"\r\n                                                        (eventTimesChanged)=\"eventDropped($event)\">\r\n                                                    </mwl-calendar-month-view>\r\n                                                    <mwl-calendar-week-view *ngSwitchCase=\"CalendarView.Week\"\r\n                                                        [viewDate]=\"viewDate\" [events]=\"events\" [refresh]=\"refresh\"\r\n                                                        [eventTemplate]=\"customCellWeekTemplate\"\r\n                                                        (eventTimesChanged)=\"eventDropped($event)\">\r\n                                                    </mwl-calendar-week-view>\r\n                                                    <mwl-calendar-day-view *ngSwitchCase=\"CalendarView.Day\"\r\n                                                        [viewDate]=\"viewDate\" [events]=\"events\" [refresh]=\"refresh\"\r\n                                                        [eventTemplate]=\"customCellDayTemplate\"\r\n                                                        (eventTimesChanged)=\"eventDropped($event)\">\r\n                                                    </mwl-calendar-day-view>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-md-2\">\r\n                                                <div class=\"card\" mwlDroppable\r\n                                                    (drop)=\"externalDrop($event.dropData.event)\"\r\n                                                    dragOverClass=\"drag-over\">\r\n                                                    <div class=\"card-body\">\r\n                                                        <p *ngIf=\"externalEvents.length === 0\"><em>No unschedule\r\n                                                                {{this.currentUser.Ticket}}</em></p>\r\n                                                        <p *ngIf=\"externalEvents.length > 0\"><em>Unschedule this.currentUser.Tickets</em>\r\n                                                        </p>\r\n                                                        <h6 *ngFor=\"let event of externalEvents\" mwlDraggable\r\n                                                            dragActiveClass=\"drag-active\">\r\n                                                            <a href=\"javascript:;\" (click)=\"openpopup(event.id)\"\r\n                                                                [style.color]=\"event.color.primary\">\r\n                                                                <i class=\"fa fa-plug\" aria-hidden=\"true\"></i>\r\n                                                                {{ event.title }}\r\n                                                            </a>\r\n                                                        </h6>\r\n\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<ng-template #viewmodalContent let-close=\"close\">\r\n    <div class=\"row cus-model-header\" style=\"margin:0\">\r\n        <div class=\"col-md-9\">\r\n            <h5 class=\"modal-title\" style=\"font-size: 2em;color: black;font-weight: 600;\">\r\n                <span *ngIf=\"ticketservice.formData.TicketType === 'One-Off Ticket'\"> Visit | One-Off {{this.currentUser.Ticket}}</span>\r\n                <span *ngIf=\"ticketservice.formData.TicketType === 'Recurring Ticket'\">Visit | Recurring {{this.currentUser.Ticket}}</span>\r\n            </h5>\r\n        </div>\r\n        <div class=\"col-md-3\">\r\n            <div class=\"btn-group\" style=\"float: right;\">\r\n                <button\r\n                    *ngIf=\"ticketservice.formData.Status === 'UPCOMING' || ticketservice.formData.Status === 'OVERDUE' || ticketservice.formData.Status === 'UNSCHEDULED'\"\r\n                    class=\"btn btn-brand btn-sm text-white \" (click)=\"openeditticket()\">\r\n                    <i class=\"la la-edit\"></i> Edit </button>\r\n                <button type=\"button\" class=\"btn btn-danger btn-sm text-white\" (click)=\"close()\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"modal-body\" id=\"month-1-modal\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-6\" style=\"border-right: 1px solid #e1dfdf;\">\r\n                <div class=\"client-header\"> {{ticketservice.formData.CustomerCompanyName}} </div>\r\n                <strong> {{ticketservice.formData.CustomerName}} </strong>\r\n                <div class=\"client-address\">\r\n                    <em *ngFor=\"let subCategory of ticketservice.formData.CustomerAddress?.split(',')\">\r\n                        {{ subCategory }} <br>\r\n                    </em>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-6 client-header-appoinmenttime\">\r\n                <i class=\"fa fa-calendar\"></i>\r\n                {{ticketservice.formData.OneOffAppointmentDate | date}}\r\n                {{ticketservice.formData.AppointmentStart | date:'h:mm a':'+0000'}} -\r\n                {{ticketservice.formData.AppointmentEnd | date:'h:mm a':'+0000'}}\r\n                <div><a href=\"javascript:;\"\r\n                        href=\"https://www.google.com/maps/place/{{ticketservice.formData.CustomerAddress}}\"\r\n                        target=\"_blank\"><i class=\"fas fa-map-marker text-success\"></i> Direction</a></div>\r\n                <i *ngIf=\"ticketservice.formData.Priority === 1\" class=\"fas fa-circle text-danger\"\r\n                    title=\"High Priority\"></i> <span class=\"text-danger\" *ngIf=\"ticketservice.formData.Priority === 1\">\r\n                    High Priority</span>\r\n                <i *ngIf=\"ticketservice.formData.Priority === 2\" class=\"fas fa-circle text-info\"\r\n                    title=\"Medium Priority\"></i> <span class=\"text-info\" *ngIf=\"ticketservice.formData.Priority === 2\">\r\n                    Medium Priority</span>\r\n                <i *ngIf=\"ticketservice.formData.Priority === 3\" class=\"fas fa-circle text-success\"\r\n                    title=\"Low Priority\"></i> <span class=\"text-success\" *ngIf=\"ticketservice.formData.Priority === 3\">\r\n                    Low Priority</span>\r\n                <div>\r\n                    <generic-ticket-status [(Status)]=\"ticketservice.formData.Status\"\r\n                    [OverDueDays]=\"0\"></generic-ticket-status>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12 col-sm-12\">\r\n                <div class=\"details-tabs width100\">\r\n                    <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#dtab1\">Info</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" data-toggle=\"tab\" href=\"#dtab2\">Customer</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" data-toggle=\"tab\" href=\"#dtab3\">Notes</a>\r\n                        </li>\r\n                    </ul>\r\n                    <div class=\"tab-content\">\r\n                        <div id=\"dtab1\" class=\" tab-pane active\">\r\n                            <div class=\"row row-border\">\r\n                                <div class=\"col-md-12 col-sm-12\">\r\n                                    <div class=\"client-info-title\"> {{ticketservice.formData.Title}} </div><br>\r\n                                    <div class=\"client-info-desc\">{{ticketservice.formData.Description}}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row row-border\">\r\n                                <div class=\"col-md-6 col-sm-6\">\r\n                                    <div class=\"client-info-title\"> Ticket </div>\r\n                                    <div class=\"client-info-desc\">{{ticketservice.formData.TicketId}}</div>\r\n                                    <div class=\"client-info-desc\">{{ticketservice.formData.Title}}</div>\r\n                                </div>\r\n                                <div class=\"col-md-6 col-sm-6\">\r\n                                    <div class=\"client-info-title\"> Team </div>\r\n                                    <div class=\"client-info-desc\" *ngFor=\"let x of ticketservice.formData.TicketTeams\">\r\n                                        {{x.EngineerName}}\r\n                                        <span class=\"kt-badge kt-badge--success kt-badge--inline kt-badge--pill\"\r\n                                            *ngIf=\"x.Type === 1\">Supervisor</span>\r\n                                        <span class=\"kt-badge kt-badge--warning kt-badge--inline kt-badge--pill\"\r\n                                            *ngIf=\"x.Type === 2\">Foreman</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row row-border\">\r\n                                <div class=\"col-md-12 col-sm-12\">\r\n                                    <div class=\"client-info-title\"> Line Items </div>\r\n                                    <table class=\"width100\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Product/Service</th>\r\n                                                <th>QTY</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr *ngFor=\"let itm of ticketservice.formData.TicketItems\">\r\n                                                <td> {{itm.ItemName}}</td>\r\n                                                <td ><div *ngIf=\"itm.Type === 'Product'\">{{itm.ItemQuantity}}</div></td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"dtab2\" class=\" tab-pane fade\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-12 col-sm-12\">\r\n                                    <div class=\"client-info-title\"> Client Details </div>\r\n                                    <table class=\"width100\">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td> Name</td>\r\n                                                <td> {{ticketservice.formData.CustomerName}}</td>\r\n                                                <td><a href=\"javascript:;\"\r\n                                                        (click)=\"detailscustomer(ticketservice.formData.Customers)\"><i\r\n                                                            class=\"fa fa-angle-double-right \"></i></a></td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td> Email</td>\r\n                                                <td> {{ticketservice.formData.CustomerEmail}}</td>\r\n                                                <td><a href=\"mailto:@{{ticketservice.formData.CustomerEmail}}\"><i\r\n                                                            class=\"fa fa-envelope\"></i></a></td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"3\">\r\n                                                    <hr>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"3\">\r\n                                                    <div class=\"client-info-title\"> Property </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td> Address</td>\r\n                                                <td> {{ticketservice.formData.CustomerAddress}}</td>\r\n                                                <td><a href=\"https://www.google.com/maps/place/{{ticketservice.formData.CustomerAddress}}\"\r\n                                                        target=\"_blank\"><i class=\"fa fa-angle-double-right\"></i></a>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"dtab3\" class=\" tab-pane fade\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-12 col-sm-12\">\r\n                                    {{ticketservice.formData.InternalNoteDescription}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #modalTender let-close=\"close\">\r\n    <div class=\"row cus-model-header\" style=\"margin:0\">\r\n        <div class=\"col-md-9\">\r\n            <h5 class=\"modal-title\" style=\"font-size: 2em;color: black;font-weight: 600;\">\r\n                {{this.tenderData.title}}\r\n            </h5>\r\n        </div>\r\n        <div class=\"col-md-3\">\r\n            <div class=\"btn-group\" style=\"float: right;\">\r\n\r\n                <button type=\"button\" class=\"btn btn-danger btn-sm text-white\" (click)=\"close()\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"modal-body\" id=\"month-2-modal\">\r\n        <div class=\"row\">\r\n            <table *ngIf=\"this.tenderData.title === 'Tender Closing'\" class=\"table table-bordered\"\r\n                style=\"font-size: 16px;\">\r\n                <tbody>\r\n                    <tr>\r\n                        <td>Tender Closing</td>\r\n                        <td>{{this.tenderData.meta.data.TenderClosing | date}}\r\n                            {{this.tenderData.meta.data.TenderClosing | date:'h:mm a':'+0000'}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Status</td>\r\n                        <td><span\r\n                                class=\"tenderstatus {{this.tenderData.meta.Status.toString().replace(' ', '').replace(' ', '')}}\">{{this.tenderData.meta.data.Status}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Buyer</td>\r\n                        <td>{{this.tenderData.meta.data.Buyer}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Tender Ref No.</td>\r\n                        <td>{{this.tenderData.meta.data.TenderRefNo}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Tender Name</td>\r\n                        <td>{{this.tenderData.meta.data.TenderName}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <table *ngIf=\"this.tenderData.title === 'SiteWalk'\" class=\"table table-bordered\" style=\"font-size: 16px;\">\r\n                <tbody>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">SiteWalk Date</td>\r\n                        <td>{{this.tenderData.meta.data.SitewalkDate | date}}\r\n                            {{this.tenderData.meta.data.SitewalkDate | date:'h:mm a':'+0000'}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Status</td>\r\n                        <td><span\r\n                                class=\"tenderstatus {{this.tenderData.meta.Status.toString().replace(' ', '').replace(' ', '')}}\">{{this.tenderData.meta.data.Status}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Buyer</td>\r\n                        <td>{{this.tenderData.meta.data.Buyer}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Tender Ref No.</td>\r\n                        <td>{{this.tenderData.meta.data.TenderRefNo}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Tender Name</td>\r\n                        <td>{{this.tenderData.meta.data.TenderName}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">Address</td>\r\n                        <td>{{this.tenderData.meta.data.SitewalkAddress}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td class=\"modal-tender-lable\">POC</td>\r\n                        <td>{{this.tenderData.meta.data.SitewalkPOC}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Injectable } from '@angular/core';\nimport { RecourceParam, EngineerLocation } from './calendar.module';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CalendarService {\n  // CalenderData: Calendar;\n  // CalenderList: Calendar[];\n  EngineerLocation: EngineerLocation[];\n  // CalendarTicketData: CalendarTicket;\n  // CalendarTicketList?: CalendarTicket[];\n  //CalendarResourceData: CalendarResource;\n  ResourceParamData: RecourceParam;\n  ResourceView: any;\n\n  constructor(\n    private http: HttpClient,\n  ) { this.SetAsDefaultValues();\n  }\n  SetAsDefaultValues() {\n    this.EngineerLocation = [];\n    this.ResourceParamData = {\n      TokenNo: '00000000-0000-0000-0000-000000000000',\n      CustomerId : [],\n      EngineerId : [],\n      Priority: [],\n      Status: []\n    };\n  }\n  refrestEngineerMapList(Token: string, date: string) {\n    return this.http.get(environment.apiUrl + '/api/Calendar/GetEngineerList/' + Token + '/' + date).pipe(map(response => response));\n  }\n  refrestGetEngineerLeftTaskList(Token: string, e: string, date: string) {\n    return this.http.get(environment.apiUrl + '/api/Calendar/GetEngineerLeftTaskList/' + Token  + '/' + e + '/' + date).pipe(map(response => response));\n  }\n  refrestTicketMapList(Token: string, date: string) {\n    return this.http.get(environment.apiUrl + '/api/Calendar/GetTicketList/' + Token + '/' + date ).pipe(map(response => response));\n  }\n  public refrestTicketDetailsMapList( token: string, TicketId: string) {\n    return this.http.get(environment.apiUrl + '/api/Calendar/GetTicketDetails/' + token + '/' + TicketId).pipe(map(Response =>  Response));\n  }\n  public refrestResourceViewList1(token: string) {\n    return this.http.post(environment.apiUrl + '/api/Calendar/GetResourceViewList/' + token , this.ResourceParamData).pipe(map(Response =>  Response));\n  }\n  refrestResourceViewList(token: string, obj: RecourceParam) {\n    return this.http.post(environment.apiUrl + '/api/Calendar/GetResourceViewList/' + token, obj).pipe(map(Response =>  Response));\n}\nengineerlocation(Token: string) {\n  return this.http.get(environment.apiUrl + '/api/Calendar/GetEngineerHistory/' + Token).pipe(map(Response =>  Response));\n}\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TicketStatusComponent } from './TicketStatusComponent.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule],\r\n  declarations: [TicketStatusComponent],\r\n  exports: [TicketStatusComponent]\r\n})\r\nexport class TicketStatusComponentModule {}\r\n","import { Component, OnInit } from '@angular/core';\n@Component({template: '<router-outlet></router-outlet>'})\nexport class CalendarComponent implements OnInit  {\n  ngOnInit() {}\n}\n","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { TicketService } from 'src/app/services/ticket.service';\nimport { Router } from '@angular/router';\nimport { PropertyService } from 'src/app/services/property.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { Login } from 'src/app/services/login.mudule';\nimport { environment } from 'src/environments/environment';\nimport { CalendarService } from 'src/app/services/calendar.service';\nimport { EngineerLocation } from 'src/app/services/calendar.module';\nimport { GenicProfileService } from 'src/app/services/genicprofile.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { GenericService } from 'src/app/services/generic.service';\nimport { Title } from '@angular/platform-browser';\n\n@Component({\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.css']\n})\nexport class MapComponent implements OnInit {\n  currentUser: Login;\n  localPrependUrl: string;\n  TotalClosed = 0;\n  TotalInprogress = 0;\n  TotalClosedList = [];\n  TotalInprogressList = [];\n  markers: marker[];\n  lat: number;\n  lng: number;\n  zoom: number;\n  Iscalendarshow = false;\n  IsLeftSection: boolean;\n  IsRightSection: boolean;\n  IsLeftSectionLive: boolean;\n  date: { year: number, month: number };\n  @ViewChild('modalContent', { static: true }) modalContent: TemplateRef<any>;\n  locallist: any;\n  CalendarTicketDetailsData: any;\n  CalenderList: any;\n  CalendarTicketList: any;\n  constructor(\n    public titleService: Title,\n    public ticketservice: TicketService,\n    public propertyservice: PropertyService,\n    private router: Router,\n    private toastr: ToastrService,\n    public loginservice: AuthenticationService,\n    public genericservice: GenericService,\n    public genicprofileservice: GenicProfileService,\n    public service: CalendarService\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n    this.locallist = [];\n    this.CalendarTicketDetailsData = [];\n  }\n  ngOnInit() {\n    if (this.currentUser.Permissions.MapView === false) { this.router.navigate(['/dashboard']); }\n    this.titleService.setTitle('Map | Genic Solution');\n    this.genicprofileservice.TicketFilter.IsReady = false;\n    this.genicprofileservice.TicketFilter.IsReadyQuote = false;\n    this.genicprofileservice.TicketFilter.IsReadyInvoice = false;\n    this.IsLeftSection = true;\n    this.IsRightSection = true;\n    this.IsLeftSectionLive = false;\n    this.lat = 1.3817199;\n    this.lng = 103.8450399;\n    this.zoom = 12;\n    this.markers = [];\n    const currentUTCDate = new Date();\n    this.CalenderList = [];\n    this.CalendarTicketList = [];\n    this.propertyservice.InternalObject.TodayDate = this.genicprofileservice.TODAY_DATE_IN_STRING;\n    let _date =  this.propertyservice.InternalObject.TodayDate.toString().split('T')[0].replace('-', '').replace('-', '');\n    this.loadData(_date);\n  }\n  loadData(date: string) {\n    this.service.refrestEngineerMapList(this.currentUser.Token, date).subscribe(res => {\n      if (res) {\n        const response = res as any;\n        if (response.Message === 'success') {\n          this.CalenderList = response.result as any;\n        }\n        if (response.Message === 'failure') {\n          this.toastr.warning('warning', response.MessageDescription);\n        }\n      }\n    }, error => console.log(error));\n    this.service.refrestTicketMapList(this.currentUser.Token, date).subscribe(res => {\n      if (res) {\n        const response = res as any;\n        if (response.Message === 'success') {\n          this.CalendarTicketList = response.result as any;\n          this.TotalClosed = response.result.filter(e => e.Status === 'CLOSED').length;\n          this.TotalInprogress = response.result.filter(e => e.Status === 'INPROGRESS').length;\n          this.TotalClosedList = response.result.filter(e => e.Status === 'CLOSED');\n          this.TotalInprogressList = response.result.filter(e => e.Status === 'INPROGRESS');\n        }\n        if (response.Message === 'failure') {\n          this.toastr.warning('warning', response.MessageDescription);\n        }\n      }\n    }, error => console.log(error));\n  }\n  openmodelpopupticketdetails(TicketId: string) {\n    this.service.refrestTicketDetailsMapList(this.currentUser.Token, TicketId).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.CalendarTicketDetailsData = response.result;\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n    //this.service.refrestTicketDetailsMapList(this.currentUser.Token, TicketId);\n  }\n  showcalendar() {\n    if (this.Iscalendarshow) {\n      this.Iscalendarshow = false;\n    } else {\n      this.Iscalendarshow = true;\n    }\n  }\n  hidecalendar() {\n    this.Iscalendarshow = false;\n  }\n  IsLeftSectionMethod() {\n    if (this.IsLeftSection) {\n      this.IsLeftSection = false;\n    } else {\n      this.IsLeftSection = true;\n    }\n  }\n  IsRightSectionMethod() {\n    if (this.IsRightSection) {\n      this.IsRightSection = false;\n    } else {\n      this.IsRightSection = true;\n    }\n  }\n  IsLeftLiveSectionMethod() {\n    if (this.IsLeftSectionLive) {\n      this.IsLeftSectionLive = false;\n      this.service.EngineerLocation = [];\n    } else {\n      if (this.currentUser.Permissions.LiveTracking) {\n        this.IsLeftSectionLive = true;\n        this.service.engineerlocation(this.currentUser.Token).subscribe(res => {\n          if (res) { const response = res as any;\n            this.service.EngineerLocation = response.result as EngineerLocation[];\n            this.markers = [];\n            this.service.EngineerLocation.forEach(el => {\n              this.markers.push({\n                Id: el.EngineerId,\n                lat: el.Latitude,\n                lng: el.Longitude,\n                name: el.EngineerName,\n                address: el.LocationAddress\n              });\n            });\n          }\n        }, error => console.log(error));\n      } else {\n        this.toastr.warning('Permission not granted');\n      }\n    }\n  }\n  onDateSelect() {\n    this.propertyservice.InternalObject.Type = 'ALL';\n    this.propertyservice.InternalObject.DateFrom = '';\n    this.propertyservice.InternalObject.DateTo = '';\n    const datetime = this.propertyservice.InternalObject.TodayDate;\n    const date = datetime.toString().split('T')[0];\n    const newdate = date.split('-').filter(function (item) { item = item ? item.replace(/-/g, '') : item; return item; }).join('');\n    this.loadData(newdate);\n    setTimeout(() => {\n      this.Iscalendarshow = false;\n    }, 200);\n  }\n  pupulateticket(Id: string) {\n    this.ticketservice.getTicketById(this.currentUser.Token, Id).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.ticketservice.formData = response.result;\n                    this.router.navigate(['/tickets/ticket-view-detail']);\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  OnMouseUp(x: any) {\n    this.markers = [];\n    this.markers.push({\n      Id: '0',\n      lat: x.Latitude,\n      lng: x.Longitude,\n      name: x.CustomerName,\n      address: x.CustomerAddress\n    });\n  }\n  // leftpopup() {\n  //   let parent1 = null;\n  //   parent1 = document.querySelector('leftpopup');\n  //   parent1.parent('.left-section').toggleClass('closeClass-left');\n  // }\n  showinnerlist(index?: string, EngineerId?: string) {\n    if (EngineerId !== undefined) {\n      //this.propertyservice.InternalObject.TodayDate = this.propertyservice.InternalObject.TodayDate;\n\t   let _date =  this.propertyservice.InternalObject.TodayDate.toString().split('T')[0].replace('-', '').replace('-', '');\n      this.service.refrestGetEngineerLeftTaskList(this.currentUser.Token, EngineerId, _date).subscribe(res => {\n        if (res) {\n          const response = res as any;\n          if (response.Message === 'success') {\n            this.locallist = response.result;\n          }\n          if (response.Message === 'failure') {\n            this.toastr.warning('warning', response.MessageDescription);\n          }\n        }\n      }, error => console.log(error));\n    }\n    if (index == null) {\n      let demoClasseslist = null;\n      demoClasseslist = document.querySelectorAll('.agent-row-inner');\n      demoClasseslist.forEach(element => {\n        element.style.display = 'none';\n      });\n    } else {\n      let demoClasseslist = null;\n      demoClasseslist = document.querySelectorAll('.agent-row-inner');\n      demoClasseslist.forEach(element => {\n        element.style.display = 'none';\n      });\n      let demoClasses = null;\n      demoClasses = document.querySelectorAll('#agent-row-inner-' + index);\n      demoClasses.forEach(element2 => {\n        element2.style.display = 'block';\n      });\n    }\n  }\n  showinnerlistlive(index?: string) {\n    if (index == null) {\n      let demoClasseslist = null;\n      demoClasseslist = document.querySelectorAll('.agent-row-inner-live');\n      demoClasseslist.forEach(element => {\n        element.style.display = 'none';\n      });\n    } else {\n      let demoClasseslist = null;\n      demoClasseslist = document.querySelectorAll('.agent-row-inner-live');\n      demoClasseslist.forEach(element => {\n        element.style.display = 'none';\n      });\n      let demoClasses = null;\n      demoClasses = document.querySelectorAll('#agent-row-inner-live-' + index);\n      demoClasses.forEach(element2 => {\n        element2.style.display = 'block';\n      });\n    }\n  }\n}\n\n// tslint:disable-next-line: class-name\ninterface marker {\n  Id: string;\n  lat: number;\n  lng: number;\n  name: string;\n  address: string;\n}\n\n","\r\n<div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\r\n  <div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\r\n    <div class=\"kt-container kt-container--fluid breadcud-kt-container \">\r\n      <div class=\"kt-subheader__main\">\r\n        <h3 class=\"kt-subheader__title\">\r\n          <a href=\"javascript:;\" routerLink=\"/dashboard\">\r\n            Dashboard\r\n          </a>\r\n        </h3>\r\n        <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n        <div class=\"kt-subheader__breadcrumbs\">\r\n          <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n          <span class=\"kt-subheader__breadcrumbs-separator\"></span>\r\n          <a class=\"kt-subheader__breadcrumbs-link\"> Calendar </a>\r\n        </div>\r\n        <span class=\"kt-subheader__separator kt-hidden\"></span>\r\n        <div class=\"kt-subheader__breadcrumbs\">\r\n          <i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n          <span class=\"kt-subheader__breadcrumbs-separator\"></span>  Map\r\n        </div>\r\n      </div>\r\n      <div class=\"kt-subheader__toolbar\">\r\n        <div class=\"kt-subheader__wrapper\">\r\n          <a href=\"javascript:;\" class=\"btn kt-subheader__btn-daterange\" id=\"kt_dashboard_daterangepicker\"\r\n             data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\r\n             title=\"Select dashboard daterange\" data-placement=\"left\">\r\n\r\n            <span class=\"kt-subheader__btn-daterange-title\"\r\n                  id=\"kt_dashboard_daterangepicker_title\">Today:</span>&nbsp; <span class=\"kt-subheader__btn-daterange-date\"\r\n                                                                                    id=\"kt_dashboard_daterangepicker_date\">\r\n              <a href=\"javascript:;\" (click)=\"showcalendar()\">\r\n                {{ propertyservice.InternalObject.TodayDate | date }}\r\n              </a>\r\n            </span>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24px\"\r\n                 height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" class=\"kt-svg-icon kt-svg-icon--sm\">\r\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n                <rect id=\"bound\" x=\"0\" y=\"0\" width=\"24\" height=\"24\"></rect>\r\n                <path d=\"M4.875,20.75 C4.63541667,20.75 4.39583333,20.6541667 4.20416667,20.4625 L2.2875,18.5458333 C1.90416667,18.1625 1.90416667,17.5875 2.2875,17.2041667 C2.67083333,16.8208333 3.29375,16.8208333 3.62916667,17.2041667 L4.875,18.45 L8.0375,15.2875 C8.42083333,14.9041667 8.99583333,14.9041667 9.37916667,15.2875 C9.7625,15.6708333 9.7625,16.2458333 9.37916667,16.6291667 L5.54583333,20.4625 C5.35416667,20.6541667 5.11458333,20.75 4.875,20.75 Z\"\r\n                      id=\"check\" fill=\"#000000\" fill-rule=\"nonzero\" opacity=\"0.3\"></path>\r\n                <path d=\"M2,11.8650466 L2,6 C2,4.34314575 3.34314575,3 5,3 L19,3 C20.6568542,3 22,4.34314575 22,6 L22,15 C22,15.0032706 21.9999948,15.0065399 21.9999843,15.009808 L22.0249378,15 L22.0249378,19.5857864 C22.0249378,20.1380712 21.5772226,20.5857864 21.0249378,20.5857864 C20.7597213,20.5857864 20.5053674,20.4804296 20.317831,20.2928932 L18.0249378,18 L12.9835977,18 C12.7263047,14.0909841 9.47412135,11 5.5,11 C4.23590829,11 3.04485894,11.3127315 2,11.8650466 Z M6,7 C5.44771525,7 5,7.44771525 5,8 C5,8.55228475 5.44771525,9 6,9 L15,9 C15.5522847,9 16,8.55228475 16,8 C16,7.44771525 15.5522847,7 15,7 L6,7 Z\"\r\n                      id=\"Combined-Shape\" fill=\"#000000\"></path>\r\n              </g>\r\n            </svg>\r\n          </a>\r\n          <div *ngIf=\"Iscalendarshow\" style=\"position: absolute; z-index: 99999; background-color: white;\">\r\n            <ul class=\"kt-nav\">\r\n              <li class=\"kt-nav__head\"> Calendar <a href=\"javascript:void(0);\" (click)=\"hidecalendar()\">x</a> </li>\r\n              <li class=\"kt-nav__separator\"></li>\r\n              <li class=\"kt-nav__item\">\r\n                <ngb-datepicker name=\"TodayDate\" #TodayDate=\"ngModel\"\r\n                                [(ngModel)]=\"propertyservice.InternalObject.TodayDate\"\r\n                                (select)=\"onDateSelect()\"\r\n                                (navigate)=\"date=$event.next\"></ngb-datepicker>\r\n              </li>\r\n\r\n            </ul>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <style>\r\n\r\n    .box-item {\r\n      width: 100%;\r\n      z-index: 1000\r\n    }\r\n  </style>\r\n  <div class=\"new-quote-main-section\">\r\n    <div class=\"kt-container kt-container--fluid\">\r\n      <div class=\"new-requst-filter_form create-new-client-popup\">\r\n        <div class=\"accordion accordion-solid\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12 col-sm-12 col-xs-12 no-spacing\">\r\n\r\n              <div class=\"\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-12 left-enlarge\">\r\n                    <div class=\"map-inner\">\r\n                      <div [ngClass]=\"IsLeftSectionLive === true ? 'left-section-live' : 'left-section-live closeClass-left'\">\r\n                        <span class=\"left_slide\" title=\"Live Location\" (click)=\"IsLeftLiveSectionMethod()\">\r\n                          <i class=\"fas fa-angle-right\"></i>\r\n                        </span>\r\n\r\n                        <div class=\"inner-section\" *ngIf=\"currentUser.Permissions.LiveTracking\">\r\n                          <div class=\"inner-header clearfix\">\r\n                            <span class=\"title\">Live Location</span>\r\n                            <span class=\"calendar\"></span>\r\n                          </div>\r\n                          <div class=\"inner-body\">                            \r\n                            <div class=\"inner-tabcontent\">\r\n                              <div class=\"tab-content style-1\">\r\n                                <div class=\"inner-body\">\r\n                                  <div class=\"inner-tabcontent\">\r\n                                    <div class=\"tab-content style-1\">\r\n                                      <div class=\"tab-pane active\" id=\"atab1\">\r\n                                        <div class=\"agent-row clearfix\" *ngFor=\"let x of service.EngineerLocation; let index=index async\">\r\n                                          <div class=\"agent-name\">\r\n                                            <img class=\"engineer-icon\" *ngIf=\"x.EngineerLogo.length === 0\" width=\"30px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                                 src=\"{{localPrependUrl}}/assets/svg/noimage.svg\" />\r\n                                            <img class=\"engineer-icon\" *ngIf=\"x.EngineerLogo.length > 0\" width=\"30px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                                 src=\"{{ x.EngineerLogo }}\">\r\n      \r\n                                            <p class=\"nagent\"><a (click)=\"showinnerlistlive(index)\" href=\"javascript:;\">{{ x.EngineerName }}</a></p>\r\n                                            <div class=\"LocationDate\"><span>{{x.LocationDate}}</span></div>\r\n                                          </div>\r\n                                       \r\n                                          <div class=\"agent-row-inner-live\" id=\"agent-row-inner-live-{{index}}\">\r\n                                            <div class=\"agent-header clearfix\">\r\n                                              <div class=\"agent-image\">\r\n                                                <i *ngIf=\"x.EngineerLogo.length === 0\" class=\"fas fa-user\"></i>\r\n                                                <i *ngIf=\"x.EngineerLogo.length > 0\">\r\n                                                  <img class=\"fas fa-user\" *ngIf=\"x.EngineerLogo.length > 0\" width=\"60px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                                       src=\"{{localPrependUrl}}/{{ x.EngineerLogo }}\">\r\n                                                </i>\r\n      \r\n                                              </div>\r\n                                              <div class=\"agent-image-info \">\r\n                                                <h2>{{ x.EngineerName }}</h2>\r\n                                                <p>{{x.LocationDate}}</p>\r\n                                                <div class=\"close-btn\"><a (click)=\"showinnerlistlive()\" href=\"javascript:;\">X</a></div>\r\n                                              </div>\r\n                                            </div>\r\n                                            <div class=\"agent-task style-1\">\r\n                                              <div class=\"agent-task-row strip-2\">     \r\n                                                <div class=\"agent-task-bottom\">\r\n                                                  <p *ngFor=\"let subCategory of x.LocationAddress?.split(',')\">\r\n                                                    {{ subCategory }}<br>\r\n                                                  </p>\r\n                                                </div>\r\n                                              </div>\r\n                                            </div>\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div [ngClass]=\"IsLeftSection === true ? 'left-section' : 'left-section closeClass-left'\">\r\n                        <span class=\"left_slide\" title=\"tasks\" (click)=\"IsLeftSectionMethod()\">\r\n                          <i class=\"fas fa-angle-right\"></i>\r\n                        </span>\r\n\r\n                        <div class=\"inner-section\">\r\n                          <div class=\"inner-header clearfix\">\r\n                            <span class=\"title\">{{this.currentUser.Ticket}}s</span>\r\n                            <span class=\"calendar\"></span>\r\n                          </div>\r\n                          <div class=\"inner-body\">\r\n                            <div class=\"inner-tabs\">\r\n                              <ul class=\"nav nav-tabs\">\r\n                                <li class=\"nav-item\">\r\n                                  <a class=\"nav-link active\" data-toggle=\"tab\"\r\n                                     href=\"#tab1\">\r\n                                    <span>{{CalendarTicketList.length}}</span>\r\n                                    <p>All</p>\r\n                                  </a>\r\n                                </li>\r\n\r\n                                <li class=\"nav-item\">\r\n                                  <a class=\"nav-link\" data-toggle=\"tab\" href=\"#tab2\">\r\n                                    <span>{{ TotalClosed }}</span>\r\n                                    <p>Closed</p>\r\n                                  </a>\r\n                                </li>\r\n                                <li class=\"nav-item\">\r\n                                  <a class=\"nav-link\" data-toggle=\"tab\" href=\"#tab3\">\r\n                                    <span>{{TotalInprogress}}</span>\r\n                                    <p>Inprogress</p>\r\n                                  </a>\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n\r\n                            <div class=\"inner-tabcontent\">\r\n                              <div class=\"tab-content style-1\">\r\n                                <div class=\"tab-pane active\" id=\"tab1\">\r\n                                  <div class=\"ticket-detail-row strip-1\" *ngFor=\"let x of CalendarTicketList; let index=index async\">\r\n                                    <div class=\"ticket-number clearfix\">\r\n                                      <p>\r\n                                        <span class=\"t-icon\">c</span> {{x.TicketId}}\r\n                                      </p>\r\n                                      <a href=\"javascript:;\" (click)=\"pupulateticket(x.Id)\">\r\n                                        <span class=\"t-staus\">Details</span>\r\n                                      </a>\r\n                                    </div>\r\n                                    <div class=\"ticket-info clearfix\">\r\n                                      <P class=\"cust-name\">\r\n                                        <i class=\"fas fa-user\"></i> {{x.CustomerName}}\r\n                                        <span class=\"t-staus {{x.Status}}\">{{x.Status}}</span>\r\n                                      </P>\r\n                                      <p class=\"cust-address\">\r\n                                        <a href=\"javascript:;\" (mouseover)=\"OnMouseUp(x)\">\r\n                                        <i class=\"fas fa-map-marker\"></i>\r\n                                        <span *ngFor=\"let subCategory of x.CustomerAddress?.split(',')\">\r\n                                          {{ subCategory }}<br>\r\n                                        </span>\r\n                                        </a>\r\n                                      </p>\r\n                                      <p class=\"time\">\r\n                                        <i class=\"fas fa-clock\"></i>\r\n                                        {{x.OneOffStartTime.split(':')[0] + ':' + x.OneOffStartTime.split(':')[1]}} - {{x.OneOffEndTime.split(':')[0] +':'+ x.OneOffEndTime.split(':')[1]}}\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                                <div class=\"tab-pane fade\" id=\"tab2\">\r\n                                  <div class=\"ticket-detail-row strip-1\" *ngFor=\"let x of TotalClosedList ; let index=index async\">\r\n                                    <div class=\"ticket-number clearfix\">\r\n                                      <p>\r\n                                        <span class=\"t-icon\">c</span> {{x.TicketId}}\r\n                                      </p>\r\n                                      <a href=\"javascript:;\" (click)=\"pupulateticket(x.Id)\">\r\n                                        <span class=\"t-staus\">Details</span>\r\n                                      </a>\r\n                                    </div>\r\n                                    <div class=\"ticket-info clearfix\">\r\n                                      <P class=\"cust-name\">\r\n                                        <i class=\"fas fa-user\"></i> {{x.CustomerName}}\r\n                                        <span class=\"t-staus {{x.Status}}\">{{x.Status}}</span>\r\n                                      </P>\r\n                                      <p class=\"cust-address\">\r\n                                        <i class=\"fas fa-map-marker\"></i>\r\n                                        <span *ngFor=\"let subCategory of x.CustomerAddress?.split(',')\">\r\n                                          {{ subCategory }}<br>\r\n                                        </span>\r\n                                        <a href=\"javascript:;\"\r\n                                           class=\"detail-btn btn\"><span class=\"fas fa-map-marker\"></span> </a>\r\n                                      </p>\r\n                                      <p class=\"time\">\r\n                                        <i class=\"fas fa-clock\"></i>\r\n                                        {{x.OneOffStartTime.split(':')[0] + ':' + x.OneOffStartTime.split(':')[1]}} - {{x.OneOffEndTime.split(':')[0] +':'+ x.OneOffEndTime.split(':')[1]}}\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                                <div class=\"tab-pane fade\" id=\"tab3\">\r\n                                  <div class=\"ticket-detail-row strip-1\" *ngFor=\"let x of TotalInprogressList ; let index=index async\">\r\n                                    <div class=\"ticket-number clearfix\">\r\n                                      <p>\r\n                                        <span class=\"t-icon\">c</span> {{x.TicketId}}\r\n                                      </p>\r\n                                      <a href=\"javascript:;\" (click)=\"pupulateticket(x.Id)\">\r\n                                        <span class=\"t-staus\">Details</span>\r\n                                      </a>\r\n                                    </div>\r\n                                    <div class=\"ticket-info clearfix\">\r\n                                      <P class=\"cust-name\">\r\n                                        <i class=\"fas fa-user\"></i> {{x.CustomerName}}\r\n                                        <span class=\"t-staus {{x.Status}}\">{{x.Status}}</span>\r\n                                      </P>\r\n                                      <p class=\"cust-address\">\r\n                                        <i class=\"fas fa-map-marker\"></i>\r\n                                        <span *ngFor=\"let subCategory of x.CustomerAddress?.split(',')\">\r\n                                          {{ subCategory }}<br>\r\n                                        </span>\r\n                                        <a href=\"javascript:;\"\r\n                                           class=\"detail-btn btn\"><span class=\"fas fa-map-marker\"></span> </a>\r\n                                      </p>\r\n                                      <p class=\"time\">\r\n                                        <i class=\"fas fa-clock\"></i>\r\n                                        {{x.OneOffStartTime.split(':')[0] + ':' + x.OneOffStartTime.split(':')[1]}} - {{x.OneOffEndTime.split(':')[0] +':'+ x.OneOffEndTime.split(':')[1]}}\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div class=\"map-section\">\r\n\r\n                        <agm-map style=\"width: 100%;height: 600px;\"\r\n                                 [latitude]=\"lat\"\r\n                                 [longitude]=\"lng\"\r\n                                 [zoom]=\"zoom\"\r\n                                 [minZoom]=\"10\"\r\n                                 [disableDefaultUI]=\"false\">\r\n                          <agm-marker *ngFor=\"let m of markers; let i = index\"\r\n                                      [latitude]=\"m.lat\"\r\n                                      [longitude]=\"m.lng\">\r\n                            <agm-info-window>\r\n                              <strong>{{m.name}}</strong><br>\r\n                              <p> {{m.address}} </p>\r\n                            </agm-info-window>\r\n                          </agm-marker>\r\n                        </agm-map>\r\n                      </div>\r\n                      <div [ngClass]=\"IsRightSection === true ? 'right-section' : 'right-section closeClass-right'\">\r\n                        <span class=\"right_slide\" title=\"tasks\" (click)=\"IsRightSectionMethod()\">\r\n                          <i class=\"fas fa-angle-right\"></i>\r\n                        </span>\r\n                        <div class=\"inner-section\">\r\n                          <div class=\"inner-header clearfix\">\r\n                            <span class=\"title\">{{this.currentUser.Engineer}}s</span>\r\n                          </div>\r\n                          <div class=\"inner-body\">\r\n                            <div class=\"inner-tabcontent\">\r\n                              <div class=\"tab-content style-1\">\r\n                                <div class=\"tab-pane active\" id=\"atab1\">\r\n                                  <div class=\"agent-row clearfix\" *ngFor=\"let x of CalenderList; let index=index async\">\r\n                                    <div class=\"agent-name\">\r\n                                      <img class=\"engineer-icon\" *ngIf=\"x.EngineerLogo.length === 0\" width=\"30px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                           src=\"{{localPrependUrl}}/assets/svg/noimage.svg\" />\r\n                                      <img class=\"engineer-icon\" *ngIf=\"x.EngineerLogo.length > 0\" width=\"30px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                           src=\"{{ x.EngineerLogo }}\">\r\n\r\n                                      <p class=\"nagent\"><a (click)=\"showinnerlist(index, x.EngineerId)\" href=\"javascript:;\">{{ x.EngineerName }}</a></p>\r\n                                    </div>\r\n                                    <div class=\"task\">\r\n                                      <p>{{x.Count}} Task </p>\r\n                                    </div>\r\n                                    <div class=\"agent-row-inner\" id=\"agent-row-inner-{{index}}\">\r\n                                      <div class=\"agent-header clearfix\">\r\n                                        <div class=\"agent-image\">\r\n                                          <i *ngIf=\"x.EngineerLogo.length === 0\" class=\"fas fa-user\"></i>\r\n                                          <i *ngIf=\"x.EngineerLogo.length > 0\">\r\n                                            <img *ngIf=\"x.EngineerLogo.length > 0\" width=\"60px\" height=\"61px\" title=\"{{x.EngineerName}}\" alt=\" \"\r\n                                                 src=\"{{ x.EngineerLogo }}\">\r\n                                          </i>\r\n\r\n                                        </div>\r\n                                        <div class=\"agent-image-info \">\r\n                                          <h2>{{ x.EngineerName }}</h2>\r\n                                          <p>{{ x.RemaningTask }} Task Left</p>\r\n                                          <div class=\"close-btn\"><a (click)=\"showinnerlist(x.EngineerId)\" href=\"javascript:;\">X</a></div>\r\n                                        </div>\r\n                                      </div>\r\n                                      <div class=\"agent-info\">\r\n                                        <div class=\"agent-id\">\r\n                                          <p>Mob.: {{x.EngineerMobile}}</p>\r\n                                        </div>\r\n                                      </div>\r\n                                      <div class=\"agent-task style-1\">\r\n                                        <div class=\"agent-task-row strip-2\" *ngFor=\"let item of locallist;let lst=index async\">\r\n                                          <div class=\"agent-task-top {{item.Status}}\">\r\n                                            <h2>{{item.TicketId}}</h2>\r\n                                            <P>{{item.Status}}</P>\r\n                                          </div>\r\n                                          <div class=\"agent-task-mid\">\r\n                                            <P>{{item.OneOffAppointmentDate | date}}</P>\r\n                                            <a href=\"javascript:;\" class=\"at-detail\" data-toggle=\"modal\" data-target=\"#detailModal\" (click)=\"openmodelpopupticketdetails(item.Id)\">Details</a>\r\n\r\n                                          </div>\r\n                                          <div class=\"agent-task-bottom\">\r\n                                            <p *ngFor=\"let subCategory of item.CustomerAddress?.split(',')\">\r\n                                              {{ subCategory }}<br>\r\n                                            </p>\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"detailModal\">\r\n  <div class=\"modal-dialog modal-dialog-centered\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\">{{CalendarTicketDetailsData.TicketId}}</h4>\r\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"detail-inner\">\r\n          <div class=\"details-tabs\">\r\n            <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#dtab1\">TASK DETAILS</a>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link\" data-toggle=\"tab\" href=\"#dtab2\">ACTIVITY TIMELINE</a>\r\n              </li>\r\n            </ul>\r\n            <div class=\"tab-content\">\r\n              <div id=\"dtab1\" class=\" tab-pane active\">\r\n                <div class=\"task-detail-4-box\">\r\n                  <h2>{{CalendarTicketDetailsData.Title}}</h2>\r\n                  <p>\r\n                    {{CalendarTicketDetailsData.Description}}\r\n                  </p>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-6 col-sm-12\">\r\n                    <div class=\"task-detail-1-box\">\r\n                      <table class=\"table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <td colspan=\"2\">\r\n                              <h5>{{this.currentUser.Ticket}}</h5>\r\n                            </td>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr>\r\n                            <td><i class=\"fas fa-list\"></i> Status:</td>\r\n                            <td>{{CalendarTicketDetailsData.Status}}</td>\r\n                          </tr>\r\n                          <tr>\r\n                            <td><i class=\"fas fa-clock\"></i> Ticket Start Time :</td>\r\n                            <td>{{CalendarTicketDetailsData.OneOffStartTime}}</td>\r\n                          </tr>\r\n                          <tr>\r\n                            <td><i class=\"fas fa-clock\"></i> Ticket End Time:</td>\r\n                            <td>{{CalendarTicketDetailsData.OneOffEndTime}}</td>\r\n                          </tr>\r\n                          <tr>\r\n                            <td><i class=\"fas fa-clock\"></i> Ticket Generate Date:</td>\r\n                            <td>{{CalendarTicketDetailsData.GenerateDate | date: 'MMM dd yyyy'}}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-md-6 col-sm-12\">\r\n                    <div class=\"task-detail-2-box\">\r\n                      <h2>Customer</h2>\r\n                      <ul>\r\n                        <li><i class=\"fas fa-user\"></i> {{CalendarTicketDetailsData.CustomerName}}</li>\r\n                        <li><i class=\"fas fa-phone\"></i> {{CalendarTicketDetailsData.CustomerContactNo}}</li>\r\n                        <li><i class=\"fas fa-envelope\"></i> {{CalendarTicketDetailsData.CustomerEmail}}</li>\r\n                        <li><i class=\"fas fa-map-marker\"></i> {{CalendarTicketDetailsData.CustomerAddress}}</li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"task-detail-3-box\">\r\n                  <h2>Team</h2>\r\n                  <ul *ngFor=\"let item of CalendarTicketDetailsData.List;let lst=index async\">\r\n                    <li>\r\n                      <img *ngIf=\"item.EngineerLogo.length === 0\" width=\"20\" height=\"20px\" class=\"img-thumbnail\" title=\"{{item.EngineerName}}\"\r\n                      alt=\"\"\r\n                      src=\"{{localPrependUrl}}/assets/svg/noimage.svg\" />\r\n                    <img *ngIf=\"item.EngineerLogo.length > 0\" width=\"20\" height=\"20px\" class=\"img-thumbnail\" title=\"{{item.EngineerName}}\"\r\n                      alt=\"\" src=\"{{ item.EngineerLogo }}\">\r\n\r\n                      {{item.EngineerName}}\r\n                      <span class=\"kt-badge kt-badge--success kt-badge--inline kt-badge--pill\"\r\n                      *ngIf=\"item.Type === 1\">Supervisor</span>\r\n                      <span class=\"kt-badge kt-badge--warning kt-badge--inline kt-badge--pill\"\r\n                      *ngIf=\"item.Type === 2\">Foreman</span>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div id=\"dtab2\" class=\" tab-pane fade\">\r\n                <div class=\"activity-timeline\" *ngFor=\"let item of CalendarTicketDetailsData?.Logs;let lst=index async\">\r\n                  <div class=\"activity-timeline-row clearfix\">\r\n                    <div class=\"delivery-status\">\r\n                      <span><i class=\"fa fa-clock\"></i> {{item.LogDate | date:'yyyy MMM dd HH:mm:ss'}} </span>\r\n                    </div>\r\n                    <div class=\"delivery-name\">\r\n                      <p>{{item.RecentDescription}}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","/*!\nFullCalendar Interaction Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { config, elementClosest, EmitterMixin, applyStyle, whenTransitionDone, removeElement, ScrollController, ElementScrollController, computeInnerRect, WindowScrollController, preventSelection, preventContextMenu, allowSelection, allowContextMenu, ElementDragging, computeRect, getClippingParents, pointInsideRect, isDateSpansEqual, constrainPoint, intersectRects, getRectCenter, diffPoints, mapHash, rangeContainsRange, interactionSettingsToStore, Interaction, enableCursor, disableCursor, compareNumbers, getElSeg, getRelevantEvents, EventApi, createEmptyEventStore, applyMutationToEventStore, interactionSettingsStore, startOfDay, diffDates, createDuration, eventTupleToStore, isInteractionValid, parseDragMeta, elementMatches, parseEventDef, createEventInstance, globalDefaults, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nconfig.touchMouseIgnoreWait = 500;\nvar ignoreMouseDepth = 0;\nvar listenerCnt = 0;\nvar isWindowTouchMoveCancelled = false;\n/*\nUses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\nTracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\nAlso, tracks if there was touch-scrolling.\nAlso, can prevent touch-scrolling from happening.\nAlso, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\nemits:\n- pointerdown\n- pointermove\n- pointerup\n*/\nvar PointerDragging = /** @class */ (function () {\n    function PointerDragging(containerEl) {\n        var _this = this;\n        this.subjectEl = null;\n        this.downEl = null;\n        // options that can be directly assigned by caller\n        this.selector = ''; // will cause subjectEl in all emitted events to be this element\n        this.handleSelector = '';\n        this.shouldIgnoreMove = false;\n        this.shouldWatchScroll = true; // for simulating pointermove on scroll\n        // internal states\n        this.isDragging = false;\n        this.isTouchDragging = false;\n        this.wasTouchScroll = false;\n        // Mouse\n        // ----------------------------------------------------------------------------------------------------\n        this.handleMouseDown = function (ev) {\n            if (!_this.shouldIgnoreMouse() &&\n                isPrimaryMouseButton(ev) &&\n                _this.tryStart(ev)) {\n                var pev = _this.createEventFromMouse(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                if (!_this.shouldIgnoreMove) {\n                    document.addEventListener('mousemove', _this.handleMouseMove);\n                }\n                document.addEventListener('mouseup', _this.handleMouseUp);\n            }\n        };\n        this.handleMouseMove = function (ev) {\n            var pev = _this.createEventFromMouse(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleMouseUp = function (ev) {\n            document.removeEventListener('mousemove', _this.handleMouseMove);\n            document.removeEventListener('mouseup', _this.handleMouseUp);\n            _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n            _this.cleanup(); // call last so that pointerup has access to props\n        };\n        // Touch\n        // ----------------------------------------------------------------------------------------------------\n        this.handleTouchStart = function (ev) {\n            if (_this.tryStart(ev)) {\n                _this.isTouchDragging = true;\n                var pev = _this.createEventFromTouch(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                // unlike mouse, need to attach to target, not document\n                // https://stackoverflow.com/a/45760014\n                var target = ev.target;\n                if (!_this.shouldIgnoreMove) {\n                    target.addEventListener('touchmove', _this.handleTouchMove);\n                }\n                target.addEventListener('touchend', _this.handleTouchEnd);\n                target.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                // attach a handler to get called when ANY scroll action happens on the page.\n                // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                // http://stackoverflow.com/a/32954565/96342\n                window.addEventListener('scroll', _this.handleTouchScroll, true // useCapture\n                );\n            }\n        };\n        this.handleTouchMove = function (ev) {\n            var pev = _this.createEventFromTouch(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleTouchEnd = function (ev) {\n            if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                var target = ev.target;\n                target.removeEventListener('touchmove', _this.handleTouchMove);\n                target.removeEventListener('touchend', _this.handleTouchEnd);\n                target.removeEventListener('touchcancel', _this.handleTouchEnd);\n                window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n                _this.isTouchDragging = false;\n                startIgnoringMouse();\n            }\n        };\n        this.handleTouchScroll = function () {\n            _this.wasTouchScroll = true;\n        };\n        this.handleScroll = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                _this.emitter.trigger('pointermove', {\n                    origEvent: ev,\n                    isTouch: _this.isTouchDragging,\n                    subjectEl: _this.subjectEl,\n                    pageX: pageX,\n                    pageY: pageY,\n                    deltaX: pageX - _this.origPageX,\n                    deltaY: pageY - _this.origPageY\n                });\n            }\n        };\n        this.containerEl = containerEl;\n        this.emitter = new EmitterMixin();\n        containerEl.addEventListener('mousedown', this.handleMouseDown);\n        containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerCreated();\n    }\n    PointerDragging.prototype.destroy = function () {\n        this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n        this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerDestroyed();\n    };\n    PointerDragging.prototype.tryStart = function (ev) {\n        var subjectEl = this.querySubjectEl(ev);\n        var downEl = ev.target;\n        if (subjectEl &&\n            (!this.handleSelector || elementClosest(downEl, this.handleSelector))) {\n            this.subjectEl = subjectEl;\n            this.downEl = downEl;\n            this.isDragging = true; // do this first so cancelTouchScroll will work\n            this.wasTouchScroll = false;\n            return true;\n        }\n        return false;\n    };\n    PointerDragging.prototype.cleanup = function () {\n        isWindowTouchMoveCancelled = false;\n        this.isDragging = false;\n        this.subjectEl = null;\n        this.downEl = null;\n        // keep wasTouchScroll around for later access\n        this.destroyScrollWatch();\n    };\n    PointerDragging.prototype.querySubjectEl = function (ev) {\n        if (this.selector) {\n            return elementClosest(ev.target, this.selector);\n        }\n        else {\n            return this.containerEl;\n        }\n    };\n    PointerDragging.prototype.shouldIgnoreMouse = function () {\n        return ignoreMouseDepth || this.isTouchDragging;\n    };\n    // can be called by user of this class, to cancel touch-based scrolling for the current drag\n    PointerDragging.prototype.cancelTouchScroll = function () {\n        if (this.isDragging) {\n            isWindowTouchMoveCancelled = true;\n        }\n    };\n    // Scrolling that simulates pointermoves\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.initScrollWatch = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.recordCoords(ev);\n            window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n        }\n    };\n    PointerDragging.prototype.recordCoords = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.prevPageX = ev.pageX;\n            this.prevPageY = ev.pageY;\n            this.prevScrollX = window.pageXOffset;\n            this.prevScrollY = window.pageYOffset;\n        }\n    };\n    PointerDragging.prototype.destroyScrollWatch = function () {\n        if (this.shouldWatchScroll) {\n            window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n        }\n    };\n    // Event Normalization\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n        var deltaX = 0;\n        var deltaY = 0;\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = ev.pageX;\n            this.origPageY = ev.pageY;\n        }\n        else {\n            deltaX = ev.pageX - this.origPageX;\n            deltaY = ev.pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: false,\n            subjectEl: this.subjectEl,\n            pageX: ev.pageX,\n            pageY: ev.pageY,\n            deltaX: deltaX,\n            deltaY: deltaY\n        };\n    };\n    PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n        var touches = ev.touches;\n        var pageX;\n        var pageY;\n        var deltaX = 0;\n        var deltaY = 0;\n        // if touch coords available, prefer,\n        // because FF would give bad ev.pageX ev.pageY\n        if (touches && touches.length) {\n            pageX = touches[0].pageX;\n            pageY = touches[0].pageY;\n        }\n        else {\n            pageX = ev.pageX;\n            pageY = ev.pageY;\n        }\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = pageX;\n            this.origPageY = pageY;\n        }\n        else {\n            deltaX = pageX - this.origPageX;\n            deltaY = pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: true,\n            subjectEl: this.subjectEl,\n            pageX: pageX,\n            pageY: pageY,\n            deltaX: deltaX,\n            deltaY: deltaY\n        };\n    };\n    return PointerDragging;\n}());\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n    return ev.button === 0 && !ev.ctrlKey;\n}\n// Ignoring fake mouse events generated by touch\n// ----------------------------------------------------------------------------------------------------\nfunction startIgnoringMouse() {\n    ignoreMouseDepth++;\n    setTimeout(function () {\n        ignoreMouseDepth--;\n    }, config.touchMouseIgnoreWait);\n}\n// We want to attach touchmove as early as possible for Safari\n// ----------------------------------------------------------------------------------------------------\nfunction listenerCreated() {\n    if (!(listenerCnt++)) {\n        window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction listenerDestroyed() {\n    if (!(--listenerCnt)) {\n        window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction onWindowTouchMove(ev) {\n    if (isWindowTouchMoveCancelled) {\n        ev.preventDefault();\n    }\n}\n\n/*\nAn effect in which an element follows the movement of a pointer across the screen.\nThe moving element is a clone of some other element.\nMust call start + handleMove + stop.\n*/\nvar ElementMirror = /** @class */ (function () {\n    function ElementMirror() {\n        this.isVisible = false; // must be explicitly enabled\n        this.sourceEl = null;\n        this.mirrorEl = null;\n        this.sourceElRect = null; // screen coords relative to viewport\n        // options that can be set directly by caller\n        this.parentNode = document.body;\n        this.zIndex = 9999;\n        this.revertDuration = 0;\n    }\n    ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n        this.sourceEl = sourceEl;\n        this.sourceElRect = this.sourceEl.getBoundingClientRect();\n        this.origScreenX = pageX - window.pageXOffset;\n        this.origScreenY = pageY - window.pageYOffset;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.updateElPosition();\n    };\n    ElementMirror.prototype.handleMove = function (pageX, pageY) {\n        this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n        this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n        this.updateElPosition();\n    };\n    // can be called before start\n    ElementMirror.prototype.setIsVisible = function (bool) {\n        if (bool) {\n            if (!this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = '';\n                }\n                this.isVisible = bool; // needs to happen before updateElPosition\n                this.updateElPosition(); // because was not updating the position while invisible\n            }\n        }\n        else {\n            if (this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = 'none';\n                }\n                this.isVisible = bool;\n            }\n        }\n    };\n    // always async\n    ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n        var _this = this;\n        var done = function () {\n            _this.cleanup();\n            callback();\n        };\n        if (needsRevertAnimation &&\n            this.mirrorEl &&\n            this.isVisible &&\n            this.revertDuration && // if 0, transition won't work\n            (this.deltaX || this.deltaY) // if same coords, transition won't work\n        ) {\n            this.doRevertAnimation(done, this.revertDuration);\n        }\n        else {\n            setTimeout(done, 0);\n        }\n    };\n    ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n        var mirrorEl = this.mirrorEl;\n        var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n        mirrorEl.style.transition =\n            'top ' + revertDuration + 'ms,' +\n                'left ' + revertDuration + 'ms';\n        applyStyle(mirrorEl, {\n            left: finalSourceElRect.left,\n            top: finalSourceElRect.top\n        });\n        whenTransitionDone(mirrorEl, function () {\n            mirrorEl.style.transition = '';\n            callback();\n        });\n    };\n    ElementMirror.prototype.cleanup = function () {\n        if (this.mirrorEl) {\n            removeElement(this.mirrorEl);\n            this.mirrorEl = null;\n        }\n        this.sourceEl = null;\n    };\n    ElementMirror.prototype.updateElPosition = function () {\n        if (this.sourceEl && this.isVisible) {\n            applyStyle(this.getMirrorEl(), {\n                left: this.sourceElRect.left + this.deltaX,\n                top: this.sourceElRect.top + this.deltaY\n            });\n        }\n    };\n    ElementMirror.prototype.getMirrorEl = function () {\n        var sourceElRect = this.sourceElRect;\n        var mirrorEl = this.mirrorEl;\n        if (!mirrorEl) {\n            mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n            // we don't want long taps or any mouse interaction causing selection/menus.\n            // would use preventSelection(), but that prevents selectstart, causing problems.\n            mirrorEl.classList.add('fc-unselectable');\n            mirrorEl.classList.add('fc-dragging');\n            applyStyle(mirrorEl, {\n                position: 'fixed',\n                zIndex: this.zIndex,\n                visibility: '',\n                boxSizing: 'border-box',\n                width: sourceElRect.right - sourceElRect.left,\n                height: sourceElRect.bottom - sourceElRect.top,\n                right: 'auto',\n                bottom: 'auto',\n                margin: 0\n            });\n            this.parentNode.appendChild(mirrorEl);\n        }\n        return mirrorEl;\n    };\n    return ElementMirror;\n}());\n\n/*\nIs a cache for a given element's scroll information (all the info that ScrollController stores)\nin addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\nThe cache can be in one of two modes:\n- doesListening:false - ignores when the container is scrolled by someone else\n- doesListening:true - watch for scrolling and update the cache\n*/\nvar ScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ScrollGeomCache, _super);\n    function ScrollGeomCache(scrollController, doesListening) {\n        var _this = _super.call(this) || this;\n        _this.handleScroll = function () {\n            _this.scrollTop = _this.scrollController.getScrollTop();\n            _this.scrollLeft = _this.scrollController.getScrollLeft();\n            _this.handleScrollChange();\n        };\n        _this.scrollController = scrollController;\n        _this.doesListening = doesListening;\n        _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n        _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n        _this.scrollWidth = scrollController.getScrollWidth();\n        _this.scrollHeight = scrollController.getScrollHeight();\n        _this.clientWidth = scrollController.getClientWidth();\n        _this.clientHeight = scrollController.getClientHeight();\n        _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n        if (_this.doesListening) {\n            _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n        }\n        return _this;\n    }\n    ScrollGeomCache.prototype.destroy = function () {\n        if (this.doesListening) {\n            this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n        }\n    };\n    ScrollGeomCache.prototype.getScrollTop = function () {\n        return this.scrollTop;\n    };\n    ScrollGeomCache.prototype.getScrollLeft = function () {\n        return this.scrollLeft;\n    };\n    ScrollGeomCache.prototype.setScrollTop = function (top) {\n        this.scrollController.setScrollTop(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.setScrollLeft = function (top) {\n        this.scrollController.setScrollLeft(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.getClientWidth = function () {\n        return this.clientWidth;\n    };\n    ScrollGeomCache.prototype.getClientHeight = function () {\n        return this.clientHeight;\n    };\n    ScrollGeomCache.prototype.getScrollWidth = function () {\n        return this.scrollWidth;\n    };\n    ScrollGeomCache.prototype.getScrollHeight = function () {\n        return this.scrollHeight;\n    };\n    ScrollGeomCache.prototype.handleScrollChange = function () {\n    };\n    return ScrollGeomCache;\n}(ScrollController));\nvar ElementScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ElementScrollGeomCache, _super);\n    function ElementScrollGeomCache(el, doesListening) {\n        return _super.call(this, new ElementScrollController(el), doesListening) || this;\n    }\n    ElementScrollGeomCache.prototype.getEventTarget = function () {\n        return this.scrollController.el;\n    };\n    ElementScrollGeomCache.prototype.computeClientRect = function () {\n        return computeInnerRect(this.scrollController.el);\n    };\n    return ElementScrollGeomCache;\n}(ScrollGeomCache));\nvar WindowScrollGeomCache = /** @class */ (function (_super) {\n    __extends(WindowScrollGeomCache, _super);\n    function WindowScrollGeomCache(doesListening) {\n        return _super.call(this, new WindowScrollController(), doesListening) || this;\n    }\n    WindowScrollGeomCache.prototype.getEventTarget = function () {\n        return window;\n    };\n    WindowScrollGeomCache.prototype.computeClientRect = function () {\n        return {\n            left: this.scrollLeft,\n            right: this.scrollLeft + this.clientWidth,\n            top: this.scrollTop,\n            bottom: this.scrollTop + this.clientHeight\n        };\n    };\n    // the window is the only scroll object that changes it's rectangle relative\n    // to the document's topleft as it scrolls\n    WindowScrollGeomCache.prototype.handleScrollChange = function () {\n        this.clientRect = this.computeClientRect();\n    };\n    return WindowScrollGeomCache;\n}(ScrollGeomCache));\n\n// If available we are using native \"performance\" API instead of \"Date\"\n// Read more about it on MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Performance\nvar getTime = typeof performance === 'function' ? performance.now : Date.now;\n/*\nFor a pointer interaction, automatically scrolls certain scroll containers when the pointer\napproaches the edge.\n\nThe caller must call start + handleMove + stop.\n*/\nvar AutoScroller = /** @class */ (function () {\n    function AutoScroller() {\n        var _this = this;\n        // options that can be set by caller\n        this.isEnabled = true;\n        this.scrollQuery = [window, '.fc-scroller'];\n        this.edgeThreshold = 50; // pixels\n        this.maxVelocity = 300; // pixels per second\n        // internal state\n        this.pointerScreenX = null;\n        this.pointerScreenY = null;\n        this.isAnimating = false;\n        this.scrollCaches = null;\n        // protect against the initial pointerdown being too close to an edge and starting the scroll\n        this.everMovedUp = false;\n        this.everMovedDown = false;\n        this.everMovedLeft = false;\n        this.everMovedRight = false;\n        this.animate = function () {\n            if (_this.isAnimating) { // wasn't cancelled between animation calls\n                var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                if (edge) {\n                    var now = getTime();\n                    _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                    _this.requestAnimation(now);\n                }\n                else {\n                    _this.isAnimating = false; // will stop animation\n                }\n            }\n        };\n    }\n    AutoScroller.prototype.start = function (pageX, pageY) {\n        if (this.isEnabled) {\n            this.scrollCaches = this.buildCaches();\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.handleMove(pageX, pageY);\n        }\n    };\n    AutoScroller.prototype.handleMove = function (pageX, pageY) {\n        if (this.isEnabled) {\n            var pointerScreenX = pageX - window.pageXOffset;\n            var pointerScreenY = pageY - window.pageYOffset;\n            var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n            var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n            if (yDelta < 0) {\n                this.everMovedUp = true;\n            }\n            else if (yDelta > 0) {\n                this.everMovedDown = true;\n            }\n            if (xDelta < 0) {\n                this.everMovedLeft = true;\n            }\n            else if (xDelta > 0) {\n                this.everMovedRight = true;\n            }\n            this.pointerScreenX = pointerScreenX;\n            this.pointerScreenY = pointerScreenY;\n            if (!this.isAnimating) {\n                this.isAnimating = true;\n                this.requestAnimation(getTime());\n            }\n        }\n    };\n    AutoScroller.prototype.stop = function () {\n        if (this.isEnabled) {\n            this.isAnimating = false; // will stop animation\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n            this.scrollCaches = null;\n        }\n    };\n    AutoScroller.prototype.requestAnimation = function (now) {\n        this.msSinceRequest = now;\n        requestAnimationFrame(this.animate);\n    };\n    AutoScroller.prototype.handleSide = function (edge, seconds) {\n        var scrollCache = edge.scrollCache;\n        var edgeThreshold = this.edgeThreshold;\n        var invDistance = edgeThreshold - edge.distance;\n        var velocity = // the closer to the edge, the faster we scroll\n         (invDistance * invDistance) / (edgeThreshold * edgeThreshold) * // quadratic\n            this.maxVelocity * seconds;\n        var sign = 1;\n        switch (edge.name) {\n            case 'left':\n                sign = -1;\n            // falls through\n            case 'right':\n                scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                break;\n            case 'top':\n                sign = -1;\n            // falls through\n            case 'bottom':\n                scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                break;\n        }\n    };\n    // left/top are relative to document topleft\n    AutoScroller.prototype.computeBestEdge = function (left, top) {\n        var edgeThreshold = this.edgeThreshold;\n        var bestSide = null;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            var rect = scrollCache.clientRect;\n            var leftDist = left - rect.left;\n            var rightDist = rect.right - left;\n            var topDist = top - rect.top;\n            var bottomDist = rect.bottom - top;\n            // completely within the rect?\n            if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                    (!bestSide || bestSide.distance > topDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                }\n                if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                    (!bestSide || bestSide.distance > bottomDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                }\n                if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                    (!bestSide || bestSide.distance > leftDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                }\n                if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                    (!bestSide || bestSide.distance > rightDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                }\n            }\n        }\n        return bestSide;\n    };\n    AutoScroller.prototype.buildCaches = function () {\n        return this.queryScrollEls().map(function (el) {\n            if (el === window) {\n                return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n            }\n            else {\n                return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n            }\n        });\n    };\n    AutoScroller.prototype.queryScrollEls = function () {\n        var els = [];\n        for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n            var query = _a[_i];\n            if (typeof query === 'object') {\n                els.push(query);\n            }\n            else {\n                els.push.apply(els, Array.prototype.slice.call(document.querySelectorAll(query)));\n            }\n        }\n        return els;\n    };\n    return AutoScroller;\n}());\n\n/*\nMonitors dragging on an element. Has a number of high-level features:\n- minimum distance required before dragging\n- minimum wait time (\"delay\") before dragging\n- a mirror element that follows the pointer\n*/\nvar FeaturefulElementDragging = /** @class */ (function (_super) {\n    __extends(FeaturefulElementDragging, _super);\n    function FeaturefulElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        // options that can be directly set by caller\n        // the caller can also set the PointerDragging's options as well\n        _this.delay = null;\n        _this.minDistance = 0;\n        _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n        _this.mirrorNeedsRevert = false;\n        _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n        _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n        _this.isDelayEnded = false;\n        _this.isDistanceSurpassed = false;\n        _this.delayTimeoutId = null;\n        _this.onPointerDown = function (ev) {\n            if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                _this.isInteracting = true;\n                _this.isDelayEnded = false;\n                _this.isDistanceSurpassed = false;\n                preventSelection(document.body);\n                preventContextMenu(document.body);\n                // prevent links from being visited if there's an eventual drag.\n                // also prevents selection in older browsers (maybe?).\n                // not necessary for touch, besides, browser would complain about passiveness.\n                if (!ev.isTouch) {\n                    ev.origEvent.preventDefault();\n                }\n                _this.emitter.trigger('pointerdown', ev);\n                if (!_this.pointer.shouldIgnoreMove) {\n                    // actions related to initiating dragstart+dragmove+dragend...\n                    _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                    _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                    _this.startDelay(ev);\n                    if (!_this.minDistance) {\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n            }\n        };\n        _this.onPointerMove = function (ev) {\n            if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                _this.emitter.trigger('pointermove', ev);\n                if (!_this.isDistanceSurpassed) {\n                    var minDistance = _this.minDistance;\n                    var distanceSq = void 0; // current distance from the origin, squared\n                    var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                    distanceSq = deltaX * deltaX + deltaY * deltaY;\n                    if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n                if (_this.isDragging) {\n                    // a real pointer move? (not one simulated by scrolling)\n                    if (ev.origEvent.type !== 'scroll') {\n                        _this.mirror.handleMove(ev.pageX, ev.pageY);\n                        _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                    }\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            }\n        };\n        _this.onPointerUp = function (ev) {\n            if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                _this.isInteracting = false;\n                allowSelection(document.body);\n                allowContextMenu(document.body);\n                _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                if (_this.isDragging) {\n                    _this.autoScroller.stop();\n                    _this.tryStopDrag(ev); // which will stop the mirror\n                }\n                if (_this.delayTimeoutId) {\n                    clearTimeout(_this.delayTimeoutId);\n                    _this.delayTimeoutId = null;\n                }\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.onPointerDown);\n        pointer.emitter.on('pointermove', _this.onPointerMove);\n        pointer.emitter.on('pointerup', _this.onPointerUp);\n        _this.mirror = new ElementMirror();\n        _this.autoScroller = new AutoScroller();\n        return _this;\n    }\n    FeaturefulElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    FeaturefulElementDragging.prototype.startDelay = function (ev) {\n        var _this = this;\n        if (typeof this.delay === 'number') {\n            this.delayTimeoutId = setTimeout(function () {\n                _this.delayTimeoutId = null;\n                _this.handleDelayEnd(ev);\n            }, this.delay); // not assignable to number!\n        }\n        else {\n            this.handleDelayEnd(ev);\n        }\n    };\n    FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n        this.isDelayEnded = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n        this.isDistanceSurpassed = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n        if (this.isDelayEnded && this.isDistanceSurpassed) {\n            if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                this.isDragging = true;\n                this.mirrorNeedsRevert = false;\n                this.autoScroller.start(ev.pageX, ev.pageY);\n                this.emitter.trigger('dragstart', ev);\n                if (this.touchScrollAllowed === false) {\n                    this.pointer.cancelTouchScroll();\n                }\n            }\n        }\n    };\n    FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n        // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n        // that come from the document to fire beforehand. much more convenient this way.\n        this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev) // bound with args\n        );\n    };\n    FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n        this.isDragging = false;\n        this.emitter.trigger('dragend', ev);\n    };\n    // fill in the implementations...\n    FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.pointer.shouldIgnoreMove = bool;\n    };\n    FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        this.mirror.setIsVisible(bool);\n    };\n    FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        this.mirrorNeedsRevert = bool;\n    };\n    FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        this.autoScroller.isEnabled = bool;\n    };\n    return FeaturefulElementDragging;\n}(ElementDragging));\n\n/*\nWhen this class is instantiated, it records the offset of an element (relative to the document topleft),\nand continues to monitor scrolling, updating the cached coordinates if it needs to.\nDoes not access the DOM after instantiation, so highly performant.\n\nAlso keeps track of all scrolling/overflow:hidden containers that are parents of the given element\nand an determine if a given point is inside the combined clipping rectangle.\n*/\nvar OffsetTracker = /** @class */ (function () {\n    function OffsetTracker(el) {\n        this.origRect = computeRect(el);\n        // will work fine for divs that have overflow:hidden\n        this.scrollCaches = getClippingParents(el).map(function (el) {\n            return new ElementScrollGeomCache(el, true); // listen=true\n        });\n    }\n    OffsetTracker.prototype.destroy = function () {\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            scrollCache.destroy();\n        }\n    };\n    OffsetTracker.prototype.computeLeft = function () {\n        var left = this.origRect.left;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n        }\n        return left;\n    };\n    OffsetTracker.prototype.computeTop = function () {\n        var top = this.origRect.top;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n        }\n        return top;\n    };\n    OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n        var point = { left: pageX, top: pageY };\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                !pointInsideRect(point, scrollCache.clientRect)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return OffsetTracker;\n}());\n// certain clipping containers should never constrain interactions, like <html> and <body>\n// https://github.com/fullcalendar/fullcalendar/issues/3615\nfunction isIgnoredClipping(node) {\n    var tagName = node.tagName;\n    return tagName === 'HTML' || tagName === 'BODY';\n}\n\n/*\nTracks movement over multiple droppable areas (aka \"hits\")\nthat exist in one or more DateComponents.\nRelies on an existing draggable.\n\nemits:\n- pointerdown\n- dragstart\n- hitchange - fires initially, even if not over a hit\n- pointerup\n- (hitchange - again, to null, if ended over a hit)\n- dragend\n*/\nvar HitDragging = /** @class */ (function () {\n    function HitDragging(dragging, droppableStore) {\n        var _this = this;\n        // options that can be set by caller\n        this.useSubjectCenter = false;\n        this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n        this.initialHit = null;\n        this.movingHit = null;\n        this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            _this.initialHit = null;\n            _this.movingHit = null;\n            _this.finalHit = null;\n            _this.prepareHits();\n            _this.processFirstCoord(ev);\n            if (_this.initialHit || !_this.requireInitial) {\n                dragging.setIgnoreMove(false);\n                _this.emitter.trigger('pointerdown', ev); // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n            }\n            else {\n                dragging.setIgnoreMove(true);\n            }\n        };\n        this.handleDragStart = function (ev) {\n            _this.emitter.trigger('dragstart', ev);\n            _this.handleMove(ev, true); // force = fire even if initially null\n        };\n        this.handleDragMove = function (ev) {\n            _this.emitter.trigger('dragmove', ev);\n            _this.handleMove(ev);\n        };\n        this.handlePointerUp = function (ev) {\n            _this.releaseHits();\n            _this.emitter.trigger('pointerup', ev);\n        };\n        this.handleDragEnd = function (ev) {\n            if (_this.movingHit) {\n                _this.emitter.trigger('hitupdate', null, true, ev);\n            }\n            _this.finalHit = _this.movingHit;\n            _this.movingHit = null;\n            _this.emitter.trigger('dragend', ev);\n        };\n        this.droppableStore = droppableStore;\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        dragging.emitter.on('dragmove', this.handleDragMove);\n        dragging.emitter.on('pointerup', this.handlePointerUp);\n        dragging.emitter.on('dragend', this.handleDragEnd);\n        this.dragging = dragging;\n        this.emitter = new EmitterMixin();\n    }\n    // sets initialHit\n    // sets coordAdjust\n    HitDragging.prototype.processFirstCoord = function (ev) {\n        var origPoint = { left: ev.pageX, top: ev.pageY };\n        var adjustedPoint = origPoint;\n        var subjectEl = ev.subjectEl;\n        var subjectRect;\n        if (subjectEl !== document) {\n            subjectRect = computeRect(subjectEl);\n            adjustedPoint = constrainPoint(adjustedPoint, subjectRect);\n        }\n        var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n        if (initialHit) {\n            if (this.useSubjectCenter && subjectRect) {\n                var slicedSubjectRect = intersectRects(subjectRect, initialHit.rect);\n                if (slicedSubjectRect) {\n                    adjustedPoint = getRectCenter(slicedSubjectRect);\n                }\n            }\n            this.coordAdjust = diffPoints(adjustedPoint, origPoint);\n        }\n        else {\n            this.coordAdjust = { left: 0, top: 0 };\n        }\n    };\n    HitDragging.prototype.handleMove = function (ev, forceHandle) {\n        var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n        if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n            this.movingHit = hit;\n            this.emitter.trigger('hitupdate', hit, false, ev);\n        }\n    };\n    HitDragging.prototype.prepareHits = function () {\n        this.offsetTrackers = mapHash(this.droppableStore, function (interactionSettings) {\n            interactionSettings.component.buildPositionCaches();\n            return new OffsetTracker(interactionSettings.el);\n        });\n    };\n    HitDragging.prototype.releaseHits = function () {\n        var offsetTrackers = this.offsetTrackers;\n        for (var id in offsetTrackers) {\n            offsetTrackers[id].destroy();\n        }\n        this.offsetTrackers = {};\n    };\n    HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n        var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n        var bestHit = null;\n        for (var id in droppableStore) {\n            var component = droppableStore[id].component;\n            var offsetTracker = offsetTrackers[id];\n            if (offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                var originLeft = offsetTracker.computeLeft();\n                var originTop = offsetTracker.computeTop();\n                var positionLeft = offsetLeft - originLeft;\n                var positionTop = offsetTop - originTop;\n                var origRect = offsetTracker.origRect;\n                var width = origRect.right - origRect.left;\n                var height = origRect.bottom - origRect.top;\n                if (\n                // must be within the element's bounds\n                positionLeft >= 0 && positionLeft < width &&\n                    positionTop >= 0 && positionTop < height) {\n                    var hit = component.queryHit(positionLeft, positionTop, width, height);\n                    if (hit &&\n                        (\n                        // make sure the hit is within activeRange, meaning it's not a deal cell\n                        !component.props.dateProfile || // hack for DayTile\n                            rangeContainsRange(component.props.dateProfile.activeRange, hit.dateSpan.range)) &&\n                        (!bestHit || hit.layer > bestHit.layer)) {\n                        // TODO: better way to re-orient rectangle\n                        hit.rect.left += originLeft;\n                        hit.rect.right += originLeft;\n                        hit.rect.top += originTop;\n                        hit.rect.bottom += originTop;\n                        bestHit = hit;\n                    }\n                }\n            }\n        }\n        return bestHit;\n    };\n    return HitDragging;\n}());\nfunction isHitsEqual(hit0, hit1) {\n    if (!hit0 && !hit1) {\n        return true;\n    }\n    if (Boolean(hit0) !== Boolean(hit1)) {\n        return false;\n    }\n    return isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n}\n\n/*\nMonitors when the user clicks on a specific date/time of a component.\nA pointerdown+pointerup on the same \"hit\" constitutes a click.\n*/\nvar DateClicking = /** @class */ (function (_super) {\n    __extends(DateClicking, _super);\n    function DateClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n            dragging.setIgnoreMove(!_this.component.isValidDateDownEl(dragging.pointer.downEl));\n        };\n        // won't even fire if moving was ignored\n        _this.handleDragEnd = function (ev) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var pointer = _this.dragging.pointer;\n            if (!pointer.wasTouchScroll) {\n                var _b = _this.hitDragging, initialHit = _b.initialHit, finalHit = _b.finalHit;\n                if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                    calendar.triggerDateClick(initialHit.dateSpan, initialHit.dayEl, view, ev.origEvent);\n                }\n            }\n        };\n        var component = settings.component;\n        // we DO want to watch pointer moves because otherwise finalHit won't get populated\n        _this.dragging = new FeaturefulElementDragging(component.el);\n        _this.dragging.autoScroller.isEnabled = false;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    DateClicking.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateClicking;\n}(Interaction));\n\n/*\nTracks when the user selects a portion of time of a component,\nconstituted by a drag over date cells, with a possible delay at the beginning of the drag.\n*/\nvar DateSelecting = /** @class */ (function (_super) {\n    __extends(DateSelecting, _super);\n    function DateSelecting(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.dragSelection = null;\n        _this.handlePointerDown = function (ev) {\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var options = component.context.options;\n            var canSelect = options.selectable &&\n                component.isValidDateDownEl(ev.origEvent.target);\n            // don't bother to watch expensive moves if component won't do selection\n            dragging.setIgnoreMove(!canSelect);\n            // if touch, require user to hold down\n            dragging.delay = ev.isTouch ? getComponentTouchDelay(component) : null;\n        };\n        _this.handleDragStart = function (ev) {\n            _this.component.context.calendar.unselect(ev); // unselect previous selections\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            var calendar = _this.component.context.calendar;\n            var dragSelection = null;\n            var isInvalid = false;\n            if (hit) {\n                dragSelection = joinHitsIntoSelection(_this.hitDragging.initialHit, hit, calendar.pluginSystem.hooks.dateSelectionTransformers);\n                if (!dragSelection || !_this.component.isDateSelectionValid(dragSelection)) {\n                    isInvalid = true;\n                    dragSelection = null;\n                }\n            }\n            if (dragSelection) {\n                calendar.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n            }\n            else if (!isFinal) { // only unselect if moved away while dragging\n                calendar.dispatch({ type: 'UNSELECT_DATES' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n            }\n        };\n        _this.handlePointerUp = function (pev) {\n            if (_this.dragSelection) {\n                // selection is already rendered, so just need to report selection\n                _this.component.context.calendar.triggerDateSelect(_this.dragSelection, pev);\n                _this.dragSelection = null;\n            }\n        };\n        var component = settings.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.touchScrollAllowed = false;\n        dragging.minDistance = options.selectMinDistance || 0;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    DateSelecting.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateSelecting;\n}(Interaction));\nfunction getComponentTouchDelay(component) {\n    var options = component.context.options;\n    var delay = options.selectLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\nfunction joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var ms = [\n        dateSpan0.range.start,\n        dateSpan0.range.end,\n        dateSpan1.range.start,\n        dateSpan1.range.end\n    ];\n    ms.sort(compareNumbers);\n    var props = {};\n    for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n        var transformer = dateSelectionTransformers_1[_i];\n        var res = transformer(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        else if (res) {\n            __assign(props, res);\n        }\n    }\n    props.range = { start: ms[0], end: ms[3] };\n    props.allDay = dateSpan0.allDay;\n    return props;\n}\n\nvar EventDragging = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.subjectSeg = null; // the seg being selected/dragged\n        _this.isDragging = false;\n        _this.eventRange = null;\n        _this.relevantEvents = null; // the events being dragged\n        _this.receivingCalendar = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var origTarget = ev.origEvent.target;\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var mirror = dragging.mirror;\n            var options = component.context.options;\n            var initialCalendar = component.context.calendar;\n            var subjectSeg = _this.subjectSeg = getElSeg(ev.subjectEl);\n            var eventRange = _this.eventRange = subjectSeg.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            _this.relevantEvents = getRelevantEvents(initialCalendar.state.eventStore, eventInstanceId);\n            dragging.minDistance = ev.isTouch ? 0 : options.eventDragMinDistance;\n            dragging.delay =\n                // only do a touch delay if touch and this event hasn't been selected yet\n                (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                    getComponentTouchDelay$1(component) :\n                    null;\n            mirror.parentNode = initialCalendar.el;\n            mirror.revertDuration = options.dragRevertDuration;\n            var isValid = component.isValidSegDownEl(origTarget) &&\n                !elementClosest(origTarget, '.fc-resizer'); // NOT on a resizer\n            dragging.setIgnoreMove(!isValid);\n            // disable dragging for elements that are resizable (ie, selectable)\n            // but are not draggable\n            _this.isDragging = isValid &&\n                ev.subjectEl.classList.contains('fc-draggable');\n        };\n        _this.handleDragStart = function (ev) {\n            var context = _this.component.context;\n            var initialCalendar = context.calendar;\n            var eventRange = _this.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            if (ev.isTouch) {\n                // need to select a different event?\n                if (eventInstanceId !== _this.component.props.eventSelection) {\n                    initialCalendar.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                }\n            }\n            else {\n                // if now using mouse, but was previous touch interaction, clear selected event\n                initialCalendar.dispatch({ type: 'UNSELECT_EVENT' });\n            }\n            if (_this.isDragging) {\n                initialCalendar.unselect(ev); // unselect *date* selection\n                initialCalendar.publiclyTrigger('eventDragStart', [\n                    {\n                        el: _this.subjectSeg.el,\n                        event: new EventApi(initialCalendar, eventRange.def, eventRange.instance),\n                        jsEvent: ev.origEvent,\n                        view: context.view\n                    }\n                ]);\n            }\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            if (!_this.isDragging) {\n                return;\n            }\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var initialCalendar = _this.component.context.calendar;\n            // states based on new hit\n            var receivingCalendar = null;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n                origSeg: _this.subjectSeg\n            };\n            if (hit) {\n                var receivingComponent = hit.component;\n                receivingCalendar = receivingComponent.context.calendar;\n                var receivingOptions = receivingComponent.context.options;\n                if (initialCalendar === receivingCalendar ||\n                    receivingOptions.editable && receivingOptions.droppable) {\n                    mutation = computeEventMutation(initialHit, hit, receivingCalendar.pluginSystem.hooks.eventDragMutationMassagers);\n                    if (mutation) {\n                        mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, receivingCalendar.eventUiBases, mutation, receivingCalendar);\n                        interaction.mutatedEvents = mutatedRelevantEvents;\n                        if (!receivingComponent.isInteractionValid(interaction)) {\n                            isInvalid = true;\n                            mutation = null;\n                            mutatedRelevantEvents = null;\n                            interaction.mutatedEvents = createEmptyEventStore();\n                        }\n                    }\n                }\n                else {\n                    receivingCalendar = null;\n                }\n            }\n            _this.displayDrag(receivingCalendar, interaction);\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (initialCalendar === receivingCalendar && // TODO: write test for this\n                    isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.dragging.setMirrorNeedsRevert(!mutation);\n                // render the mirror if no already-rendered mirror\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                _this.dragging.setMirrorIsVisible(!hit || !document.querySelector('.fc-mirror'));\n                // assign states based on new hit\n                _this.receivingCalendar = receivingCalendar;\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handlePointerUp = function () {\n            if (!_this.isDragging) {\n                _this.cleanup(); // because handleDragEnd won't fire\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            if (_this.isDragging) {\n                var context = _this.component.context;\n                var initialCalendar_1 = context.calendar;\n                var initialView = context.view;\n                var _a = _this, receivingCalendar = _a.receivingCalendar, validMutation = _a.validMutation;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new EventApi(initialCalendar_1, eventDef, eventInstance);\n                var relevantEvents_1 = _this.relevantEvents;\n                var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                var finalHit = _this.hitDragging.finalHit;\n                _this.clearDrag(); // must happen after revert animation\n                initialCalendar_1.publiclyTrigger('eventDragStop', [\n                    {\n                        el: _this.subjectSeg.el,\n                        event: eventApi,\n                        jsEvent: ev.origEvent,\n                        view: initialView\n                    }\n                ]);\n                if (validMutation) {\n                    // dropped within same calendar\n                    if (receivingCalendar === initialCalendar_1) {\n                        initialCalendar_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents\n                        });\n                        var transformed = {};\n                        for (var _i = 0, _b = initialCalendar_1.pluginSystem.hooks.eventDropTransformers; _i < _b.length; _i++) {\n                            var transformer = _b[_i];\n                            __assign(transformed, transformer(validMutation, initialCalendar_1));\n                        }\n                        var eventDropArg = __assign({}, transformed, { el: ev.subjectEl, delta: validMutation.datesDelta, oldEvent: eventApi, event: new EventApi(// the data AFTER the mutation\n                            initialCalendar_1, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null), revert: function () {\n                                initialCalendar_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1\n                                });\n                            }, jsEvent: ev.origEvent, view: initialView });\n                        initialCalendar_1.publiclyTrigger('eventDrop', [eventDropArg]);\n                        // dropped in different calendar\n                    }\n                    else if (receivingCalendar) {\n                        initialCalendar_1.publiclyTrigger('eventLeave', [\n                            {\n                                draggedEl: ev.subjectEl,\n                                event: eventApi,\n                                view: initialView\n                            }\n                        ]);\n                        initialCalendar_1.dispatch({\n                            type: 'REMOVE_EVENT_INSTANCES',\n                            instances: _this.mutatedRelevantEvents.instances\n                        });\n                        receivingCalendar.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: _this.mutatedRelevantEvents\n                        });\n                        if (ev.isTouch) {\n                            receivingCalendar.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: eventInstance.instanceId\n                            });\n                        }\n                        var dropArg = __assign({}, receivingCalendar.buildDatePointApi(finalHit.dateSpan), { draggedEl: ev.subjectEl, jsEvent: ev.origEvent, view: finalHit.component // should this be finalHit.component.view? See #4644\n                         });\n                        receivingCalendar.publiclyTrigger('drop', [dropArg]);\n                        receivingCalendar.publiclyTrigger('eventReceive', [\n                            {\n                                draggedEl: ev.subjectEl,\n                                event: new EventApi(// the data AFTER the mutation\n                                receivingCalendar, mutatedRelevantEvents.defs[eventDef.defId], mutatedRelevantEvents.instances[eventInstance.instanceId]),\n                                view: finalHit.component // should this be finalHit.component.view? See #4644\n                            }\n                        ]);\n                    }\n                }\n                else {\n                    initialCalendar_1.publiclyTrigger('_noEventDrop');\n                }\n            }\n            _this.cleanup();\n        };\n        var component = _this.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.pointer.selector = EventDragging.SELECTOR;\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsStore);\n        hitDragging.useSubjectCenter = settings.useEventCenter;\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    // render a drag state on the next receivingCalendar\n    EventDragging.prototype.displayDrag = function (nextCalendar, state) {\n        var initialCalendar = this.component.context.calendar;\n        var prevCalendar = this.receivingCalendar;\n        // does the previous calendar need to be cleared?\n        if (prevCalendar && prevCalendar !== nextCalendar) {\n            // does the initial calendar need to be cleared?\n            // if so, don't clear all the way. we still need to to hide the affectedEvents\n            if (prevCalendar === initialCalendar) {\n                prevCalendar.dispatch({\n                    type: 'SET_EVENT_DRAG',\n                    state: {\n                        affectedEvents: state.affectedEvents,\n                        mutatedEvents: createEmptyEventStore(),\n                        isEvent: true,\n                        origSeg: state.origSeg\n                    }\n                });\n                // completely clear the old calendar if it wasn't the initial\n            }\n            else {\n                prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        }\n        if (nextCalendar) {\n            nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    EventDragging.prototype.clearDrag = function () {\n        var initialCalendar = this.component.context.calendar;\n        var receivingCalendar = this.receivingCalendar;\n        if (receivingCalendar) {\n            receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        // the initial calendar might have an dummy drag state from displayDrag\n        if (initialCalendar !== receivingCalendar) {\n            initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    EventDragging.prototype.cleanup = function () {\n        this.subjectSeg = null;\n        this.isDragging = false;\n        this.eventRange = null;\n        this.relevantEvents = null;\n        this.receivingCalendar = null;\n        this.validMutation = null;\n        this.mutatedRelevantEvents = null;\n    };\n    EventDragging.SELECTOR = '.fc-draggable, .fc-resizable'; // TODO: test this in IE11\n    return EventDragging;\n}(Interaction));\nfunction computeEventMutation(hit0, hit1, massagers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var date0 = dateSpan0.range.start;\n    var date1 = dateSpan1.range.start;\n    var standardProps = {};\n    if (dateSpan0.allDay !== dateSpan1.allDay) {\n        standardProps.allDay = dateSpan1.allDay;\n        standardProps.hasEnd = hit1.component.context.options.allDayMaintainDuration;\n        if (dateSpan1.allDay) {\n            // means date1 is already start-of-day,\n            // but date0 needs to be converted\n            date0 = startOfDay(date0);\n        }\n    }\n    var delta = diffDates(date0, date1, hit0.component.context.dateEnv, hit0.component === hit1.component ?\n        hit0.component.largeUnit :\n        null);\n    if (delta.milliseconds) { // has hours/minutes/seconds\n        standardProps.allDay = false;\n    }\n    var mutation = {\n        datesDelta: delta,\n        standardProps: standardProps\n    };\n    for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n        var massager = massagers_1[_i];\n        massager(mutation, hit0, hit1);\n    }\n    return mutation;\n}\nfunction getComponentTouchDelay$1(component) {\n    var options = component.context.options;\n    var delay = options.eventLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\n\nvar EventDragging$1 = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n        _this.eventRange = null;\n        _this.relevantEvents = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var component = _this.component;\n            var seg = _this.querySeg(ev);\n            var eventRange = _this.eventRange = seg.eventRange;\n            _this.dragging.minDistance = component.context.options.eventDragMinDistance;\n            // if touch, need to be working with a selected event\n            _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n        };\n        _this.handleDragStart = function (ev) {\n            var _a = _this.component.context, calendar = _a.calendar, view = _a.view;\n            var eventRange = _this.eventRange;\n            _this.relevantEvents = getRelevantEvents(calendar.state.eventStore, _this.eventRange.instance.instanceId);\n            _this.draggingSeg = _this.querySeg(ev);\n            calendar.unselect();\n            calendar.publiclyTrigger('eventResizeStart', [\n                {\n                    el: _this.draggingSeg.el,\n                    event: new EventApi(calendar, eventRange.def, eventRange.instance),\n                    jsEvent: ev.origEvent,\n                    view: view\n                }\n            ]);\n        };\n        _this.handleHitUpdate = function (hit, isFinal, ev) {\n            var calendar = _this.component.context.calendar;\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var eventInstance = _this.eventRange.instance;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n                origSeg: _this.draggingSeg\n            };\n            if (hit) {\n                mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-start-resizer'), eventInstance.range, calendar.pluginSystem.hooks.eventResizeJoinTransforms);\n            }\n            if (mutation) {\n                mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, calendar.eventUiBases, mutation, calendar);\n                interaction.mutatedEvents = mutatedRelevantEvents;\n                if (!_this.component.isInteractionValid(interaction)) {\n                    isInvalid = true;\n                    mutation = null;\n                    mutatedRelevantEvents = null;\n                    interaction.mutatedEvents = null;\n                }\n            }\n            if (mutatedRelevantEvents) {\n                calendar.dispatch({\n                    type: 'SET_EVENT_RESIZE',\n                    state: interaction\n                });\n            }\n            else {\n                calendar.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (mutation && isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            var _a = _this.component.context, calendar = _a.calendar, view = _a.view;\n            var eventDef = _this.eventRange.def;\n            var eventInstance = _this.eventRange.instance;\n            var eventApi = new EventApi(calendar, eventDef, eventInstance);\n            var relevantEvents = _this.relevantEvents;\n            var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n            calendar.publiclyTrigger('eventResizeStop', [\n                {\n                    el: _this.draggingSeg.el,\n                    event: eventApi,\n                    jsEvent: ev.origEvent,\n                    view: view\n                }\n            ]);\n            if (_this.validMutation) {\n                calendar.dispatch({\n                    type: 'MERGE_EVENTS',\n                    eventStore: mutatedRelevantEvents\n                });\n                calendar.publiclyTrigger('eventResize', [\n                    {\n                        el: _this.draggingSeg.el,\n                        startDelta: _this.validMutation.startDelta || createDuration(0),\n                        endDelta: _this.validMutation.endDelta || createDuration(0),\n                        prevEvent: eventApi,\n                        event: new EventApi(// the data AFTER the mutation\n                        calendar, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                        revert: function () {\n                            calendar.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: relevantEvents\n                            });\n                        },\n                        jsEvent: ev.origEvent,\n                        view: view\n                    }\n                ]);\n            }\n            else {\n                calendar.publiclyTrigger('_noEventResize');\n            }\n            // reset all internal state\n            _this.draggingSeg = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            // okay to keep eventInstance around. useful to set it in handlePointerDown\n        };\n        var component = settings.component;\n        var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n        dragging.pointer.selector = '.fc-resizer';\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = component.context.options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    EventDragging.prototype.querySeg = function (ev) {\n        return getElSeg(elementClosest(ev.subjectEl, this.component.fgSegSelector));\n    };\n    return EventDragging;\n}(Interaction));\nfunction computeMutation(hit0, hit1, isFromStart, instanceRange, transforms) {\n    var dateEnv = hit0.component.context.dateEnv;\n    var date0 = hit0.dateSpan.range.start;\n    var date1 = hit1.dateSpan.range.start;\n    var delta = diffDates(date0, date1, dateEnv, hit0.component.largeUnit);\n    var props = {};\n    for (var _i = 0, transforms_1 = transforms; _i < transforms_1.length; _i++) {\n        var transform = transforms_1[_i];\n        var res = transform(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        else if (res) {\n            __assign(props, res);\n        }\n    }\n    if (isFromStart) {\n        if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n            props.startDelta = delta;\n            return props;\n        }\n    }\n    else {\n        if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n            props.endDelta = delta;\n            return props;\n        }\n    }\n    return null;\n}\n\nvar UnselectAuto = /** @class */ (function () {\n    function UnselectAuto(calendar) {\n        var _this = this;\n        this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n        this.onSelect = function (selectInfo) {\n            if (selectInfo.jsEvent) {\n                _this.isRecentPointerDateSelect = true;\n            }\n        };\n        this.onDocumentPointerUp = function (pev) {\n            var _a = _this, calendar = _a.calendar, documentPointer = _a.documentPointer;\n            var state = calendar.state;\n            // touch-scrolling should never unfocus any type of selection\n            if (!documentPointer.wasTouchScroll) {\n                if (state.dateSelection && // an existing date selection?\n                    !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                ) {\n                    var unselectAuto = calendar.viewOpt('unselectAuto');\n                    var unselectCancel = calendar.viewOpt('unselectCancel');\n                    if (unselectAuto && (!unselectAuto || !elementClosest(documentPointer.downEl, unselectCancel))) {\n                        calendar.unselect(pev);\n                    }\n                }\n                if (state.eventSelection && // an existing event selected?\n                    !elementClosest(documentPointer.downEl, EventDragging.SELECTOR) // interaction DIDN'T start on an event\n                ) {\n                    calendar.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n            }\n            _this.isRecentPointerDateSelect = false;\n        };\n        this.calendar = calendar;\n        var documentPointer = this.documentPointer = new PointerDragging(document);\n        documentPointer.shouldIgnoreMove = true;\n        documentPointer.shouldWatchScroll = false;\n        documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n        /*\n        TODO: better way to know about whether there was a selection with the pointer\n        */\n        calendar.on('select', this.onSelect);\n    }\n    UnselectAuto.prototype.destroy = function () {\n        this.calendar.off('select', this.onSelect);\n        this.documentPointer.destroy();\n    };\n    return UnselectAuto;\n}());\n\n/*\nGiven an already instantiated draggable object for one-or-more elements,\nInterprets any dragging as an attempt to drag an events that lives outside\nof a calendar onto a calendar.\n*/\nvar ExternalElementDragging = /** @class */ (function () {\n    function ExternalElementDragging(dragging, suppliedDragMeta) {\n        var _this = this;\n        this.receivingCalendar = null;\n        this.droppableEvent = null; // will exist for all drags, even if create:false\n        this.suppliedDragMeta = null;\n        this.dragMeta = null;\n        this.handleDragStart = function (ev) {\n            _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n        };\n        this.handleHitUpdate = function (hit, isFinal, ev) {\n            var dragging = _this.hitDragging.dragging;\n            var receivingCalendar = null;\n            var droppableEvent = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: createEmptyEventStore(),\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: _this.dragMeta.create,\n                origSeg: null\n            };\n            if (hit) {\n                receivingCalendar = hit.component.context.calendar;\n                if (_this.canDropElOnCalendar(ev.subjectEl, receivingCalendar)) {\n                    droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingCalendar);\n                    interaction.mutatedEvents = eventTupleToStore(droppableEvent);\n                    isInvalid = !isInteractionValid(interaction, receivingCalendar);\n                    if (isInvalid) {\n                        interaction.mutatedEvents = createEmptyEventStore();\n                        droppableEvent = null;\n                    }\n                }\n            }\n            _this.displayDrag(receivingCalendar, interaction);\n            // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n            // TODO: wish we could somehow wait for dispatch to guarantee render\n            dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-mirror'));\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                dragging.setMirrorNeedsRevert(!droppableEvent);\n                _this.receivingCalendar = receivingCalendar;\n                _this.droppableEvent = droppableEvent;\n            }\n        };\n        this.handleDragEnd = function (pev) {\n            var _a = _this, receivingCalendar = _a.receivingCalendar, droppableEvent = _a.droppableEvent;\n            _this.clearDrag();\n            if (receivingCalendar && droppableEvent) {\n                var finalHit = _this.hitDragging.finalHit;\n                var finalView = finalHit.component.context.view;\n                var dragMeta = _this.dragMeta;\n                var arg = __assign({}, receivingCalendar.buildDatePointApi(finalHit.dateSpan), { draggedEl: pev.subjectEl, jsEvent: pev.origEvent, view: finalView });\n                receivingCalendar.publiclyTrigger('drop', [arg]);\n                if (dragMeta.create) {\n                    receivingCalendar.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: eventTupleToStore(droppableEvent)\n                    });\n                    if (pev.isTouch) {\n                        receivingCalendar.dispatch({\n                            type: 'SELECT_EVENT',\n                            eventInstanceId: droppableEvent.instance.instanceId\n                        });\n                    }\n                    // signal that an external event landed\n                    receivingCalendar.publiclyTrigger('eventReceive', [\n                        {\n                            draggedEl: pev.subjectEl,\n                            event: new EventApi(receivingCalendar, droppableEvent.def, droppableEvent.instance),\n                            view: finalView\n                        }\n                    ]);\n                }\n            }\n            _this.receivingCalendar = null;\n            _this.droppableEvent = null;\n        };\n        var hitDragging = this.hitDragging = new HitDragging(dragging, interactionSettingsStore);\n        hitDragging.requireInitial = false; // will start outside of a component\n        hitDragging.emitter.on('dragstart', this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', this.handleDragEnd);\n        this.suppliedDragMeta = suppliedDragMeta;\n    }\n    ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n        if (typeof this.suppliedDragMeta === 'object') {\n            return parseDragMeta(this.suppliedDragMeta);\n        }\n        else if (typeof this.suppliedDragMeta === 'function') {\n            return parseDragMeta(this.suppliedDragMeta(subjectEl));\n        }\n        else {\n            return getDragMetaFromEl(subjectEl);\n        }\n    };\n    ExternalElementDragging.prototype.displayDrag = function (nextCalendar, state) {\n        var prevCalendar = this.receivingCalendar;\n        if (prevCalendar && prevCalendar !== nextCalendar) {\n            prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        if (nextCalendar) {\n            nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    ExternalElementDragging.prototype.clearDrag = function () {\n        if (this.receivingCalendar) {\n            this.receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingCalendar) {\n        var dropAccept = receivingCalendar.opt('dropAccept');\n        if (typeof dropAccept === 'function') {\n            return dropAccept(el);\n        }\n        else if (typeof dropAccept === 'string' && dropAccept) {\n            return Boolean(elementMatches(el, dropAccept));\n        }\n        return true;\n    };\n    return ExternalElementDragging;\n}());\n// Utils for computing event store from the DragMeta\n// ----------------------------------------------------------------------------------------------------\nfunction computeEventForDateSpan(dateSpan, dragMeta, calendar) {\n    var defProps = __assign({}, dragMeta.leftoverProps);\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.externalDefTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(defProps, transform(dateSpan, dragMeta));\n    }\n    var def = parseEventDef(defProps, dragMeta.sourceId, dateSpan.allDay, calendar.opt('forceEventDuration') || Boolean(dragMeta.duration), // hasEnd\n    calendar);\n    var start = dateSpan.range.start;\n    // only rely on time info if drop zone is all-day,\n    // otherwise, we already know the time\n    if (dateSpan.allDay && dragMeta.startTime) {\n        start = calendar.dateEnv.add(start, dragMeta.startTime);\n    }\n    var end = dragMeta.duration ?\n        calendar.dateEnv.add(start, dragMeta.duration) :\n        calendar.getDefaultEventEnd(dateSpan.allDay, start);\n    var instance = createEventInstance(def.defId, { start: start, end: end });\n    return { def: def, instance: instance };\n}\n// Utils for extracting data from element\n// ----------------------------------------------------------------------------------------------------\nfunction getDragMetaFromEl(el) {\n    var str = getEmbeddedElData(el, 'event');\n    var obj = str ?\n        JSON.parse(str) :\n        { create: false }; // if no embedded data, assume no event creation\n    return parseDragMeta(obj);\n}\nconfig.dataAttrPrefix = '';\nfunction getEmbeddedElData(el, name) {\n    var prefix = config.dataAttrPrefix;\n    var prefixedName = (prefix ? prefix + '-' : '') + name;\n    return el.getAttribute('data-' + prefixedName) || '';\n}\n\n/*\nMakes an element (that is *external* to any calendar) draggable.\nCan pass in data that determines how an event will be created when dropped onto a calendar.\nLeverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n*/\nvar ExternalDraggable = /** @class */ (function () {\n    function ExternalDraggable(el, settings) {\n        var _this = this;\n        if (settings === void 0) { settings = {}; }\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n            dragging.minDistance =\n                minDistance != null ?\n                    minDistance :\n                    (ev.isTouch ? 0 : globalDefaults.eventDragMinDistance);\n            dragging.delay =\n                ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                    (longPressDelay != null ? longPressDelay : globalDefaults.longPressDelay) :\n                    0;\n        };\n        this.handleDragStart = function (ev) {\n            if (ev.isTouch &&\n                _this.dragging.delay &&\n                ev.subjectEl.classList.contains('fc-event')) {\n                _this.dragging.mirror.getMirrorEl().classList.add('fc-selected');\n            }\n        };\n        this.settings = settings;\n        var dragging = this.dragging = new FeaturefulElementDragging(el);\n        dragging.touchScrollAllowed = false;\n        if (settings.itemSelector != null) {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        if (settings.appendTo != null) {\n            dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n        }\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        new ExternalElementDragging(dragging, settings.eventData);\n    }\n    ExternalDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ExternalDraggable;\n}());\n\n/*\nDetects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\nThe third-party system is responsible for drawing the visuals effects of the drag.\nThis class simply monitors for pointer movements and fires events.\nIt also has the ability to hide the moving element (the \"mirror\") during the drag.\n*/\nvar InferredElementDragging = /** @class */ (function (_super) {\n    __extends(InferredElementDragging, _super);\n    function InferredElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.shouldIgnoreMove = false;\n        _this.mirrorSelector = '';\n        _this.currentMirrorEl = null;\n        _this.handlePointerDown = function (ev) {\n            _this.emitter.trigger('pointerdown', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragstart right away. does not support delay or min-distance\n                _this.emitter.trigger('dragstart', ev);\n            }\n        };\n        _this.handlePointerMove = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                _this.emitter.trigger('dragmove', ev);\n            }\n        };\n        _this.handlePointerUp = function (ev) {\n            _this.emitter.trigger('pointerup', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragend right away. does not support a revert animation\n                _this.emitter.trigger('dragend', ev);\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.handlePointerDown);\n        pointer.emitter.on('pointermove', _this.handlePointerMove);\n        pointer.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    InferredElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.shouldIgnoreMove = bool;\n    };\n    InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        if (bool) {\n            // restore a previously hidden element.\n            // use the reference in case the selector class has already been removed.\n            if (this.currentMirrorEl) {\n                this.currentMirrorEl.style.visibility = '';\n                this.currentMirrorEl = null;\n            }\n        }\n        else {\n            var mirrorEl = this.mirrorSelector ?\n                document.querySelector(this.mirrorSelector) :\n                null;\n            if (mirrorEl) {\n                this.currentMirrorEl = mirrorEl;\n                mirrorEl.style.visibility = 'hidden';\n            }\n        }\n    };\n    return InferredElementDragging;\n}(ElementDragging));\n\n/*\nBridges third-party drag-n-drop systems with FullCalendar.\nMust be instantiated and destroyed by caller.\n*/\nvar ThirdPartyDraggable = /** @class */ (function () {\n    function ThirdPartyDraggable(containerOrSettings, settings) {\n        var containerEl = document;\n        if (\n        // wish we could just test instanceof EventTarget, but doesn't work in IE11\n        containerOrSettings === document ||\n            containerOrSettings instanceof Element) {\n            containerEl = containerOrSettings;\n            settings = settings || {};\n        }\n        else {\n            settings = (containerOrSettings || {});\n        }\n        var dragging = this.dragging = new InferredElementDragging(containerEl);\n        if (typeof settings.itemSelector === 'string') {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        else if (containerEl === document) {\n            dragging.pointer.selector = '[data-event]';\n        }\n        if (typeof settings.mirrorSelector === 'string') {\n            dragging.mirrorSelector = settings.mirrorSelector;\n        }\n        new ExternalElementDragging(dragging, settings.eventData);\n    }\n    ThirdPartyDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ThirdPartyDraggable;\n}());\n\nvar main = createPlugin({\n    componentInteractions: [DateClicking, DateSelecting, EventDragging, EventDragging$1],\n    calendarInteractions: [UnselectAuto],\n    elementDraggingImpl: FeaturefulElementDragging\n});\n\nexport default main;\nexport { ExternalDraggable as Draggable, FeaturefulElementDragging, PointerDragging, ThirdPartyDraggable };\n","/*!\nFullCalendar Resource Timeline Plugin v4.4.2\nDocs & License: https://fullcalendar.io/scheduler\n(c) 2019 Adam Shaw\n*/\n\nimport { removeElement, Component, memoizeRendering, createElement, htmlToElement, htmlEscape, isArraysEqual, EmitterMixin, memoize, parseFieldSpecs, PositionCache, applyStyleProp, View, createPlugin } from '@fullcalendar/core';\nimport TimelinePlugin, { TimelineLane, HeaderBodyLayout, TimeAxis, ScrollJoiner, StickyScroller } from '@fullcalendar/timeline';\nimport ResourceCommonPlugin, { isGroupsEqual, buildResourceFields, buildResourceTextFunc, ResourceApi, ResourceSplitter, buildRowNodes } from '@fullcalendar/resource-common';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar Row = /** @class */ (function (_super) {\n    __extends(Row, _super);\n    function Row(spreadsheetParent, spreadsheetNextSibling, timeAxisParent, timeAxisNextSibling) {\n        var _this = _super.call(this) || this;\n        _this.isSizeDirty = false;\n        spreadsheetParent.insertBefore(_this.spreadsheetTr = document.createElement('tr'), spreadsheetNextSibling);\n        timeAxisParent.insertBefore(_this.timeAxisTr = document.createElement('tr'), timeAxisNextSibling);\n        return _this;\n    }\n    Row.prototype.destroy = function () {\n        removeElement(this.spreadsheetTr);\n        removeElement(this.timeAxisTr);\n        _super.prototype.destroy.call(this);\n    };\n    Row.prototype.updateSize = function (isResize) {\n        this.isSizeDirty = false;\n    };\n    return Row;\n}(Component));\n\nfunction updateExpanderIcon(el, isExpanded) {\n    var classList = el.classList;\n    if (isExpanded) {\n        classList.remove('fc-icon-plus-square');\n        classList.add('fc-icon-minus-square');\n    }\n    else {\n        classList.remove('fc-icon-minus-square');\n        classList.add('fc-icon-plus-square');\n    }\n}\nfunction clearExpanderIcon(el) {\n    var classList = el.classList;\n    classList.remove('fc-icon-minus-square');\n    classList.remove('fc-icon-plus-square');\n}\nfunction updateTrResourceId(tr, resourceId) {\n    tr.setAttribute('data-resource-id', resourceId);\n}\n\nvar GroupRow = /** @class */ (function (_super) {\n    __extends(GroupRow, _super);\n    function GroupRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._renderCells = memoizeRendering(_this.renderCells, _this.unrenderCells);\n        _this._updateExpanderIcon = memoizeRendering(_this.updateExpanderIcon, null, [_this._renderCells]);\n        _this.onExpanderClick = function (ev) {\n            var props = _this.props;\n            _this.context.calendar.dispatch({\n                type: 'SET_RESOURCE_ENTITY_EXPANDED',\n                id: props.id,\n                isExpanded: !props.isExpanded\n            });\n        };\n        return _this;\n    }\n    GroupRow.prototype.render = function (props) {\n        this._renderCells(props.group, props.spreadsheetColCnt);\n        this._updateExpanderIcon(props.isExpanded);\n        this.isSizeDirty = true;\n    };\n    GroupRow.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderCells.unrender(); // should unrender everything else\n    };\n    GroupRow.prototype.renderCells = function (group, spreadsheetColCnt) {\n        var spreadsheetContentEl = this.renderSpreadsheetContent(group);\n        this.spreadsheetTr.appendChild(createElement('td', {\n            className: 'fc-divider',\n            colSpan: spreadsheetColCnt // span across all columns\n        }, this.spreadsheetHeightEl = createElement('div', null, spreadsheetContentEl)) // needed by setTrInnerHeight\n        );\n        this.expanderIconEl = spreadsheetContentEl.querySelector('.fc-icon');\n        this.expanderIconEl.parentElement.addEventListener('click', this.onExpanderClick);\n        // insert a single cell, with a single empty <div>.\n        // there will be no content\n        this.timeAxisTr.appendChild(createElement('td', { className: 'fc-divider' }, this.timeAxisHeightEl = document.createElement('div')));\n    };\n    GroupRow.prototype.unrenderCells = function () {\n        this.spreadsheetTr.innerHTML = '';\n        this.timeAxisTr.innerHTML = '';\n    };\n    /*\n    Renders the content wrapper element that will be inserted into this row's TD cell.\n    */\n    GroupRow.prototype.renderSpreadsheetContent = function (group) {\n        var text = this.renderCellText(group);\n        var contentEl = htmlToElement('<div class=\"fc-cell-content\">' +\n            '<span class=\"fc-expander\">' +\n            '<span class=\"fc-icon\"></span>' +\n            '</span>' +\n            '<span class=\"fc-cell-text\">' +\n            (text ? htmlEscape(text) : '&nbsp;') +\n            '</span>' +\n            '</div>');\n        var filter = group.spec.render;\n        if (typeof filter === 'function') {\n            contentEl = filter(contentEl, group.value) || contentEl;\n        }\n        return contentEl;\n    };\n    GroupRow.prototype.renderCellText = function (group) {\n        var text = group.value || ''; // might be null/undefined if an ad-hoc grouping\n        var filter = group.spec.text;\n        if (typeof filter === 'function') {\n            text = filter(text) || text;\n        }\n        return text;\n    };\n    GroupRow.prototype.getHeightEls = function () {\n        return [this.spreadsheetHeightEl, this.timeAxisHeightEl];\n    };\n    GroupRow.prototype.updateExpanderIcon = function (isExpanded) {\n        updateExpanderIcon(this.expanderIconEl, isExpanded);\n    };\n    return GroupRow;\n}(Row));\nGroupRow.addEqualityFuncs({\n    group: isGroupsEqual // HACK for ResourceTimelineView::renderRows\n});\n\nvar SpreadsheetRow = /** @class */ (function (_super) {\n    __extends(SpreadsheetRow, _super);\n    function SpreadsheetRow(tr) {\n        var _this = _super.call(this) || this;\n        _this._renderRow = memoizeRendering(_this.renderRow, _this.unrenderRow);\n        _this._updateTrResourceId = memoizeRendering(updateTrResourceId, null, [_this._renderRow]);\n        _this._updateExpanderIcon = memoizeRendering(_this.updateExpanderIcon, null, [_this._renderRow]);\n        _this.onExpanderClick = function (ev) {\n            var props = _this.props;\n            _this.context.calendar.dispatch({\n                type: 'SET_RESOURCE_ENTITY_EXPANDED',\n                id: props.id,\n                isExpanded: !props.isExpanded\n            });\n        };\n        _this.tr = tr;\n        return _this;\n    }\n    SpreadsheetRow.prototype.render = function (props) {\n        this._renderRow(props.resource, props.rowSpans, props.depth, props.colSpecs);\n        this._updateTrResourceId(this.tr, props.resource.id); // TODO: only use public ID?\n        this._updateExpanderIcon(props.hasChildren, props.isExpanded);\n    };\n    SpreadsheetRow.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderRow.unrender(); // should unrender everything else\n    };\n    SpreadsheetRow.prototype.renderRow = function (resource, rowSpans, depth, colSpecs) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme;\n        var tr = this.tr;\n        var resourceFields = buildResourceFields(resource); // slightly inefficient. already done up the call stack\n        var mainTd;\n        for (var i = 0; i < colSpecs.length; i++) {\n            var colSpec = colSpecs[i];\n            var rowSpan = rowSpans[i];\n            if (rowSpan === 0) { // not responsible for group-based rows. VRowGroup is\n                continue;\n            }\n            else if (rowSpan == null) {\n                rowSpan = 1;\n            }\n            var text = void 0;\n            if (colSpec.field) {\n                text = resourceFields[colSpec.field];\n            }\n            else {\n                text = buildResourceTextFunc(colSpec.text, calendar)(resource);\n            }\n            var contentEl = htmlToElement('<div class=\"fc-cell-content\">' +\n                (colSpec.isMain ? renderIconHtml(depth) : '') +\n                '<span class=\"fc-cell-text\">' +\n                (text ? htmlEscape(text) : '&nbsp;') +\n                '</span>' +\n                '</div>');\n            if (typeof colSpec.render === 'function') { // a filter function for the element\n                contentEl = colSpec.render(new ResourceApi(calendar, resource), contentEl) || contentEl;\n            }\n            if (rowSpan > 1) {\n                contentEl.classList.add('fc-sticky');\n            }\n            var td = createElement('td', {\n                className: theme.getClass('widgetContent'),\n                rowspan: rowSpan\n            }, contentEl);\n            // the first cell of the row needs to have an inner div for setTrInnerHeight\n            if (colSpec.isMain) {\n                td.appendChild(this.heightEl = createElement('div', null, td.childNodes) // inner wrap\n                );\n                mainTd = td;\n            }\n            tr.appendChild(td);\n        }\n        this.expanderIconEl = tr.querySelector('.fc-expander-space .fc-icon');\n        // wait until very end\n        calendar.publiclyTrigger('resourceRender', [\n            {\n                resource: new ResourceApi(calendar, resource),\n                el: mainTd,\n                view: view\n            }\n        ]);\n    };\n    SpreadsheetRow.prototype.unrenderRow = function () {\n        this.tr.innerHTML = '';\n    };\n    SpreadsheetRow.prototype.updateExpanderIcon = function (hasChildren, isExpanded) {\n        var expanderIconEl = this.expanderIconEl;\n        var expanderEl = expanderIconEl.parentElement;\n        if (expanderIconEl &&\n            expanderEl // why would this be null?? was the case in IE11\n        ) {\n            if (hasChildren) {\n                expanderEl.addEventListener('click', this.onExpanderClick);\n                expanderEl.classList.add('fc-expander');\n                updateExpanderIcon(expanderIconEl, isExpanded);\n            }\n            else {\n                expanderEl.removeEventListener('click', this.onExpanderClick);\n                expanderEl.classList.remove('fc-expander');\n                clearExpanderIcon(expanderIconEl);\n            }\n        }\n    };\n    return SpreadsheetRow;\n}(Component));\n/*\nRenders the HTML responsible for the subrow expander area,\nas well as the space before it (used to align expanders of similar depths)\n*/\nfunction renderIconHtml(depth) {\n    var html = '';\n    for (var i = 0; i < depth; i++) {\n        html += '<span class=\"fc-icon\"></span>';\n    }\n    html +=\n        '<span class=\"fc-expander-space\">' +\n            '<span class=\"fc-icon\"></span>' +\n            '</span>';\n    return html;\n}\n\nvar ResourceRow = /** @class */ (function (_super) {\n    __extends(ResourceRow, _super);\n    function ResourceRow(a, b, c, d, timeAxis) {\n        var _this = _super.call(this, a, b, c, d) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.updateTrResourceId = memoizeRendering(updateTrResourceId);\n        _this.timeAxis = timeAxis;\n        return _this;\n    }\n    ResourceRow.prototype.render = function (props, context) {\n        this.renderSkeleton(context);\n        // spreadsheetRow handles calling updateTrResourceId for spreadsheetTr\n        this.spreadsheetRow.receiveProps({\n            colSpecs: props.colSpecs,\n            id: props.id,\n            rowSpans: props.rowSpans,\n            depth: props.depth,\n            isExpanded: props.isExpanded,\n            hasChildren: props.hasChildren,\n            resource: props.resource\n        }, context);\n        this.updateTrResourceId(this.timeAxisTr, props.resource.id);\n        this.lane.receiveProps({\n            dateProfile: props.dateProfile,\n            nextDayThreshold: props.nextDayThreshold,\n            businessHours: props.businessHours,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize\n        }, context);\n        this.isSizeDirty = true;\n    };\n    ResourceRow.prototype.destroy = function () {\n        this.renderSkeleton.unrender();\n        _super.prototype.destroy.call(this);\n    };\n    ResourceRow.prototype._renderSkeleton = function (context) {\n        this.timeAxisTr.appendChild(this.cellEl = createElement('td', { className: context.theme.getClass('widgetContent') }, this.innerContainerEl = document.createElement('div')));\n        this.spreadsheetRow = new SpreadsheetRow(this.spreadsheetTr);\n        this.lane = new TimelineLane(this.innerContainerEl, this.innerContainerEl, this.timeAxis);\n    };\n    ResourceRow.prototype._unrenderSkeleton = function () {\n        this.spreadsheetRow.destroy();\n        this.lane.destroy();\n        removeElement(this.cellEl);\n    };\n    ResourceRow.prototype.updateSize = function (isResize) {\n        _super.prototype.updateSize.call(this, isResize);\n        this.lane.updateSize(isResize);\n    };\n    ResourceRow.prototype.getHeightEls = function () {\n        return [this.spreadsheetRow.heightEl, this.innerContainerEl];\n    };\n    return ResourceRow;\n}(Row));\nResourceRow.addEqualityFuncs({\n    rowSpans: isArraysEqual // HACK for isSizeDirty, ResourceTimelineView::renderRows\n});\n\nvar COL_MIN_WIDTH = 30;\nvar SpreadsheetHeader = /** @class */ (function (_super) {\n    __extends(SpreadsheetHeader, _super);\n    function SpreadsheetHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.resizables = [];\n        _this.colWidths = [];\n        _this.emitter = new EmitterMixin();\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    SpreadsheetHeader.prototype.render = function (props, context) {\n        this.renderSkeleton(context);\n        var theme = context.theme;\n        var colSpecs = props.colSpecs;\n        var html = '<colgroup>' + props.colTags + '</colgroup>' +\n            '<tbody>';\n        if (props.superHeaderText) {\n            html +=\n                '<tr class=\"fc-super\">' +\n                    '<th class=\"' + theme.getClass('widgetHeader') + '\" colspan=\"' + colSpecs.length + '\">' +\n                    '<div class=\"fc-cell-content\">' +\n                    '<span class=\"fc-cell-text\">' +\n                    htmlEscape(props.superHeaderText) +\n                    '</span>' +\n                    '</div>' +\n                    '</th>' +\n                    '</tr>';\n        }\n        html += '<tr>';\n        for (var i = 0; i < colSpecs.length; i++) {\n            var o = colSpecs[i];\n            var isLast = i === (colSpecs.length - 1);\n            html +=\n                \"<th class=\\\"\" + theme.getClass('widgetHeader') + \"\\\">\" +\n                    '<div>' +\n                    '<div class=\"fc-cell-content\">' +\n                    (o.isMain ?\n                        '<span class=\"fc-expander-space\">' +\n                            '<span class=\"fc-icon\"></span>' +\n                            '</span>' :\n                        '') +\n                    '<span class=\"fc-cell-text\">' +\n                    htmlEscape(o.labelText || '') + // what about normalizing this value ahead of time?\n                    '</span>' +\n                    '</div>' +\n                    (!isLast ? '<div class=\"fc-col-resizer\"></div>' : '') +\n                    '</div>' +\n                    '</th>';\n        }\n        html += '</tr>';\n        html += '</tbody>';\n        this.tableEl.innerHTML = html;\n        this.thEls = Array.prototype.slice.call(this.tableEl.querySelectorAll('th'));\n        this.colEls = Array.prototype.slice.call(this.tableEl.querySelectorAll('col'));\n        this.resizerEls = Array.prototype.slice.call(this.tableEl.querySelectorAll('.fc-col-resizer'));\n        this.initColResizing();\n    };\n    SpreadsheetHeader.prototype.destroy = function () {\n        for (var _i = 0, _a = this.resizables; _i < _a.length; _i++) {\n            var resizable = _a[_i];\n            resizable.destroy();\n        }\n        this.renderSkeleton.unrender();\n        _super.prototype.destroy.call(this);\n    };\n    SpreadsheetHeader.prototype._renderSkeleton = function (context) {\n        this.parentEl.appendChild(this.tableEl = createElement('table', {\n            className: context.theme.getClass('tableGrid')\n        }));\n    };\n    SpreadsheetHeader.prototype._unrenderSkeleton = function () {\n        removeElement(this.tableEl);\n    };\n    SpreadsheetHeader.prototype.initColResizing = function () {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, isRtl = _a.isRtl;\n        var ElementDraggingImpl = calendar.pluginSystem.hooks.elementDraggingImpl;\n        if (ElementDraggingImpl) {\n            this.resizables = this.resizerEls.map(function (handleEl, colIndex) {\n                var dragging = new ElementDraggingImpl(handleEl);\n                var startWidth;\n                dragging.emitter.on('dragstart', function () {\n                    startWidth = _this.colWidths[colIndex];\n                    if (typeof startWidth !== 'number') {\n                        startWidth = _this.thEls[colIndex].getBoundingClientRect().width;\n                    }\n                });\n                dragging.emitter.on('dragmove', function (pev) {\n                    _this.colWidths[colIndex] = Math.max(startWidth + pev.deltaX * (isRtl ? -1 : 1), COL_MIN_WIDTH);\n                    _this.emitter.trigger('colwidthchange', _this.colWidths);\n                });\n                dragging.setAutoScrollEnabled(false); // because gets weird with auto-scrolling time area\n                return dragging;\n            });\n        }\n    };\n    return SpreadsheetHeader;\n}(Component));\n\nvar Spreadsheet = /** @class */ (function (_super) {\n    __extends(Spreadsheet, _super);\n    function Spreadsheet(headParentEl, bodyParentEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells, [_this.renderSkeleton]);\n        _this.layout = new HeaderBodyLayout(headParentEl, bodyParentEl, 'clipped-scroll');\n        return _this;\n    }\n    Spreadsheet.prototype.render = function (props, context) {\n        this.renderSkeleton(context);\n        this.renderCells(props.superHeaderText, props.colSpecs);\n    };\n    Spreadsheet.prototype.destroy = function () {\n        this.renderCells.unrender();\n        this.renderSkeleton.unrender();\n        this.layout.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    Spreadsheet.prototype._renderSkeleton = function (context) {\n        var _this = this;\n        var bodyEnhancedScroller = this.layout.bodyScroller.enhancedScroll;\n        bodyEnhancedScroller.canvas.contentEl\n            .appendChild(this.bodyContainerEl = createElement('div', { className: 'fc-rows' }, '<table>' +\n            '<colgroup />' +\n            '<tbody />' +\n            '</table>'));\n        this.bodyColGroup = this.bodyContainerEl.querySelector('colgroup');\n        this.bodyTbody = this.bodyContainerEl.querySelector('tbody');\n        var headerEnhancedScroller = this.layout.headerScroller.enhancedScroll;\n        this.header = new SpreadsheetHeader(headerEnhancedScroller.canvas.contentEl);\n        this.header.emitter.on('colwidthchange', function (colWidths) {\n            _this.applyColWidths(colWidths);\n        });\n    };\n    Spreadsheet.prototype._unrenderSkeleton = function () {\n        this.header.destroy();\n    };\n    Spreadsheet.prototype._renderCells = function (superHeaderText, colSpecs) {\n        var colTags = this.renderColTags(colSpecs);\n        this.header.receiveProps({\n            superHeaderText: superHeaderText,\n            colSpecs: colSpecs,\n            colTags: colTags\n        }, this.context);\n        this.bodyColGroup.innerHTML = colTags;\n        this.bodyColEls = Array.prototype.slice.call(this.bodyColGroup.querySelectorAll('col'));\n        this.applyColWidths(colSpecs.map(function (colSpec) { return colSpec.width; }));\n    };\n    Spreadsheet.prototype._unrenderCells = function () {\n        this.bodyColGroup.innerHTML = '';\n    };\n    Spreadsheet.prototype.renderColTags = function (colSpecs) {\n        var html = '';\n        for (var _i = 0, colSpecs_1 = colSpecs; _i < colSpecs_1.length; _i++) {\n            var o = colSpecs_1[_i];\n            if (o.isMain) {\n                html += '<col class=\"fc-main-col\"/>';\n            }\n            else {\n                html += '<col/>';\n            }\n        }\n        return html;\n    };\n    Spreadsheet.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n        this.layout.setHeight(totalHeight, isAuto);\n    };\n    Spreadsheet.prototype.applyColWidths = function (colWidths) {\n        var _this = this;\n        colWidths.forEach(function (colWidth, colIndex) {\n            var headEl = _this.header.colEls[colIndex]; // bad to access child\n            var bodyEl = _this.bodyColEls[colIndex];\n            var styleVal;\n            if (typeof colWidth === 'number') {\n                styleVal = colWidth + 'px';\n            }\n            else if (typeof colWidth == null) {\n                styleVal = '';\n            }\n            headEl.style.width = bodyEl.style.width = styleVal;\n        });\n    };\n    return Spreadsheet;\n}(Component));\n\nvar MIN_RESOURCE_AREA_WIDTH = 30; // definitely bigger than scrollbars\nvar ResourceTimelineView = /** @class */ (function (_super) {\n    __extends(ResourceTimelineView, _super);\n    function ResourceTimelineView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isStickyScrollDirty = false;\n        _this.rowNodes = [];\n        _this.rowComponents = [];\n        _this.rowComponentsById = {};\n        _this.resourceAreaWidthDraggings = [];\n        _this.splitter = new ResourceSplitter(); // doesn't let it do businessHours tho\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.hasResourceBusinessHours = memoize(hasResourceBusinessHours);\n        _this.buildRowNodes = memoize(buildRowNodes);\n        _this.hasNesting = memoize(hasNesting);\n        _this.updateHasNesting = memoizeRendering(_this._updateHasNesting);\n        _this.startInteractive = memoizeRendering(_this._startInteractive, _this._stopInteractive);\n        return _this;\n    }\n    ResourceTimelineView.prototype._startInteractive = function (timeAxisEl) {\n        this.context.calendar.registerInteractiveComponent(this, { el: timeAxisEl });\n    };\n    ResourceTimelineView.prototype._stopInteractive = function () {\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    ResourceTimelineView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.renderSkeleton(context);\n        var splitProps = this.splitter.splitProps(props);\n        var hasResourceBusinessHours = this.hasResourceBusinessHours(props.resourceStore);\n        this.spreadsheet.receiveProps({\n            superHeaderText: this.superHeaderText,\n            colSpecs: this.colSpecs\n        }, context);\n        this.timeAxis.receiveProps({\n            dateProfileGenerator: props.dateProfileGenerator,\n            dateProfile: props.dateProfile\n        }, context);\n        this.startInteractive(this.timeAxis.slats.el);\n        // for all-resource bg events / selections / business-hours\n        this.lane.receiveProps(__assign({}, splitProps[''], { dateProfile: props.dateProfile, nextDayThreshold: context.nextDayThreshold, businessHours: hasResourceBusinessHours ? null : props.businessHours }), context);\n        var newRowNodes = this.buildRowNodes(props.resourceStore, this.groupSpecs, this.orderSpecs, this.isVGrouping, props.resourceEntityExpansions, context.options.resourcesInitiallyExpanded);\n        this.updateHasNesting(this.hasNesting(newRowNodes));\n        this.diffRows(newRowNodes);\n        this.updateRowProps(props.dateProfile, hasResourceBusinessHours ? props.businessHours : null, // CONFUSING, comment\n        splitProps);\n        this.startNowIndicator(props.dateProfile, props.dateProfileGenerator);\n    };\n    ResourceTimelineView.prototype._renderSkeleton = function (context) {\n        var options = context.options, calendar = context.calendar;\n        var allColSpecs = options.resourceColumns || [];\n        var labelText = options.resourceLabelText; // TODO: view.override\n        var defaultLabelText = 'Resources'; // TODO: view.defaults\n        var superHeaderText = null;\n        if (!allColSpecs.length) {\n            allColSpecs.push({\n                labelText: labelText || defaultLabelText,\n                text: buildResourceTextFunc(options.resourceText, calendar)\n            });\n        }\n        else {\n            superHeaderText = labelText;\n        }\n        var plainColSpecs = [];\n        var groupColSpecs = [];\n        var groupSpecs = [];\n        var isVGrouping = false;\n        var isHGrouping = false;\n        for (var _i = 0, allColSpecs_1 = allColSpecs; _i < allColSpecs_1.length; _i++) {\n            var colSpec = allColSpecs_1[_i];\n            if (colSpec.group) {\n                groupColSpecs.push(colSpec);\n            }\n            else {\n                plainColSpecs.push(colSpec);\n            }\n        }\n        plainColSpecs[0].isMain = true;\n        if (groupColSpecs.length) {\n            groupSpecs = groupColSpecs;\n            isVGrouping = true;\n        }\n        else {\n            var hGroupField = options.resourceGroupField;\n            if (hGroupField) {\n                isHGrouping = true;\n                groupSpecs.push({\n                    field: hGroupField,\n                    text: options.resourceGroupText,\n                    render: options.resourceGroupRender\n                });\n            }\n        }\n        var allOrderSpecs = parseFieldSpecs(options.resourceOrder);\n        var plainOrderSpecs = [];\n        for (var _a = 0, allOrderSpecs_1 = allOrderSpecs; _a < allOrderSpecs_1.length; _a++) {\n            var orderSpec = allOrderSpecs_1[_a];\n            var isGroup = false;\n            for (var _b = 0, groupSpecs_1 = groupSpecs; _b < groupSpecs_1.length; _b++) {\n                var groupSpec = groupSpecs_1[_b];\n                if (groupSpec.field === orderSpec.field) {\n                    groupSpec.order = orderSpec.order; // -1, 0, 1\n                    isGroup = true;\n                    break;\n                }\n            }\n            if (!isGroup) {\n                plainOrderSpecs.push(orderSpec);\n            }\n        }\n        this.superHeaderText = superHeaderText;\n        this.isVGrouping = isVGrouping;\n        this.isHGrouping = isHGrouping;\n        this.groupSpecs = groupSpecs;\n        this.colSpecs = groupColSpecs.concat(plainColSpecs);\n        this.orderSpecs = plainOrderSpecs;\n        // START RENDERING...\n        this.el.classList.add('fc-timeline');\n        if (options.eventOverlap === false) {\n            this.el.classList.add('fc-no-overlap');\n        }\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.resourceAreaHeadEl = this.el.querySelector('thead .fc-resource-area');\n        this.setResourceAreaWidth(options.resourceAreaWidth);\n        this.initResourceAreaWidthDragging();\n        this.miscHeight = this.el.getBoundingClientRect().height;\n        this.spreadsheet = new Spreadsheet(this.resourceAreaHeadEl, this.el.querySelector('tbody .fc-resource-area'));\n        this.timeAxis = new TimeAxis(this.el.querySelector('thead .fc-time-area'), this.el.querySelector('tbody .fc-time-area'));\n        var timeAxisRowContainer = createElement('div', { className: 'fc-rows' }, '<table><tbody /></table>');\n        this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.contentEl.appendChild(timeAxisRowContainer);\n        this.timeAxisTbody = timeAxisRowContainer.querySelector('tbody');\n        this.lane = new TimelineLane(null, this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.bgEl, this.timeAxis);\n        this.bodyScrollJoiner = new ScrollJoiner('vertical', [\n            this.spreadsheet.layout.bodyScroller,\n            this.timeAxis.layout.bodyScroller\n        ]);\n        // after scrolljoiner\n        this.spreadsheetBodyStickyScroller = new StickyScroller(this.spreadsheet.layout.bodyScroller.enhancedScroll, context.isRtl, true // isVertical\n        );\n    };\n    ResourceTimelineView.prototype._unrenderSkeleton = function (context) {\n        this.startInteractive.unrender(); // \"unrender\" bad name\n        this.destroyRows(); // wierd to call this here\n        this.spreadsheet.destroy();\n        this.timeAxis.destroy();\n        this.lane.destroy();\n        this.spreadsheetBodyStickyScroller.destroy();\n        this.el.classList.remove('fc-timeline');\n        this.el.classList.remove('fc-no-overlap');\n    };\n    ResourceTimelineView.prototype.renderSkeletonHtml = function () {\n        var theme = this.context.theme;\n        return \"<table class=\\\"\" + theme.getClass('tableGrid') + \"\\\"> <thead class=\\\"fc-head\\\"> <tr> <td class=\\\"fc-resource-area \" + theme.getClass('widgetHeader') + \"\\\"></td> <td class=\\\"fc-divider fc-col-resizer \" + theme.getClass('widgetHeader') + \"\\\"></td> <td class=\\\"fc-time-area \" + theme.getClass('widgetHeader') + \"\\\"></td> </tr> </thead> <tbody class=\\\"fc-body\\\"> <tr> <td class=\\\"fc-resource-area \" + theme.getClass('widgetContent') + \"\\\"></td> <td class=\\\"fc-divider fc-col-resizer \" + theme.getClass('widgetHeader') + \"\\\"></td> <td class=\\\"fc-time-area \" + theme.getClass('widgetContent') + \"\\\"></td> </tr> </tbody> </table>\";\n    };\n    ResourceTimelineView.prototype._updateHasNesting = function (isNesting) {\n        var classList = this.el.classList;\n        if (isNesting) {\n            classList.remove('fc-flat');\n        }\n        else {\n            classList.add('fc-flat');\n        }\n    };\n    ResourceTimelineView.prototype.diffRows = function (newNodes) {\n        var oldNodes = this.rowNodes;\n        var oldLen = oldNodes.length;\n        var oldIndexHash = {}; // id -> index\n        var oldI = 0;\n        var newI = 0;\n        for (oldI = 0; oldI < oldLen; oldI++) {\n            oldIndexHash[oldNodes[oldI].id] = oldI;\n        }\n        // iterate new nodes\n        for (oldI = 0, newI = 0; newI < newNodes.length; newI++) {\n            var newNode = newNodes[newI];\n            var oldIFound = oldIndexHash[newNode.id];\n            if (oldIFound != null && oldIFound >= oldI) {\n                this.removeRows(newI, oldIFound - oldI, oldNodes); // won't do anything if same index\n                oldI = oldIFound + 1;\n            }\n            else {\n                this.addRow(newI, newNode);\n            }\n        }\n        // old rows that weren't found need to be removed\n        this.removeRows(newI, oldLen - oldI, oldNodes); // won't do anything if same index\n        this.rowNodes = newNodes;\n    };\n    /*\n    rowComponents is the in-progress result\n    */\n    ResourceTimelineView.prototype.addRow = function (index, rowNode) {\n        var _a = this, rowComponents = _a.rowComponents, rowComponentsById = _a.rowComponentsById;\n        var nextComponent = rowComponents[index];\n        var newComponent = this.buildChildComponent(rowNode, this.spreadsheet.bodyTbody, nextComponent ? nextComponent.spreadsheetTr : null, this.timeAxisTbody, nextComponent ? nextComponent.timeAxisTr : null);\n        rowComponents.splice(index, 0, newComponent);\n        rowComponentsById[rowNode.id] = newComponent;\n    };\n    ResourceTimelineView.prototype.removeRows = function (startIndex, len, oldRowNodes) {\n        if (len) {\n            var _a = this, rowComponents = _a.rowComponents, rowComponentsById = _a.rowComponentsById;\n            for (var i = 0; i < len; i++) {\n                var rowComponent = rowComponents[startIndex + i];\n                rowComponent.destroy();\n                delete rowComponentsById[oldRowNodes[i].id];\n            }\n            rowComponents.splice(startIndex, len);\n        }\n    };\n    ResourceTimelineView.prototype.buildChildComponent = function (node, spreadsheetTbody, spreadsheetNext, timeAxisTbody, timeAxisNext) {\n        if (node.group) {\n            return new GroupRow(spreadsheetTbody, spreadsheetNext, timeAxisTbody, timeAxisNext);\n        }\n        else if (node.resource) {\n            return new ResourceRow(spreadsheetTbody, spreadsheetNext, timeAxisTbody, timeAxisNext, this.timeAxis);\n        }\n    };\n    ResourceTimelineView.prototype.updateRowProps = function (dateProfile, fallbackBusinessHours, splitProps) {\n        var _a = this, rowNodes = _a.rowNodes, rowComponents = _a.rowComponents, context = _a.context;\n        for (var i = 0; i < rowNodes.length; i++) {\n            var rowNode = rowNodes[i];\n            var rowComponent = rowComponents[i];\n            if (rowNode.group) {\n                rowComponent.receiveProps({\n                    spreadsheetColCnt: this.colSpecs.length,\n                    id: rowNode.id,\n                    isExpanded: rowNode.isExpanded,\n                    group: rowNode.group\n                }, context);\n            }\n            else {\n                var resource = rowNode.resource;\n                rowComponent.receiveProps(__assign({}, splitProps[resource.id], { dateProfile: dateProfile, nextDayThreshold: context.nextDayThreshold, businessHours: resource.businessHours || fallbackBusinessHours, colSpecs: this.colSpecs, id: rowNode.id, rowSpans: rowNode.rowSpans, depth: rowNode.depth, isExpanded: rowNode.isExpanded, hasChildren: rowNode.hasChildren, resource: rowNode.resource }), context);\n            }\n        }\n    };\n    ResourceTimelineView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        // FYI: this ordering is really important\n        var calendar = this.context.calendar;\n        var isBaseSizing = isResize || calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated;\n        if (isBaseSizing) {\n            this.syncHeadHeights();\n        }\n        // TODO: don't always call these (but guarding behind isBaseSizing was unreliable)\n        this.timeAxis.updateSize(isResize, viewHeight - this.miscHeight, isAuto);\n        this.spreadsheet.updateSize(isResize, viewHeight - this.miscHeight, isAuto);\n        var rowSizingCnt = this.updateRowSizes(isResize);\n        this.lane.updateSize(isResize); // is efficient. uses flags\n        if (isBaseSizing || rowSizingCnt) {\n            this.bodyScrollJoiner.update();\n            this.timeAxis.layout.scrollJoiner.update(); // hack\n            this.rowPositions = new PositionCache(this.timeAxis.slats.el, this.rowComponents.map(function (rowComponent) {\n                return rowComponent.timeAxisTr;\n            }), false, // isHorizontal\n            true // isVertical\n            );\n            this.rowPositions.build();\n            this.isStickyScrollDirty = true;\n        }\n    };\n    ResourceTimelineView.prototype.syncHeadHeights = function () {\n        var spreadsheetHeadEl = this.spreadsheet.header.tableEl;\n        var timeAxisHeadEl = this.timeAxis.header.tableEl;\n        spreadsheetHeadEl.style.height = '';\n        timeAxisHeadEl.style.height = '';\n        var max = Math.max(spreadsheetHeadEl.getBoundingClientRect().height, timeAxisHeadEl.getBoundingClientRect().height);\n        spreadsheetHeadEl.style.height =\n            timeAxisHeadEl.style.height = max + 'px';\n    };\n    ResourceTimelineView.prototype.updateRowSizes = function (isResize) {\n        var dirtyRowComponents = this.rowComponents;\n        if (!isResize) {\n            dirtyRowComponents = dirtyRowComponents.filter(function (rowComponent) {\n                return rowComponent.isSizeDirty;\n            });\n        }\n        var elArrays = dirtyRowComponents.map(function (rowComponent) {\n            return rowComponent.getHeightEls();\n        });\n        // reset to natural heights\n        for (var _i = 0, elArrays_1 = elArrays; _i < elArrays_1.length; _i++) {\n            var elArray = elArrays_1[_i];\n            for (var _a = 0, elArray_1 = elArray; _a < elArray_1.length; _a++) {\n                var el = elArray_1[_a];\n                el.style.height = '';\n            }\n        }\n        // let rows update their contents' heights\n        for (var _b = 0, dirtyRowComponents_1 = dirtyRowComponents; _b < dirtyRowComponents_1.length; _b++) {\n            var rowComponent = dirtyRowComponents_1[_b];\n            rowComponent.updateSize(isResize); // will reset isSizeDirty\n        }\n        var maxHeights = elArrays.map(function (elArray) {\n            var maxHeight = null;\n            for (var _i = 0, elArray_2 = elArray; _i < elArray_2.length; _i++) {\n                var el = elArray_2[_i];\n                var height = el.getBoundingClientRect().height;\n                if (maxHeight === null || height > maxHeight) {\n                    maxHeight = height;\n                }\n            }\n            return maxHeight;\n        });\n        for (var i = 0; i < elArrays.length; i++) {\n            for (var _c = 0, _d = elArrays[i]; _c < _d.length; _c++) {\n                var el = _d[_c];\n                el.style.height = maxHeights[i] + 'px';\n            }\n        }\n        return dirtyRowComponents.length;\n    };\n    ResourceTimelineView.prototype.destroyRows = function () {\n        for (var _i = 0, _a = this.rowComponents; _i < _a.length; _i++) {\n            var rowComponent = _a[_i];\n            rowComponent.destroy();\n        }\n        this.rowNodes = [];\n        this.rowComponents = [];\n    };\n    ResourceTimelineView.prototype.destroy = function () {\n        for (var _i = 0, _a = this.resourceAreaWidthDraggings; _i < _a.length; _i++) {\n            var resourceAreaWidthDragging = _a[_i];\n            resourceAreaWidthDragging.destroy();\n        }\n        this.renderSkeleton.unrender(); // will call destroyRows\n        _super.prototype.destroy.call(this);\n    };\n    // Now Indicator\n    // ------------------------------------------------------------------------------------------\n    ResourceTimelineView.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        return this.timeAxis.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n    };\n    ResourceTimelineView.prototype.renderNowIndicator = function (date) {\n        this.timeAxis.renderNowIndicator(date);\n    };\n    ResourceTimelineView.prototype.unrenderNowIndicator = function () {\n        this.timeAxis.unrenderNowIndicator();\n    };\n    // Scrolling\n    // ------------------------------------------------------------------------------------------------------------------\n    // this is useful for scrolling prev/next dates while resource is scrolled down\n    ResourceTimelineView.prototype.queryScroll = function () {\n        var scroll = _super.prototype.queryScroll.call(this);\n        if (this.props.resourceStore) {\n            __assign(scroll, this.queryResourceScroll());\n        }\n        return scroll;\n    };\n    ResourceTimelineView.prototype.applyScroll = function (scroll, isResize) {\n        _super.prototype.applyScroll.call(this, scroll, isResize);\n        if (this.props.resourceStore) {\n            this.applyResourceScroll(scroll);\n        }\n        // avoid updating stickyscroll too often\n        if (isResize || this.isStickyScrollDirty) {\n            this.isStickyScrollDirty = false;\n            this.spreadsheetBodyStickyScroller.updateSize();\n            this.timeAxis.updateStickyScrollers();\n        }\n    };\n    ResourceTimelineView.prototype.computeDateScroll = function (duration) {\n        return this.timeAxis.computeDateScroll(duration);\n    };\n    ResourceTimelineView.prototype.queryDateScroll = function () {\n        return this.timeAxis.queryDateScroll();\n    };\n    ResourceTimelineView.prototype.applyDateScroll = function (scroll) {\n        this.timeAxis.applyDateScroll(scroll);\n    };\n    ResourceTimelineView.prototype.queryResourceScroll = function () {\n        var _a = this, rowComponents = _a.rowComponents, rowNodes = _a.rowNodes;\n        var scroll = {};\n        var scrollerTop = this.timeAxis.layout.bodyScroller.el.getBoundingClientRect().top; // fixed position\n        for (var i = 0; i < rowComponents.length; i++) {\n            var rowComponent = rowComponents[i];\n            var rowNode = rowNodes[i];\n            var el = rowComponent.timeAxisTr;\n            var elBottom = el.getBoundingClientRect().bottom; // fixed position\n            if (elBottom > scrollerTop) {\n                scroll.rowId = rowNode.id;\n                scroll.bottom = elBottom - scrollerTop;\n                break;\n            }\n        }\n        // TODO: what about left scroll state for spreadsheet area?\n        return scroll;\n    };\n    ResourceTimelineView.prototype.applyResourceScroll = function (scroll) {\n        var rowId = scroll.forcedRowId || scroll.rowId;\n        if (rowId) {\n            var rowComponent = this.rowComponentsById[rowId];\n            if (rowComponent) {\n                var el = rowComponent.timeAxisTr;\n                if (el) {\n                    var innerTop = this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.el.getBoundingClientRect().top;\n                    var rowRect = el.getBoundingClientRect();\n                    var scrollTop = (scroll.forcedRowId ?\n                        rowRect.top : // just use top edge\n                        rowRect.bottom - scroll.bottom) - // pixels from bottom edge\n                        innerTop;\n                    this.timeAxis.layout.bodyScroller.enhancedScroll.setScrollTop(scrollTop);\n                    this.spreadsheet.layout.bodyScroller.enhancedScroll.setScrollTop(scrollTop);\n                }\n            }\n        }\n    };\n    // TODO: scrollToResource\n    // Hit System\n    // ------------------------------------------------------------------------------------------\n    ResourceTimelineView.prototype.buildPositionCaches = function () {\n        this.timeAxis.slats.updateSize();\n        this.rowPositions.build();\n    };\n    ResourceTimelineView.prototype.queryHit = function (positionLeft, positionTop) {\n        var rowPositions = this.rowPositions;\n        var slats = this.timeAxis.slats;\n        var rowIndex = rowPositions.topToIndex(positionTop);\n        if (rowIndex != null) {\n            var resource = this.rowNodes[rowIndex].resource;\n            if (resource) { // not a group\n                var slatHit = slats.positionToHit(positionLeft);\n                if (slatHit) {\n                    return {\n                        component: this,\n                        dateSpan: {\n                            range: slatHit.dateSpan.range,\n                            allDay: slatHit.dateSpan.allDay,\n                            resourceId: resource.id\n                        },\n                        rect: {\n                            left: slatHit.left,\n                            right: slatHit.right,\n                            top: rowPositions.tops[rowIndex],\n                            bottom: rowPositions.bottoms[rowIndex]\n                        },\n                        dayEl: slatHit.dayEl,\n                        layer: 0\n                    };\n                }\n            }\n        }\n    };\n    // Resource Area\n    // ------------------------------------------------------------------------------------------------------------------\n    ResourceTimelineView.prototype.setResourceAreaWidth = function (widthVal) {\n        this.resourceAreaWidth = widthVal;\n        applyStyleProp(this.resourceAreaHeadEl, 'width', widthVal || '');\n    };\n    ResourceTimelineView.prototype.initResourceAreaWidthDragging = function () {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, isRtl = _a.isRtl;\n        var resourceAreaDividerEls = Array.prototype.slice.call(this.el.querySelectorAll('.fc-col-resizer'));\n        var ElementDraggingImpl = calendar.pluginSystem.hooks.elementDraggingImpl;\n        if (ElementDraggingImpl) {\n            this.resourceAreaWidthDraggings = resourceAreaDividerEls.map(function (el) {\n                var dragging = new ElementDraggingImpl(el);\n                var dragStartWidth;\n                var viewWidth;\n                dragging.emitter.on('dragstart', function () {\n                    dragStartWidth = _this.resourceAreaWidth;\n                    if (typeof dragStartWidth !== 'number') {\n                        dragStartWidth = _this.resourceAreaHeadEl.getBoundingClientRect().width;\n                    }\n                    viewWidth = _this.el.getBoundingClientRect().width;\n                });\n                dragging.emitter.on('dragmove', function (pev) {\n                    var newWidth = dragStartWidth + pev.deltaX * (isRtl ? -1 : 1);\n                    newWidth = Math.max(newWidth, MIN_RESOURCE_AREA_WIDTH);\n                    newWidth = Math.min(newWidth, viewWidth - MIN_RESOURCE_AREA_WIDTH);\n                    _this.setResourceAreaWidth(newWidth);\n                });\n                dragging.setAutoScrollEnabled(false); // because gets weird with auto-scrolling time area\n                return dragging;\n            });\n        }\n    };\n    ResourceTimelineView.needsResourceData = true; // for ResourceViewProps\n    return ResourceTimelineView;\n}(View));\nfunction hasResourceBusinessHours(resourceStore) {\n    for (var resourceId in resourceStore) {\n        var resource = resourceStore[resourceId];\n        if (resource.businessHours) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction hasNesting(nodes) {\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        if (node.group) {\n            return true;\n        }\n        else if (node.resource) {\n            if (node.hasChildren) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nvar main = createPlugin({\n    deps: [ResourceCommonPlugin, TimelinePlugin],\n    defaultView: 'resourceTimelineDay',\n    views: {\n        resourceTimeline: {\n            class: ResourceTimelineView,\n            resourceAreaWidth: '30%',\n            resourcesInitiallyExpanded: true,\n            eventResizableFromStart: true // TODO: not DRY with this same setting in the main timeline config\n        },\n        resourceTimelineDay: {\n            type: 'resourceTimeline',\n            duration: { days: 1 }\n        },\n        resourceTimelineWeek: {\n            type: 'resourceTimeline',\n            duration: { weeks: 1 }\n        },\n        resourceTimelineMonth: {\n            type: 'resourceTimeline',\n            duration: { months: 1 }\n        },\n        resourceTimelineYear: {\n            type: 'resourceTimeline',\n            duration: { years: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { ResourceTimelineView };\n","import { ReminderBase } from './CommanExtendsClass.module';\nimport { Customer } from './customer.model';\nimport { Property } from './property.model';\n\nexport class Ticket {\n    Id?: string;\n    RecurringId?: number;\n    TicketUniqueID?: number;\n    TicketId?: string;\n    CustomerId?: string;\n    PropertyId?: string;\n    CustomerName?: string;\n    CustomerContactNo: string;\n    CustomerEmail?: string;\n    CustomerAddress?: string;\n    CustomerCompanyName?: string;\n    Title?: string;\n    Description?: string;\n    TicketType?: string;\n    OneOffScheduled?: boolean;\n    OneOffAppointmentDate?: string;\n    OneOffStartTime?: string;\n    OneOffEndTime?: string;\n    AppointmentStart: string;\n    AppointmentEnd: string;\n    OneOffInvoice?: boolean;\n    RecurringScheduled?: boolean;\n    RecurringStartDate?: string;\n    RecurringEndDate?: string;\n    RecurringDuration?: number;\n    RecurringVisitFrequency?: number;\n    RecurringTotalVisit?: number;\n    RecurringInvoice?: string;\n    Status?: string;\n    InternalNoteDescription?: string;\n    TermsAndConditions?: string;\n    InternalNoteQuote?: boolean;\n    InternalNoteTicket?: boolean;\n    InternalNoteInvoice?: boolean;\n    InternalNoteAllowPayment?: boolean;\n    WhenInvoiceClosed?: boolean;\n    CreatedUtcDate?: string;\n    Rescheduled?: boolean;\n    Reallocate?: boolean;\n    RequestId?: string;\n    IsRequestExists?: boolean;\n    Priority?: number;\n    OverDueDays?: number;\n    NetAmount?: number;\n    InvoiceId?: string;\n    InvoiceNo?: string;\n    QuoteId?: string;\n    TicketConvertedFrom?: string;\n    TicketConvertedID?: string;\n    Customers?: Customer;\n    Properties?: Property;\n    TicketTeams?: TicketTeam[];\n    TicketTeamList?: TicketTeam[];\n    TicketItems?: TicketItem[];\n    TicketItemList?: TicketItem[];\n    TicketAttachments?: TicketAttachment[];\n    TicketAttachmentList?: TicketAttachment[];\n    TicketWiseIssueType?: TicketWiseIssueType[];\n    TicketClosedDate?: string;\n    CreatedBy?: string;\n    SMTPId?: number;\n    DepartmentName?: string;\n    TicketReminder?: TicketReminder[];\n    Rating?: number;\n    RatingFeedback?: string;\n}\nexport class TicketTeam {\n    Id?: number;\n    TicketId?: string;\n    EngineerId?: string;\n    EngineerName?: string;\n    EngineerLogo?: string;\n    TicketAssignDate?: Date;\n    Type?: number;\n}\nexport class TicketItem {\n    Id?: number;\n    TicketId?: string;\n    ItemName?: string;\n    Type?: string;\n    ItemDescription?: string;\n    ItemQuantity?: number;\n    ItemUnitCost?: number;\n    ItemTotalCost?: number;\n    IsPriseRevised?: boolean;\n    ItemAddredBy?: boolean;\n    ItemAddredById?: string;\n    ItemAddredByName?: string;\n    ItemBatch?: string;\n    BatchQty?: string;\n    UniqId?: string;\n    InWarranty?: boolean;\n    WarrantyDays?: number;\n    InstallationDate?: Date;\n    IsMaintance?: boolean;\n    MaintanceRemarks?: string;\n}\nexport class TicketAttachment {\n    Id?: number;\n    AttachmentName?: string;\n    TicketId?: string;\n    AttachmentPath?: string;\n    AttachmentSize?: number;\n}\nexport class TicketIssueType {\n    Id?: number;\n    Name?: string;\n    IsAssigned: boolean;\n}\nexport class TicketWiseIssueType {\n    Id?: number;\n    TicketId?: string;\n    TicketIssueTypeId?: number;\n    IssueTypeName?: string;\n}\nexport class TicketTimer {\n    ID?: number;\n    EngineerID?: string;\n    TicketID?: string;\n    StartDate?: Date;\n    EndDate?: Date;\n    StartTime?: string;\n    EndTime?: string;\n    Status?: number;\n    }\nexport class TicketReminder extends ReminderBase {\n    Id?: number; \n    TicketId?: string;\n}\nexport class TicketEquipment {\n    Id: number;\n    TicketId: string;\n    Name: string;\n    Remark: string;\n    Quantity: number;\n}\nexport class TicketEquipmentMasterData {\n    Id: number;\n    Name: string;\n    IsActive: boolean;\n}\nexport class TicketRecurringHelper {\n    Id?: number;\n    Type?: number;\n    IsFor: number;\n    RecurringStartDate?: string;\n    RecurringDuration?: number;\n    RecurringVisitFrequency?: number;\n    SundayIsActive?: boolean;\n    MondayIsActive?: boolean;\n    TuesdayIsActive?: boolean;\n    WednesdayIsActive?: boolean;\n    ThursdayIsActive?: boolean;\n    FridayIsActive?: boolean;\n    SaturdayIsActive?: boolean;\n    Date1?: boolean;\n    Date2?: boolean;\n    Date3?: boolean;\n    Date4?: boolean;\n    Date5?: boolean;\n    Date6?: boolean;\n    Date7?: boolean;\n    Date8?: boolean;\n    Date9?: boolean;\n    Date10?: boolean;\n    Date11?: boolean;\n    Date12?: boolean;\n    Date13?: boolean;\n    Date14?: boolean;\n    Date15?: boolean;\n    Date16?: boolean;\n    Date17?: boolean;\n    Date18?: boolean;\n    Date19?: boolean;\n    Date20?: boolean;\n    Date21?: boolean;\n    Date22?: boolean;\n    Date23?: boolean;\n    Date24?: boolean;\n    Date25?: boolean;\n    Date26?: boolean;\n    Date27?: boolean;\n    Date28?: boolean;\n    Date29?: boolean;\n    Date30?: boolean;\n    Date31?: boolean;\n    }\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  // tslint:disable-next-line: component-selector\r\n  selector: 'generic-ticket-status',\r\n  template: `\r\n     <span *ngIf=\"Status ==='NEW JOB REQUEST'\" class=\"ticketstatus statusnewjobrequest\">NEW&nbsp;JOB&nbsp;REQUEST</span>\r\n     <span *ngIf=\"Status ==='DEFECT JOB'\" class=\"ticketstatus statusnewjobrequest\">DEFECT&nbsp;JOB</span>\r\n    <span *ngIf=\"Status ==='CANCELLED'\" class=\"ticketstatus statuscancelled\">CANCELLED</span>\r\n    <span *ngIf=\"Status ==='UPCOMING'\" class=\"ticketstatus statusupcoming\">UPCOMING</span>\r\n    <span *ngIf=\"Status ==='CLOSED'\" class=\"ticketstatus statusclosed\">CLOSED</span>\r\n    <span *ngIf=\"Status ==='CLOSEDQUOTED'\" class=\"ticketstatus statusclosednQuoted\">CLOSED & QUOTED</span>\r\n    <span *ngIf=\"Status ==='CLOSEDINVOICED'\" class=\"ticketstatus statusclosednInvoised\">CLOSED & INVOICED</span>\r\n    <span *ngIf=\"Status ==='OVERDUE'\" class=\"ticketstatus statusoverdue\">OVERDUE</span>\r\n    <span *ngIf=\"Status ==='OVERDUE'\" class=\"ticketstatus statusoverdueday\">By {{OverDueDays}}\r\n\t<span *ngIf=\"OverDueDays === 1\">&nbsp;Day</span>\r\n\t<span *ngIf=\"OverDueDays > 1\">&nbsp;Days</span></span>\r\n    <span *ngIf=\"Status ==='HOLD'\" class=\"ticketstatus statushold\">HOLD</span>\r\n    <span *ngIf=\"Status ==='INPROGRESS'\" class=\"ticketstatus statusinprogress\">INPROGRESS</span>\r\n    <span *ngIf=\"Status === 'UNSCHEDULED'\" class=\"ticketstatus statusunschedulled\">UNSCHEDULED</span>\r\n  `\r\n})\r\nexport class TicketStatusComponent {\r\n  @Input() Status: string;\r\n  @Input() OverDueDays: number;\r\n}\r\n","import { Component, OnInit, ViewChild, AfterViewInit, TemplateRef, ElementRef } from '@angular/core';\nimport { CalendarService } from '../../../services/calendar.service';\nimport { Login, AuthenticationService } from '../../../services';\nimport { environment } from '../../../../environments/environment';\nimport { EngineerService } from '../../../services/engineer.service';\nimport { CustomerService } from '../../../services/customer.service';\nimport { TicketService } from '../../../services/ticket.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { UserlogService } from '../../../services/userlog.service';\nimport resourceTimelinePlugin from '@fullcalendar/resource-timeline';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction';\nimport { FullCalendarComponent } from '@fullcalendar/angular';\nimport { Customer } from '../../../services/customer.model';\nimport { Engineer } from '../../../services/engineer.module';\nimport { Subject } from 'rxjs/internal/Subject';\nimport { Ticket } from '../../../services/ticket.module';\nimport { Router } from '@angular/router';\nimport { GenicProfileService } from '../../../services/genicprofile.service';\nimport { ResourceFullCalendarSetting } from '../../../services/genicprofile.module';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport Swal from 'sweetalert2';\nimport { TicketReschedulePopupComponent } from '../../ticket-reschedule-popup/ticket-reschedule-popup.component';\nimport { Title } from '@angular/platform-browser';\n\n@Component({\n  templateUrl: './month-resource.component.html',\n  styleUrls: ['./month-resource.component.css']\n})\nexport class MonthResourceComponent implements OnInit, AfterViewInit {\n  refresh: Subject<any> = new Subject();\n  OneOffIsVisible = true;\n  @ViewChild('viewmodalContent', { static: true }) viewmodalContent: TemplateRef<any>;\n  @ViewChild('calendar', { static: false }) calendarComponent: FullCalendarComponent;\n  @ViewChild('external', { static: true }) external: ElementRef;\n  aspectRatio = 2.8;\n  currentUser: Login;\n  localPrependUrl: string;\n  showFilte: boolean;\n  Iscalendarshow = false;\n  spinnerShow: boolean;\n  currentUTCDate = new Date();\n  viewDate = new Date();\n  plugins = [dayGridPlugin, timeGridPlugin, interactionPlugin, resourceTimelinePlugin];\n  defaultView = 'resourceTimelineDay';\n  calendarEvents: calendarEvents[];\n  resources: resources[];\n  droppable: true;\n  date: {year: number, month: number};\n  header = { left: ' prev, today next ', center: 'title', right: 'resourceTimelineDay,resourceTimelineThreeDays,resourceTimelineWeek'};\n  views = {\n            resourceTimelineThreeDays: { type: 'resourceTimeline', duration: { days: 3 }, buttonText: '3 day'},\n            resourceTimelineWeek: { type: 'resourceTimeline', duration: { days: 7 }, buttonText: 'week'}\n            };\n  CustomerdropdownList = []; CustomerselectedItems = [];\n  CustomerdropdownSettings = { displayKey: 'Name', search: true, limitTo: 5, height: '260', placeholder: 'Customers'};\n  EngineerdropdownList = []; EngineerselectedItems = [];\n  EngineerdropdownSettings = { displayKey: 'Name', search: true, limitTo: 5, height: '260', placeholder: 'Engineers'};\n  StatusdropdownList = []; StatusselectedItems = [];\n  StatusdropdownSettings = { displayKey: 'Name', search: true, limitTo: 5, height: '260', placeholder: 'Status'};\n  ticketlist: any;\n  isDtInitialized: boolean;\n  CalendarResourceData: any;\n  constructor(\n    private titleService: Title,\n    public service: CalendarService,\n    public ticketservice: TicketService,\n    public loginservice: AuthenticationService,\n    public customerservice: CustomerService,\n    public genicprofileservice: GenicProfileService,\n    public engineerservice: EngineerService,\n    public logService: UserlogService,\n    private toastr: ToastrService,\n    private dialog: MatDialog,\n    private router: Router,\n  ) {\n    this.loginservice.currentUser.subscribe(x => this.currentUser = x);\n    this.localPrependUrl = environment.apiUrl;\n    this.ticketlist = [];\n    this.isDtInitialized = false;\n  }\n  ngOnInit() {\n    this.EngineerdropdownSettings = { displayKey: 'Name', search: true, limitTo: 5, height: '260', placeholder: this.currentUser.Engineer + 's'};\n    this.genicprofileservice.TicketFilter.IsReady = false;\n    this.genicprofileservice.TicketFilter.IsReadyQuote = false;\n    this.genicprofileservice.TicketFilter.IsReadyInvoice = false;\n    if (this.currentUser.Permissions.ResourceView === false) { this.router.navigate(['/dashboard']); }\n    this.titleService.setTitle('Calendar Resource | Genic Solution');\n    this.showFilte = false;\n    setTimeout(() => {\n      this.showFilte = true;\n    }, 1000);\n\n    this.RefreshData();\n    if (this.genicprofileservice.ResourceFullCalendarSetting === undefined) {\n      this.genicprofileservice.ResourceFullCalendarSetting = new ResourceFullCalendarSetting();\n      this.genicprofileservice.ResourceFullCalendarSetting.start = '08:00';\n      this.genicprofileservice.ResourceFullCalendarSetting.end = '20:00';\n    }\n\n    // tslint:disable-next-line: no-unused-expression\n    new Draggable(this.external.nativeElement, {\n      itemSelector: '.fc-event', eventData(eventEl) {\n        return {\n          title: eventEl.innerText\n        };\n      }\n  });\n  }\n  eventDragStop(model) {\n    console.log(model);\n  }\n  drop(e) {\n    const Id = e.draggedEl.id;\n    const sTime = new Date(e.dateStr);\n    const eTime = new Date(e.dateStr);\n    eTime.setMinutes(sTime.getMinutes() + 60);\n    const EngineerId = e.resource._resource.id;\n    this.ticketservice.formData = new Ticket();\n    this.ticketservice.formData.Id = Id;\n    this.ticketservice.formData.CustomerId = '00000000-0000-0000-0000-000000000000';\n    this.ticketservice.formData.PropertyId = EngineerId;\n    this.ticketservice.formData.OneOffAppointmentDate = sTime.toISOString();\n    this.ticketservice.formData.OneOffStartTime =\n                              sTime.getHours().toString().padStart(2, '0') + ':' +\n                              sTime.getMinutes().toString().padStart(2, '0') + ':' +\n                              sTime.getSeconds().toString().padStart(2, '0') + '.' +\n                              sTime.getMilliseconds().toString().padStart(3, '0');\n    this.ticketservice.formData.OneOffEndTime =\n                              eTime.getHours().toString().padStart(2, '0') + ':' +\n                              eTime.getMinutes().toString().padStart(2, '0') + ':' +\n                              eTime.getSeconds().toString().padStart(2, '0') + '.' +\n                              eTime.getMilliseconds().toString().padStart(3, '0');\n    this.ticketservice.ResourceViewDropableEvent(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.toastr.success('success', response.MessageDescription);\n                    this.RefreshData();\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  eventClick(e) {\n    const Id = e.event._def.publicId;\n    if (Number(Id) !== 0) {\n      this.openpopup(Id);\n    } else {\n      Swal.fire({\n        title: e.view.title,\n        text: e.event._def.title,\n        type: 'info'\n      });\n    }\n  }\n  ngAfterViewInit() {\n    this.customerservice.getCustomerListSync(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 const custList = response.result as Customer[];\n                 custList.forEach(w => {\n                 this.CustomerdropdownList.push({Id: w.Id, Name: w.CompanyName , IsAssigned : false});\n                 this.genicprofileservice.TicketFilter.CustomerId.forEach(el => {\n                  if (w.Id === el) {\n                    this.CustomerselectedItems.push({Id: w.Id, Name: w.CompanyName , IsAssigned : true});\n                  }\n                });\n        });\n      }}, error =>  console.log(error));\n    this.engineerservice.getEngineerListSync(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   const engList = response.result as Engineer[];\n                   engList.forEach(w => {\n            this.EngineerdropdownList.push({Id: w.Id, Name: w.EngineerName, IsAssigned : false });\n            this.genicprofileservice.TicketFilter.EngineerId.forEach(el => {\n              if (w.Id === el) {\n                this.EngineerselectedItems.push({Id: w.Id, Name: w.EngineerName, IsAssigned : true });\n              }\n            });\n          });\n        }}, error =>  console.log(error));\n    this.StatusdropdownList = [\n        { Id: 'UPCOMING', Name: 'UPCOMING' },\n        { Id: 'HOLD', Name: 'HOLD' },\n        { Id: 'INPROGRESS', Name: 'INPROGRESS' },\n        { Id: 'OVERDUE', Name: 'OVERDUE' },\n        { Id: 'CLOSED', Name: 'CLOSED' },\n        { Id: 'UNALLOCATED', Name: 'UNALLOCATED' },\n        { Id: 'UNSCHEDULED', Name: 'UNSCHEDULED' },\n        { Id: 'CANCELED', Name: 'CANCELED' }\n      ];\n  }\n  onDateSelect(e: any) {\n    this.Iscalendarshow = false;\n    const d = new Date(e.year, e.month - 1, e.day, 0 ,0 , 0, 0);\n    const calendarApi = this.calendarComponent.getApi();\n    calendarApi.gotoDate(d);\n\n    // this.Iscalendarshow = false;\n    // const d = new Date(this.CalendarResourceData.Date);\n    // const calendarApi = this.calendarComponent.getApi();\n    // calendarApi.gotoDate(d);\n  }\n  DraggableEvent(e) {\n    const Id = e.prevEvent._def.publicId;\n    const sTime = new Date(e.event._instance.range.start);\n    const eTime = new Date(e.event._instance.range.end);\n    const EngineerId = e.prevEvent._def.resourceIds[0];\n    this.ticketservice.formData = new Ticket();\n    this.ticketservice.formData.Id = Id;\n    this.ticketservice.formData.PropertyId = EngineerId;\n    this.ticketservice.formData.OneOffAppointmentDate = sTime.toISOString();\n    this.ticketservice.formData.OneOffStartTime =\n                              sTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                              sTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                              sTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                              sTime.getUTCMilliseconds().toString().padStart(3, '0');\n    this.ticketservice.formData.OneOffEndTime =\n                              eTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                              eTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                              eTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                              eTime.getUTCMilliseconds().toString().padStart(3, '0');\n    this.ticketservice.ResourceViewDraggableEvent(this.currentUser.Token).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                    this.toastr.success('success', response.MessageDescription);\n                    this.RefreshData();\n                  }\n                 if (response.Message === 'failure') {\n                    this.RefreshData();\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  eventDrop(e) {\n    if (e.oldResource === null) {\n      const Id = e.event._def.publicId;\n      const sTime = new Date(e.event._instance.range.start);\n      const eTime = new Date(e.event._instance.range.end);\n      const EngineerId = e.event._def.resourceIds[0];\n\n      this.ticketservice.formData = new Ticket();\n      this.ticketservice.formData.Id = Id;\n      this.ticketservice.formData.PropertyId = EngineerId;\n      this.ticketservice.formData.OneOffAppointmentDate = sTime.toISOString();\n      this.ticketservice.formData.OneOffStartTime =\n                                sTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                                sTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                                sTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                                sTime.getUTCMilliseconds().toString().padStart(3, '0');\n      this.ticketservice.formData.OneOffEndTime =\n                                eTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                                eTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                                eTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                                eTime.getUTCMilliseconds().toString().padStart(3, '0');\n      this.ticketservice.ResourceViewDraggableEvent(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                      this.toastr.success('success', response.MessageDescription);\n                      this.RefreshData();\n                    }\n                   if (response.Message === 'failure') {\n                      this.RefreshData();\n                      this.toastr.warning('warning', response.MessageDescription);\n                    }\n      }}, error =>  console.log(error));\n    } else {\n      const Id = e.event._def.publicId;\n      const sTime = new Date(e.event._instance.range.start);\n      const eTime = new Date(e.event._instance.range.end);\n      const OldEngineerId = e.oldResource._resource.id;\n      const NewEngineerId = e.newResource._resource.id;\n\n      this.ticketservice.formData = new Ticket();\n      this.ticketservice.formData.Id = Id;\n      this.ticketservice.formData.CustomerId = OldEngineerId;\n      this.ticketservice.formData.PropertyId = NewEngineerId;\n      this.ticketservice.formData.OneOffAppointmentDate = sTime.toISOString();\n      this.ticketservice.formData.OneOffStartTime =\n                                sTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                                sTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                                sTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                                sTime.getUTCMilliseconds().toString().padStart(3, '0');\n      this.ticketservice.formData.OneOffEndTime =\n                                eTime.getUTCHours().toString().padStart(2, '0') + ':' +\n                                eTime.getUTCMinutes().toString().padStart(2, '0') + ':' +\n                                eTime.getUTCSeconds().toString().padStart(2, '0') + '.' +\n                                eTime.getUTCMilliseconds().toString().padStart(3, '0');\n      this.ticketservice.ResourceViewDropableEvent(this.currentUser.Token).subscribe( res => {\n        if (res) { const response = res as any;\n                   if (response.Message === 'success') {\n                      this.toastr.success('success', response.MessageDescription);\n                      this.RefreshData();\n                    }\n                   if (response.Message === 'failure') {\n                      this.RefreshData();\n                      this.toastr.warning('warning', response.MessageDescription);\n                    }\n      }}, error =>  console.log(error));\n    }\n  }\n  RefreshData(): void {\n    if (this.isDtInitialized) {\n      const calendarApi = this.calendarComponent.getApi();\n      calendarApi.removeAllEvents();\n      calendarApi.refetchEvents();\n    }\n    this.ticketlist = [];\n    this.resources = [];\n    this.calendarEvents = [];\n    this.service.ResourceParamData.TokenNo = this.currentUser.Token;\n    this.service.refrestResourceViewList(this.currentUser.Token, this.service.ResourceParamData).subscribe( res => {\n      if (res) { const response = res as any;\n                 if (response.Message === 'success') {\n                  this.isDtInitialized = true;\n                  this.resources = response.Item1;\n                  this.calendarEvents = response.Item2;\n                  this.ticketservice.getUnAssignedTickets(this.currentUser.Token).subscribe( res2 => {\n                    if (res2) { const response2 = res2 as any;\n                                this.ticketlist = response2.result;\n                    }}, error =>  console.log(error));\n                  }\n                 if (response.Message === 'failure') {\n                    this.toastr.warning('warning', response.MessageDescription);\n                  }\n    }}, error =>  console.log(error));\n  }\n  eventrender(event) {\n    event.el.title = event.event.title;\n  }\n  showcalendar() {\n    if (this.Iscalendarshow) {\n      this.Iscalendarshow = false;\n    } else {\n      this.Iscalendarshow = true;\n    }\n  }\n  /// Custimer\n  onCustomerItemSelect(e) {\n    this.service.ResourceParamData.CustomerId = [];\n    e.value.forEach(element => {\n      this.service.ResourceParamData.CustomerId.push(element.Id);\n    });\n    this.RefreshData();\n  }\n  /// Engineers\n  onEngineerItemSelect(e) {\n    this.service.ResourceParamData.EngineerId = [];\n    e.value.forEach(element => {\n      this.service.ResourceParamData.EngineerId.push(element.Id);\n    });\n    this.RefreshData();\n  }\n  onStatusItemSelect(e) {\n    this.service.ResourceParamData.Status = [];\n    e.value.forEach(element => {\n      this.service.ResourceParamData.Status.push(element.Id);\n    });\n    this.RefreshData();\n  }\n  openpopup(id: string) {\n    // this.toastr.info(c);\n    this.ticketservice.formData.Id = id;\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = '720px';\n    dialogConfig.height = '720px';\n    dialogConfig.data = {};\n    this.dialog.open(TicketReschedulePopupComponent, dialogConfig)\n    .afterClosed().subscribe(res => {\n      this.engineerservice.releseTemporaryEngineerFromTicket(this.ticketservice.formData.Id,\n        this.currentUser.Token, 'revert').subscribe( res => {\n          this.RefreshData();\n      }, error =>  console.log(error));\n    });\n  }\n  public OneOffScheduledLater() {\n    if (this.ticketservice.formData.OneOffScheduled === true) {\n      this.OneOffIsVisible = false;\n    } else {\n      this.OneOffIsVisible = true;\n    }\n  }\n resourcetime(e, v) {\n    if (v === 'start') {\n      this.genicprofileservice.ResourceFullCalendarSetting.start = e.target.value;\n    }\n    if (v === 'end') {\n      this.genicprofileservice.ResourceFullCalendarSetting.end = e.target.value;\n    }\n  }\n}\n\n// tslint:disable-next-line: class-name\ninterface resources {\n  id?: string;\n  title?: string;\n  eventColor?: string;\n}\n// tslint:disable-next-line: class-name\ninterface  calendarEvents {\n    resourceId?: string;\n    title?: string;\n    start?: string;\n    end?: string;\n  }\n","\n<div class=\"kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor\" id=\"kt_content\">\n\t<div class=\"kt-subheader kt-grid__item\" id=\"kt_subheader\">\n\t\t<div class=\"kt-container kt-container--fluid \">\n\t\t\t<div class=\"kt-subheader__main\">\n\t\t\t\t<h3 class=\"kt-subheader__title\">\n\t\t\t\t\t<a href=\"javascript:;\" routerLink=\"/dashboard\">\n\t\t\t\t\t\tDashboard\n\t\t\t\t\t</a>\n\t\t\t\t</h3>\n\t\t\t\t<span class=\"kt-subheader__separator kt-hidden\"></span>\n\t\t\t\t<div class=\"kt-subheader__breadcrumbs\">\n\t\t\t\t\t<i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\n\t\t\t\t\t<span class=\"kt-subheader__breadcrumbs-separator\"></span>\n\t\t\t\t\t<a class=\"kt-subheader__breadcrumbs-link\"> Calendar </a>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"kt-subheader__separator kt-hidden\"></span>\n\t\t\t\t<div class=\"kt-subheader__breadcrumbs\">\n\t\t\t\t\t<i class=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\n\t\t\t\t\t<span class=\"kt-subheader__breadcrumbs-separator\"></span> Resource\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"kt-subheader__toolbar\">\n\t\t\t\t<div class=\"kt-subheader__wrapper\">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n    <div class=\"new-quote-main-section\">\n        <div class=\"kt-container kt-container--fluid\">\n            <div class=\"new-requst-filter_form create-new-client-popup\">\n                <div class=\"accordion accordion-solid\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12 col-sm-12 col-xs-12 no-spacing\">\n\n                            <div class=\"\">\n                                <div class=\"row\">\n                                    <div class=\"col-lg-12 left-enlarge\">\n                                        <div class=\"kt-portlet\" id=\"kt_portlet\">\n                                            <div class=\"kt-portlet__head\">\n                                                <div class=\"kt-portlet__head-label\">\n                                                    <span class=\"kt-portlet__head-icon\">\n                                                      &nbsp;&nbsp;  <i class=\"flaticon-map-location\"></i>\n                                                    </span>\n                                                    <h3 class=\"kt-portlet__head-title\">\n                                                        Resource\n                                                        <i class=\"la la-refresh\" style=\"font-weight: bold;\" (click)=\"RefreshData()\" aria-hidden=\"true\"></i>\n                                                    </h3>\n                                                </div>\n                                                <div class=\"kt-portlet__head-toolbar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn btn-group\" *ngIf=\"currentUser.Permissions.CalendarView\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a routerLink=\"/calendar/month-tickets\" href=\"javascript:;\" class=\"btn btn-secondary\">Calendar</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a routerLink=\"/calendar/resource-view\" href=\"javascript:;\" class=\"btn btn-primary\">Resource</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n                                                </div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"kt-portlet__head\">\n                                                <div class=\"ffffrow\">\n                                                    <div class=\"row\" *ngIf=\"showFilte\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                                        <div class=\"col-md-3\">\n                                                            <ngx-select-dropdown class=\"myselectClass\"\n                                                            (change)=\"onCustomerItemSelect($event)\" [multiple]=\"true\"\n                                                            name=\"CustomerselectedItems\"\n                                                            [(ngModel)]=\"CustomerselectedItems\"\n                                                            [config]=\"CustomerdropdownSettings\" [options]=\"CustomerdropdownList\">\n                                                        </ngx-select-dropdown>\n                                                        </div>\n                                                        <div class=\"col-md-3\">\n                                                            <ngx-select-dropdown class=\"myselectClass\"\n                                                                (change)=\"onEngineerItemSelect($event)\" [multiple]=\"true\"\n                                                                name=\"EngineerselectedItems\"\n                                                                [(ngModel)]=\"EngineerselectedItems\"\n                                                                [config]=\"EngineerdropdownSettings\" [options]=\"EngineerdropdownList\">\n                                                            </ngx-select-dropdown>\n                                                        </div>\n                                                        <div class=\"col-md-5\">\n                                                            <ngx-select-dropdown class=\"myselectClass\"\n                                                                (change)=\"onStatusItemSelect($event)\" [multiple]=\"true\"\n                                                                name=\"StatusselectedItems\"\n                                                                [(ngModel)]=\"StatusselectedItems\"\n                                                                [config]=\"StatusdropdownSettings\" [options]=\"StatusdropdownList\">\n                                                            </ngx-select-dropdown>\n                                                        </div>\n                                                        <div class=\"col-md-1\" style=\"text-align: right;\">\n                                                            <a href=\"javascript:;\" class=\"btn btn-secondary calendar\" (click)=\"showcalendar()\">\n                                                                <i *ngIf=\"!Iscalendarshow\" class=\"fa fa-calendar\"></i>\n                                                                <i *ngIf=\"Iscalendarshow\" class=\"fa fa-window-close text-danger\"></i></a>\n                                                                 \n                                                                <div *ngIf=\"Iscalendarshow\" style=\"position: absolute; z-index: 99999; background-color: white;right: 10px;\">\n                                                                <ngb-datepicker name=\"CalendarResourceData\"\n                                                                (select)=\"onDateSelect($event)\" (navigate)=\"date=$event.next\">\n                                                            </ngb-datepicker>\n                                                                </div>\n                                                           \n                                                        </div>                                                        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\n                                                </div>                                                \n                                            </div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"resource-main\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"padding:10px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div [ngClass]=\"ticketservice.Ticketlist.length === 0 ? 'col-md-12 col-sm-12' : 'col-md-10 col-sm-10'\">\n                                                        <div class=\"col-md-12\">\n                                                            <full-calendar #calendar\n                                                            [defaultDate]=\"viewDate\"\n                                                            [defaultView]=\"defaultView\"\n                                                            [plugins]=\"plugins\"\n                                                            [events]=\"calendarEvents\"\n                                                            resourceLabelText=\"{{this.EngineerdropdownSettings.placeholder}}\"\n                                                            [resources]=\"resources\"\n                                                            [header]=\"header\"\n                                                            [timeZone]=\"'local'\"\n                                                            [editable]=\"true\"\n                                                            [selectable]=\"true\"\n                                                            [droppable]=\"droppable\"                                                         \n                                                            schedulerLicenseKey=\"GPL-My-Project-Is-Open-Source\"\n                                                            [views]=\"views\"\n                                                            [minTime]=\"genicprofileservice.ResourceFullCalendarSetting.start\"\n                                                            [maxTime]=\"genicprofileservice.ResourceFullCalendarSetting.end\"\n                                                            [nowIndicator]=\"true\"\n                                                            theme=\"'standart'\"\n                                                            [aspectRatio]=\"aspectRatio\"\n                                                            (eventResize)=\"DraggableEvent($event)\"\n                                                            (eventDrop)=\"eventDrop($event)\"\n                                                            (eventRender)=\"eventrender($event)\"                                                            \n                                                            (eventDragStop)=\"eventDragStop($event)\"\n                                                            (eventClick)=\"eventClick($event)\"\n                                                            (drop)=\"drop($event)\">\n                                                        </full-calendar> \n                                                        </div>\t\t\t\t\t\t\t\t\t\t\t\t\t\n                                                                                                 \t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2 col-sm-2 external-events\" #external>\n                                                        <strong *ngIf=\"ticketlist.length > 0\">{{ticketlist.length}} Unallocated Ticket</strong>\n                                                          <div *ngFor=\"let t of ticketlist; async\" style=\"cursor: pointer;margin-bottom: 1px; padding: 2px;\" class='fc-event'\n                                                          id=\"{{t.Id}}\" >{{t.TicketId}} | {{t.Title}}</div>                                                        \n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n                                                </div>\n                                                <div class=\"row\" style=\"padding: 20px;\">\n                                                    <div class=\"col-md-1\">\n                                                        <div class=\"input-group\">\n                                                            <select (change)=\"resourcetime($event,'start')\"\n                                                            #genicprofileservice.ResourceFullCalendarSetting.start\n                                                            [(ngModel)]=\"genicprofileservice.ResourceFullCalendarSetting.start\"\n                                                            class=\"form-control\" >\n                                                                    <option value=\"00:00\">00:00</option>\n                                                                    <option value=\"02:00\">02:00</option>\n                                                                    <option value=\"04:00\">04:00</option>\n                                                                    <option value=\"06:00\">06:00</option>\n                                                                    <option value=\"08:00\">08:00</option>\n                                                                    <option value=\"10:00\">10:00</option>\n                                                              </select>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-1\">\n                                                    <div class=\"input-group\">\n                                                            <select (change)=\"resourcetime($event,'end')\"\n                                                            #genicprofileservice.ResourceFullCalendarSetting.end\n                                                            [(ngModel)]=\"genicprofileservice.ResourceFullCalendarSetting.end\"\n                                                            class=\"form-control\" >\n                                                                    <option value=\"16:00\">16:00</option>\n                                                                    <option value=\"18:00\">18:00</option>\n                                                                    <option value=\"20:00\">20:00</option>\n                                                                    <option value=\"22:00\">22:00</option>\n                                                                    <option value=\"24:00\">24:00</option>\n                                                            </select>\n                                                </div>\n                                            </div>\n                                                </div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<ng-template #viewmodalContent let-close=\"close\">\n    <div class=\"row cus-model-header\" style=\"margin:0\">\n        <div class=\"col-md-9\">\n            <h5 class=\"modal-title\" style=\"font-size: 2em;color: black;font-weight: 600;\">\n                <span *ngIf=\"ticketservice.formData.TicketType === 'One-Off Ticket'\"> Visit | One-Off Ticket</span>\n                <span *ngIf=\"ticketservice.formData.TicketType === 'Recurring Ticket'\">Visit | Recurring Ticket</span>\n            </h5>\n        </div>\n        <div class=\"col-md-3\">  \n            <div class=\"btn-group\" style=\"float: right;\">\n                <button *ngIf=\"ticketservice.formData.Status === 'UPCOMING' || ticketservice.formData.Status === 'OVERDUE' || ticketservice.formData.Status === 'UNSCHEDULED'\" class=\"btn btn-brand btn-sm text-white \" >\n                    <i class=\"la la-edit\"></i> Edit </button>\n                <button type=\"button\" class=\"btn btn-danger btn-sm text-white\" (click)=\"close()\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n        </div>\n    </div> \n<div class=\"modal-body\" id=\"month-1-modal\">\n    <div class=\"row\">\n        <div class=\"col-md-6\" style=\"border-right: 1px solid #e1dfdf;\">\n            <div class=\"client-header\"> {{ticketservice.formData.CustomerCompanyName}} </div>\n            <strong> {{ticketservice.formData.CustomerName}} </strong>\n            <div class=\"client-address\">\n                <em *ngFor=\"let subCategory of ticketservice.formData.CustomerAddress?.split(',')\">\n                    {{ subCategory }} <br>\n                  </em>  \n            </div>\n        </div>\n        <div class=\"col-md-6 client-header-appoinmenttime\">\n            <i class=\"fa fa-calendar\"></i>\n            {{ticketservice.formData.OneOffAppointmentDate | date}}\n            {{ticketservice.formData.AppointmentStart | date:'h:mm a':'+0000'}} - \n            {{ticketservice.formData.AppointmentEnd | date:'h:mm a':'+0000'}}\n            <div><a href=\"javascript:;\" href=\"https://www.google.com/maps/place/{{ticketservice.formData.CustomerAddress}}\" target=\"_blank\" ><i class=\"fas fa-map-marker text-success\" ></i> Direction</a></div>\n            <i *ngIf=\"ticketservice.formData.Priority === 1\" class=\"fas fa-circle text-danger\" title=\"High Priority\"></i> <span class=\"text-danger\" *ngIf=\"ticketservice.formData.Priority === 1\"> High Priority</span>\n            <i *ngIf=\"ticketservice.formData.Priority === 2\" class=\"fas fa-circle text-info\" title=\"Medium Priority\"></i> <span class=\"text-info\" *ngIf=\"ticketservice.formData.Priority === 2\"> Medium Priority</span>\n            <i *ngIf=\"ticketservice.formData.Priority === 3\" class=\"fas fa-circle text-success\" title=\"Low Priority\"></i> <span class=\"text-success\" *ngIf=\"ticketservice.formData.Priority === 3\"> Low Priority</span>                \n            <div>\n                <generic-ticket-status [(Status)]=\"ticketservice.formData.Status\"\n                                                    [OverDueDays]=\"0\"></generic-ticket-status>\n            \n        </div>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-md-12 col-sm-12\">\n        <div class=\"details-tabs width100\">\n            <ul class=\"nav nav-tabs\" role=\"tablist\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#dtab1\">Info</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" data-toggle=\"tab\" href=\"#dtab2\">Customer</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" data-toggle=\"tab\" href=\"#dtab3\">Notes</a>\n                </li>\n            </ul>\n            <div class=\"tab-content\">\n                <div id=\"dtab1\" class=\" tab-pane active\">\n                    <div class=\"row row-border\">\n                        <div class=\"col-md-12 col-sm-12\">\n                            <div class=\"client-info-title\"> {{ticketservice.formData.Title}} </div><br>\n                            <div class=\"client-info-desc\">{{ticketservice.formData.Description}}</div>\n                        </div>\n                    </div>\n                    <div class=\"row row-border\">\n                        <div class=\"col-md-6 col-sm-6\">\n                            <div class=\"client-info-title\"> Ticket </div>\n                            <div class=\"client-info-desc\">{{ticketservice.formData.TicketId}}</div>\n                            <div class=\"client-info-desc\">{{ticketservice.formData.Title}}</div>\n                        </div>\n                        <div class=\"col-md-6 col-sm-6\">\n                            <div class=\"client-info-title\"> Team </div>\n                            <div class=\"client-info-desc\" *ngFor=\"let x of ticketservice.formData.TicketTeams\">{{x.EngineerName}}</div>\n                        </div>\n                    </div>\n                    <div class=\"row row-border\">\n                        <div class=\"col-md-12 col-sm-12\">\n                            <div class=\"client-info-title\"> Line Items </div>\n                            <table class=\"width100\">\n                                <thead>\n                                    <tr>\n                                    <th>Product/Service</th>\n                                    <th>QTY</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                    <tr *ngFor=\"let itm of ticketservice.formData.TicketItems\">\n                                        <td> {{itm.ItemName}}</td>\n                                        <td> {{itm.ItemTotalCost}}</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <div id=\"dtab2\" class=\" tab-pane fade\">\n                   <div class=\"row\">\n                    <div class=\"col-md-12 col-sm-12\">\n                        <div class=\"client-info-title\"> Client Details </div>\n                        <table class=\"width100\">\n                            <tbody>\n                                <tr>\n                                    <td> Name</td>\n                                    <td> {{ticketservice.formData.CustomerName}}</td>\n                                    <td><a href=\"javascript:;\" ><i class=\"fa fa-angle-double-right \" ></i></a></td>\n                                </tr>\n                                <tr>\n                                    <td> Email</td>\n                                    <td> {{ticketservice.formData.CustomerEmail}}</td>\n                                    <td><a href=\"mailto:@{{ticketservice.formData.CustomerEmail}}\"><i class=\"fa fa-envelope\" ></i></a></td>\n                                </tr>\n                                <tr>\n                                    <td colspan=\"3\"><hr></td>\n                                </tr>\n                                <tr>\n                                    <td colspan=\"3\"><div class=\"client-info-title\"> Property </div></td>\n                                </tr>\n                                <tr>\n                                    <td> Address</td>\n                                    <td> {{ticketservice.formData.CustomerAddress}}</td>\n                                    <td><a href=\"https://www.google.com/maps/place/{{ticketservice.formData.CustomerAddress}}\" target=\"_blank\"><i class=\"fa fa-angle-double-right\" ></i></a></td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                   </div>\n                </div>\n                <div id=\"dtab3\" class=\" tab-pane fade\">\n                    <div class=\"row\" > \n                            <div class=\"col-md-12 col-sm-12\">\n                                {{ticketservice.formData.InternalNoteDescription}}\n                            </div>                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n</div>\n</ng-template>","/*!\nFullCalendar Day Grid Plugin v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, memoize, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DayGridDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n    function DayGridDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.options.monthMode &&\n            this.options.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return DayGridDateProfileGenerator;\n}(DateProfileGenerator));\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\nvar Popover = /** @class */ (function () {\n    function Popover(options) {\n        var _this = this;\n        this.isHidden = true;\n        this.margin = 10; // the space required between the popover and the edges of the scroll container\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        this.documentMousedown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            if (_this.el && !_this.el.contains(ev.target)) {\n                _this.hide();\n            }\n        };\n        this.options = options;\n    }\n    // Shows the popover on the specified position. Renders it if not already\n    Popover.prototype.show = function () {\n        if (this.isHidden) {\n            if (!this.el) {\n                this.render();\n            }\n            this.el.style.display = '';\n            this.position();\n            this.isHidden = false;\n            this.trigger('show');\n        }\n    };\n    // Hides the popover, through CSS, but does not remove it from the DOM\n    Popover.prototype.hide = function () {\n        if (!this.isHidden) {\n            this.el.style.display = 'none';\n            this.isHidden = true;\n            this.trigger('hide');\n        }\n    };\n    // Creates `this.el` and renders content inside of it\n    Popover.prototype.render = function () {\n        var _this = this;\n        var options = this.options;\n        var el = this.el = createElement('div', {\n            className: 'fc-popover ' + (options.className || ''),\n            style: {\n                top: '0',\n                left: '0'\n            }\n        });\n        if (typeof options.content === 'function') {\n            options.content(el);\n        }\n        options.parentEl.appendChild(el);\n        // when a click happens on anything inside with a 'fc-close' className, hide the popover\n        listenBySelector(el, 'click', '.fc-close', function (ev) {\n            _this.hide();\n        });\n        if (options.autoHide) {\n            document.addEventListener('mousedown', this.documentMousedown);\n        }\n    };\n    // Hides and unregisters any handlers\n    Popover.prototype.destroy = function () {\n        this.hide();\n        if (this.el) {\n            removeElement(this.el);\n            this.el = null;\n        }\n        document.removeEventListener('mousedown', this.documentMousedown);\n    };\n    // Positions the popover optimally, using the top/left/right options\n    Popover.prototype.position = function () {\n        var options = this.options;\n        var el = this.el;\n        var elDims = el.getBoundingClientRect(); // only used for width,height\n        var origin = computeRect(el.offsetParent);\n        var clippingRect = computeClippingRect(options.parentEl);\n        var top; // the \"position\" (not \"offset\") values for the popover\n        var left; //\n        // compute top and left\n        top = options.top || 0;\n        if (options.left !== undefined) {\n            left = options.left;\n        }\n        else if (options.right !== undefined) {\n            left = options.right - elDims.width; // derive the left value from the right value\n        }\n        else {\n            left = 0;\n        }\n        // constrain to the view port. if constrained by two edges, give precedence to top/left\n        top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n        top = Math.max(top, clippingRect.top + this.margin);\n        left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n        left = Math.max(left, clippingRect.left + this.margin);\n        applyStyle(el, {\n            top: top - origin.top,\n            left: left - origin.left\n        });\n    };\n    // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n    Popover.prototype.trigger = function (name) {\n        if (this.options[name]) {\n            this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n    };\n    return Popover;\n}());\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\nvar SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n    function SimpleDayGridEventRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Builds the HTML to be used for the default element for an individual segment\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = allDay && seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = allDay && seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeHtml = '';\n        var timeText;\n        var titleHtml;\n        classes.unshift('fc-day-grid-event', 'fc-h-event');\n        // Only display a timed events time if it is the starting segment\n        if (seg.isStart) {\n            timeText = this.getTimeText(eventRange);\n            if (timeText) {\n                timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n            }\n        }\n        titleHtml =\n            '<span class=\"fc-title\">' +\n                (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                '</span>';\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (context.options.dir === 'rtl' ?\n                titleHtml + ' ' + timeHtml : // put a natural space in between\n                timeHtml + ' ' + titleHtml //\n            ) +\n            '</div>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n    return SimpleDayGridEventRenderer;\n}(FgEventRenderer));\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\nvar DayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(DayGridEventRenderer, _super);\n    function DayGridEventRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    // Renders the given foreground event segments onto the grid\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // append to each row's content skeleton\n        this.dayGrid.rowEls.forEach(function (rowNode, i) {\n            rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n        });\n        // removes the \"more..\" events popover\n        if (!mirrorInfo) {\n            this.dayGrid.removeSegPopover();\n        }\n    };\n    // Unrenders all currently rendered foreground event segments\n    DayGridEventRenderer.prototype.detachSegs = function () {\n        var rowStructs = this.rowStructs || [];\n        var rowStruct;\n        while ((rowStruct = rowStructs.pop())) {\n            removeElement(rowStruct.tbodyEl);\n        }\n        this.rowStructs = null;\n    };\n    // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n        var rowStructs = [];\n        var segRows;\n        var row;\n        segRows = this.groupSegRows(segs); // group into nested arrays\n        // iterate each row of segment groupings\n        for (row = 0; row < segRows.length; row++) {\n            rowStructs.push(this.renderSegRow(row, segRows[row]));\n        }\n        return rowStructs;\n    };\n    // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n        var isRtl = this.context.isRtl;\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt;\n        var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n        var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n        var tbody = document.createElement('tbody');\n        var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n        var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n        var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n        var i;\n        var levelSegs;\n        var col;\n        var tr;\n        var j;\n        var seg;\n        var td;\n        // populates empty cells from the current column (`col`) to `endCol`\n        function emptyCellsUntil(endCol) {\n            while (col < endCol) {\n                // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                td = (loneCellMatrix[i - 1] || [])[col];\n                if (td) {\n                    td.rowSpan = (td.rowSpan || 1) + 1;\n                }\n                else {\n                    td = document.createElement('td');\n                    tr.appendChild(td);\n                }\n                cellMatrix[i][col] = td;\n                loneCellMatrix[i][col] = td;\n                col++;\n            }\n        }\n        for (i = 0; i < levelCnt; i++) { // iterate through all levels\n            levelSegs = segLevels[i];\n            col = 0;\n            tr = document.createElement('tr');\n            segMatrix.push([]);\n            cellMatrix.push([]);\n            loneCellMatrix.push([]);\n            // levelCnt might be 1 even though there are no actual levels. protect against this.\n            // this single empty row is useful for styling.\n            if (levelSegs) {\n                for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                    seg = levelSegs[j];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol);\n                    // create a container that occupies or more columns. append the event element.\n                    td = createElement('td', { className: 'fc-event-container' }, seg.el);\n                    if (leftCol !== rightCol) {\n                        td.colSpan = rightCol - leftCol + 1;\n                    }\n                    else { // a single-column segment\n                        loneCellMatrix[i][col] = td;\n                    }\n                    while (col <= rightCol) {\n                        cellMatrix[i][col] = td;\n                        segMatrix[i][col] = seg;\n                        col++;\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            emptyCellsUntil(colCnt); // finish off the row\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (isRtl) {\n                    appendToElement(tr, introHtml);\n                }\n                else {\n                    prependToElement(tr, introHtml);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        return {\n            row: row,\n            tbodyEl: tbody,\n            cellMatrix: cellMatrix,\n            segMatrix: segMatrix,\n            segLevels: segLevels,\n            segs: rowSegs\n        };\n    };\n    // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n        var isRtl = this.context.isRtl;\n        var colCnt = this.dayGrid.colCnt;\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        // Give preference to elements with certain criteria, so they have\n        // a chance to be closer to the top.\n        segs = this.sortEventSegs(segs);\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n            for (j = 0; j < levels.length; j++) {\n                if (!isDaySegCollision(seg, levels[j])) {\n                    break;\n                }\n            }\n            // `j` now holds the desired subrow index\n            seg.level = j;\n            seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n            seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n            ;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        // order segments left-to-right. very important if calendar is RTL\n        for (j = 0; j < levels.length; j++) {\n            levels[j].sort(compareDaySegCols);\n        }\n        return levels;\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n        var segRows = [];\n        var i;\n        for (i = 0; i < this.dayGrid.rowCnt; i++) {\n            segRows.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segRows[segs[i].row].push(segs[i]);\n        }\n        return segRows;\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n    return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer));\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n    for (i = 0; i < otherSegs.length; i++) {\n        otherSeg = otherSegs[i];\n        if (otherSeg.firstCol <= seg.lastCol &&\n            otherSeg.lastCol >= seg.firstCol) {\n            return true;\n        }\n    }\n    return false;\n}\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n    function DayGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var sourceSeg = mirrorInfo.sourceSeg;\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // inject each new event skeleton into each associated row\n        this.dayGrid.rowEls.forEach(function (rowNode, row) {\n            var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n            var skeletonTopEl;\n            var skeletonTop;\n            // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n            if (sourceSeg && sourceSeg.row === row) {\n                skeletonTopEl = sourceSeg.el;\n            }\n            else {\n                skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                if (!skeletonTopEl) { // when no events\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                }\n            }\n            skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                rowNode.getBoundingClientRect().top; // the offsetParent origin\n            skeletonEl.style.top = skeletonTop + 'px';\n            skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n            rowNode.appendChild(skeletonEl);\n        });\n    };\n    return DayGridMirrorRenderer;\n}(DayGridEventRenderer));\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\nvar DayGridFillRenderer = /** @class */ (function (_super) {\n    __extends(DayGridFillRenderer, _super);\n    function DayGridFillRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.fillSegTag = 'td'; // override the default tag name\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    DayGridFillRenderer.prototype.renderSegs = function (type, context, segs) {\n        // don't render timed background events\n        if (type === 'bgEvent') {\n            segs = segs.filter(function (seg) {\n                return seg.eventRange.def.allDay;\n            });\n        }\n        _super.prototype.renderSegs.call(this, type, context, segs);\n    };\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var els = [];\n        var i;\n        var seg;\n        var skeletonEl;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            skeletonEl = this.renderFillRow(type, seg);\n            this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n            els.push(skeletonEl);\n        }\n        return els;\n    };\n    // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n        var dayGrid = this.dayGrid;\n        var isRtl = this.context.isRtl;\n        var colCnt = dayGrid.colCnt;\n        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n        var startCol = leftCol;\n        var endCol = rightCol + 1;\n        var className;\n        var skeletonEl;\n        var trEl;\n        if (type === 'businessHours') {\n            className = 'bgevent';\n        }\n        else {\n            className = type.toLowerCase();\n        }\n        skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n            '<table><tr></tr></table>' +\n            '</div>');\n        trEl = skeletonEl.getElementsByTagName('tr')[0];\n        if (startCol > 0) {\n            appendToElement(trEl, \n            // will create (startCol + 1) td's\n            new Array(startCol + 1).join(EMPTY_CELL_HTML));\n        }\n        seg.el.colSpan = endCol - startCol;\n        trEl.appendChild(seg.el);\n        if (endCol < colCnt) {\n            appendToElement(trEl, \n            // will create (colCnt - endCol) td's\n            new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n        }\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n        if (introHtml) {\n            if (isRtl) {\n                appendToElement(trEl, introHtml);\n            }\n            else {\n                prependToElement(trEl, introHtml);\n            }\n        }\n        return skeletonEl;\n    };\n    return DayGridFillRenderer;\n}(FillRenderer));\n\nvar DayTile = /** @class */ (function (_super) {\n    __extends(DayTile, _super);\n    function DayTile(el) {\n        var _this = _super.call(this, el) || this;\n        var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n        var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        return _this;\n    }\n    DayTile.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.el,\n            useEventCenter: false\n        });\n    };\n    DayTile.prototype.render = function (props, context) {\n        this.renderFrame(props.date);\n        this.renderFgEvents(context, props.fgSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDragInstances);\n        this.renderEventResize(props.eventResizeInstances);\n    };\n    DayTile.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderFrame.unrender(); // should unrender everything else\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    DayTile.prototype._renderFrame = function (date) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n        var title = dateEnv.format(date, createFormatter(options.dayPopoverFormat) // TODO: cache\n        );\n        this.el.innerHTML =\n            '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                '<span class=\"fc-title\">' +\n                htmlEscape(title) +\n                '</span>' +\n                '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                '</div>' +\n                '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                '<div class=\"fc-event-container\"></div>' +\n                '</div>';\n        this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var date = this.props.date; // HACK\n        if (positionLeft < elWidth && positionTop < elHeight) {\n            return {\n                component: this,\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) }\n                },\n                dayEl: this.el,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight\n                },\n                layer: 1\n            };\n        }\n    };\n    return DayTile;\n}(DateComponent));\nvar DayTileEventRenderer = /** @class */ (function (_super) {\n    __extends(DayTileEventRenderer, _super);\n    function DayTileEventRenderer(dayTile) {\n        var _this = _super.call(this) || this;\n        _this.dayTile = dayTile;\n        return _this;\n    }\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            this.dayTile.segContainerEl.appendChild(seg.el);\n        }\n    };\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer));\n\nvar DayBgRow = /** @class */ (function () {\n    function DayBgRow(context) {\n        this.context = context;\n    }\n    DayBgRow.prototype.renderHtml = function (props) {\n        var parts = [];\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n        }\n        if (!props.cells.length) {\n            parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n        }\n        if (this.context.options.dir === 'rtl') {\n            parts.reverse();\n        }\n        return '<tr>' + parts.join('') + '</tr>';\n    };\n    return DayBgRow;\n}());\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n    var classes = getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' +\n        (isDateValid ?\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' });\nvar DayGrid = /** @class */ (function (_super) {\n    __extends(DayGrid, _super);\n    function DayGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n        _this.isCellSizesDirty = false;\n        _this.renderProps = renderProps;\n        var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n        _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n        var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n        return _this;\n    }\n    DayGrid.prototype.render = function (props, context) {\n        var cells = props.cells;\n        this.rowCnt = cells.length;\n        this.colCnt = cells[0].length;\n        this.renderCells(cells, props.isRigid);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(context, props.dateSelectionSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n        if (this.segPopoverTile) {\n            this.updateSegPopoverTile();\n        }\n    };\n    DayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderCells.unrender(); // will unrender everything else\n    };\n    DayGrid.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n        var ownProps = this.props;\n        this.segPopoverTile.receiveProps({\n            date: date || this.segPopoverTile.props.date,\n            fgSegs: segs || this.segPopoverTile.props.fgSegs,\n            eventSelection: ownProps.eventSelection,\n            eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n            eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n        }, this.context);\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, dateEnv = _a.dateEnv;\n        var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n        var html = '';\n        var row;\n        var col;\n        for (row = 0; row < rowCnt; row++) {\n            html += this.renderDayRowHtml(row, isRigid);\n        }\n        this.el.innerHTML = html;\n        this.rowEls = findElements(this.el, '.fc-row');\n        this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        if (isRtl) {\n            this.cellEls.reverse();\n        }\n        this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n        );\n        this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n        true, false // horizontal\n        );\n        // trigger dayRender with each cell's element\n        for (row = 0; row < rowCnt; row++) {\n            for (col = 0; col < colCnt; col++) {\n                calendar.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[row][col].date),\n                        el: this.getCellEl(row, col),\n                        view: view\n                    }\n                ]);\n            }\n        }\n        this.isCellSizesDirty = true;\n    };\n    DayGrid.prototype._unrenderCells = function () {\n        this.removeSegPopover();\n    };\n    // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n        var theme = this.context.theme;\n        var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n        if (isRigid) {\n            classes.push('fc-rigid');\n        }\n        var bgRow = new DayBgRow(this.context);\n        return '' +\n            '<div class=\"' + classes.join(' ') + '\">' +\n            '<div class=\"fc-bg\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            bgRow.renderHtml({\n                cells: this.props.cells[row],\n                dateProfile: this.props.dateProfile,\n                renderIntroHtml: this.renderProps.renderBgIntroHtml\n            }) +\n            '</table>' +\n            '</div>' +\n            '<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            (this.getIsNumbersVisible() ?\n                '<thead>' +\n                    this.renderNumberTrHtml(row) +\n                    '</thead>' :\n                '') +\n            '</table>' +\n            '</div>' +\n            '</div>';\n    };\n    DayGrid.prototype.getIsNumbersVisible = function () {\n        return this.getIsDayNumbersVisible() ||\n            this.renderProps.cellWeekNumbersVisible ||\n            this.renderProps.colWeekNumbersVisible;\n    };\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n        return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n        var isRtl = this.context.isRtl;\n        var intro = this.renderProps.renderNumberIntroHtml(row, this);\n        return '' +\n            '<tr>' +\n            (isRtl ? '' : intro) +\n            this.renderNumberCellsHtml(row) +\n            (isRtl ? intro : '') +\n            '</tr>';\n    };\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n        var htmls = [];\n        var col;\n        var date;\n        for (col = 0; col < this.colCnt; col++) {\n            date = this.props.cells[row][col].date;\n            htmls.push(this.renderNumberCellHtml(date));\n        }\n        if (this.context.isRtl) {\n            htmls.reverse();\n        }\n        return htmls.join('');\n    };\n    // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options;\n        var html = '';\n        var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n        var classes;\n        var weekCalcFirstDow;\n        if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n            // no numbers in day cell (week number must be along the side)\n            return '<td></td>'; //  will create an empty space above events :(\n        }\n        classes = getDayClasses(date, this.props.dateProfile, this.context);\n        classes.unshift('fc-day-top');\n        if (this.renderProps.cellWeekNumbersVisible) {\n            weekCalcFirstDow = dateEnv.weekDow;\n        }\n        html += '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            '>';\n        if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n            html += buildGotoAnchorHtml(options, dateEnv, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n            );\n        }\n        if (isDayNumberVisible) {\n            html += buildGotoAnchorHtml(options, dateEnv, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n            );\n        }\n        html += '</td>';\n        return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.updateSize = function (isResize) {\n        var calendar = this.context.calendar;\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize ||\n            this.isCellSizesDirty ||\n            calendar.isEventsUpdated // hack\n        ) {\n            this.buildPositionCaches();\n            this.isCellSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    DayGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildRowPositions();\n    };\n    DayGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    DayGrid.prototype.buildRowPositions = function () {\n        this.rowPositions.build();\n        this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row]\n                }\n            };\n        }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n    DayGrid.prototype.getCellEl = function (row, col) {\n        return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n        }\n    };\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    DayGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.removeSegPopover = function () {\n        if (this.segPopover) {\n            this.segPopover.hide(); // in handler, will call segPopover's removeElement\n        }\n    };\n    // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n    DayGrid.prototype.limitRows = function (levelLimit) {\n        var rowStructs = this.eventRenderer.rowStructs || [];\n        var row; // row #\n        var rowLevelLimit;\n        for (row = 0; row < rowStructs.length; row++) {\n            this.unlimitRow(row);\n            if (!levelLimit) {\n                rowLevelLimit = false;\n            }\n            else if (typeof levelLimit === 'number') {\n                rowLevelLimit = levelLimit;\n            }\n            else {\n                rowLevelLimit = this.computeRowLevelLimit(row);\n            }\n            if (rowLevelLimit !== false) {\n                this.limitRow(row, rowLevelLimit);\n            }\n        }\n    };\n    // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n        var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n        var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n        var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n        var i;\n        var trEl;\n        // Reveal one level <tr> at a time and stop when we find one out of bounds\n        for (i = 0; i < trEls.length; i++) {\n            trEl = trEls[i];\n            trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n            if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                return i;\n            }\n        }\n        return false; // should not limit at all\n    };\n    // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n        var _this = this;\n        var colCnt = this.colCnt;\n        var isRtl = this.context.isRtl;\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n        var col = 0; // col #, left-to-right (not chronologically)\n        var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n        var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n        var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n        var i;\n        var seg;\n        var segsBelow; // array of segment objects below `seg` in the current `col`\n        var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n        var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n        var td;\n        var rowSpan;\n        var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n        var j;\n        var moreTd;\n        var moreWrap;\n        var moreLink;\n        // Iterates through empty level cells and places \"more\" links inside if need be\n        var emptyCellsUntil = function (endCol) {\n            while (col < endCol) {\n                segsBelow = _this.getCellSegs(row, col, levelLimit);\n                if (segsBelow.length) {\n                    td = cellMatrix[levelLimit - 1][col];\n                    moreLink = _this.renderMoreLink(row, col, segsBelow);\n                    moreWrap = createElement('div', null, moreLink);\n                    td.appendChild(moreWrap);\n                    moreNodes.push(moreWrap);\n                }\n                col++;\n            }\n        };\n        if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n            levelSegs = rowStruct.segLevels[levelLimit - 1];\n            cellMatrix = rowStruct.cellMatrix;\n            limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n            limitedNodes.forEach(function (node) {\n                node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n            });\n            // iterate though segments in the last allowable level\n            for (i = 0; i < levelSegs.length; i++) {\n                seg = levelSegs[i];\n                var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                emptyCellsUntil(leftCol); // process empty cells before the segment\n                // determine *all* segments below `seg` that occupy the same columns\n                colSegsBelow = [];\n                totalSegsBelow = 0;\n                while (col <= rightCol) {\n                    segsBelow = this.getCellSegs(row, col, levelLimit);\n                    colSegsBelow.push(segsBelow);\n                    totalSegsBelow += segsBelow.length;\n                    col++;\n                }\n                if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                    td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                    rowSpan = td.rowSpan || 1;\n                    segMoreNodes = [];\n                    // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                    for (j = 0; j < colSegsBelow.length; j++) {\n                        moreTd = createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                        segsBelow = colSegsBelow[j];\n                        moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                        );\n                        moreWrap = createElement('div', null, moreLink);\n                        moreTd.appendChild(moreWrap);\n                        segMoreNodes.push(moreTd);\n                        moreNodes.push(moreTd);\n                    }\n                    td.classList.add('fc-limited');\n                    insertAfterElement(td, segMoreNodes);\n                    limitedNodes.push(td);\n                }\n            }\n            emptyCellsUntil(this.colCnt); // finish off the level\n            rowStruct.moreEls = moreNodes; // for easy undoing later\n            rowStruct.limitedEls = limitedNodes; // for easy undoing later\n        }\n    };\n    // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n    DayGrid.prototype.unlimitRow = function (row) {\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        if (rowStruct.moreEls) {\n            rowStruct.moreEls.forEach(removeElement);\n            rowStruct.moreEls = null;\n        }\n        if (rowStruct.limitedEls) {\n            rowStruct.limitedEls.forEach(function (limitedEl) {\n                limitedEl.classList.remove('fc-limited');\n            });\n            rowStruct.limitedEls = null;\n        }\n    };\n    // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, dateEnv = _a.dateEnv, options = _a.options, isRtl = _a.isRtl;\n        var a = createElement('a', { className: 'fc-more' });\n        a.innerText = this.getMoreLinkText(hiddenSegs.length);\n        a.addEventListener('click', function (ev) {\n            var clickOption = options.eventLimitClick;\n            var _col = isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var date = _this.props.cells[row][_col].date;\n            var moreEl = ev.currentTarget;\n            var dayEl = _this.getCellEl(row, col);\n            var allSegs = _this.getCellSegs(row, col);\n            // rescope the segments to be within the cell's date\n            var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n            var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n            if (typeof clickOption === 'function') {\n                // the returned value can be an atomic option\n                clickOption = calendar.publiclyTrigger('eventLimitClick', [\n                    {\n                        date: dateEnv.toDate(date),\n                        allDay: true,\n                        dayEl: dayEl,\n                        moreEl: moreEl,\n                        segs: reslicedAllSegs,\n                        hiddenSegs: reslicedHiddenSegs,\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n            }\n            if (clickOption === 'popover') {\n                _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                calendar.zoomTo(date, clickOption);\n            }\n        });\n        return a;\n    };\n    // Reveals the popover that displays all events within a cell\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, isRtl = _a.isRtl;\n        var _col = isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n        var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n        var topEl; // the element we want to match the top coordinate of\n        var options;\n        if (this.rowCnt === 1) {\n            topEl = view.el; // will cause the popover to cover any sort of header\n        }\n        else {\n            topEl = this.rowEls[row]; // will align with top of row\n        }\n        options = {\n            className: 'fc-more-popover ' + theme.getClass('popover'),\n            parentEl: view.el,\n            top: computeRect(topEl).top,\n            autoHide: true,\n            content: function (el) {\n                _this.segPopoverTile = new DayTile(el);\n                _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n            },\n            hide: function () {\n                _this.segPopoverTile.destroy();\n                _this.segPopoverTile = null;\n                _this.segPopover.destroy();\n                _this.segPopover = null;\n            }\n        };\n        // Determine horizontal coordinate.\n        // We use the moreWrap instead of the <td> to avoid border confusion.\n        if (isRtl) {\n            options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n        }\n        else {\n            options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n        }\n        this.segPopover = new Popover(options);\n        this.segPopover.show();\n        calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    };\n    // Given the events within an array of segment objects, reslice them to be in a single day\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n        var dayStart = dayDate;\n        var dayEnd = addDays(dayStart, 1);\n        var dayRange = { start: dayStart, end: dayEnd };\n        var newSegs = [];\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            var eventRange = seg.eventRange;\n            var origRange = eventRange.range;\n            var slicedRange = intersectRanges(origRange, dayRange);\n            if (slicedRange) {\n                newSegs.push(__assign({}, seg, { eventRange: {\n                        def: eventRange.def,\n                        ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                        instance: eventRange.instance,\n                        range: slicedRange\n                    }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n            }\n        }\n        return newSegs;\n    };\n    // Generates the text that should be inside a \"more\" link, given the number of events it represents\n    DayGrid.prototype.getMoreLinkText = function (num) {\n        var opt = this.context.options.eventLimitText;\n        if (typeof opt === 'function') {\n            return opt(num);\n        }\n        else {\n            return '+' + num + ' ' + opt;\n        }\n    };\n    // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n        var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n        var level = startLevel || 0;\n        var segs = [];\n        var seg;\n        while (level < segMatrix.length) {\n            seg = segMatrix[level][col];\n            if (seg) {\n                segs.push(seg);\n            }\n            level++;\n        }\n        return segs;\n    };\n    return DayGrid;\n}(DateComponent));\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({ week: 'numeric' });\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar AbstractDayGridView = /** @class */ (function (_super) {\n    __extends(AbstractDayGridView, _super);\n    function AbstractDayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    htmlEscape(options.weekLabel) +\n                    '</span>' +\n                    '</th>';\n            }\n            return '';\n        };\n        /* Day Grid Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n        _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n            var _a = _this.context, options = _a.options, dateEnv = _a.dateEnv;\n            var weekStart = dayGrid.props.cells[row][0].date;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                    ) +\n                    '</td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before the day bg cells for each day-row\n        _this.renderDayGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before every other type of row generated by DayGrid.\n        // Affects mirror-skeleton and highlight-skeleton rows.\n        _this.renderDayGridIntroHtml = function () {\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        return _this;\n    }\n    AbstractDayGridView.prototype._processOptions = function (options) {\n        if (options.weekNumbers) {\n            if (options.weekNumbersWithinDays) {\n                this.cellWeekNumbersVisible = true;\n                this.colWeekNumbersVisible = false;\n            }\n            else {\n                this.cellWeekNumbersVisible = false;\n                this.colWeekNumbersVisible = true;\n            }\n        }\n        else {\n            this.colWeekNumbersVisible = false;\n            this.cellWeekNumbersVisible = false;\n        }\n    };\n    AbstractDayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.processOptions(context.options);\n        this.renderSkeleton(context);\n    };\n    AbstractDayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractDayGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-dayGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var dayGridContainerEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n        dayGridContainerEl.classList.add('fc-day-grid-container');\n        var dayGridEl = createElement('div', { className: 'fc-day-grid' });\n        dayGridContainerEl.appendChild(dayGridEl);\n        this.dayGrid = new DayGrid(dayGridEl, {\n            renderNumberIntroHtml: this.renderDayGridNumberIntroHtml,\n            renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n            renderIntroHtml: this.renderDayGridIntroHtml,\n            colWeekNumbersVisible: this.colWeekNumbersVisible,\n            cellWeekNumbersVisible: this.cellWeekNumbersVisible\n        });\n    };\n    AbstractDayGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-dayGrid-view');\n        this.dayGrid.destroy();\n        this.scroller.destroy();\n    };\n    // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n    AbstractDayGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    // Generates an HTML attribute string for setting the width of the week number column, if it is known\n    AbstractDayGridView.prototype.weekNumberStyleAttr = function () {\n        if (this.weekNumberWidth != null) {\n            return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n        }\n        return '';\n    };\n    // Determines whether each row should have a constant height\n    AbstractDayGridView.prototype.hasRigidRows = function () {\n        var eventLimit = this.context.options.eventLimit;\n        return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.dayGrid.updateSize(isResize);\n    };\n    // Refreshes the horizontal dimensions of the view\n    AbstractDayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var dayGrid = this.dayGrid;\n        var eventLimit = this.context.options.eventLimit;\n        var headRowEl = this.header ? this.header.el : null; // HACK\n        var scrollerHeight;\n        var scrollbarWidths;\n        // hack to give the view some height prior to dayGrid's columns being rendered\n        // TODO: separate setting height from scroller VS dayGrid.\n        if (!dayGrid.rowEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        if (this.colWeekNumbersVisible) {\n            // Make sure all week number cells running down the side have the same width.\n            this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n        }\n        // reset all heights to be natural\n        this.scroller.clear();\n        if (headRowEl) {\n            uncompensateScroll(headRowEl);\n        }\n        dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n        // is the event limit a constant level number?\n        if (eventLimit && typeof eventLimit === 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n        }\n        // distribute the height to the rows\n        // (viewHeight is a \"recommended\" value if isAuto)\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.setGridHeight(scrollerHeight, isAuto);\n        // is the event limit dynamically calculated?\n        if (eventLimit && typeof eventLimit !== 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                if (headRowEl) {\n                    compensateScroll(headRowEl, scrollbarWidths);\n                }\n                // doing the scrollbar compensation might have created text overflow which created more height. redo\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractDayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    // Sets the height of just the DayGrid component in this view\n    AbstractDayGridView.prototype.setGridHeight = function (height, isAuto) {\n        if (this.context.options.monthMode) {\n            // if auto, make the height of each row the height that it would be if there were 6 weeks\n            if (isAuto) {\n                height *= this.dayGrid.rowCnt / 6;\n            }\n            distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n        }\n        else {\n            if (isAuto) {\n                undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n            }\n            else {\n                distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n            }\n        }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.computeDateScroll = function (duration) {\n        return { top: 0 };\n    };\n    AbstractDayGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractDayGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    return AbstractDayGridView;\n}(View));\nAbstractDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid = /** @class */ (function (_super) {\n    __extends(SimpleDayGrid, _super);\n    function SimpleDayGrid(dayGrid) {\n        var _this = _super.call(this, dayGrid.el) || this;\n        _this.slicer = new DayGridSlicer();\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    SimpleDayGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, { el: this.dayGrid.el });\n    };\n    SimpleDayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleDayGrid.prototype.render = function (props, context) {\n        var dayGrid = this.dayGrid;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, context.calendar, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }), context);\n    };\n    SimpleDayGrid.prototype.buildPositionCaches = function () {\n        this.dayGrid.buildPositionCaches();\n    };\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.dayGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleDayGrid;\n}(DateComponent));\nvar DayGridSlicer = /** @class */ (function (_super) {\n    __extends(DayGridSlicer, _super);\n    function DayGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n        return dayTable.sliceRange(dateRange);\n    };\n    return DayGridSlicer;\n}(Slicer));\n\nvar DayGridView = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    DayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // will call _renderSkeleton/_unrenderSkeleton\n        var dateProfile = this.props.dateProfile;\n        var dayTable = this.dayTable =\n            this.buildDayTable(dateProfile, props.dateProfileGenerator);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: dayTable.rowCnt === 1,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleDayGrid.receiveProps({\n            dateProfile: dateProfile,\n            dayTable: dayTable,\n            businessHours: props.businessHours,\n            dateSelection: props.dateSelection,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isRigid: this.hasRigidRows(),\n            nextDayThreshold: this.context.nextDayThreshold\n        }, context);\n    };\n    DayGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n    };\n    DayGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleDayGrid.destroy();\n    };\n    return DayGridView;\n}(AbstractDayGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n        dayGrid: DayGridView,\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 }\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 }\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true\n        }\n    }\n});\n\nexport default main;\nexport { AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };\n","export class ReminderBase {\r\n    Subject: string;\r\n    Body: string;\r\n    MailTo: string;\r\n    RecurringStartDate?: string;\r\n    RecurringEndDate?: string;\r\n    Duration: number;\r\n    VisitFrequency: number;\r\n    ReminderDate: string;\r\n    IsActive: boolean;\r\n}\r\n","/*!\nFullCalendar Time Grid Plugin v4.4.2\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { createFormatter, removeElement, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, isMultiDayRange, htmlEscape, compareByFieldSpecs, applyStyle, FgEventRenderer, buildSegCompareObj, FillRenderer, memoize, memoizeRendering, createDuration, wholeDivideDurations, findElements, PositionCache, startOfDay, asRoughMs, formatIsoTimeString, addDurations, htmlToElement, createElement, multiplyDuration, DateComponent, hasBgRendering, Splitter, diffDays, buildGotoAnchorHtml, getAllDayHtml, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, View, intersectRanges, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\nimport { DayBgRow, DayGrid, SimpleDayGrid } from '@fullcalendar/daygrid';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/*\nOnly handles foreground segs.\nDoes not own rendering. Use for low-level util methods by TimeGrid.\n*/\nvar TimeGridEventRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridEventRenderer, _super);\n    function TimeGridEventRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        _super.prototype.renderSegs.call(this, context, segs, mirrorInfo);\n        // TODO: dont do every time. memoize\n        this.fullTimeFormat = createFormatter({\n            hour: 'numeric',\n            minute: '2-digit',\n            separator: this.context.options.defaultRangeSeparator\n        });\n    };\n    // Given an array of foreground segments, render a DOM element for each, computes position,\n    // and attaches to the column inner-container elements.\n    TimeGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var segsByCol = this.timeGrid.groupSegsByCol(segs);\n        // order the segs within each column\n        // TODO: have groupSegsByCol do this?\n        for (var col = 0; col < segsByCol.length; col++) {\n            segsByCol[col] = this.sortEventSegs(segsByCol[col]);\n        }\n        this.segsByCol = segsByCol;\n        this.timeGrid.attachSegsByCol(segsByCol, this.timeGrid.fgContainerEls);\n    };\n    TimeGridEventRenderer.prototype.detachSegs = function (segs) {\n        segs.forEach(function (seg) {\n            removeElement(seg.el);\n        });\n        this.segsByCol = null;\n    };\n    TimeGridEventRenderer.prototype.computeSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.computeSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.computeSegHorizontals(segsByCol[col]); // compute horizontal coordinates, z-index's, and reorder the array\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.assignSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.assignSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.assignSegCss(segsByCol[col]);\n            }\n        }\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    TimeGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            meridiem: false\n        };\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    TimeGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Renders the HTML for a single event segment's default rendering\n    TimeGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(this.context, eventDef, eventUi);\n        var isResizableFromStart = seg.isStart && computeEventStartResizable(this.context, eventDef, eventUi);\n        var isResizableFromEnd = seg.isEnd && computeEventEndResizable(this.context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeText;\n        var fullTimeText; // more verbose time text. for the print stylesheet\n        var startTimeText; // just the start time text\n        classes.unshift('fc-time-grid-event');\n        // if the event appears to span more than one day...\n        if (isMultiDayRange(eventRange.range)) {\n            // Don't display time text on segments that run entirely through a day.\n            // That would appear as midnight-midnight and would look dumb.\n            // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n            if (seg.isStart || seg.isEnd) {\n                var unzonedStart = seg.start;\n                var unzonedEnd = seg.end;\n                timeText = this._getTimeText(unzonedStart, unzonedEnd, allDay); // TODO: give the timezones\n                fullTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, this.fullTimeFormat);\n                startTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, null, false); // displayEnd=false\n            }\n        }\n        else {\n            // Display the normal time text for the *event's* times\n            timeText = this.getTimeText(eventRange);\n            fullTimeText = this.getTimeText(eventRange, this.fullTimeFormat);\n            startTimeText = this.getTimeText(eventRange, null, false); // displayEnd=false\n        }\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (timeText ?\n                '<div class=\"fc-time\"' +\n                    ' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n                    ' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n                    '>' +\n                    '<span>' + htmlEscape(timeText) + '</span>' +\n                    '</div>' :\n                '') +\n            (eventDef.title ?\n                '<div class=\"fc-title\">' +\n                    htmlEscape(eventDef.title) +\n                    '</div>' :\n                '') +\n            '</div>' +\n            /* TODO: write CSS for this\n            (isResizableFromStart ?\n              '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n              ''\n              ) +\n            */\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n    // Assumed the segs are already ordered.\n    // NOTE: Also reorders the given array by date!\n    TimeGridEventRenderer.prototype.computeSegHorizontals = function (segs) {\n        var levels;\n        var level0;\n        var i;\n        levels = buildSlotSegLevels(segs);\n        computeForwardSlotSegs(levels);\n        if ((level0 = levels[0])) {\n            for (i = 0; i < level0.length; i++) {\n                computeSlotSegPressures(level0[i]);\n            }\n            for (i = 0; i < level0.length; i++) {\n                this.computeSegForwardBack(level0[i], 0, 0);\n            }\n        }\n    };\n    // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n    // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n    // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n    //\n    // The segment might be part of a \"series\", which means consecutive segments with the same pressure\n    // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n    // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n    // coordinate of the first segment in the series.\n    TimeGridEventRenderer.prototype.computeSegForwardBack = function (seg, seriesBackwardPressure, seriesBackwardCoord) {\n        var forwardSegs = seg.forwardSegs;\n        var i;\n        if (seg.forwardCoord === undefined) { // not already computed\n            if (!forwardSegs.length) {\n                // if there are no forward segments, this segment should butt up against the edge\n                seg.forwardCoord = 1;\n            }\n            else {\n                // sort highest pressure first\n                this.sortForwardSegs(forwardSegs);\n                // this segment's forwardCoord will be calculated from the backwardCoord of the\n                // highest-pressure forward segment.\n                this.computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n                seg.forwardCoord = forwardSegs[0].backwardCoord;\n            }\n            // calculate the backwardCoord from the forwardCoord. consider the series\n            seg.backwardCoord = seg.forwardCoord -\n                (seg.forwardCoord - seriesBackwardCoord) / // available width for series\n                    (seriesBackwardPressure + 1); // # of segments in the series\n            // use this segment's coordinates to computed the coordinates of the less-pressurized\n            // forward segments\n            for (i = 0; i < forwardSegs.length; i++) {\n                this.computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.sortForwardSegs = function (forwardSegs) {\n        var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n        var specs = [\n            // put higher-pressure first\n            { field: 'forwardPressure', order: -1 },\n            // put segments that are closer to initial edge first (and favor ones with no coords yet)\n            { field: 'backwardCoord', order: 1 }\n        ].concat(this.context.eventOrderSpecs);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    // Given foreground event segments that have already had their position coordinates computed,\n    // assigns position-related CSS values to their elements.\n    TimeGridEventRenderer.prototype.assignSegCss = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            applyStyle(seg.el, this.generateSegCss(seg));\n            if (seg.level > 0) {\n                seg.el.classList.add('fc-time-grid-event-inset');\n            }\n            // if the event is short that the title will be cut off,\n            // attach a className that condenses the title into the time area.\n            if (seg.eventRange.def.title && seg.bottom - seg.top < 30) {\n                seg.el.classList.add('fc-short'); // TODO: \"condensed\" is a better name\n            }\n        }\n    };\n    // Generates an object with CSS properties/values that should be applied to an event segment element.\n    // Contains important positioning-related properties that should be applied to any event element, customized or not.\n    TimeGridEventRenderer.prototype.generateSegCss = function (seg) {\n        var shouldOverlap = this.context.options.slotEventOverlap;\n        var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n        var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n        var props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n        var isRtl = this.context.isRtl;\n        var left; // amount of space from left edge, a fraction of the total width\n        var right; // amount of space from right edge, a fraction of the total width\n        if (shouldOverlap) {\n            // double the width, but don't go beyond the maximum forward coordinate (1.0)\n            forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n        }\n        if (isRtl) {\n            left = 1 - forwardCoord;\n            right = backwardCoord;\n        }\n        else {\n            left = backwardCoord;\n            right = 1 - forwardCoord;\n        }\n        props.zIndex = seg.level + 1; // convert from 0-base to 1-based\n        props.left = left * 100 + '%';\n        props.right = right * 100 + '%';\n        if (shouldOverlap && seg.forwardPressure) {\n            // add padding to the edge so that forward stacked events don't cover the resizer's icon\n            props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n        }\n        return props;\n    };\n    return TimeGridEventRenderer;\n}(FgEventRenderer));\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n    var levels = [];\n    var i;\n    var seg;\n    var j;\n    for (i = 0; i < segs.length; i++) {\n        seg = segs[i];\n        // go through all the levels and stop on the first level where there are no collisions\n        for (j = 0; j < levels.length; j++) {\n            if (!computeSlotSegCollisions(seg, levels[j]).length) {\n                break;\n            }\n        }\n        seg.level = j;\n        (levels[j] || (levels[j] = [])).push(seg);\n    }\n    return levels;\n}\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n    var i;\n    var level;\n    var j;\n    var seg;\n    var k;\n    for (i = 0; i < levels.length; i++) {\n        level = levels[i];\n        for (j = 0; j < level.length; j++) {\n            seg = level[j];\n            seg.forwardSegs = [];\n            for (k = i + 1; k < levels.length; k++) {\n                computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n            }\n        }\n    }\n}\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n    var forwardSegs = seg.forwardSegs;\n    var forwardPressure = 0;\n    var i;\n    var forwardSeg;\n    if (seg.forwardPressure === undefined) { // not already computed\n        for (i = 0; i < forwardSegs.length; i++) {\n            forwardSeg = forwardSegs[i];\n            // figure out the child's maximum forward path\n            computeSlotSegPressures(forwardSeg);\n            // either use the existing maximum, or use the child's forward pressure\n            // plus one (for the forwardSeg itself)\n            forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n        }\n        seg.forwardPressure = forwardPressure;\n    }\n}\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n    if (results === void 0) { results = []; }\n    for (var i = 0; i < otherSegs.length; i++) {\n        if (isSlotSegCollision(seg, otherSegs[i])) {\n            results.push(otherSegs[i]);\n        }\n    }\n    return results;\n}\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n    return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\nfunction buildTimeGridSegCompareObj(seg) {\n    var obj = buildSegCompareObj(seg);\n    obj.forwardPressure = seg.forwardPressure;\n    obj.backwardCoord = seg.backwardCoord;\n    return obj;\n}\n\nvar TimeGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridMirrorRenderer, _super);\n    function TimeGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        this.segsByCol = this.timeGrid.groupSegsByCol(segs);\n        this.timeGrid.attachSegsByCol(this.segsByCol, this.timeGrid.mirrorContainerEls);\n        this.sourceSeg = mirrorInfo.sourceSeg;\n    };\n    TimeGridMirrorRenderer.prototype.generateSegCss = function (seg) {\n        var props = _super.prototype.generateSegCss.call(this, seg);\n        var sourceSeg = this.sourceSeg;\n        if (sourceSeg && sourceSeg.col === seg.col) {\n            var sourceSegProps = _super.prototype.generateSegCss.call(this, sourceSeg);\n            props.left = sourceSegProps.left;\n            props.right = sourceSegProps.right;\n            props.marginLeft = sourceSegProps.marginLeft;\n            props.marginRight = sourceSegProps.marginRight;\n        }\n        return props;\n    };\n    return TimeGridMirrorRenderer;\n}(TimeGridEventRenderer));\n\nvar TimeGridFillRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridFillRenderer, _super);\n    function TimeGridFillRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var timeGrid = this.timeGrid;\n        var containerEls;\n        // TODO: more efficient lookup\n        if (type === 'bgEvent') {\n            containerEls = timeGrid.bgContainerEls;\n        }\n        else if (type === 'businessHours') {\n            containerEls = timeGrid.businessContainerEls;\n        }\n        else if (type === 'highlight') {\n            containerEls = timeGrid.highlightContainerEls;\n        }\n        timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n        return segs.map(function (seg) {\n            return seg.el;\n        });\n    };\n    TimeGridFillRenderer.prototype.computeSegSizes = function (segs) {\n        this.timeGrid.computeSegVerticals(segs);\n    };\n    TimeGridFillRenderer.prototype.assignSegSizes = function (segs) {\n        this.timeGrid.assignSegVerticals(segs);\n    };\n    return TimeGridFillRenderer;\n}(FillRenderer));\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { seconds: 30 },\n    { seconds: 15 }\n];\nvar TimeGrid = /** @class */ (function (_super) {\n    __extends(TimeGrid, _super);\n    function TimeGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.isSlatSizesDirty = false;\n        _this.isColSizesDirty = false;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton);\n        _this.renderSlats = memoizeRendering(_this._renderSlats, null, [_this.renderSkeleton]);\n        _this.renderColumns = memoizeRendering(_this._renderColumns, _this._unrenderColumns, [_this.renderSkeleton]);\n        _this.renderProps = renderProps;\n        var renderColumns = _this.renderColumns;\n        var eventRenderer = _this.eventRenderer = new TimeGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new TimeGridFillRenderer(_this);\n        _this.mirrorRenderer = new TimeGridMirrorRenderer(_this);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderColumns]);\n        _this.renderDateSelection = memoizeRendering(_this._renderDateSelection, _this._unrenderDateSelection, [renderColumns]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderColumns]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderColumns]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderColumns]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderColumns]);\n        return _this;\n    }\n    /* Options\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Parses various options into properties of this object\n    // MUST have context already set\n    TimeGrid.prototype._processOptions = function (options) {\n        var slotDuration = options.slotDuration, snapDuration = options.snapDuration;\n        var snapsPerSlot;\n        var input;\n        slotDuration = createDuration(slotDuration);\n        snapDuration = snapDuration ? createDuration(snapDuration) : slotDuration;\n        snapsPerSlot = wholeDivideDurations(slotDuration, snapDuration);\n        if (snapsPerSlot === null) {\n            snapDuration = slotDuration;\n            snapsPerSlot = 1;\n            // TODO: say warning?\n        }\n        this.slotDuration = slotDuration;\n        this.snapDuration = snapDuration;\n        this.snapsPerSlot = snapsPerSlot;\n        // might be an array value (for TimelineView).\n        // if so, getting the most granular entry (the last one probably).\n        input = options.slotLabelFormat;\n        if (Array.isArray(input)) {\n            input = input[input.length - 1];\n        }\n        this.labelFormat = createFormatter(input || {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'short'\n        });\n        input = options.slotLabelInterval;\n        this.labelInterval = input ?\n            createDuration(input) :\n            this.computeLabelInterval(slotDuration);\n    };\n    // Computes an automatic value for slotLabelInterval\n    TimeGrid.prototype.computeLabelInterval = function (slotDuration) {\n        var i;\n        var labelInterval;\n        var slotsPerLabel;\n        // find the smallest stock label interval that results in more than one slots-per-label\n        for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n            labelInterval = createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);\n            slotsPerLabel = wholeDivideDurations(labelInterval, slotDuration);\n            if (slotsPerLabel !== null && slotsPerLabel > 1) {\n                return labelInterval;\n            }\n        }\n        return slotDuration; // fall back\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.render = function (props, context) {\n        this.processOptions(context.options);\n        var cells = props.cells;\n        this.colCnt = cells.length;\n        this.renderSkeleton(context.theme);\n        this.renderSlats(props.dateProfile);\n        this.renderColumns(props.cells, props.dateProfile);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(props.dateSelectionSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n    };\n    TimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        // should unrender everything else too\n        this.renderSlats.unrender();\n        this.renderColumns.unrender();\n        this.renderSkeleton.unrender();\n    };\n    TimeGrid.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize || this.isSlatSizesDirty) {\n            this.buildSlatPositions();\n            this.isSlatSizesDirty = false;\n        }\n        if (isResize || this.isColSizesDirty) {\n            this.buildColPositions();\n            this.isColSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    TimeGrid.prototype._renderSkeleton = function (theme) {\n        var el = this.el;\n        el.innerHTML =\n            '<div class=\"fc-bg\"></div>' +\n                '<div class=\"fc-slats\"></div>' +\n                '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" style=\"display:none\" />';\n        this.rootBgContainerEl = el.querySelector('.fc-bg');\n        this.slatContainerEl = el.querySelector('.fc-slats');\n        this.bottomRuleEl = el.querySelector('.fc-divider');\n    };\n    TimeGrid.prototype._renderSlats = function (dateProfile) {\n        var theme = this.context.theme;\n        this.slatContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                this.renderSlatRowHtml(dateProfile) +\n                '</table>';\n        this.slatEls = findElements(this.slatContainerEl, 'tr');\n        this.slatPositions = new PositionCache(this.el, this.slatEls, false, true // vertical\n        );\n        this.isSlatSizesDirty = true;\n    };\n    // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n    TimeGrid.prototype.renderSlatRowHtml = function (dateProfile) {\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme, isRtl = _a.isRtl;\n        var html = '';\n        var dayStart = startOfDay(dateProfile.renderRange.start);\n        var slotTime = dateProfile.minTime;\n        var slotIterator = createDuration(0);\n        var slotDate; // will be on the view's first day, but we only care about its time\n        var isLabeled;\n        var axisHtml;\n        // Calculate the time for each slot\n        while (asRoughMs(slotTime) < asRoughMs(dateProfile.maxTime)) {\n            slotDate = dateEnv.add(dayStart, slotTime);\n            isLabeled = wholeDivideDurations(slotIterator, this.labelInterval) !== null;\n            axisHtml =\n                '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\">' +\n                    (isLabeled ?\n                        '<span>' + // for matchCellWidths\n                            htmlEscape(dateEnv.format(slotDate, this.labelFormat)) +\n                            '</span>' :\n                        '') +\n                    '</td>';\n            html +=\n                '<tr data-time=\"' + formatIsoTimeString(slotDate) + '\"' +\n                    (isLabeled ? '' : ' class=\"fc-minor\"') +\n                    '>' +\n                    (!isRtl ? axisHtml : '') +\n                    '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                    (isRtl ? axisHtml : '') +\n                    '</tr>';\n            slotTime = addDurations(slotTime, this.slotDuration);\n            slotIterator = addDurations(slotIterator, this.slotDuration);\n        }\n        return html;\n    };\n    TimeGrid.prototype._renderColumns = function (cells, dateProfile) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, theme = _a.theme, dateEnv = _a.dateEnv;\n        var bgRow = new DayBgRow(this.context);\n        this.rootBgContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: cells,\n                    dateProfile: dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>';\n        this.colEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        for (var col = 0; col < this.colCnt; col++) {\n            calendar.publiclyTrigger('dayRender', [\n                {\n                    date: dateEnv.toDate(cells[col].date),\n                    el: this.colEls[col],\n                    view: view\n                }\n            ]);\n        }\n        if (isRtl) {\n            this.colEls.reverse();\n        }\n        this.colPositions = new PositionCache(this.el, this.colEls, true, // horizontal\n        false);\n        this.renderContentSkeleton();\n        this.isColSizesDirty = true;\n    };\n    TimeGrid.prototype._unrenderColumns = function () {\n        this.unrenderContentSkeleton();\n    };\n    /* Content Skeleton\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders the DOM that the view's content will live in\n    TimeGrid.prototype.renderContentSkeleton = function () {\n        var isRtl = this.context.isRtl;\n        var parts = [];\n        var skeletonEl;\n        parts.push(this.renderProps.renderIntroHtml());\n        for (var i = 0; i < this.colCnt; i++) {\n            parts.push('<td>' +\n                '<div class=\"fc-content-col\">' +\n                '<div class=\"fc-event-container fc-mirror-container\"></div>' +\n                '<div class=\"fc-event-container\"></div>' +\n                '<div class=\"fc-highlight-container\"></div>' +\n                '<div class=\"fc-bgevent-container\"></div>' +\n                '<div class=\"fc-business-container\"></div>' +\n                '</div>' +\n                '</td>');\n        }\n        if (isRtl) {\n            parts.reverse();\n        }\n        skeletonEl = this.contentSkeletonEl = htmlToElement('<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            '<tr>' + parts.join('') + '</tr>' +\n            '</table>' +\n            '</div>');\n        this.colContainerEls = findElements(skeletonEl, '.fc-content-col');\n        this.mirrorContainerEls = findElements(skeletonEl, '.fc-mirror-container');\n        this.fgContainerEls = findElements(skeletonEl, '.fc-event-container:not(.fc-mirror-container)');\n        this.bgContainerEls = findElements(skeletonEl, '.fc-bgevent-container');\n        this.highlightContainerEls = findElements(skeletonEl, '.fc-highlight-container');\n        this.businessContainerEls = findElements(skeletonEl, '.fc-business-container');\n        if (isRtl) {\n            this.colContainerEls.reverse();\n            this.mirrorContainerEls.reverse();\n            this.fgContainerEls.reverse();\n            this.bgContainerEls.reverse();\n            this.highlightContainerEls.reverse();\n            this.businessContainerEls.reverse();\n        }\n        this.el.appendChild(skeletonEl);\n    };\n    TimeGrid.prototype.unrenderContentSkeleton = function () {\n        removeElement(this.contentSkeletonEl);\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n    TimeGrid.prototype.groupSegsByCol = function (segs) {\n        var segsByCol = [];\n        var i;\n        for (i = 0; i < this.colCnt; i++) {\n            segsByCol.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segsByCol[segs[i].col].push(segs[i]);\n        }\n        return segsByCol;\n    };\n    // Given segments grouped by column, insert the segments' elements into a parallel array of container\n    // elements, each living within a column.\n    TimeGrid.prototype.attachSegsByCol = function (segsByCol, containerEls) {\n        var col;\n        var segs;\n        var i;\n        for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n            segs = segsByCol[col];\n            for (i = 0; i < segs.length; i++) {\n                containerEls[col].appendChild(segs[i].el);\n            }\n        }\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getNowIndicatorUnit = function () {\n        return 'minute'; // will refresh on the minute\n    };\n    TimeGrid.prototype.renderNowIndicator = function (segs, date) {\n        // HACK: if date columns not ready for some reason (scheduler)\n        if (!this.colContainerEls) {\n            return;\n        }\n        var top = this.computeDateTop(date);\n        var nodes = [];\n        var i;\n        // render lines within the columns\n        for (i = 0; i < segs.length; i++) {\n            var lineEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-line' });\n            lineEl.style.top = top + 'px';\n            this.colContainerEls[segs[i].col].appendChild(lineEl);\n            nodes.push(lineEl);\n        }\n        // render an arrow over the axis\n        if (segs.length > 0) { // is the current time in view?\n            var arrowEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-arrow' });\n            arrowEl.style.top = top + 'px';\n            this.contentSkeletonEl.appendChild(arrowEl);\n            nodes.push(arrowEl);\n        }\n        this.nowIndicatorEls = nodes;\n    };\n    TimeGrid.prototype.unrenderNowIndicator = function () {\n        if (this.nowIndicatorEls) {\n            this.nowIndicatorEls.forEach(removeElement);\n            this.nowIndicatorEls = null;\n        }\n    };\n    /* Coordinates\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getTotalSlatHeight = function () {\n        return this.slatContainerEl.getBoundingClientRect().height;\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n    // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n    TimeGrid.prototype.computeDateTop = function (when, startOfDayDate) {\n        if (!startOfDayDate) {\n            startOfDayDate = startOfDay(when);\n        }\n        return this.computeTimeTop(createDuration(when.valueOf() - startOfDayDate.valueOf()));\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n    TimeGrid.prototype.computeTimeTop = function (duration) {\n        var len = this.slatEls.length;\n        var dateProfile = this.props.dateProfile;\n        var slatCoverage = (duration.milliseconds - asRoughMs(dateProfile.minTime)) / asRoughMs(this.slotDuration); // floating-point value of # of slots covered\n        var slatIndex;\n        var slatRemainder;\n        // compute a floating-point number for how many slats should be progressed through.\n        // from 0 to number of slats (inclusive)\n        // constrained because minTime/maxTime might be customized.\n        slatCoverage = Math.max(0, slatCoverage);\n        slatCoverage = Math.min(len, slatCoverage);\n        // an integer index of the furthest whole slat\n        // from 0 to number slats (*exclusive*, so len-1)\n        slatIndex = Math.floor(slatCoverage);\n        slatIndex = Math.min(slatIndex, len - 1);\n        // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n        // could be 1.0 if slatCoverage is covering *all* the slots\n        slatRemainder = slatCoverage - slatIndex;\n        return this.slatPositions.tops[slatIndex] +\n            this.slatPositions.getHeight(slatIndex) * slatRemainder;\n    };\n    // For each segment in an array, computes and assigns its top and bottom properties\n    TimeGrid.prototype.computeSegVerticals = function (segs) {\n        var options = this.context.options;\n        var eventMinHeight = options.timeGridEventMinHeight;\n        var i;\n        var seg;\n        var dayDate;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            dayDate = this.props.cells[seg.col].date;\n            seg.top = this.computeDateTop(seg.start, dayDate);\n            seg.bottom = Math.max(seg.top + eventMinHeight, this.computeDateTop(seg.end, dayDate));\n        }\n    };\n    // Given segments that already have their top/bottom properties computed, applies those values to\n    // the segments' elements.\n    TimeGrid.prototype.assignSegVerticals = function (segs) {\n        var i;\n        var seg;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            applyStyle(seg.el, this.generateSegVerticalCss(seg));\n        }\n    };\n    // Generates an object with CSS properties for the top/bottom coordinates of a segment element\n    TimeGrid.prototype.generateSegVerticalCss = function (seg) {\n        return {\n            top: seg.top,\n            bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n        };\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildSlatPositions();\n    };\n    TimeGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    TimeGrid.prototype.buildSlatPositions = function () {\n        this.slatPositions.build();\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.positionToHit = function (positionLeft, positionTop) {\n        var dateEnv = this.context.dateEnv;\n        var _a = this, snapsPerSlot = _a.snapsPerSlot, slatPositions = _a.slatPositions, colPositions = _a.colPositions;\n        var colIndex = colPositions.leftToIndex(positionLeft);\n        var slatIndex = slatPositions.topToIndex(positionTop);\n        if (colIndex != null && slatIndex != null) {\n            var slatTop = slatPositions.tops[slatIndex];\n            var slatHeight = slatPositions.getHeight(slatIndex);\n            var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n            var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n            var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n            var dayDate = this.props.cells[colIndex].date;\n            var time = addDurations(this.props.dateProfile.minTime, multiplyDuration(this.snapDuration, snapIndex));\n            var start = dateEnv.add(dayDate, time);\n            var end = dateEnv.add(start, this.snapDuration);\n            return {\n                col: colIndex,\n                dateSpan: {\n                    range: { start: start, end: end },\n                    allDay: false\n                },\n                dayEl: this.colEls[colIndex],\n                relativeRect: {\n                    left: colPositions.lefts[colIndex],\n                    right: colPositions.rights[colIndex],\n                    top: slatTop,\n                    bottom: slatTop + slatHeight\n                }\n            };\n        }\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimeGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* Selection\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n    TimeGrid.prototype._renderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.renderSegs(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.unrender(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    return TimeGrid;\n}(DateComponent));\n\nvar AllDaySplitter = /** @class */ (function (_super) {\n    __extends(AllDaySplitter, _super);\n    function AllDaySplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AllDaySplitter.prototype.getKeyInfo = function () {\n        return {\n            allDay: {},\n            timed: {}\n        };\n    };\n    AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        if (dateSpan.allDay) {\n            return ['allDay'];\n        }\n        else {\n            return ['timed'];\n        }\n    };\n    AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n        if (!eventDef.allDay) {\n            return ['timed'];\n        }\n        else if (hasBgRendering(eventDef)) {\n            return ['timed', 'allDay'];\n        }\n        else {\n            return ['allDay'];\n        }\n    };\n    return AllDaySplitter;\n}(Splitter));\n\nvar TIMEGRID_ALL_DAY_EVENT_LIMIT = 5;\nvar WEEK_HEADER_FORMAT = createFormatter({ week: 'short' });\n/* An abstract class for all timegrid-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\nvar AbstractTimeGridView = /** @class */ (function (_super) {\n    __extends(AbstractTimeGridView, _super);\n    function AbstractTimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitter = new AllDaySplitter();\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n            var range = _this.props.dateProfile.renderRange;\n            var dayCnt = diffDays(range.start, range.end);\n            var weekText;\n            if (options.weekNumbers) {\n                weekText = dateEnv.format(range.start, WEEK_HEADER_FORMAT);\n                return '' +\n                    '<th class=\"fc-axis fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: range.start, type: 'week', forceOff: dayCnt > 1 }, htmlEscape(weekText) // inner HTML\n                    ) +\n                    '</th>';\n            }\n            else {\n                return '<th class=\"fc-axis ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '></th>';\n            }\n        };\n        /* Time Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n        _this.renderTimeGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            return '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderTimeGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        /* Day Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the all-day cells\n        _this.renderDayGridBgIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            return '' +\n                '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '>' +\n                '<span>' + // needed for matchCellWidths\n                getAllDayHtml(options) +\n                '</span>' +\n                '</td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderDayGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        return _this;\n    }\n    AbstractTimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.renderSkeleton(context);\n    };\n    AbstractTimeGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractTimeGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-timeGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var timeGridWrapEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);\n        timeGridWrapEl.classList.add('fc-time-grid-container');\n        var timeGridEl = createElement('div', { className: 'fc-time-grid' });\n        timeGridWrapEl.appendChild(timeGridEl);\n        this.timeGrid = new TimeGrid(timeGridEl, {\n            renderBgIntroHtml: this.renderTimeGridBgIntroHtml,\n            renderIntroHtml: this.renderTimeGridIntroHtml\n        });\n        if (context.options.allDaySlot) { // should we display the \"all-day\" area?\n            this.dayGrid = new DayGrid(// the all-day subcomponent of this view\n            this.el.querySelector('.fc-day-grid'), {\n                renderNumberIntroHtml: this.renderDayGridIntroHtml,\n                renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n                renderIntroHtml: this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: false,\n                cellWeekNumbersVisible: false\n            });\n            // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n            var dividerEl = this.el.querySelector('.fc-divider');\n            this.dayGrid.bottomCoordPadding = dividerEl.getBoundingClientRect().height;\n        }\n    };\n    AbstractTimeGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-timeGrid-view');\n        this.timeGrid.destroy();\n        if (this.dayGrid) {\n            this.dayGrid.destroy();\n        }\n        this.scroller.destroy();\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds the HTML skeleton for the view.\n    // The day-grid and time-grid components will render inside containers defined by this HTML.\n    AbstractTimeGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\">' +\n            (options.allDaySlot ?\n                '<div class=\"fc-day-grid\"></div>' +\n                    '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" />' :\n                '') +\n            '</td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.getNowIndicatorUnit = function () {\n        return this.timeGrid.getNowIndicatorUnit();\n    };\n    // subclasses should implement\n    // renderNowIndicator(date: DateMarker) {\n    // }\n    AbstractTimeGridView.prototype.unrenderNowIndicator = function () {\n        this.timeGrid.unrenderNowIndicator();\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.timeGrid.updateSize(isResize);\n        if (this.dayGrid) {\n            this.dayGrid.updateSize(isResize);\n        }\n    };\n    // Adjusts the vertical dimensions of the view to the specified values\n    AbstractTimeGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var _this = this;\n        var eventLimit;\n        var scrollerHeight;\n        var scrollbarWidths;\n        // make all axis cells line up\n        this.axisWidth = matchCellWidths(findElements(this.el, '.fc-axis'));\n        // hack to give the view some height prior to timeGrid's columns being rendered\n        // TODO: separate setting height from scroller VS timeGrid.\n        if (!this.timeGrid.colEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        // set of fake row elements that must compensate when scroller has scrollbars\n        var noScrollRowEls = findElements(this.el, '.fc-row').filter(function (node) {\n            return !_this.scroller.el.contains(node);\n        });\n        // reset all dimensions back to the original state\n        this.timeGrid.bottomRuleEl.style.display = 'none'; // will be shown later if this <hr> is necessary\n        this.scroller.clear(); // sets height to 'auto' and clears overflow\n        noScrollRowEls.forEach(uncompensateScroll);\n        // limit number of events in the all-day area\n        if (this.dayGrid) {\n            this.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            eventLimit = this.context.options.eventLimit;\n            if (eventLimit && typeof eventLimit !== 'number') {\n                eventLimit = TIMEGRID_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n            }\n            if (eventLimit) {\n                this.dayGrid.limitRows(eventLimit);\n            }\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                // make the all-day and header rows lines up\n                noScrollRowEls.forEach(function (rowEl) {\n                    compensateScroll(rowEl, scrollbarWidths);\n                });\n                // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n                // and reapply the desired height to the scroller.\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n            // if there's any space below the slats, show the horizontal rule.\n            // this won't cause any new overflow, because lockOverflow already called.\n            if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n                this.timeGrid.bottomRuleEl.style.display = '';\n            }\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractTimeGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Computes the initial pre-configured scroll state prior to allowing the user to change it\n    AbstractTimeGridView.prototype.computeDateScroll = function (duration) {\n        var top = this.timeGrid.computeTimeTop(duration);\n        // zoom can give weird floating-point values. rather scroll a little bit further\n        top = Math.ceil(top);\n        if (top) {\n            top++; // to overcome top border that slots beyond the first have. looks better\n        }\n        return { top: top };\n    };\n    AbstractTimeGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractTimeGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    // Generates an HTML attribute string for setting the width of the axis, if it is known\n    AbstractTimeGridView.prototype.axisStyleAttr = function () {\n        if (this.axisWidth != null) {\n            return 'style=\"width:' + this.axisWidth + 'px\"';\n        }\n        return '';\n    };\n    return AbstractTimeGridView;\n}(View));\nAbstractTimeGridView.prototype.usesMinMaxTime = true; // indicates that minTime/maxTime affects rendering\n\nvar SimpleTimeGrid = /** @class */ (function (_super) {\n    __extends(SimpleTimeGrid, _super);\n    function SimpleTimeGrid(timeGrid) {\n        var _this = _super.call(this, timeGrid.el) || this;\n        _this.buildDayRanges = memoize(buildDayRanges);\n        _this.slicer = new TimeGridSlicer();\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    SimpleTimeGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.timeGrid.el\n        });\n    };\n    SimpleTimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleTimeGrid.prototype.render = function (props, context) {\n        var dateEnv = this.context.dateEnv;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        var dayRanges = this.dayRanges = this.buildDayRanges(dayTable, dateProfile, dateEnv);\n        var timeGrid = this.timeGrid;\n        timeGrid.receiveContext(context); // hack because context is used in sliceProps\n        timeGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, null, context.calendar, timeGrid, dayRanges), { dateProfile: dateProfile, cells: dayTable.cells[0] }), context);\n    };\n    SimpleTimeGrid.prototype.renderNowIndicator = function (date) {\n        this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date, this.timeGrid, this.dayRanges), date);\n    };\n    SimpleTimeGrid.prototype.buildPositionCaches = function () {\n        this.timeGrid.buildPositionCaches();\n    };\n    SimpleTimeGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.timeGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.timeGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleTimeGrid;\n}(DateComponent));\nfunction buildDayRanges(dayTable, dateProfile, dateEnv) {\n    var ranges = [];\n    for (var _i = 0, _a = dayTable.headerDates; _i < _a.length; _i++) {\n        var date = _a[_i];\n        ranges.push({\n            start: dateEnv.add(date, dateProfile.minTime),\n            end: dateEnv.add(date, dateProfile.maxTime)\n        });\n    }\n    return ranges;\n}\nvar TimeGridSlicer = /** @class */ (function (_super) {\n    __extends(TimeGridSlicer, _super);\n    function TimeGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridSlicer.prototype.sliceRange = function (range, dayRanges) {\n        var segs = [];\n        for (var col = 0; col < dayRanges.length; col++) {\n            var segRange = intersectRanges(range, dayRanges[col]);\n            if (segRange) {\n                segs.push({\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                    col: col\n                });\n            }\n        }\n        return segs;\n    };\n    return TimeGridSlicer;\n}(Slicer));\n\nvar TimeGridView = /** @class */ (function (_super) {\n    __extends(TimeGridView, _super);\n    function TimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    TimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // for flags for updateSize. also _renderSkeleton/_unrenderSkeleton\n        var _a = this.props, dateProfile = _a.dateProfile, dateProfileGenerator = _a.dateProfileGenerator;\n        var nextDayThreshold = context.nextDayThreshold;\n        var dayTable = this.buildDayTable(dateProfile, dateProfileGenerator);\n        var splitProps = this.splitter.splitProps(props);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: true,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleTimeGrid.receiveProps(__assign({}, splitProps['timed'], { dateProfile: dateProfile,\n            dayTable: dayTable }), context);\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.receiveProps(__assign({}, splitProps['allDay'], { dateProfile: dateProfile,\n                dayTable: dayTable,\n                nextDayThreshold: nextDayThreshold, isRigid: false }), context);\n        }\n        this.startNowIndicator(dateProfile, dateProfileGenerator);\n    };\n    TimeGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleTimeGrid = new SimpleTimeGrid(this.timeGrid);\n        if (this.dayGrid) {\n            this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n        }\n    };\n    TimeGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleTimeGrid.destroy();\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.destroy();\n        }\n    };\n    TimeGridView.prototype.renderNowIndicator = function (date) {\n        this.simpleTimeGrid.renderNowIndicator(date);\n    };\n    return TimeGridView;\n}(AbstractTimeGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, false);\n}\n\nvar main = createPlugin({\n    defaultView: 'timeGridWeek',\n    views: {\n        timeGrid: {\n            class: TimeGridView,\n            allDaySlot: true,\n            slotDuration: '00:30:00',\n            slotEventOverlap: true // a bad name. confused with overlap/constraint system\n        },\n        timeGridDay: {\n            type: 'timeGrid',\n            duration: { days: 1 }\n        },\n        timeGridWeek: {\n            type: 'timeGrid',\n            duration: { weeks: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { AbstractTimeGridView, TimeGrid, TimeGridSlicer, TimeGridView, buildDayRanges, buildDayTable };\n","/*!\nFullCalendar Timeline Plugin v4.4.2\nDocs & License: https://fullcalendar.io/scheduler\n(c) 2019 Adam Shaw\n*/\n\nimport { htmlToElement, forceClassName, applyStyle, debounce, preventDefault, ScrollComponent, EmitterMixin, removeElement, createElement, computeEdges, asRoughMs, isSingleDay, getDayClasses, findElements, Component, PositionCache, findChildren, isInt, multiplyDuration, config, createFormatter, greatestDurationDenominator, createDuration, wholeDivideDurations, addDays, startOfDay, computeVisibleDayRange, asRoughMinutes, padStart, asRoughSeconds, diffWholeDays, buildGotoAnchorHtml, htmlEscape, translateRect, memoizeRendering, rangeContainsMarker, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, computeHeightAndMargins, applyStyleProp, FgEventRenderer, FillRenderer, DateComponent, intersectRanges, addMs, Slicer, View, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/*\nA rectangular area of content that lives within a Scroller.\nCan have \"gutters\", areas of dead spacing around the perimeter.\nAlso very useful for forcing a width, which a Scroller cannot do alone.\nHas a content area that lives above a background area.\n*/\nvar ScrollerCanvas = /** @class */ (function () {\n    function ScrollerCanvas() {\n        this.gutters = {};\n        this.el = htmlToElement(\"<div class=\\\"fc-scroller-canvas\\\"> <div class=\\\"fc-content\\\"></div> <div class=\\\"fc-bg\\\"></div> </div>\");\n        this.contentEl = this.el.querySelector('.fc-content');\n        this.bgEl = this.el.querySelector('.fc-bg');\n    }\n    /*\n    If falsy, resets all the gutters to 0\n    */\n    ScrollerCanvas.prototype.setGutters = function (gutters) {\n        if (!gutters) {\n            this.gutters = {};\n        }\n        else {\n            __assign(this.gutters, gutters);\n        }\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.setWidth = function (width) {\n        this.width = width;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.setMinWidth = function (minWidth) {\n        this.minWidth = minWidth;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.clearWidth = function () {\n        this.width = null;\n        this.minWidth = null;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.updateSize = function () {\n        var _a = this, gutters = _a.gutters, el = _a.el;\n        // is border-box (width includes padding)\n        forceClassName(el, 'fc-gutter-left', gutters.left);\n        forceClassName(el, 'fc-gutter-right', gutters.right);\n        forceClassName(el, 'fc-gutter-top', gutters.top);\n        forceClassName(el, 'fc-gutter-bottom', gutters.bottom);\n        applyStyle(el, {\n            paddingLeft: gutters.left || '',\n            paddingRight: gutters.right || '',\n            paddingTop: gutters.top || '',\n            paddingBottom: gutters.bottom || '',\n            width: (this.width != null) ?\n                this.width + (gutters.left || 0) + (gutters.right || 0) :\n                '',\n            minWidth: (this.minWidth != null) ?\n                this.minWidth + (gutters.left || 0) + (gutters.right || 0) :\n                ''\n        });\n        applyStyle(this.bgEl, {\n            left: gutters.left || '',\n            right: gutters.right || '',\n            top: gutters.top || '',\n            bottom: gutters.bottom || ''\n        });\n    };\n    return ScrollerCanvas;\n}());\n\nvar EnhancedScroller = /** @class */ (function (_super) {\n    __extends(EnhancedScroller, _super);\n    function EnhancedScroller(overflowX, overflowY) {\n        var _this = _super.call(this, overflowX, overflowY) || this;\n        // Scroll Events\n        // ----------------------------------------------------------------------------------------------\n        _this.reportScroll = function () {\n            if (!_this.isScrolling) {\n                _this.reportScrollStart();\n            }\n            _this.trigger('scroll');\n            _this.isMoving = true;\n            _this.requestMovingEnd();\n        };\n        _this.reportScrollStart = function () {\n            if (!_this.isScrolling) {\n                _this.isScrolling = true;\n                _this.trigger('scrollStart', _this.isTouching); // created in constructor\n            }\n        };\n        // Touch Events\n        // ----------------------------------------------------------------------------------------------\n        // will fire *before* the scroll event is fired\n        _this.reportTouchStart = function () {\n            _this.isTouching = true;\n        };\n        _this.reportTouchEnd = function () {\n            if (_this.isTouching) {\n                _this.isTouching = false;\n                // if touch scrolling was re-enabled during a recent touch scroll\n                // then unbind the handlers that are preventing it from happening.\n                if (_this.isTouchScrollEnabled) {\n                    _this.unbindPreventTouchScroll(); // won't do anything if not bound\n                }\n                // if the user ended their touch, and the scroll area wasn't moving,\n                // we consider this to be the end of the scroll.\n                if (!_this.isMoving) {\n                    _this.reportScrollEnd(); // won't fire if already ended\n                }\n            }\n        };\n        _this.isScrolling = false;\n        _this.isTouching = false;\n        _this.isMoving = false;\n        _this.isTouchScrollEnabled = true;\n        _this.requestMovingEnd = debounce(_this.reportMovingEnd, 500);\n        _this.canvas = new ScrollerCanvas();\n        _this.el.appendChild(_this.canvas.el);\n        _this.applyOverflow();\n        _this.bindHandlers();\n        return _this;\n    }\n    EnhancedScroller.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unbindHandlers();\n    };\n    // Touch scroll prevention\n    // ----------------------------------------------------------------------------------------------\n    EnhancedScroller.prototype.disableTouchScroll = function () {\n        this.isTouchScrollEnabled = false;\n        this.bindPreventTouchScroll(); // will be unbound in enableTouchScroll or reportTouchEnd\n    };\n    EnhancedScroller.prototype.enableTouchScroll = function () {\n        this.isTouchScrollEnabled = true;\n        // only immediately unbind if a touch event is NOT in progress.\n        // otherwise, it will be handled by reportTouchEnd.\n        if (!this.isTouching) {\n            this.unbindPreventTouchScroll();\n        }\n    };\n    EnhancedScroller.prototype.bindPreventTouchScroll = function () {\n        if (!this.preventTouchScrollHandler) {\n            this.el.addEventListener('touchmove', (this.preventTouchScrollHandler = preventDefault));\n        }\n    };\n    EnhancedScroller.prototype.unbindPreventTouchScroll = function () {\n        if (this.preventTouchScrollHandler) {\n            this.el.removeEventListener('touchmove', this.preventTouchScrollHandler);\n            this.preventTouchScrollHandler = null;\n        }\n    };\n    // Handlers\n    // ----------------------------------------------------------------------------------------------\n    EnhancedScroller.prototype.bindHandlers = function () {\n        this.el.addEventListener('scroll', this.reportScroll);\n        this.el.addEventListener('touchstart', this.reportTouchStart, { passive: true });\n        this.el.addEventListener('touchend', this.reportTouchEnd);\n    };\n    EnhancedScroller.prototype.unbindHandlers = function () {\n        this.el.removeEventListener('scroll', this.reportScroll);\n        this.el.removeEventListener('touchstart', this.reportTouchStart, { passive: true });\n        this.el.removeEventListener('touchend', this.reportTouchEnd);\n    };\n    EnhancedScroller.prototype.reportMovingEnd = function () {\n        this.isMoving = false;\n        // only end the scroll if not currently touching.\n        // if touching, the scrolling will end later, on touchend.\n        if (!this.isTouching) {\n            this.reportScrollEnd();\n        }\n    };\n    EnhancedScroller.prototype.reportScrollEnd = function () {\n        if (this.isScrolling) {\n            this.trigger('scrollEnd');\n            this.isScrolling = false;\n        }\n    };\n    // Horizontal Scroll Normalization\n    // ----------------------------------------------------------------------------------------------\n    // http://stackoverflow.com/questions/24276619/better-way-to-get-the-viewport-of-a-scrollable-div-in-rtl-mode/24394376#24394376\n    // TODO: move all this to util functions\n    /*\n    If RTL, and scrolled to the left, returns NEGATIVE value (like Firefox)\n    */\n    EnhancedScroller.prototype.getScrollLeft = function () {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        var val = el.scrollLeft;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'positive':\n                    val = (val + el.clientWidth) - el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = -val;\n                    break;\n            }\n        }\n        return val;\n    };\n    /*\n    Accepts a NEGATIVE value for when scrolled in RTL\n    */\n    EnhancedScroller.prototype.setScrollLeft = function (val) {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'positive':\n                    val = (val - el.clientWidth) + el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = -val;\n                    break;\n            }\n        }\n        el.scrollLeft = val;\n    };\n    /*\n    Always returns the number of pixels scrolled from the leftmost position (even if RTL).\n    Always positive.\n    */\n    EnhancedScroller.prototype.getScrollFromLeft = function () {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        var val = el.scrollLeft;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'negative':\n                    val = (val - el.clientWidth) + el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = (-val - el.clientWidth) + el.scrollWidth;\n                    break;\n            }\n        }\n        return val;\n    };\n    return EnhancedScroller;\n}(ScrollComponent));\nEmitterMixin.mixInto(EnhancedScroller);\n// Horizontal Scroll System Detection\n// ----------------------------------------------------------------------------------------------\nvar _rtlScrollSystem;\nfunction getRtlScrollSystem() {\n    return _rtlScrollSystem || (_rtlScrollSystem = detectRtlScrollSystem());\n}\nfunction detectRtlScrollSystem() {\n    var el = htmlToElement(\"<div style=\\\" position: absolute; top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 100px; \\\">A</div>\");\n    document.body.appendChild(el);\n    var system;\n    if (el.scrollLeft > 0) {\n        system = 'positive';\n    }\n    else {\n        el.scrollLeft = 1;\n        if (el.scrollLeft > 0) {\n            system = 'reverse';\n        }\n        else {\n            system = 'negative';\n        }\n    }\n    removeElement(el);\n    return system;\n}\n\n/*\nA Scroller, but with a wrapping div that allows \"clipping\" away of native scrollbars,\ngiving the appearance that there are no scrollbars.\n*/\nvar ClippedScroller = /** @class */ (function () {\n    /*\n    Received overflows can be set to 'clipped', meaning scrollbars shouldn't be visible\n    to the user, but the area should still scroll.\n    */\n    function ClippedScroller(overflowX, overflowY, parentEl) {\n        this.isHScrollbarsClipped = false;\n        this.isVScrollbarsClipped = false;\n        if (overflowX === 'clipped-scroll') {\n            overflowX = 'scroll';\n            this.isHScrollbarsClipped = true;\n        }\n        if (overflowY === 'clipped-scroll') {\n            overflowY = 'scroll';\n            this.isVScrollbarsClipped = true;\n        }\n        this.enhancedScroll = new EnhancedScroller(overflowX, overflowY);\n        parentEl.appendChild(this.el = createElement('div', {\n            className: 'fc-scroller-clip'\n        }));\n        this.el.appendChild(this.enhancedScroll.el);\n    }\n    ClippedScroller.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    ClippedScroller.prototype.updateSize = function () {\n        var enhancedScroll = this.enhancedScroll;\n        var scrollEl = enhancedScroll.el;\n        var edges = computeEdges(scrollEl);\n        var cssProps = { marginLeft: 0, marginRight: 0, marginTop: 0, marginBottom: 0 };\n        // give the inner scrolling div negative margins so that its scrollbars\n        // are nudged outside of the bounding box of the wrapper, which is overflow:hidden\n        if (this.isVScrollbarsClipped) {\n            cssProps.marginLeft = -edges.scrollbarLeft;\n            cssProps.marginRight = -edges.scrollbarRight;\n        }\n        if (this.isHScrollbarsClipped) {\n            cssProps.marginBottom = -edges.scrollbarBottom;\n        }\n        applyStyle(scrollEl, cssProps);\n        // if we are attempting to hide the scrollbars offscreen, OSX/iOS will still\n        // display the floating scrollbars. attach a className to force-hide them.\n        if ((this.isHScrollbarsClipped || (enhancedScroll.overflowX === 'hidden')) && // should never show?\n            (this.isVScrollbarsClipped || (enhancedScroll.overflowY === 'hidden')) && // should never show?\n            !( // doesn't have any scrollbar mass\n            edges.scrollbarLeft ||\n                edges.scrollbarRight ||\n                edges.scrollbarBottom)) {\n            scrollEl.classList.add('fc-no-scrollbars');\n        }\n        else {\n            scrollEl.classList.remove('fc-no-scrollbars');\n        }\n    };\n    ClippedScroller.prototype.setHeight = function (height) {\n        this.enhancedScroll.setHeight(height);\n    };\n    /*\n    Accounts for 'clipped' scrollbars\n    */\n    ClippedScroller.prototype.getScrollbarWidths = function () {\n        var widths = this.enhancedScroll.getScrollbarWidths();\n        if (this.isVScrollbarsClipped) {\n            widths.left = 0;\n            widths.right = 0;\n        }\n        if (this.isHScrollbarsClipped) {\n            widths.bottom = 0;\n        }\n        return widths;\n    };\n    return ClippedScroller;\n}());\n\nvar ScrollJoiner = /** @class */ (function () {\n    function ScrollJoiner(axis, scrollers) {\n        this.axis = axis;\n        this.scrollers = scrollers;\n        for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n            var scroller = _a[_i];\n            this.initScroller(scroller);\n        }\n    }\n    ScrollJoiner.prototype.initScroller = function (scroller) {\n        var _this = this;\n        var enhancedScroll = scroller.enhancedScroll;\n        // when the user scrolls via mousewheel, we know for sure the target\n        // scroller should be the master. capture the various x-browser events that fire.\n        var onScroll = function () {\n            _this.assignMasterScroller(scroller);\n        };\n        'wheel mousewheel DomMouseScroll MozMousePixelScroll'.split(' ').forEach(function (evName) {\n            enhancedScroll.el.addEventListener(evName, onScroll);\n        });\n        enhancedScroll\n            .on('scrollStart', function () {\n            if (!_this.masterScroller) {\n                _this.assignMasterScroller(scroller);\n            }\n        })\n            .on('scroll', function () {\n            if (scroller === _this.masterScroller) {\n                for (var _i = 0, _a = _this.scrollers; _i < _a.length; _i++) {\n                    var otherScroller = _a[_i];\n                    if (otherScroller !== scroller) {\n                        switch (_this.axis) {\n                            case 'horizontal':\n                                otherScroller.enhancedScroll.el.scrollLeft = enhancedScroll.el.scrollLeft;\n                                break;\n                            case 'vertical':\n                                otherScroller.enhancedScroll.setScrollTop(enhancedScroll.getScrollTop());\n                                break;\n                        }\n                    }\n                }\n            }\n        })\n            .on('scrollEnd', function () {\n            if (scroller === _this.masterScroller) {\n                _this.unassignMasterScroller();\n            }\n        });\n    };\n    ScrollJoiner.prototype.assignMasterScroller = function (scroller) {\n        this.unassignMasterScroller();\n        this.masterScroller = scroller;\n        for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n            var otherScroller = _a[_i];\n            if (otherScroller !== scroller) {\n                otherScroller.enhancedScroll.disableTouchScroll();\n            }\n        }\n    };\n    ScrollJoiner.prototype.unassignMasterScroller = function () {\n        if (this.masterScroller) {\n            for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n                var otherScroller = _a[_i];\n                otherScroller.enhancedScroll.enableTouchScroll();\n            }\n            this.masterScroller = null;\n        }\n    };\n    ScrollJoiner.prototype.update = function () {\n        var allWidths = this.scrollers.map(function (scroller) { return scroller.getScrollbarWidths(); });\n        var maxLeft = 0;\n        var maxRight = 0;\n        var maxTop = 0;\n        var maxBottom = 0;\n        var widths;\n        var i;\n        for (var _i = 0, allWidths_1 = allWidths; _i < allWidths_1.length; _i++) {\n            widths = allWidths_1[_i];\n            maxLeft = Math.max(maxLeft, widths.left);\n            maxRight = Math.max(maxRight, widths.right);\n            maxTop = Math.max(maxTop, widths.top);\n            maxBottom = Math.max(maxBottom, widths.bottom);\n        }\n        for (i = 0; i < this.scrollers.length; i++) {\n            var scroller = this.scrollers[i];\n            widths = allWidths[i];\n            scroller.enhancedScroll.canvas.setGutters(this.axis === 'horizontal' ?\n                {\n                    left: maxLeft - widths.left,\n                    right: maxRight - widths.right\n                } :\n                {\n                    top: maxTop - widths.top,\n                    bottom: maxBottom - widths.bottom\n                });\n        }\n    };\n    return ScrollJoiner;\n}());\n\nvar HeaderBodyLayout = /** @class */ (function () {\n    /*\n    verticalScroll = 'auto' | 'clipped-scroll'\n    */\n    function HeaderBodyLayout(headerContainerEl, bodyContainerEl, verticalScroll) {\n        this.headerScroller = new ClippedScroller('clipped-scroll', 'hidden', headerContainerEl);\n        this.bodyScroller = new ClippedScroller('auto', verticalScroll, bodyContainerEl);\n        this.scrollJoiner = new ScrollJoiner('horizontal', [\n            this.headerScroller,\n            this.bodyScroller\n        ]);\n    }\n    HeaderBodyLayout.prototype.destroy = function () {\n        this.headerScroller.destroy();\n        this.bodyScroller.destroy();\n    };\n    HeaderBodyLayout.prototype.setHeight = function (totalHeight, isAuto) {\n        var bodyHeight;\n        if (isAuto) {\n            bodyHeight = 'auto';\n        }\n        else {\n            bodyHeight = totalHeight - this.queryHeadHeight();\n        }\n        this.bodyScroller.setHeight(bodyHeight);\n        this.headerScroller.updateSize(); // adjusts gutters and classNames\n        this.bodyScroller.updateSize(); // adjusts gutters and classNames\n        this.scrollJoiner.update();\n    };\n    HeaderBodyLayout.prototype.queryHeadHeight = function () {\n        return this.headerScroller.enhancedScroll.canvas.contentEl.getBoundingClientRect().height;\n    };\n    return HeaderBodyLayout;\n}());\n\nvar TimelineHeader = /** @class */ (function (_super) {\n    __extends(TimelineHeader, _super);\n    function TimelineHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    TimelineHeader.prototype.firstContext = function (context) {\n        this.parentEl.appendChild(this.tableEl = createElement('table', {\n            className: context.theme.getClass('tableGrid')\n        }));\n    };\n    TimelineHeader.prototype.destroy = function () {\n        removeElement(this.tableEl);\n        _super.prototype.destroy.call(this);\n    };\n    TimelineHeader.prototype.render = function (props) {\n        this.renderDates(props.tDateProfile);\n    };\n    TimelineHeader.prototype.renderDates = function (tDateProfile) {\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme;\n        var cellRows = tDateProfile.cellRows;\n        var lastRow = cellRows[cellRows.length - 1];\n        var isChrono = asRoughMs(tDateProfile.labelInterval) > asRoughMs(tDateProfile.slotDuration);\n        var oneDay = isSingleDay(tDateProfile.slotDuration);\n        var html = '<colgroup>';\n        // needs to be a col for each body slat. header cells will have colspans\n        for (var i = tDateProfile.slotCnt - 1; i >= 0; i--) {\n            html += '<col/>';\n        }\n        html += '</colgroup>';\n        html += '<tbody>';\n        for (var _i = 0, cellRows_1 = cellRows; _i < cellRows_1.length; _i++) {\n            var rowCells = cellRows_1[_i];\n            var isLast = rowCells === lastRow;\n            html += '<tr' + (isChrono && isLast ? ' class=\"fc-chrono\"' : '') + '>';\n            for (var _b = 0, rowCells_1 = rowCells; _b < rowCells_1.length; _b++) {\n                var cell = rowCells_1[_b];\n                var headerCellClassNames = [theme.getClass('widgetHeader')];\n                if (cell.isWeekStart) {\n                    headerCellClassNames.push('fc-em-cell');\n                }\n                if (oneDay) {\n                    headerCellClassNames = headerCellClassNames.concat(getDayClasses(cell.date, this.props.dateProfile, this.context, true) // adds \"today\" class and other day-based classes\n                    );\n                }\n                html +=\n                    '<th class=\"' + headerCellClassNames.join(' ') + '\"' +\n                        ' data-date=\"' + dateEnv.formatIso(cell.date, { omitTime: !tDateProfile.isTimeScale, omitTimeZoneOffset: true }) + '\"' +\n                        (cell.colspan > 1 ? ' colspan=\"' + cell.colspan + '\"' : '') +\n                        '>' +\n                        '<div class=\"fc-cell-content\">' +\n                        cell.spanHtml +\n                        '</div>' +\n                        '</th>';\n            }\n            html += '</tr>';\n        }\n        html += '</tbody>';\n        this.tableEl.innerHTML = html; // TODO: does this work cross-browser?\n        this.slatColEls = findElements(this.tableEl, 'col');\n        this.innerEls = findElements(this.tableEl.querySelector('tr:last-child'), // compound selector won't work because of query-root problem\n        'th .fc-cell-text');\n        findElements(this.tableEl.querySelectorAll('tr:not(:last-child)'), // compound selector won't work because of query-root problem\n        'th .fc-cell-text').forEach(function (innerEl) {\n            innerEl.classList.add('fc-sticky');\n        });\n    };\n    return TimelineHeader;\n}(Component));\n\nvar TimelineSlats = /** @class */ (function (_super) {\n    __extends(TimelineSlats, _super);\n    function TimelineSlats(parentEl) {\n        var _this = _super.call(this) || this;\n        parentEl.appendChild(_this.el = createElement('div', { className: 'fc-slats' }));\n        return _this;\n    }\n    TimelineSlats.prototype.destroy = function () {\n        removeElement(this.el);\n        _super.prototype.destroy.call(this);\n    };\n    TimelineSlats.prototype.render = function (props) {\n        this.renderDates(props.tDateProfile);\n    };\n    TimelineSlats.prototype.renderDates = function (tDateProfile) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, dateEnv = _a.dateEnv;\n        var slotDates = tDateProfile.slotDates, isWeekStarts = tDateProfile.isWeekStarts;\n        var html = '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<colgroup>';\n        for (var i = 0; i < slotDates.length; i++) {\n            html += '<col/>';\n        }\n        html += '</colgroup>';\n        html += '<tbody><tr>';\n        for (var i = 0; i < slotDates.length; i++) {\n            html += this.slatCellHtml(slotDates[i], isWeekStarts[i], tDateProfile);\n        }\n        html += '</tr></tbody></table>';\n        this.el.innerHTML = html;\n        this.slatColEls = findElements(this.el, 'col');\n        this.slatEls = findElements(this.el, 'td');\n        for (var i = 0; i < slotDates.length; i++) {\n            calendar.publiclyTrigger('dayRender', [\n                {\n                    date: dateEnv.toDate(slotDates[i]),\n                    el: this.slatEls[i],\n                    view: view\n                }\n            ]);\n        }\n        this.outerCoordCache = new PositionCache(this.el, this.slatEls, true, // isHorizontal\n        false // isVertical\n        );\n        // for the inner divs within the slats\n        // used for event rendering and scrollTime, to disregard slat border\n        this.innerCoordCache = new PositionCache(this.el, findChildren(this.slatEls, 'div'), true, // isHorizontal\n        false // isVertical\n        );\n    };\n    TimelineSlats.prototype.slatCellHtml = function (date, isEm, tDateProfile) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv;\n        var classes;\n        if (tDateProfile.isTimeScale) {\n            classes = [];\n            classes.push(isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval)) ?\n                'fc-major' :\n                'fc-minor');\n        }\n        else {\n            classes = getDayClasses(date, this.props.dateProfile, this.context);\n            classes.push('fc-day');\n        }\n        classes.unshift(theme.getClass('widgetContent'));\n        if (isEm) {\n            classes.push('fc-em-cell');\n        }\n        return '<td class=\"' + classes.join(' ') + '\"' +\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: !tDateProfile.isTimeScale, omitTimeZoneOffset: true }) + '\"' +\n            '><div></div></td>';\n    };\n    TimelineSlats.prototype.updateSize = function () {\n        this.outerCoordCache.build();\n        this.innerCoordCache.build();\n    };\n    TimelineSlats.prototype.positionToHit = function (leftPosition) {\n        var outerCoordCache = this.outerCoordCache;\n        var _a = this.context, dateEnv = _a.dateEnv, isRtl = _a.isRtl;\n        var tDateProfile = this.props.tDateProfile;\n        var slatIndex = outerCoordCache.leftToIndex(leftPosition);\n        if (slatIndex != null) {\n            // somewhat similar to what TimeGrid does. consolidate?\n            var slatWidth = outerCoordCache.getWidth(slatIndex);\n            var partial = isRtl ?\n                (outerCoordCache.rights[slatIndex] - leftPosition) / slatWidth :\n                (leftPosition - outerCoordCache.lefts[slatIndex]) / slatWidth;\n            var localSnapIndex = Math.floor(partial * tDateProfile.snapsPerSlot);\n            var start = dateEnv.add(tDateProfile.slotDates[slatIndex], multiplyDuration(tDateProfile.snapDuration, localSnapIndex));\n            var end = dateEnv.add(start, tDateProfile.snapDuration);\n            return {\n                dateSpan: {\n                    range: { start: start, end: end },\n                    allDay: !this.props.tDateProfile.isTimeScale\n                },\n                dayEl: this.slatColEls[slatIndex],\n                left: outerCoordCache.lefts[slatIndex],\n                right: outerCoordCache.rights[slatIndex]\n            };\n        }\n        return null;\n    };\n    return TimelineSlats;\n}(Component));\n\nvar MIN_AUTO_LABELS = 18; // more than `12` months but less that `24` hours\nvar MAX_AUTO_SLOTS_PER_LABEL = 6; // allows 6 10-min slots in an hour\nvar MAX_AUTO_CELLS = 200; // allows 4-days to have a :30 slot duration\nconfig.MAX_TIMELINE_SLOTS = 1000;\n// potential nice values for slot-duration and interval-duration\nvar STOCK_SUB_DURATIONS = [\n    { years: 1 },\n    { months: 1 },\n    { days: 1 },\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { minutes: 10 },\n    { minutes: 5 },\n    { minutes: 1 },\n    { seconds: 30 },\n    { seconds: 15 },\n    { seconds: 10 },\n    { seconds: 5 },\n    { seconds: 1 },\n    { milliseconds: 500 },\n    { milliseconds: 100 },\n    { milliseconds: 10 },\n    { milliseconds: 1 }\n];\nfunction buildTimelineDateProfile(dateProfile, dateEnv, allOptions, dateProfileGenerator) {\n    var tDateProfile = {\n        labelInterval: queryDurationOption(allOptions, 'slotLabelInterval'),\n        slotDuration: queryDurationOption(allOptions, 'slotDuration')\n    };\n    validateLabelAndSlot(tDateProfile, dateProfile, dateEnv); // validate after computed grid duration\n    ensureLabelInterval(tDateProfile, dateProfile, dateEnv);\n    ensureSlotDuration(tDateProfile, dateProfile, dateEnv);\n    var input = allOptions.slotLabelFormat;\n    var rawFormats = Array.isArray(input) ?\n        input\n        : (input != null) ?\n            [input]\n            :\n                computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions);\n    tDateProfile.headerFormats = rawFormats.map(function (rawFormat) {\n        return createFormatter(rawFormat);\n    });\n    tDateProfile.isTimeScale = Boolean(tDateProfile.slotDuration.milliseconds);\n    var largeUnit = null;\n    if (!tDateProfile.isTimeScale) {\n        var slotUnit = greatestDurationDenominator(tDateProfile.slotDuration).unit;\n        if (/year|month|week/.test(slotUnit)) {\n            largeUnit = slotUnit;\n        }\n    }\n    tDateProfile.largeUnit = largeUnit;\n    tDateProfile.emphasizeWeeks =\n        isSingleDay(tDateProfile.slotDuration) &&\n            currentRangeAs('weeks', dateProfile, dateEnv) >= 2 &&\n            !allOptions.businessHours;\n    /*\n    console.log('label interval =', timelineView.labelInterval.humanize())\n    console.log('slot duration =', timelineView.slotDuration.humanize())\n    console.log('header formats =', timelineView.headerFormats)\n    console.log('isTimeScale', timelineView.isTimeScale)\n    console.log('largeUnit', timelineView.largeUnit)\n    */\n    var rawSnapDuration = allOptions.snapDuration;\n    var snapDuration;\n    var snapsPerSlot;\n    if (rawSnapDuration) {\n        snapDuration = createDuration(rawSnapDuration);\n        snapsPerSlot = wholeDivideDurations(tDateProfile.slotDuration, snapDuration);\n        // ^ TODO: warning if not whole?\n    }\n    if (snapsPerSlot == null) {\n        snapDuration = tDateProfile.slotDuration;\n        snapsPerSlot = 1;\n    }\n    tDateProfile.snapDuration = snapDuration;\n    tDateProfile.snapsPerSlot = snapsPerSlot;\n    // more...\n    var timeWindowMs = asRoughMs(dateProfile.maxTime) - asRoughMs(dateProfile.minTime);\n    // TODO: why not use normalizeRange!?\n    var normalizedStart = normalizeDate(dateProfile.renderRange.start, tDateProfile, dateEnv);\n    var normalizedEnd = normalizeDate(dateProfile.renderRange.end, tDateProfile, dateEnv);\n    // apply minTime/maxTime\n    // TODO: View should be responsible.\n    if (tDateProfile.isTimeScale) {\n        normalizedStart = dateEnv.add(normalizedStart, dateProfile.minTime);\n        normalizedEnd = dateEnv.add(addDays(normalizedEnd, -1), dateProfile.maxTime);\n    }\n    tDateProfile.timeWindowMs = timeWindowMs;\n    tDateProfile.normalizedRange = { start: normalizedStart, end: normalizedEnd };\n    var slotDates = [];\n    var date = normalizedStart;\n    while (date < normalizedEnd) {\n        if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n            slotDates.push(date);\n        }\n        date = dateEnv.add(date, tDateProfile.slotDuration);\n    }\n    tDateProfile.slotDates = slotDates;\n    // more...\n    var snapIndex = -1;\n    var snapDiff = 0; // index of the diff :(\n    var snapDiffToIndex = [];\n    var snapIndexToDiff = [];\n    date = normalizedStart;\n    while (date < normalizedEnd) {\n        if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n            snapIndex++;\n            snapDiffToIndex.push(snapIndex);\n            snapIndexToDiff.push(snapDiff);\n        }\n        else {\n            snapDiffToIndex.push(snapIndex + 0.5);\n        }\n        date = dateEnv.add(date, tDateProfile.snapDuration);\n        snapDiff++;\n    }\n    tDateProfile.snapDiffToIndex = snapDiffToIndex;\n    tDateProfile.snapIndexToDiff = snapIndexToDiff;\n    tDateProfile.snapCnt = snapIndex + 1; // is always one behind\n    tDateProfile.slotCnt = tDateProfile.snapCnt / tDateProfile.snapsPerSlot;\n    // more...\n    tDateProfile.isWeekStarts = buildIsWeekStarts(tDateProfile, dateEnv);\n    tDateProfile.cellRows = buildCellRows(tDateProfile, dateEnv, allOptions);\n    return tDateProfile;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeDate(date, tDateProfile, dateEnv) {\n    var normalDate = date;\n    if (!tDateProfile.isTimeScale) {\n        normalDate = startOfDay(normalDate);\n        if (tDateProfile.largeUnit) {\n            normalDate = dateEnv.startOf(normalDate, tDateProfile.largeUnit);\n        }\n    }\n    return normalDate;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeRange(range, tDateProfile, dateEnv) {\n    if (!tDateProfile.isTimeScale) {\n        range = computeVisibleDayRange(range);\n        if (tDateProfile.largeUnit) {\n            var dayRange = range; // preserve original result\n            range = {\n                start: dateEnv.startOf(range.start, tDateProfile.largeUnit),\n                end: dateEnv.startOf(range.end, tDateProfile.largeUnit)\n            };\n            // if date is partially through the interval, or is in the same interval as the start,\n            // make the exclusive end be the *next* interval\n            if (range.end.valueOf() !== dayRange.end.valueOf() || range.end <= range.start) {\n                range = {\n                    start: range.start,\n                    end: dateEnv.add(range.end, tDateProfile.slotDuration)\n                };\n            }\n        }\n    }\n    return range;\n}\nfunction isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator) {\n    if (dateProfileGenerator.isHiddenDay(date)) {\n        return false;\n    }\n    else if (tDateProfile.isTimeScale) {\n        // determine if the time is within minTime/maxTime, which may have wacky values\n        var day = startOfDay(date);\n        var timeMs = date.valueOf() - day.valueOf();\n        var ms = timeMs - asRoughMs(dateProfile.minTime); // milliseconds since minTime\n        ms = ((ms % 86400000) + 86400000) % 86400000; // make negative values wrap to 24hr clock\n        return ms < tDateProfile.timeWindowMs; // before the maxTime?\n    }\n    else {\n        return true;\n    }\n}\nfunction queryDurationOption(allOptions, name) {\n    var input = allOptions[name];\n    if (input != null) {\n        return createDuration(input);\n    }\n}\nfunction validateLabelAndSlot(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    // make sure labelInterval doesn't exceed the max number of cells\n    if (tDateProfile.labelInterval) {\n        var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.labelInterval);\n        if (labelCnt > config.MAX_TIMELINE_SLOTS) {\n            console.warn('slotLabelInterval results in too many cells');\n            tDateProfile.labelInterval = null;\n        }\n    }\n    // make sure slotDuration doesn't exceed the maximum number of cells\n    if (tDateProfile.slotDuration) {\n        var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.slotDuration);\n        if (slotCnt > config.MAX_TIMELINE_SLOTS) {\n            console.warn('slotDuration results in too many cells');\n            tDateProfile.slotDuration = null;\n        }\n    }\n    // make sure labelInterval is a multiple of slotDuration\n    if (tDateProfile.labelInterval && tDateProfile.slotDuration) {\n        var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n        if (slotsPerLabel === null || slotsPerLabel < 1) {\n            console.warn('slotLabelInterval must be a multiple of slotDuration');\n            tDateProfile.slotDuration = null;\n        }\n    }\n}\nfunction ensureLabelInterval(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    var labelInterval = tDateProfile.labelInterval;\n    if (!labelInterval) {\n        // compute based off the slot duration\n        // find the largest label interval with an acceptable slots-per-label\n        var input = void 0;\n        if (tDateProfile.slotDuration) {\n            for (var _i = 0, STOCK_SUB_DURATIONS_1 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_1.length; _i++) {\n                input = STOCK_SUB_DURATIONS_1[_i];\n                var tryLabelInterval = createDuration(input);\n                var slotsPerLabel = wholeDivideDurations(tryLabelInterval, tDateProfile.slotDuration);\n                if (slotsPerLabel !== null && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n                    labelInterval = tryLabelInterval;\n                    break;\n                }\n            }\n            // use the slot duration as a last resort\n            if (!labelInterval) {\n                labelInterval = tDateProfile.slotDuration;\n            }\n            // compute based off the view's duration\n            // find the largest label interval that yields the minimum number of labels\n        }\n        else {\n            for (var _a = 0, STOCK_SUB_DURATIONS_2 = STOCK_SUB_DURATIONS; _a < STOCK_SUB_DURATIONS_2.length; _a++) {\n                input = STOCK_SUB_DURATIONS_2[_a];\n                labelInterval = createDuration(input);\n                var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, labelInterval);\n                if (labelCnt >= MIN_AUTO_LABELS) {\n                    break;\n                }\n            }\n        }\n        tDateProfile.labelInterval = labelInterval;\n    }\n    return labelInterval;\n}\nfunction ensureSlotDuration(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    var slotDuration = tDateProfile.slotDuration;\n    if (!slotDuration) {\n        var labelInterval = ensureLabelInterval(tDateProfile, dateProfile, dateEnv); // will compute if necessary\n        // compute based off the label interval\n        // find the largest slot duration that is different from labelInterval, but still acceptable\n        for (var _i = 0, STOCK_SUB_DURATIONS_3 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_3.length; _i++) {\n            var input = STOCK_SUB_DURATIONS_3[_i];\n            var trySlotDuration = createDuration(input);\n            var slotsPerLabel = wholeDivideDurations(labelInterval, trySlotDuration);\n            if (slotsPerLabel !== null && slotsPerLabel > 1 && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n                slotDuration = trySlotDuration;\n                break;\n            }\n        }\n        // only allow the value if it won't exceed the view's # of slots limit\n        if (slotDuration) {\n            var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, slotDuration);\n            if (slotCnt > MAX_AUTO_CELLS) {\n                slotDuration = null;\n            }\n        }\n        // use the label interval as a last resort\n        if (!slotDuration) {\n            slotDuration = labelInterval;\n        }\n        tDateProfile.slotDuration = slotDuration;\n    }\n    return slotDuration;\n}\nfunction computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions) {\n    var format1;\n    var format2;\n    var labelInterval = tDateProfile.labelInterval;\n    var unit = greatestDurationDenominator(labelInterval).unit;\n    var weekNumbersVisible = allOptions.weekNumbers;\n    var format0 = (format1 = (format2 = null));\n    // NOTE: weekNumber computation function wont work\n    if ((unit === 'week') && !weekNumbersVisible) {\n        unit = 'day';\n    }\n    switch (unit) {\n        case 'year':\n            format0 = { year: 'numeric' }; // '2015'\n            break;\n        case 'month':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric' }; // '2015'\n            }\n            format1 = { month: 'short' }; // 'Jan'\n            break;\n        case 'week':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric' }; // '2015'\n            }\n            format1 = { week: 'narrow' }; // 'Wk4'\n            break;\n        case 'day':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric', month: 'long' }; // 'January 2014'\n            }\n            else if (currentRangeAs('months', dateProfile, dateEnv) > 1) {\n                format0 = { month: 'long' }; // 'January'\n            }\n            if (weekNumbersVisible) {\n                format1 = { week: 'short' }; // 'Wk 4'\n            }\n            format2 = { weekday: 'narrow', day: 'numeric' }; // 'Su 9'\n            break;\n        case 'hour':\n            if (weekNumbersVisible) {\n                format0 = { week: 'short' }; // 'Wk 4'\n            }\n            if (currentRangeAs('days', dateProfile, dateEnv) > 1) {\n                format1 = { weekday: 'short', day: 'numeric', month: 'numeric', omitCommas: true }; // Sat 4/7\n            }\n            format2 = {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'short'\n            };\n            break;\n        case 'minute':\n            // sufficiently large number of different minute cells?\n            if ((asRoughMinutes(labelInterval) / 60) >= MAX_AUTO_SLOTS_PER_LABEL) {\n                format0 = {\n                    hour: 'numeric',\n                    meridiem: 'short'\n                };\n                format1 = function (params) {\n                    return ':' + padStart(params.date.minute, 2); // ':30'\n                };\n            }\n            else {\n                format0 = {\n                    hour: 'numeric',\n                    minute: 'numeric',\n                    meridiem: 'short'\n                };\n            }\n            break;\n        case 'second':\n            // sufficiently large number of different second cells?\n            if ((asRoughSeconds(labelInterval) / 60) >= MAX_AUTO_SLOTS_PER_LABEL) {\n                format0 = { hour: 'numeric', minute: '2-digit', meridiem: 'lowercase' }; // '8:30 PM'\n                format1 = function (params) {\n                    return ':' + padStart(params.date.second, 2); // ':30'\n                };\n            }\n            else {\n                format0 = { hour: 'numeric', minute: '2-digit', second: '2-digit', meridiem: 'lowercase' }; // '8:30:45 PM'\n            }\n            break;\n        case 'millisecond':\n            format0 = { hour: 'numeric', minute: '2-digit', second: '2-digit', meridiem: 'lowercase' }; // '8:30:45 PM'\n            format1 = function (params) {\n                return '.' + padStart(params.millisecond, 3);\n            };\n            break;\n    }\n    return [].concat(format0 || [], format1 || [], format2 || []);\n}\n// Compute the number of the give units in the \"current\" range.\n// Won't go more precise than days.\n// Will return `0` if there's not a clean whole interval.\nfunction currentRangeAs(unit, dateProfile, dateEnv) {\n    var range = dateProfile.currentRange;\n    var res = null;\n    if (unit === 'years') {\n        res = dateEnv.diffWholeYears(range.start, range.end);\n    }\n    else if (unit === 'months') {\n        res = dateEnv.diffWholeMonths(range.start, range.end);\n    }\n    else if (unit === 'weeks') {\n        res = dateEnv.diffWholeMonths(range.start, range.end);\n    }\n    else if (unit === 'days') {\n        res = diffWholeDays(range.start, range.end);\n    }\n    return res || 0;\n}\nfunction buildIsWeekStarts(tDateProfile, dateEnv) {\n    var slotDates = tDateProfile.slotDates, emphasizeWeeks = tDateProfile.emphasizeWeeks;\n    var prevWeekNumber = null;\n    var isWeekStarts = [];\n    for (var _i = 0, slotDates_1 = slotDates; _i < slotDates_1.length; _i++) {\n        var slotDate = slotDates_1[_i];\n        var weekNumber = dateEnv.computeWeekNumber(slotDate);\n        var isWeekStart = emphasizeWeeks && (prevWeekNumber !== null) && (prevWeekNumber !== weekNumber);\n        prevWeekNumber = weekNumber;\n        isWeekStarts.push(isWeekStart);\n    }\n    return isWeekStarts;\n}\nfunction buildCellRows(tDateProfile, dateEnv, allOptions) {\n    var slotDates = tDateProfile.slotDates;\n    var formats = tDateProfile.headerFormats;\n    var cellRows = formats.map(function (format) { return []; }); // indexed by row,col\n    // specifically for navclicks\n    var rowUnits = formats.map(function (format) {\n        return format.getLargestUnit ? format.getLargestUnit() : null;\n    });\n    // builds cellRows and slotCells\n    for (var i = 0; i < slotDates.length; i++) {\n        var date = slotDates[i];\n        var isWeekStart = tDateProfile.isWeekStarts[i];\n        for (var row = 0; row < formats.length; row++) {\n            var format = formats[row];\n            var rowCells = cellRows[row];\n            var leadingCell = rowCells[rowCells.length - 1];\n            var isSuperRow = (formats.length > 1) && (row < (formats.length - 1)); // more than one row and not the last\n            var newCell = null;\n            if (isSuperRow) {\n                var text = dateEnv.format(date, format);\n                if (!leadingCell || (leadingCell.text !== text)) {\n                    newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n                }\n                else {\n                    leadingCell.colspan += 1;\n                }\n            }\n            else {\n                if (!leadingCell ||\n                    isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval))) {\n                    var text = dateEnv.format(date, format);\n                    newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n                }\n                else {\n                    leadingCell.colspan += 1;\n                }\n            }\n            if (newCell) {\n                newCell.weekStart = isWeekStart;\n                rowCells.push(newCell);\n            }\n        }\n    }\n    return cellRows;\n}\nfunction buildCellObject(date, text, rowUnit, allOptions, dateEnv) {\n    var spanHtml = buildGotoAnchorHtml(allOptions, dateEnv, {\n        date: date,\n        type: rowUnit,\n        forceOff: !rowUnit\n    }, {\n        'class': 'fc-cell-text'\n    }, htmlEscape(text));\n    return { text: text, spanHtml: spanHtml, date: date, colspan: 1, isWeekStart: false };\n}\n\nvar TimelineNowIndicator = /** @class */ (function () {\n    function TimelineNowIndicator(headParent, bodyParent) {\n        this.headParent = headParent;\n        this.bodyParent = bodyParent;\n    }\n    TimelineNowIndicator.prototype.render = function (coord, isRtl) {\n        var styleProps = isRtl ? { right: -coord } : { left: coord };\n        this.headParent.appendChild(this.arrowEl = createElement('div', {\n            className: 'fc-now-indicator fc-now-indicator-arrow',\n            style: styleProps\n        }));\n        this.bodyParent.appendChild(this.lineEl = createElement('div', {\n            className: 'fc-now-indicator fc-now-indicator-line',\n            style: styleProps\n        }));\n    };\n    TimelineNowIndicator.prototype.unrender = function () {\n        if (this.arrowEl) {\n            removeElement(this.arrowEl);\n        }\n        if (this.lineEl) {\n            removeElement(this.lineEl);\n        }\n    };\n    return TimelineNowIndicator;\n}());\n\nvar STICKY_PROP_VAL = computeStickyPropVal(); // if null, means not supported at all\nvar IS_MS_EDGE = /Edge/.test(navigator.userAgent);\nvar IS_SAFARI = STICKY_PROP_VAL === '-webkit-sticky'; // good b/c doesn't confuse chrome\nvar STICKY_CLASSNAME = 'fc-sticky';\n/*\nuseful beyond the native position:sticky for these reasons:\n- support in IE11\n- nice centering support\n*/\nvar StickyScroller = /** @class */ (function () {\n    function StickyScroller(scroller, isRtl, isVertical) {\n        var _this = this;\n        this.usingRelative = null;\n        /*\n        known bug: called twice on init. problem when mixing with ScrollJoiner\n        */\n        this.updateSize = function () {\n            var els = Array.prototype.slice.call(_this.scroller.canvas.el.querySelectorAll('.' + STICKY_CLASSNAME));\n            var elGeoms = _this.queryElGeoms(els);\n            var viewportWidth = _this.scroller.el.clientWidth;\n            if (_this.usingRelative) {\n                var elDestinations = _this.computeElDestinations(elGeoms, viewportWidth); // read before prepPositioning\n                assignRelativePositions(els, elGeoms, elDestinations);\n            }\n            else {\n                assignStickyPositions(els, elGeoms, viewportWidth);\n            }\n        };\n        this.scroller = scroller;\n        this.usingRelative =\n            !STICKY_PROP_VAL || // IE11\n                (IS_MS_EDGE && isRtl) || // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/18883305/\n                ((IS_MS_EDGE || IS_SAFARI) && isVertical); // because doesn't work with rowspan in tables, our only vertial use\n        if (this.usingRelative) {\n            scroller.on('scrollEnd', this.updateSize);\n        }\n    }\n    StickyScroller.prototype.destroy = function () {\n        this.scroller.off('scrollEnd', this.updateSize);\n    };\n    StickyScroller.prototype.queryElGeoms = function (els) {\n        var canvasOrigin = this.scroller.canvas.el.getBoundingClientRect();\n        var elGeoms = [];\n        for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n            var el = els_1[_i];\n            var parentBound = translateRect(el.parentNode.getBoundingClientRect(), -canvasOrigin.left, -canvasOrigin.top);\n            var elRect = el.getBoundingClientRect();\n            var computedStyles = window.getComputedStyle(el);\n            var computedTextAlign = window.getComputedStyle(el.parentNode).textAlign; // ask the parent\n            var intendedTextAlign = computedTextAlign;\n            var naturalBound = null;\n            if (computedStyles.position !== 'sticky') {\n                naturalBound = translateRect(elRect, -canvasOrigin.left - (parseFloat(computedStyles.left) || 0), // could be 'auto'\n                -canvasOrigin.top - (parseFloat(computedStyles.top) || 0));\n            }\n            if (el.hasAttribute('data-sticky-center')) {\n                intendedTextAlign = 'center';\n            }\n            elGeoms.push({\n                parentBound: parentBound,\n                naturalBound: naturalBound,\n                elWidth: elRect.width,\n                elHeight: elRect.height,\n                computedTextAlign: computedTextAlign,\n                intendedTextAlign: intendedTextAlign\n            });\n        }\n        return elGeoms;\n    };\n    StickyScroller.prototype.computeElDestinations = function (elGeoms, viewportWidth) {\n        var viewportLeft = this.scroller.getScrollFromLeft();\n        var viewportTop = this.scroller.getScrollTop();\n        var viewportRight = viewportLeft + viewportWidth;\n        return elGeoms.map(function (elGeom) {\n            var elWidth = elGeom.elWidth, elHeight = elGeom.elHeight, parentBound = elGeom.parentBound, naturalBound = elGeom.naturalBound;\n            var destLeft; // relative to canvas topleft\n            var destTop; // \"\n            switch (elGeom.intendedTextAlign) {\n                case 'left':\n                    destLeft = viewportLeft;\n                    break;\n                case 'right':\n                    destLeft = viewportRight - elWidth;\n                    break;\n                case 'center':\n                    destLeft = (viewportLeft + viewportRight) / 2 - elWidth / 2;\n                    break;\n            }\n            destLeft = Math.min(destLeft, parentBound.right - elWidth);\n            destLeft = Math.max(destLeft, parentBound.left);\n            destTop = viewportTop;\n            destTop = Math.min(destTop, parentBound.bottom - elHeight);\n            destTop = Math.max(destTop, naturalBound.top); // better to use natural top for upper bound\n            return { left: destLeft, top: destTop };\n        });\n    };\n    return StickyScroller;\n}());\nfunction assignRelativePositions(els, elGeoms, elDestinations) {\n    els.forEach(function (el, i) {\n        var naturalBound = elGeoms[i].naturalBound;\n        applyStyle(el, {\n            position: 'relative',\n            left: elDestinations[i].left - naturalBound.left,\n            top: elDestinations[i].top - naturalBound.top\n        });\n    });\n}\nfunction assignStickyPositions(els, elGeoms, viewportWidth) {\n    els.forEach(function (el, i) {\n        var stickyLeft = 0;\n        if (elGeoms[i].intendedTextAlign === 'center') {\n            stickyLeft = (viewportWidth - elGeoms[i].elWidth) / 2;\n            // needs to be forced to left?\n            if (elGeoms[i].computedTextAlign === 'center') {\n                el.setAttribute('data-sticky-center', '') // remember for next queryElGeoms\n                ;\n                el.parentNode.style.textAlign = 'left';\n            }\n        }\n        applyStyle(el, {\n            position: STICKY_PROP_VAL,\n            left: stickyLeft,\n            right: 0,\n            top: 0\n        });\n    });\n}\nfunction computeStickyPropVal() {\n    var el = htmlToElement('<div style=\"position:-webkit-sticky;position:sticky\"></div>');\n    var val = el.style.position;\n    if (val.indexOf('sticky') !== -1) {\n        return val;\n    }\n    else {\n        return null;\n    }\n}\n\nvar TimeAxis = /** @class */ (function (_super) {\n    __extends(TimeAxis, _super);\n    function TimeAxis(headerContainerEl, bodyContainerEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.layout = new HeaderBodyLayout(headerContainerEl, bodyContainerEl, 'auto');\n        return _this;\n    }\n    TimeAxis.prototype.render = function (props, context) {\n        var tDateProfile = this.tDateProfile =\n            buildTimelineDateProfile(props.dateProfile, context.dateEnv, context.options, props.dateProfileGenerator); // TODO: cache\n        this.renderSkeleton(context);\n        this.header.receiveProps({\n            dateProfile: props.dateProfile,\n            tDateProfile: tDateProfile\n        }, context);\n        this.slats.receiveProps({\n            dateProfile: props.dateProfile,\n            tDateProfile: tDateProfile\n        }, context);\n    };\n    TimeAxis.prototype.destroy = function () {\n        this.renderSkeleton.unrender();\n        this.layout.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    TimeAxis.prototype._renderSkeleton = function (context) {\n        var layout = this.layout;\n        var headerEnhancedScroller = layout.headerScroller.enhancedScroll;\n        var bodyEnhancedScroller = layout.bodyScroller.enhancedScroll;\n        // needs to go after layout, which has ScrollJoiner\n        this.headStickyScroller = new StickyScroller(headerEnhancedScroller, context.isRtl, false); // isVertical=false\n        this.bodyStickyScroller = new StickyScroller(bodyEnhancedScroller, context.isRtl, false); // isVertical=false\n        this.header = new TimelineHeader(headerEnhancedScroller.canvas.contentEl);\n        this.slats = new TimelineSlats(bodyEnhancedScroller.canvas.bgEl);\n        this.nowIndicator = new TimelineNowIndicator(headerEnhancedScroller.canvas.el, bodyEnhancedScroller.canvas.el);\n    };\n    TimeAxis.prototype._unrenderSkeleton = function () {\n        this.header.destroy();\n        this.slats.destroy();\n        this.nowIndicator.unrender();\n        this.headStickyScroller.destroy();\n        this.bodyStickyScroller.destroy();\n    };\n    // Now Indicator\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        var context = this.context;\n        // yuck\n        var tDateProfile = this.tDateProfile =\n            buildTimelineDateProfile(dateProfile, context.dateEnv, context.options, dateProfileGenerator); // TODO: cache\n        if (tDateProfile.isTimeScale) {\n            return greatestDurationDenominator(tDateProfile.slotDuration).unit;\n        }\n    };\n    // will only execute if isTimeScale\n    TimeAxis.prototype.renderNowIndicator = function (date) {\n        if (rangeContainsMarker(this.tDateProfile.normalizedRange, date)) {\n            this.nowIndicator.render(this.dateToCoord(date), this.context.isRtl);\n        }\n    };\n    // will only execute if isTimeScale\n    TimeAxis.prototype.unrenderNowIndicator = function () {\n        this.nowIndicator.unrender();\n    };\n    // Sizing\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n        this.applySlotWidth(this.computeSlotWidth());\n        // adjusts gutters. do after slot widths set\n        this.layout.setHeight(totalHeight, isAuto);\n        // pretty much just queries coords. do last\n        this.slats.updateSize();\n    };\n    TimeAxis.prototype.updateStickyScrollers = function () {\n        this.headStickyScroller.updateSize();\n        this.bodyStickyScroller.updateSize();\n    };\n    TimeAxis.prototype.computeSlotWidth = function () {\n        var slotWidth = this.context.options.slotWidth || '';\n        if (slotWidth === '') {\n            slotWidth = this.computeDefaultSlotWidth(this.tDateProfile);\n        }\n        return slotWidth;\n    };\n    TimeAxis.prototype.computeDefaultSlotWidth = function (tDateProfile) {\n        var maxInnerWidth = 0; // TODO: harness core's `matchCellWidths` for this\n        this.header.innerEls.forEach(function (innerEl, i) {\n            maxInnerWidth = Math.max(maxInnerWidth, innerEl.getBoundingClientRect().width);\n        });\n        var headingCellWidth = Math.ceil(maxInnerWidth) + 1; // assume no padding, and one pixel border\n        // in TimelineView.defaults we ensured that labelInterval is an interval of slotDuration\n        // TODO: rename labelDuration?\n        var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n        var slotWidth = Math.ceil(headingCellWidth / slotsPerLabel);\n        var minWidth = window.getComputedStyle(this.header.slatColEls[0]).minWidth;\n        if (minWidth) {\n            minWidth = parseInt(minWidth, 10);\n            if (minWidth) {\n                slotWidth = Math.max(slotWidth, minWidth);\n            }\n        }\n        return slotWidth;\n    };\n    TimeAxis.prototype.applySlotWidth = function (slotWidth) {\n        var _a = this, layout = _a.layout, tDateProfile = _a.tDateProfile;\n        var containerWidth = '';\n        var containerMinWidth = '';\n        var nonLastSlotWidth = '';\n        if (slotWidth !== '') {\n            slotWidth = Math.round(slotWidth);\n            containerWidth = slotWidth * tDateProfile.slotDates.length;\n            containerMinWidth = '';\n            nonLastSlotWidth = slotWidth;\n            var availableWidth = layout.bodyScroller.enhancedScroll.getClientWidth();\n            if (availableWidth > containerWidth) {\n                containerMinWidth = availableWidth;\n                containerWidth = '';\n                nonLastSlotWidth = Math.floor(availableWidth / tDateProfile.slotDates.length);\n            }\n        }\n        layout.headerScroller.enhancedScroll.canvas.setWidth(containerWidth);\n        layout.headerScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n        layout.bodyScroller.enhancedScroll.canvas.setWidth(containerWidth);\n        layout.bodyScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n        if (nonLastSlotWidth !== '') {\n            this.header.slatColEls.slice(0, -1).concat(this.slats.slatColEls.slice(0, -1)).forEach(function (el) {\n                el.style.width = nonLastSlotWidth + 'px';\n            });\n        }\n    };\n    // returned value is between 0 and the number of snaps\n    TimeAxis.prototype.computeDateSnapCoverage = function (date) {\n        var tDateProfile = this.tDateProfile;\n        var dateEnv = this.context.dateEnv;\n        var snapDiff = dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.snapDuration);\n        if (snapDiff < 0) {\n            return 0;\n        }\n        else if (snapDiff >= tDateProfile.snapDiffToIndex.length) {\n            return tDateProfile.snapCnt;\n        }\n        else {\n            var snapDiffInt = Math.floor(snapDiff);\n            var snapCoverage = tDateProfile.snapDiffToIndex[snapDiffInt];\n            if (isInt(snapCoverage)) { // not an in-between value\n                snapCoverage += snapDiff - snapDiffInt; // add the remainder\n            }\n            else {\n                // a fractional value, meaning the date is not visible\n                // always round up in this case. works for start AND end dates in a range.\n                snapCoverage = Math.ceil(snapCoverage);\n            }\n            return snapCoverage;\n        }\n    };\n    // for LTR, results range from 0 to width of area\n    // for RTL, results range from negative width of area to 0\n    TimeAxis.prototype.dateToCoord = function (date) {\n        var tDateProfile = this.tDateProfile;\n        var snapCoverage = this.computeDateSnapCoverage(date);\n        var slotCoverage = snapCoverage / tDateProfile.snapsPerSlot;\n        var slotIndex = Math.floor(slotCoverage);\n        slotIndex = Math.min(slotIndex, tDateProfile.slotCnt - 1);\n        var partial = slotCoverage - slotIndex;\n        var _a = this.slats, innerCoordCache = _a.innerCoordCache, outerCoordCache = _a.outerCoordCache;\n        if (this.context.isRtl) {\n            return (outerCoordCache.rights[slotIndex] -\n                (innerCoordCache.getWidth(slotIndex) * partial)) - outerCoordCache.originClientRect.width;\n        }\n        else {\n            return (outerCoordCache.lefts[slotIndex] +\n                (innerCoordCache.getWidth(slotIndex) * partial));\n        }\n    };\n    TimeAxis.prototype.rangeToCoords = function (range) {\n        if (this.context.isRtl) {\n            return { right: this.dateToCoord(range.start), left: this.dateToCoord(range.end) };\n        }\n        else {\n            return { left: this.dateToCoord(range.start), right: this.dateToCoord(range.end) };\n        }\n    };\n    // Scrolling\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.computeDateScroll = function (duration) {\n        var _a = this.context, dateEnv = _a.dateEnv, isRtl = _a.isRtl;\n        var dateProfile = this.props.dateProfile;\n        var left = 0;\n        if (dateProfile) {\n            left = this.dateToCoord(dateEnv.add(startOfDay(dateProfile.activeRange.start), // startOfDay needed?\n            duration));\n            // hack to overcome the left borders of non-first slat\n            if (!isRtl && left) {\n                left += 1;\n            }\n        }\n        return { left: left };\n    };\n    TimeAxis.prototype.queryDateScroll = function () {\n        var enhancedScroll = this.layout.bodyScroller.enhancedScroll;\n        return {\n            left: enhancedScroll.getScrollLeft()\n        };\n    };\n    TimeAxis.prototype.applyDateScroll = function (scroll) {\n        // TODO: lame we have to update both. use the scrolljoiner instead maybe\n        this.layout.bodyScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n        this.layout.headerScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n    };\n    return TimeAxis;\n}(Component));\n\nvar TimelineLaneEventRenderer = /** @class */ (function (_super) {\n    __extends(TimelineLaneEventRenderer, _super);\n    function TimelineLaneEventRenderer(masterContainerEl, timeAxis) {\n        var _this = _super.call(this) || this;\n        _this.masterContainerEl = masterContainerEl;\n        _this.timeAxis = timeAxis;\n        return _this;\n    }\n    TimelineLaneEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        classes.unshift('fc-timeline-event', 'fc-h-event');\n        var timeText = this.getTimeText(eventRange);\n        return '<a class=\"' + classes.join(' ') + '\" style=\"' + cssToStr(this.getSkinCss(eventUi)) + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            '>' +\n            (timeText ?\n                '<span class=\"fc-time-wrap\">' +\n                    '<span class=\"fc-time\">' +\n                    htmlEscape(timeText) +\n                    '</span>' +\n                    '</span>'\n                :\n                    '') +\n            '<span class=\"fc-title-wrap\">' +\n            '<span class=\"fc-title fc-sticky\">' +\n            (eventDef.title ? htmlEscape(eventDef.title) : '&nbsp;') +\n            '</span>' +\n            '</span>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    TimelineLaneEventRenderer.prototype.computeDisplayEventTime = function () {\n        return !this.timeAxis.tDateProfile.isTimeScale; // because times should be obvious via axis\n    };\n    TimelineLaneEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false;\n    };\n    // Computes a default event time formatting string if `timeFormat` is not explicitly defined\n    TimelineLaneEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    TimelineLaneEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        if (!this.el && this.masterContainerEl) {\n            this.el = createElement('div', { className: 'fc-event-container' });\n            if (mirrorInfo) {\n                this.el.classList.add('fc-mirror-container');\n            }\n            this.masterContainerEl.appendChild(this.el);\n        }\n        if (this.el) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                this.el.appendChild(seg.el);\n            }\n        }\n    };\n    TimelineLaneEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    // computes AND assigns (assigns the left/right at least). bad\n    TimelineLaneEventRenderer.prototype.computeSegSizes = function (segs) {\n        var timeAxis = this.timeAxis;\n        for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n            var seg = segs_3[_i];\n            var coords = timeAxis.rangeToCoords(seg); // works because Seg has start/end\n            applyStyle(seg.el, {\n                left: (seg.left = coords.left),\n                right: -(seg.right = coords.right)\n            });\n        }\n    };\n    TimelineLaneEventRenderer.prototype.assignSegSizes = function (segs) {\n        if (!this.el) {\n            return;\n        }\n        // compute seg verticals\n        for (var _i = 0, segs_4 = segs; _i < segs_4.length; _i++) {\n            var seg = segs_4[_i];\n            seg.height = computeHeightAndMargins(seg.el);\n        }\n        this.buildSegLevels(segs); // populates above/below props for computeOffsetForSegs\n        var totalHeight = computeOffsetForSegs(segs); // also assigns seg.top\n        applyStyleProp(this.el, 'height', totalHeight);\n        // assign seg verticals\n        for (var _a = 0, segs_5 = segs; _a < segs_5.length; _a++) {\n            var seg = segs_5[_a];\n            applyStyleProp(seg.el, 'top', seg.top);\n        }\n    };\n    TimelineLaneEventRenderer.prototype.buildSegLevels = function (segs) {\n        var segLevels = [];\n        segs = this.sortEventSegs(segs);\n        for (var _i = 0, segs_6 = segs; _i < segs_6.length; _i++) {\n            var unplacedSeg = segs_6[_i];\n            unplacedSeg.above = [];\n            // determine the first level with no collisions\n            var level = 0; // level index\n            while (level < segLevels.length) {\n                var isLevelCollision = false;\n                // determine collisions\n                for (var _a = 0, _b = segLevels[level]; _a < _b.length; _a++) {\n                    var placedSeg = _b[_a];\n                    if (timeRowSegsCollide(unplacedSeg, placedSeg)) {\n                        unplacedSeg.above.push(placedSeg);\n                        isLevelCollision = true;\n                    }\n                }\n                if (isLevelCollision) {\n                    level += 1;\n                }\n                else {\n                    break;\n                }\n            }\n            // insert into the first non-colliding level. create if necessary\n            (segLevels[level] || (segLevels[level] = []))\n                .push(unplacedSeg);\n            // record possible colliding segments below (TODO: automated test for this)\n            level += 1;\n            while (level < segLevels.length) {\n                for (var _c = 0, _d = segLevels[level]; _c < _d.length; _c++) {\n                    var belowSeg = _d[_c];\n                    if (timeRowSegsCollide(unplacedSeg, belowSeg)) {\n                        belowSeg.above.push(unplacedSeg);\n                    }\n                }\n                level += 1;\n            }\n        }\n        return segLevels;\n    };\n    return TimelineLaneEventRenderer;\n}(FgEventRenderer));\nfunction computeOffsetForSegs(segs) {\n    var max = 0;\n    for (var _i = 0, segs_7 = segs; _i < segs_7.length; _i++) {\n        var seg = segs_7[_i];\n        max = Math.max(max, computeOffsetForSeg(seg));\n    }\n    return max;\n}\nfunction computeOffsetForSeg(seg) {\n    if ((seg.top == null)) {\n        seg.top = computeOffsetForSegs(seg.above);\n    }\n    return seg.top + seg.height;\n}\nfunction timeRowSegsCollide(seg0, seg1) {\n    return (seg0.left < seg1.right) && (seg0.right > seg1.left);\n}\n\nvar TimelineLaneFillRenderer = /** @class */ (function (_super) {\n    __extends(TimelineLaneFillRenderer, _super);\n    function TimelineLaneFillRenderer(masterContainerEl, timeAxis) {\n        var _this = _super.call(this) || this;\n        _this.masterContainerEl = masterContainerEl;\n        _this.timeAxis = timeAxis;\n        return _this;\n    }\n    TimelineLaneFillRenderer.prototype.attachSegs = function (type, segs) {\n        if (segs.length) {\n            var className = void 0;\n            if (type === 'businessHours') {\n                className = 'bgevent';\n            }\n            else {\n                className = type.toLowerCase();\n            }\n            // making a new container each time is OKAY\n            // all types of segs (background or business hours or whatever) are rendered in one pass\n            var containerEl = createElement('div', { className: 'fc-' + className + '-container' });\n            this.masterContainerEl.appendChild(containerEl);\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                containerEl.appendChild(seg.el);\n            }\n            return [containerEl]; // return value\n        }\n    };\n    TimelineLaneFillRenderer.prototype.computeSegSizes = function (segs) {\n        var timeAxis = this.timeAxis;\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            var coords = timeAxis.rangeToCoords(seg);\n            seg.left = coords.left;\n            seg.right = coords.right;\n        }\n    };\n    TimelineLaneFillRenderer.prototype.assignSegSizes = function (segs) {\n        for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n            var seg = segs_3[_i];\n            applyStyle(seg.el, {\n                left: seg.left,\n                right: -seg.right\n            });\n        }\n    };\n    return TimelineLaneFillRenderer;\n}(FillRenderer));\n\nvar TimelineLane = /** @class */ (function (_super) {\n    __extends(TimelineLane, _super);\n    function TimelineLane(fgContainerEl, bgContainerEl, timeAxis) {\n        var _this = _super.call(this, bgContainerEl) || this;\n        _this.slicer = new TimelineLaneSlicer();\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize);\n        _this.fgContainerEl = fgContainerEl;\n        _this.timeAxis = timeAxis;\n        var fillRenderer = _this.fillRenderer = new TimelineLaneFillRenderer(bgContainerEl, timeAxis);\n        var eventRenderer = _this.eventRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n        _this.mirrorRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'));\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'));\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'));\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer));\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        return _this;\n    }\n    TimelineLane.prototype.render = function (props, context) {\n        var timeAxis = this.timeAxis;\n        var slicedProps = this.slicer.sliceProps(props, props.dateProfile, timeAxis.tDateProfile.isTimeScale ? null : props.nextDayThreshold, context.calendar, this, timeAxis);\n        this.renderBusinessHours(context, slicedProps.businessHourSegs);\n        this.renderDateSelection(context, slicedProps.dateSelectionSegs);\n        this.renderBgEvents(context, slicedProps.bgEventSegs);\n        this.renderFgEvents(context, slicedProps.fgEventSegs);\n        this.renderEventSelection(slicedProps.eventSelection);\n        this.renderEventDrag(slicedProps.eventDrag);\n        this.renderEventResize(slicedProps.eventResize);\n    };\n    TimelineLane.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderBusinessHours.unrender();\n        this.renderDateSelection.unrender();\n        this.renderBgEvents.unrender();\n        this.renderFgEvents.unrender();\n        this.renderEventSelection.unrender();\n        this.renderEventDrag.unrender();\n        this.renderEventResize.unrender();\n    };\n    TimelineLane.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._renderEventResize = function (state) {\n        if (state) {\n            // HACK. eventRenderer and fillRenderer both use these segs. would compete over seg.el\n            var segsForHighlight = state.segs.map(function (seg) {\n                return __assign({}, seg);\n            });\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, segsForHighlight);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    return TimelineLane;\n}(DateComponent));\nvar TimelineLaneSlicer = /** @class */ (function (_super) {\n    __extends(TimelineLaneSlicer, _super);\n    function TimelineLaneSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimelineLaneSlicer.prototype.sliceRange = function (origRange, timeAxis) {\n        var tDateProfile = timeAxis.tDateProfile;\n        var _a = timeAxis.props, dateProfile = _a.dateProfile, dateProfileGenerator = _a.dateProfileGenerator;\n        var dateEnv = timeAxis.context.dateEnv;\n        var normalRange = normalizeRange(origRange, tDateProfile, dateEnv);\n        var segs = [];\n        // protect against when the span is entirely in an invalid date region\n        if (timeAxis.computeDateSnapCoverage(normalRange.start) < timeAxis.computeDateSnapCoverage(normalRange.end)) {\n            // intersect the footprint's range with the grid's range\n            var slicedRange = intersectRanges(normalRange, tDateProfile.normalizedRange);\n            if (slicedRange) {\n                segs.push({\n                    start: slicedRange.start,\n                    end: slicedRange.end,\n                    isStart: slicedRange.start.valueOf() === normalRange.start.valueOf() && isValidDate(slicedRange.start, tDateProfile, dateProfile, dateProfileGenerator),\n                    isEnd: slicedRange.end.valueOf() === normalRange.end.valueOf() && isValidDate(addMs(slicedRange.end, -1), tDateProfile, dateProfile, dateProfileGenerator)\n                });\n            }\n        }\n        return segs;\n    };\n    return TimelineLaneSlicer;\n}(Slicer));\n\nvar TimelineView = /** @class */ (function (_super) {\n    __extends(TimelineView, _super);\n    function TimelineView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.startInteractive = memoizeRendering(_this._startInteractive, _this._stopInteractive);\n        return _this;\n    }\n    TimelineView.prototype._startInteractive = function (timeAxisEl) {\n        this.context.calendar.registerInteractiveComponent(this, {\n            el: timeAxisEl\n        });\n    };\n    TimelineView.prototype._stopInteractive = function () {\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    TimelineView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // flags for updateSize, addScroll. and _renderSkeleton/_unrenderSkeleton\n        this.renderSkeleton(this.context);\n        this.timeAxis.receiveProps({\n            dateProfileGenerator: props.dateProfileGenerator,\n            dateProfile: props.dateProfile\n        }, context);\n        this.startInteractive(this.timeAxis.slats.el);\n        this.lane.receiveProps(__assign({}, props, { nextDayThreshold: this.context.nextDayThreshold }), context);\n        this.startNowIndicator(props.dateProfile, props.dateProfileGenerator);\n    };\n    TimelineView.prototype.destroy = function () {\n        this.startInteractive.unrender(); // \"unrender\" a weird name\n        this.renderSkeleton.unrender();\n        _super.prototype.destroy.call(this);\n    };\n    TimelineView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-timeline');\n        if (context.options.eventOverlap === false) {\n            this.el.classList.add('fc-no-overlap');\n        }\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.timeAxis = new TimeAxis(this.el.querySelector('thead .fc-time-area'), this.el.querySelector('tbody .fc-time-area'));\n        this.lane = new TimelineLane(this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.contentEl, this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.bgEl, this.timeAxis);\n    };\n    TimelineView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-timeline');\n        this.el.classList.remove('fc-no-overlap');\n        this.timeAxis.destroy();\n        this.lane.destroy();\n    };\n    TimelineView.prototype.renderSkeletonHtml = function () {\n        var theme = this.context.theme;\n        return \"<table class=\\\"\" + theme.getClass('tableGrid') + \"\\\"> <thead class=\\\"fc-head\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetHeader') + \"\\\"></td> </tr> </thead> <tbody class=\\\"fc-body\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetContent') + \"\\\"></td> </tr> </tbody> </table>\";\n    };\n    TimelineView.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n        this.timeAxis.updateSize(isResize, totalHeight, isAuto);\n        this.lane.updateSize(isResize);\n    };\n    // Now Indicator\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        return this.timeAxis.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n    };\n    TimelineView.prototype.renderNowIndicator = function (date) {\n        this.timeAxis.renderNowIndicator(date);\n    };\n    TimelineView.prototype.unrenderNowIndicator = function () {\n        this.timeAxis.unrenderNowIndicator();\n    };\n    // Scroll System\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.computeDateScroll = function (duration) {\n        return this.timeAxis.computeDateScroll(duration);\n    };\n    TimelineView.prototype.applyScroll = function (scroll, isResize) {\n        _super.prototype.applyScroll.call(this, scroll, isResize); // will call applyDateScroll\n        var calendar = this.context.calendar;\n        // avoid updating stickyscroll too often\n        // TODO: repeat code as ResourceTimelineView::updateSize\n        if (isResize || calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated) {\n            this.timeAxis.updateStickyScrollers();\n        }\n    };\n    TimelineView.prototype.applyDateScroll = function (scroll) {\n        this.timeAxis.applyDateScroll(scroll);\n    };\n    TimelineView.prototype.queryScroll = function () {\n        var enhancedScroll = this.timeAxis.layout.bodyScroller.enhancedScroll;\n        return {\n            top: enhancedScroll.getScrollTop(),\n            left: enhancedScroll.getScrollLeft()\n        };\n    };\n    // Hit System\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.buildPositionCaches = function () {\n        this.timeAxis.slats.updateSize();\n    };\n    TimelineView.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var slatHit = this.timeAxis.slats.positionToHit(positionLeft);\n        if (slatHit) {\n            return {\n                component: this,\n                dateSpan: slatHit.dateSpan,\n                rect: {\n                    left: slatHit.left,\n                    right: slatHit.right,\n                    top: 0,\n                    bottom: elHeight\n                },\n                dayEl: slatHit.dayEl,\n                layer: 0\n            };\n        }\n    };\n    return TimelineView;\n}(View));\n\nvar main = createPlugin({\n    defaultView: 'timelineDay',\n    views: {\n        timeline: {\n            class: TimelineView,\n            eventResizableFromStart: true // how is this consumed for TimelineView tho?\n        },\n        timelineDay: {\n            type: 'timeline',\n            duration: { days: 1 }\n        },\n        timelineWeek: {\n            type: 'timeline',\n            duration: { weeks: 1 }\n        },\n        timelineMonth: {\n            type: 'timeline',\n            duration: { months: 1 }\n        },\n        timelineYear: {\n            type: 'timeline',\n            duration: { years: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { HeaderBodyLayout, ScrollJoiner, StickyScroller, TimeAxis, TimelineLane, TimelineView };\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common'; \r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { DataTablesModule } from 'angular-datatables';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AgmCoreModule } from '@agm/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { GooglePlaceModule } from 'ngx-google-places-autocomplete';\r\nimport { CalendarComponent } from './calendar.component';\r\nimport { MatNativeDateModule } from '@angular/material/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MonthTicketComponent } from './month-ticket/month-ticket.component';\r\nimport { MonthResourceComponent } from './month-resource/month-resource.component';\r\nimport { MapComponent } from './map/map.component';\r\nimport { NgbDateAdapter, NgbModule, NgbTimeAdapter } from '@ng-bootstrap/ng-bootstrap';\r\nimport { FullCalendarModule } from '@fullcalendar/angular';\r\nimport { CalendarModule } from 'angular-calendar';\r\nimport { DemoUtilsModule } from 'src/app/demo-utils/module';\r\nimport { SchedulerModule } from 'angular-calendar-scheduler';\r\nimport { LSelect2Module } from 'ngx-select2';\r\nimport { SelectDropDownModule } from 'ngx-select-dropdown';\r\nimport { NgbDateToStringAdapter } from 'src/app/ngb-date-to-string-adapter';\r\nimport { NgbTimeToStringAdapter } from 'src/app/ngb-time-to-string-adapter';\r\nimport { TicketStatusComponentModule } from 'src/app/generic-utils/Ticket-Status-Component/TicketStatusComponent.module';\r\nconst routes: Routes = [\r\n  { path: '', component: CalendarComponent,\r\n            children: [\r\n              { path: 'month-tickets', component: MonthTicketComponent },\r\n              { path: 'month-resource', component: MonthResourceComponent },\r\n              { path: 'map', component: MapComponent }\r\n            ]},\r\n];\r\n@NgModule({\r\n  declarations: [\r\n    CalendarComponent,\r\n    MonthTicketComponent,\r\n    MonthResourceComponent,\r\n    MapComponent],\r\n  imports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    DataTablesModule,\r\n    FormsModule,\r\n    MatDialogModule,\r\n    MatDatepickerModule,\r\n    MatFormFieldModule,\r\n    MatNativeDateModule,\r\n    MatInputModule,\r\n    NgbModule,\r\n    ReactiveFormsModule,\r\n    GooglePlaceModule,\r\n    AgmCoreModule.forRoot({ apiKey: environment.googleapiKey }),\r\n    RouterModule.forChild(routes),\r\n    CalendarModule,\r\n    SchedulerModule.forRoot(),\r\n    FullCalendarModule,\r\n    DemoUtilsModule,\r\n    LSelect2Module,\r\n    SelectDropDownModule,\r\n    TicketStatusComponentModule\r\n  ],\r\n  exports: [\r\n    MatDatepickerModule,\r\n    MatFormFieldModule,\r\n    MatNativeDateModule,\r\n    MatInputModule\r\n  ],\r\n  providers:  [\r\n                { provide: NgbDateAdapter, useClass: NgbDateToStringAdapter },\r\n                { provide: NgbTimeAdapter, useClass: NgbTimeToStringAdapter }\r\n              ],\r\n})\r\nexport class CalendarTicketModule { }\r\n","import { __decorate, __metadata } from 'tslib';\nimport { EventEmitter, Renderer2, ViewChild, ElementRef, Input, Output, Component, forwardRef, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, FormsModule } from '@angular/forms';\n\nimport * as ɵngcc0 from '@angular/core';\n\nconst _c0 = [\"selectControll\"];\nconst _c1 = [[[\"option\"], [\"optgroup\"]]];\nconst _c2 = [\"option, optgroup\"];\nvar LSelect2Component_1;\r\nlet LSelect2Component = LSelect2Component_1 = class LSelect2Component {\r\n    constructor(_renderer) {\r\n        this._renderer = _renderer;\r\n        this.options = {};\r\n        this.required = false;\r\n        this.maxCount = Number.MAX_SAFE_INTEGER;\r\n        this.minCount = Number.MIN_SAFE_INTEGER;\r\n        this.valueChange = new EventEmitter();\r\n        this._onChange = (_) => { };\r\n        this._onTouched = () => { };\r\n    }\r\n    ngOnInit() { }\r\n    ngAfterViewInit() {\r\n        this._jqueryElement = $(this.selectControll.nativeElement);\r\n        this.initSelect2();\r\n        this._jqueryElement.on('select2:select select2:unselect', (e) => {\r\n            let data = this._jqueryElement.select2('data');\r\n            for (let item of data) {\r\n                delete item.element;\r\n                delete item.disabled;\r\n                delete item.selected;\r\n            }\r\n            if (!this.options.multiple) {\r\n                data = (e.type == 'select2:unselect') ? null : data[0];\r\n            }\r\n            this.selectedValue = data;\r\n            this._onChange(data);\r\n            this.valueChange.emit(data);\r\n        });\r\n        if (this.selectedValue) {\r\n            this.setSelect2Value(this.selectedValue);\r\n        }\r\n    }\r\n    ngOnChanges(changes) {\r\n        if (!this._jqueryElement)\r\n            return;\r\n        if (this.hasChanged(changes)) {\r\n            this.initSelect2();\r\n            if (this.selectedValue) {\r\n                this.setSelect2Value(this.selectedValue);\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this._jqueryElement.select2('destroy');\r\n    }\r\n    writeValue(value) {\r\n        this.selectedValue = value;\r\n        if (value !== null && value !== undefined)\r\n            this.setSelect2Value(value);\r\n    }\r\n    registerOnChange(fn) {\r\n        this._onChange = fn;\r\n    }\r\n    registerOnTouched(fn) {\r\n        this._onTouched = fn;\r\n    }\r\n    setDisabledState(isDisabled) {\r\n        this.disabled = isDisabled;\r\n    }\r\n    validate(c) {\r\n        if (this.disabled) {\r\n            return null;\r\n        }\r\n        let length = this.selectedValue ? this.selectedValue.length : 0;\r\n        if (this.required === true && length === 0) {\r\n            return { required: true };\r\n        }\r\n        if (this.minCount > 0 && length < this.minCount) {\r\n            return { minCount: true };\r\n        }\r\n        if (this.maxCount > 0 && length > this.maxCount) {\r\n            return { maxCount: true };\r\n        }\r\n        return null;\r\n    }\r\n    initSelect2() {\r\n        if (this._jqueryElement.hasClass('select2-hidden-accessible') == true) {\r\n            this._jqueryElement.select2('destroy');\r\n            this._renderer.setProperty(this.selectControll.nativeElement, 'innerHTML', '');\r\n        }\r\n        let options = {\r\n            data: this.data\r\n        };\r\n        Object.assign(options, this.options);\r\n        this._jqueryElement.select2(options);\r\n    }\r\n    setSelect2Value(value) {\r\n        if (!this._jqueryElement || !value) {\r\n            this.selectedValue = value;\r\n            return;\r\n        }\r\n        ;\r\n        let targetVal = value['id'] || value;\r\n        if (Array.isArray(value)) {\r\n            targetVal = value.map(x => x['id']);\r\n        }\r\n        this._jqueryElement.val(targetVal).trigger('change');\r\n    }\r\n    hasChanged(changes) {\r\n        if (changes['data'] && JSON.stringify(changes['data'].previousValue) !== JSON.stringify(changes['data'].currentValue)) {\r\n            return true;\r\n        }\r\n        if (changes['options'] && JSON.stringify(changes['options'].previousValue) !== JSON.stringify(changes['options'].currentValue)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n};\nLSelect2Component.ɵfac = function LSelect2Component_Factory(t) { return new (t || LSelect2Component)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };\nLSelect2Component.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LSelect2Component, selectors: [[\"l-select2\"]], viewQuery: function LSelect2Component_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.selectControll = _t.first);\n    } }, inputs: { options: \"options\", required: \"required\", maxCount: \"maxCount\", minCount: \"minCount\", disabled: \"disabled\", data: \"data\" }, outputs: { valueChange: \"valueChange\" }, features: [ɵngcc0.ɵɵProvidersFeature([\n            {\n                provide: NG_VALUE_ACCESSOR,\n                useExisting: forwardRef(() => LSelect2Component_1),\n                multi: true\n            },\n            {\n                provide: NG_VALIDATORS,\n                useExisting: forwardRef(() => LSelect2Component_1),\n                multi: true\n            }\n        ]), ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c2, decls: 3, vars: 1, consts: [[2, \"width\", \"100%\", 3, \"disabled\"], [\"selectControll\", \"\"]], template: function LSelect2Component_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c1);\n        ɵngcc0.ɵɵelementStart(0, \"select\", 0, 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled);\n    } }, encapsulation: 2 });\r\nLSelect2Component.ctorParameters = () => [\r\n    { type: Renderer2 }\r\n];\r\n__decorate([\r\n    ViewChild('selectControll'),\r\n    __metadata(\"design:type\", ElementRef)\r\n], LSelect2Component.prototype, \"selectControll\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], LSelect2Component.prototype, \"data\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], LSelect2Component.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], LSelect2Component.prototype, \"options\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], LSelect2Component.prototype, \"required\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Number)\r\n], LSelect2Component.prototype, \"maxCount\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Number)\r\n], LSelect2Component.prototype, \"minCount\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], LSelect2Component.prototype, \"valueChange\", void 0);\r\nLSelect2Component = LSelect2Component_1 = __decorate([ __metadata(\"design:paramtypes\", [Renderer2])\r\n], LSelect2Component);\n\nlet LSelect2Module = class LSelect2Module {\r\n};\nLSelect2Module.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: LSelect2Module });\nLSelect2Module.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function LSelect2Module_Factory(t) { return new (t || LSelect2Module)(); }, imports: [[\n            CommonModule,\n            FormsModule\n        ]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LSelect2Component, [{\n        type: Component,\n        args: [{\n                selector: 'l-select2',\n                template: \"<select #selectControll [disabled]=\\\"disabled\\\" style=\\\"width: 100%\\\">\\r\\n  <ng-content select=\\\"option, optgroup\\\">\\r\\n  </ng-content>\\r\\n</select>\",\n                providers: [\n                    {\n                        provide: NG_VALUE_ACCESSOR,\n                        useExisting: forwardRef(() => LSelect2Component_1),\n                        multi: true\n                    },\n                    {\n                        provide: NG_VALIDATORS,\n                        useExisting: forwardRef(() => LSelect2Component_1),\n                        multi: true\n                    }\n                ]\n            }]\n    }], function () { return [{ type: ɵngcc0.Renderer2 }]; }, { options: [{\n            type: Input\n        }], required: [{\n            type: Input\n        }], maxCount: [{\n            type: Input\n        }], minCount: [{\n            type: Input\n        }], valueChange: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], selectControll: [{\n            type: ViewChild,\n            args: ['selectControll']\n        }], data: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(LSelect2Module, { declarations: function () { return [LSelect2Component]; }, imports: function () { return [CommonModule,\n        FormsModule]; }, exports: function () { return [LSelect2Component]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LSelect2Module, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule\n                ],\n                declarations: [\n                    LSelect2Component\n                ],\n                exports: [\n                    LSelect2Component\n                ]\n            }]\n    }], null, null); })();\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { LSelect2Component, LSelect2Module };\n\n//# sourceMappingURL=ngx-select2.js.map"]}