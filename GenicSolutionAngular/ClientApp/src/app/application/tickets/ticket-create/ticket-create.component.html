<form autocomplete="off" (submit)="onSubmit()">
    <div class="kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
        <div class="kt-subheader kt-grid__item" id="kt_subheader">
            <div class="kt-container kt-container--fluid ">
                <div class="kt-subheader__main">
                    <h3 class="kt-subheader__title">
                        <a href="javascript:;" routerLink="/dashboard">
                            Dashboard
                        </a>
                    </h3>
                    <span class="kt-subheader__separator kt-hidden"></span>
                    <div class="kt-subheader__breadcrumbs">
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                        <a href="javascript:;" routerLink="/tickets" class="kt-subheader__breadcrumbs-link"> {{this.currentUser.Ticket}}s
                        </a>
                    </div>
                    <span class="kt-subheader__separator kt-hidden"></span>
                    <div class="kt-subheader__breadcrumbs">
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i> {{btnText}} {{this.currentUser.Ticket}}
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" name="Id" #Id="ngModel" [(ngModel)]="service.formData.Id">
        <input type="hidden" name="CustomerId" #CustomerId="ngModel" [(ngModel)]="service.formData.CustomerId">
        <input type="hidden" name="PropertyId" #PropertyId="ngModel" [(ngModel)]="service.formData.PropertyId">
        <input type="hidden" name="CustomerCompanyName" #CustomerCompanyName="ngModel"
            [(ngModel)]="service.formData.CustomerCompanyName">
        <div class="new-request-main-section jobs-for-client-section">
            <div class="kt-container kt-container--fluid">
                <div class="new-requst-filter_form">
                    <div class="container">
                        <div class="row">
                            <div [ngClass]="IsRequest === true ? 'row col-md-9' : 'row col-md-12'">
                                <div class="col-md-12 section-client-requst-form">
                                    <div class="">
                                        <div class="kt-section">
                                            <h3 class="kt-section__title">
                                                <a *ngIf="createbuttontext === 'Create'" href="javascript:;" (click)="OpenAddClienDialog()">
                                                    <p>{{this.currentUser.Ticket.toUpperCase()}}S FOR*
                                                        <span [class.is-invalid]="!IsCustomerIsValid">
                                                            {{ service.formData.CustomerCompanyName }} &nbsp;
                                                            <i class="flaticon2-add"></i>
                                                        </span>
                                                    </p>
                                                </a>
                                                <a *ngIf="createbuttontext === 'Update'" title="Not Editable" href="javascript:;">
                                                    <p>{{this.currentUser.Ticket.toUpperCase()}}S FOR*
                                                        <span [class.is-invalid]="!IsCustomerIsValid">
                                                            {{ service.formData.CustomerCompanyName }}
                                                        </span>
                                                    </p>
                                                </a>
                                                <i data-toggle="kt-tooltip" data-width="auto" class="kt-section__help"
                                                    title=""
                                                    data-original-title="If different than the corresponding address"></i>
                                            </h3>
                                        </div>
                                    </div>
                                    <div class="ticket-top-sec">
                                        <div class="row">
                                            <div class="col-md-7 ticket-customer-name">
                                                <div class="qtAddressSection" *ngIf="PropertyAdrresssVisible">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <label>Address : &nbsp;</label><br>
                                                            <span><a href="https://maps.google.com/?q={{service.formData.CustomerAddress}}"
                                                                    target="_blank">{{ service.formData.CustomerAddress }}</a></span>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label>Contact Details: &nbsp;</label><br>
                                                            <label>{{service.formData.CustomerName}}</label><br>
                                                            <span>{{ service.formData.CustomerEmail }}</span>
                                                            <div>{{ service.formData.CustomerContactNo }}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <label for="">Title<span class="text-danger">*</span></label>
                                                <!-- <input type="text" name="Title" #Title="ngModel"
                                                    [(ngModel)]="service.formData.Title" class="form-control"
                                                    [class.is-invalid]="!isTitleValid" placeholder="Title"> -->
                                                <textarea name="Title" #Title="ngModel"
                                                [(ngModel)]="service.formData.Title" class="form-control"
                                                [class.is-invalid]="!isTitleValid" placeholder="Title" rows="3"
                                                ></textarea>
                                                <label for="">Description</label>
                                                <textarea class="form-control" name="Description" #Description="ngModel"
                                                    [(ngModel)]="service.formData.Description" rows="5"
                                                    placeholder="Description"></textarea>
                                            </div>
                                            <div class="col-md-5 ticket-customer-number">
                                                <div class="kt-widget4">
                                                    <div class="customer-ticket-head">
                                                        <strong>{{this.currentUser.Ticket}}s details</strong>
                                                    </div>
                                                    <div class="row" *ngIf="PropertyAdrresssVisible">
                                                        <div class="col-md-5"> {{this.currentUser.Ticket}}s Number
                                                        </div>
                                                        <div class="col-md-5 ticket_number">
                                                            <div class="input-group" *ngIf="!TicketNoChange">
                                                                <span
                                                                    class="input-group-addon">{{ service.formData.TicketId }}</span>

                                                            </div>
                                                            <div class="input-group" *ngIf="TicketNoChange">
                                                                <span
                                                                    class="input-group-addon">{{ genicProfile.formData.TicketPrefix }}-</span>
                                                                <input *ngIf="TicketNoChange" type="number"
                                                                    name="TicketId" #TicketId="ngModel"
                                                                    [(ngModel)]="service.formData.TicketUniqueID"
                                                                    class="form-control" placeholder="{{this.currentUser.Ticket}} Id" min="0"
                                                                    maxlength="5">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-2"><span class="kt-widget4__ext"><span
                                                                    class="kt-widget4__number kt-font-danger"><a
                                                                        (click)="onTicketNoChange()"
                                                                        href="javascript:;">{{TicketNoChangeBtn}}</a></span></span>
                                                        </div>
                                                        <div class="col-md-12 select_type">
                                                            <label for="">Select Type</label>
                                                            <ngx-select-dropdown tabindex="0" class="myselectClass"
                                                                (change)="changeValue($event)" [multiple]="true"
                                                                name="TicketIssueTypeSelectedOptions"
                                                                [(ngModel)]="TicketIssueTypeSelectedOptions"
                                                                [config]="config" [options]="TicketIssueTypeOptions">
                                                            </ngx-select-dropdown>
                                                        </div>
                                                        <div class="col-md-12 priority_type" *ngIf="customerservice.CustomerDepartmentTypeList.length > 1">
                                                            <label for="">Group</label>
                                                            <select name="SMTPId" #SMTPId="ngModel" [disabled]="isgroupDisabled"
                                                                [(ngModel)]="service.formData.SMTPId"
                                                                class="form-control">
                                                                <option value="0">Select Group</option>
                                                                <option *ngFor="let x of customerservice.CustomerDepartmentTypeList;let i=index; async" value="{{x.Id}}">{{x.Name}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-12 priority_type">
                                                            <label for="">Priority</label>
                                                            <select name="Priority" #Priority="ngModel"
                                                                [(ngModel)]="service.formData.Priority"
                                                                class="form-control">
                                                                <option value="0">Select Priority</option>
                                                                <option value="1">High</option>
                                                                <option value="2">Medium</option>
                                                                <option value="3">Low</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-12 select_type">
                                                            <label for="">{{this.currentUser.Ticket}} Type</label>
                                                            <select class="form-control" disabled>
                                                                <option value="">{{ service.formData.TicketType }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="kt-widget4">
                                                    <label *ngFor="let x of QuatationLocalList; let i=index; async"
                                                        class="kt-checkbox kt-checkbox--solid kt-checkbox--brand check-ticket">
                                                        <input name="chkBillingAddressSame"
                                                            (change)="CreateTicketFromQuotation($event, x)"
                                                            type="checkbox">
                                                        Quotation Number - {{ x.QuoteId }} <span></span>
                                                    </label>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 new-request-service-details-form">
                                    <div class="kt-portlet__body tabing_kt_portlet_body">
                                        <div class="job-client-tabbing">
                                            <ul class="nav nav-tabs nav-tabs-line nav-tabs-bold nav-tabs-line-3x nav-tabs-line-brand tabbing-jobs-client"
                                                role="tablist">
                                                <li class="nav-item nav-item-custom">
                                                    <a class="nav-link nav-link-custom active" data-toggle="tab"
                                                        (click)="TicketType('kt_tabs_3_1')" href="#kt_tabs_3_1">
                                                        <div class="icon"><i class="fas fa-ticket-alt"></i></div>
                                                        <div class="nav-content">
                                                            <h5>One of {{this.currentUser.Ticket}}s</h5>
                                                            <p>A one time {{this.currentUser.Ticket}}s with one or more visits</p>
                                                        </div>
                                                    </a>
                                                </li>
                                                <li *ngIf="createbuttontext === 'Create'"
                                                    class="nav-item nav-item-custom">
                                                    <a class="nav-link nav-link-custom" data-toggle="tab"
                                                        (click)="TicketType('kt_tabs_3_2')" href="#kt_tabs_3_2">
                                                        <div class="icon"><i class="fas fa-ticket-alt"></i></div>
                                                        <div class="nav-content">
                                                            <h5>Recurring {{this.currentUser.Ticket}}s</h5>
                                                            <p>A contract {{this.currentUser.Ticket}}s with repeating visits</p>
                                                        </div>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="tab-content job-for-tab-content">
                                            <div class="tab-pane active" id="kt_tabs_3_1" role="tabpanel">
                                                <div class="row">
                                                    <div
                                                        [ngClass]="service.formData.OneOffScheduled ? 'col-md-12':'col-md-8'">
                                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                            <div class="kt-portlet__head">
                                                                <div class="kt-portlet__head-label">
                                                                    <h3 class="kt-portlet__head-title">
                                                                        SCHEDULE
                                                                    </h3>
                                                                </div>
                                                                <div class="kt-portlet__head-toolbar">

                                                                    <div class="kt-checkbox-inline">
                                                                        <label class="kt-checkbox">
                                                                            <input type="checkbox"
                                                                                name="OneOffScheduled"
                                                                                #OneOffScheduled="ngModel"
                                                                                (change)="OneOffScheduledLater()"
                                                                                [(ngModel)]="service.formData.OneOffScheduled">
                                                                            Schedule later
                                                                            <span></span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="kt-portlet__body" *ngIf="OneOffIsVisible">
                                                                <div
                                                                    class="kt-widget19__wrapper jobs-for-client-widget-content">
                                                                    <div class="kt-widget19__content">
                                                                        <div class="col-md-4">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-12 padd-right-0">
                                                                                    <label>Appointment Start Date & Time<span
                                                                                            class="text-danger">*</span></label>
                                                                                    <div class="btooltip"> <i
                                                                                            class="fa fa-question-circle text-info"
                                                                                            style="cursor: help;"></i>
                                                                                        <span class="btooltiptext">Red
                                                                                            Highlighted date is National
                                                                                            Holiday, to make it Working
                                                                                            Day please go to Settings -
                                                                                            Business Hours - Holiday -
                                                                                            Enable Working</span>
                                                                                    </div>

                                                                                    <div class="input-group">

                                                                                        <ng-template #customDay let-date
                                                                                            let-currentMonth="currentMonth"
                                                                                            let-selected="selected"
                                                                                            let-disabled="disabled"
                                                                                            let-focused="focused">
                                                                                            <span class="custom-day"
                                                                                                [class.focused]="focused"
                                                                                                [class.bg-primary]="selected"
                                                                                                [class.hidden]="date.month !== currentMonth"
                                                                                                [class.isDisabledDate]="disabled"
                                                                                                [class.isHoliday]="isDisabledCss(date)">
                                                                                                {{ date.day }}
                                                                                            </span>
                                                                                        </ng-template>
                                                                                       
                                                                                        <ngb-datepicker
                                                                                            [disabled]="service.TicketTeamList.length > 0"
                                                                                            [minDate]="minDate"
                                                                                            [maxDate]="maxDate"
                                                                                            [markDisabled]="isDisabled"
                                                                                            name="AppointmentStart"
                                                                                            [dayTemplate]="customDay"
                                                                                            #AppointmentStart="ngModel"
                                                                                            [(ngModel)]="service.formData.AppointmentStart"
                                                                                            (select)="onAppointmentDateSelect()"
                                                                                            (navigate)="date=$event.next">
                                                                                        </ngb-datepicker>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-8">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-12">
                                                                                    <strong>
                                                                                        {{ service.formData.AppointmentStart | date: 'EEEE, MMMM d, y':'+0000' }}</strong>
                                                                                    <br>
                                                                                    <strong>
                                                                                        {{ service.formData.AppointmentStart | date: 'HH:mm:ss' + ' to ':'+0000' }}</strong>
                                                                                    <strong>
                                                                                        {{ service.formData.AppointmentEnd | date: 'HH:mm:ss':'+0000' }}</strong>
                                                                                    <br>
                                                                                    <br>
                                                                                </div>
                                                                                <div class="col-md-6 padd-right-0">
                                                                                    <label>Start Time</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group">
                                                                                            <ngb-timepicker [meridian]="meridian"
                                                                                                name="AppointmentStart" [disabled]="service.TicketTeamList.length > 0"
                                                                                                [(ngModel)]="service.formData.AppointmentStart">
                                                                                            </ngb-timepicker>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6 padd-left-0">
                                                                                    <label>End Time</label>
                                                                                    <div class="input-group">
                                                                                        <ngb-timepicker [meridian]="meridian"
                                                                                            name="AppointmentEnd" [disabled]="service.TicketTeamList.length > 0"
                                                                                            [(ngModel)]="service.formData.AppointmentEnd">
                                                                                        </ngb-timepicker>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4" *ngIf="!service.formData.OneOffScheduled">
                                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                            <div class="kt-portlet__head">
                                                                <div class="kt-portlet__head-label team_label">
                                                                    <h3 class="kt-portlet__head-title">
                                                                        TEAM
                                                                    </h3>
                                                                    <div class="add-icon">
                                                                        <a href="javascript:void(0)" class="add-item"
                                                                            (click)="OpenEngineerTeamListForAssignDialog()">
                                                                            <i *ngIf="!IsTeamShow"
                                                                                class="fa fa-plus"></i>
                                                                            <i *ngIf="IsTeamShow"
                                                                                class="fa fa-times"></i>
                                                                        </a>
                                                                        <div class="team-popup" *ngIf="IsTeamShow">
                                                                            <div class="team-head">
                                                                                <h2>Select {{this.currentUser.Engineer}}s</h2>
                                                                            </div>
                                                                            <div class="team-body">
                                                                                <div class="team-search clearfix">
                                                                                    <div class="form-group">
                                                                                        <input type="text"
                                                                                            (keydown)="onkeypresssearchengineer($event.target.value)"
                                                                                            (keyup)="onkeypresssearchengineer($event.target.value)"
                                                                                            class="form-control"
                                                                                            placeholder="Search">
                                                                                        <div class="addon">
                                                                                            <button type="button"
                                                                                                class="btn"><i
                                                                                                    class="fa fa-search"></i></button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="team-inner">
                                                                                    <table
                                                                                        *ngIf="EngineerLocalList.length > 0"
                                                                                        class="table table-striped- table-bordered table-hover table-checkable">
                                                                                        <tbody>
                                                                                            <tr
                                                                                                *ngFor="let x of EngineerLocalList">
                                                                                                <td class="engineer-list-class"
                                                                                                    id="{{x.Id}}">
                                                                                                    <input
                                                                                                        type="checkbox"
                                                                                                        (click)="AddEngineersToTicket(x.Id, x.EngineerName)">
                                                                                                </td>
                                                                                                <td
                                                                                                    title="{{x.EngineerEmail}}">
                                                                                                    <img *ngIf="x.EngineerLogo.length === 0"
                                                                                                        width="20px"
                                                                                                        src="{{localPrependUrl}}/assets/svg/noimage.svg" />
                                                                                                    <img *ngIf="x.EngineerLogo.length > 0"
                                                                                                        width="20px"
                                                                                                        src="{{x.EngineerLogo}}">
                                                                                                    {{x.EngineerName}}
                                                                                                    <span
                                                                                                        class="kt-badge kt-badge--success kt-badge--inline kt-badge--pill"
                                                                                                        *ngIf="x.Type === 1">Supervisor</span>
                                                                                                    <span
                                                                                                        class="kt-badge kt-badge--warning kt-badge--inline kt-badge--pill"
                                                                                                        *ngIf="x.Type === 2">Foreman</span>

                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                    <p
                                                                                        *ngIf="EngineerLocalList.length === 0">
                                                                                        No users are currently assigned
                                                                                    </p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="kt-portlet__head-toolbar">
                                                                </div>
                                                            </div>
                                                            <div class="kt-section__body" *ngIf="OneOffIsVisible">
                                                                <div class="form-group form-group-last row">
                                                                    <div class="col-lg-12">
                                                                        <div class="team-inner-1">
                                                                            <ul>
                                                                                <li *ngFor="let x of service.TicketTeamList"
                                                                                    title="{{x.EngineerName}}">
                                                                                    <img *ngIf="x.EngineerLogo.length === 0"
                                                                                        width="20px"
                                                                                        src="{{localPrependUrl}}/assets/svg/noimage.svg" />
                                                                                    <img *ngIf="x.EngineerLogo.length > 0"
                                                                                        width="20px"
                                                                                        src="{{x.EngineerLogo}}">
                                                                                    {{x.EngineerName}}
                                                                                    <span class="close"><a
                                                                                            title="remove"
                                                                                            (click)="AddEngineersToTicket(x.EngineerId, x.EngineerName)"
                                                                                            href="javascript:;">X</a></span>
                                                                                </li>
                                                                            </ul>
                                                                            <p
                                                                                *ngIf="service.TicketTeamList.length === 0">
                                                                                No users are currently assigned </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="kt_tabs_3_2" role="tabpanel">
                                                <div class="row">
                                                    <div class="col-md-9">
                                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                            <div class="kt-portlet__head">
                                                                <div class="kt-portlet__head-label">
                                                                    <h3 class="kt-portlet__head-title">
                                                                        SCHEDULE
                                                                    </h3>
                                                                </div>
                                                                <div class="kt-portlet__head-toolbar"
                                                                    style="display: none;">
                                                                    <div class="kt-checkbox-inline">
                                                                        <label class="kt-checkbox">
                                                                            <input type="checkbox"
                                                                                name="RecurringScheduled"
                                                                                #RecurringScheduled="ngModel"
                                                                                (change)="RecurringScheduledLater()"
                                                                                [(ngModel)]="service.formData.RecurringScheduled">
                                                                            Schedule later
                                                                            <span></span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="kt-portlet__body" *ngIf="RecurringIsVisible">
                                                                <div
                                                                    class="kt-widget19__wrapper jobs-for-client-widget-content">
                                                                    <div class="kt-widget19__content">
                                                                        <div class="col-md-6">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-12">
                                                                                    <span class="kt-switch kt-switch--icon"><label><input
                                                                                        (change)="SetSkipOff($event)" [checked]="skippublickholiday"
                                                                                        type="checkbox"><span></span></label></span>
                                                                                  <span class="swither-bootstrap-learn switcher-customer">
                                                                                    <strong>
                                                                                      skip weekly Off/Public holidays
                                                                                    </strong>
                                                                                  </span>
                                                                                </div>
                                                                                <div class="col-md-5 padd-right-0">
                                                                                    <label>Start Date<span
                                                                                            style="color: red;">*</span></label>
                                                                                    <div class="input-group">
                                                                                        <input readonly
                                                                                            placeholder="yyyy-mm-dd"
                                                                                            class="form-control"
                                                                                            name="AppointmentStart"
                                                                                            #AppointmentStart="ngModel"
                                                                                            [minDate]="minDate"
                                                                                            [maxDate]="maxDate"
                                                                                            ngbDatepicker
                                                                                            [disabled]="service.TicketTeamList.length > 0"
                                                                                            (click)="dpRecurringStartDate.toggle()"
                                                                                            #dpRecurringStartDate="ngbDatepicker"
                                                                                            [(ngModel)]="service.formData.AppointmentStart"
                                                                                            (mouseout)="onAppointmentDateSelect()">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group col-md-7">
                                                                                    <label>Duration<span
                                                                                            style="color: red;">*</span></label>
                                                                                    <div class="input-group">
                                                                                        <div
                                                                                            class="input-group-prepend">
                                                                                            <input type="text"
                                                                                                name="RecurringVisitFrequency"
                                                                                                #RecurringVisitFrequency="ngModel"
                                                                                                [(ngModel)]="service.formData.RecurringVisitFrequency"
                                                                                                (change)="RecurringTimeCalculator()"
                                                                                                style="width: 60px;"
                                                                                                class="form-control" [disabled]="service.TicketTeamList.length > 0">
                                                                                        </div>
                                                                                        <select name="country" [disabled]="service.TicketTeamList.length > 0"
                                                                                            class="form-control"
                                                                                            name="RecurringDuration"
                                                                                            #RecurringDuration="ngModel"
                                                                                            [(ngModel)]="service.formData.RecurringDuration"
                                                                                            (change)="RecurringTimeCalculator()"
                                                                                            aria-describedby="country-error"
                                                                                            aria-invalid="false">
                                                                                            <option value="">select</option>
                                                                                            <option value="1">Day(s)</option>
                                                                                            <option value="7">Week(s)</option>
                                                                                            <option value="30">Month(s)</option>
                                                                                            <option value="33">Alternet Month(s)</option>
                                                                                            <option value="90">Quarterly(s)</option>
                                                                                            <option value="180">Half Yearly(s)</option>
                                                                                            <option value="31">Custom Month(s)</option>
                                                                                            <option value="32">Custom Alternet Month(s)</option>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="col-md-12">
                                                                                        <a href="javascript:;"
                                                                                        *ngIf="service.formData.RecurringDuration == 7"
                                                                                        data-toggle="modal"
                                                                                        id="ticketshowWeekModal"
                                                                                        data-target="#ticketdetailModalWeek">select week days</a>
                                                                                    <a href="javascript:;"
                                                                                        *ngIf="service.formData.RecurringDuration == 30"
                                                                                        data-toggle="modal"
                                                                                        id="ticketshowMonthModal"
                                                                                        data-target="#ticketdetailModalMonth">select month days</a>
                                                                                    <a href="javascript:;"
                                                                                        *ngIf="service.formData.RecurringDuration == 31"
                                                                                        data-toggle="modal"
                                                                                        id="ticketshowCustomMonthModal"
                                                                                        data-target="#ticketdetailCustomModalMonth">select custom month days</a>
                                                                                    <a href="javascript:;"
                                                                                        *ngIf="service.formData.RecurringDuration == 32"
                                                                                        data-toggle="modal"
                                                                                        id="ticketshowCustomMonthModal2"
                                                                                        data-target="#ticketdetailCustomModalMonth2">select custom alternet month days</a>
                                                                                    <a href="javascript:;"
                                                                                        *ngIf="service.formData.RecurringDuration == 33"
                                                                                        data-toggle="modal"
                                                                                        id="ticketshowMonthModal"
                                                                                        data-target="#ticketdetailModalMonth">select month days</a>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <div class="form-group row">
                                                                                <div class="col-md-12" style="padding: 7px;">
                                                                                  <span >
                                                                                    <br>
                                                                                  </span>
                                                                                </div>
                                                                                <div class="col-md-6 padd-right-0">
                                                                                    <label>Start Time</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group">
                                                                                            <ngb-timepicker
                                                                                                name="AppointmentStart" [meridian]="meridian"
                                                                                                [(ngModel)]="service.formData.AppointmentStart">
                                                                                            </ngb-timepicker>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6 padd-left-0">
                                                                                    <label>End Time</label>
                                                                                    <div class="input-group">
                                                                                        <ngb-timepicker
                                                                                            name="AppointmentEnd" [meridian]="meridian"
                                                                                            [(ngModel)]="service.formData.AppointmentEnd">
                                                                                        </ngb-timepicker>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="kt-widget19__content">
                                                                        <div class="col-md-12 no-spacing row">
                                                                            <div class="col-md-12">
                                                                                <div class="visite-total-time">
                                                                                    <div
                                                                                        class="kt-wizard-v3__review-content">
                                                                                        <b>{{ service.formData.RecurringTotalVisit }}</b>
                                                                                        visits total
                                                                                        <div class="btooltip4" (click)="clickOntoolTip()"> <i
                                                                                            class="fa fa-question-circle text-info"
                                                                                            style="cursor: pointer;"></i>
                                                                                        <span [ngClass]="this.tooltip ? 'btooltiptext4-1':'btooltiptext4'" >
                                                                                            <span *ngFor="let v of recurringList">
                                                                                                {{v | date}} ({{v | date:'EEEE'}})<br>
                                                                                            </span>
                                                                                        </span>
                                                                                    </div><br>
                                                                                        First visit on
                                                                                        <b>{{ service.formData.RecurringStartDate | date:'EEEE, MMMM d, y':'+0000' }}</b><br>
                                                                                        Last visit on
                                                                                        <b>{{ service.formData.RecurringEndDate | date:'EEEE, MMMM d, y':'+0000' }}</b>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                            <div class="kt-portlet__head">
                                                                <div class="kt-portlet__head-label team_label">
                                                                    <h3 class="kt-portlet__head-title">
                                                                        TEAM
                                                                    </h3>
                                                                    <div class="add-icon">
                                                                        <a href="javascript:void(0)" class="add-item"
                                                                            (click)="OpenEngineerTeamListForAssignDialog()">
                                                                            <i *ngIf="!IsTeamShow"
                                                                                class="fa fa-plus"></i>
                                                                            <i *ngIf="IsTeamShow"
                                                                                class="fa fa-times"></i>
                                                                        </a>
                                                                        <div class="team-popup" *ngIf="IsTeamShow">
                                                                            <div class="team-head">
                                                                                <h2>Select {{this.currentUser.Engineer}}s</h2>
                                                                            </div>
                                                                            <div class="team-body">
                                                                                <div class="team-search clearfix">
                                                                                    <div class="form-group">
                                                                                        <input type="text"
                                                                                            (keydown)="onkeypresssearchengineer($event.target.value)"
                                                                                            (keyup)="onkeypresssearchengineer($event.target.value)"
                                                                                            class="form-control"
                                                                                            placeholder="Search">
                                                                                        <div class="addon">
                                                                                            <button type="button"
                                                                                                class="btn"><i
                                                                                                    class="fa fa-search"></i></button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="team-inner">
                                                                                    <table
                                                                                        *ngIf="EngineerLocalList.length > 0"
                                                                                        class="table table-striped- table-bordered table-hover table-checkable">
                                                                                        <tbody>
                                                                                            <tr
                                                                                                *ngFor="let x of EngineerLocalList">
                                                                                                <td class="engineer-list-class"
                                                                                                    id="{{x.Id}}">
                                                                                                    <input
                                                                                                        type="checkbox"
                                                                                                        (click)="AddEngineersToTicket(x.Id, x.EngineerName)">
                                                                                                </td>
                                                                                                <td
                                                                                                    title="{{x.EngineerEmail}}">
                                                                                                    <img *ngIf="x.EngineerLogo.length === 0"
                                                                                                        width="20px"
                                                                                                        src="{{localPrependUrl}}/assets/svg/noimage.svg" />
                                                                                                    <img *ngIf="x.EngineerLogo.length > 0"
                                                                                                        width="20px"
                                                                                                        src="{{x.EngineerLogo}}">
                                                                                                    {{x.EngineerName}}
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                    <p
                                                                                        *ngIf="EngineerLocalList.length === 0">
                                                                                        No users are currently assigned
                                                                                    </p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="kt-portlet__head-toolbar">
                                                                </div>
                                                            </div>
                                                            <div class="kt-section__body" *ngIf="OneOffIsVisible">
                                                                <div class="form-group form-group-last row">
                                                                    <div class="col-lg-12">
                                                                        <div class="team-inner-1">
                                                                            <ul>
                                                                                <li *ngFor="let x of service.TicketTeamList"
                                                                                    title="{{x.EngineerName}}">
                                                                                    <img *ngIf="x.EngineerLogo.length === 0"
                                                                                        width="20px"
                                                                                        src="{{localPrependUrl}}/assets/svg/noimage.svg" />
                                                                                    <img *ngIf="x.EngineerLogo.length > 0"
                                                                                        width="20px"
                                                                                        src="{{x.EngineerLogo}}">
                                                                                    {{x.EngineerName}}
                                                                                   
                                                                                    <span class="close"><a
                                                                                            title="remove"
                                                                                            (click)="AddEngineersToTicket(x.EngineerId, x.EngineerName)"
                                                                                            href="javascript:;">X</a></span>
                                                                                </li>
                                                                            </ul>
                                                                            <p
                                                                                *ngIf="service.TicketTeamList.length === 0">
                                                                                No users are currently assigned </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" *ngIf="currentUser.Permissions.InvoiceView">
                                                    <div class="col-md-12">
                                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                            <div class="kt-portlet__head">
                                                                <div class="kt-portlet__head-label">
                                                                    <h3 class="kt-portlet__head-title">
                                                                        INVOICING
                                                                    </h3>
                                                                </div>

                                                            </div>
                                                            <div class="kt-portlet__body">
                                                                <div class="kt-widget19__wrapper">
                                                                    <div class="kt-widget19__content">
                                                                        <div class="kt-widget19__userpic">
                                                                        </div>
                                                                        <div class="form-group how-do-you-want-invoice">
                                                                            <h3>How do you want to invoice?</h3>
                                                                            <div class="kt-radio-list">
                                                                                <label
                                                                                    class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                    <input type="radio"
                                                                                        class="custom-control-input"
                                                                                        value="Visit based billing"
                                                                                        name="RecurringInvoice"
                                                                                        #RecurringInvoice="ngModel"
                                                                                        [(ngModel)]="service.formData.RecurringInvoice">
                                                                                    Visit based billing
                                                                                    <span></span>
                                                                                </label>
                                                                                <label
                                                                                    class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                    <input type="radio"
                                                                                        class="custom-control-input"
                                                                                        value="Fixed price billing"
                                                                                        name="RecurringInvoice"
                                                                                        #RecurringInvoice="ngModel"
                                                                                        [(ngModel)]="service.formData.RecurringInvoice">
                                                                                    Fixed price billing
                                                                                    <span></span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <span></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12" *ngIf="service.TicketTeamList.length > 0">
                                                <p class="text-note">Note: If you want change appointment time? Please unselect {{this.currentUser.Engineer}} first</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 job-for-tab-content">
                                            <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                <div class="kt-portlet__head">
                                                    <div class="kt-portlet__head-label">
                                                        <h3 class="kt-portlet__head-title">
                                                            LINE ITEMS
                                                        </h3>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="kt-portlet__body">
                                                        <div class="col-md-12">
                                                            <table class="table table-borderless table-sm">
                                                                <tr class="border" *ngIf="createbuttontext === 'Create'">
                                                                    <td colspan="6" *ngIf="currentUser.Permissions.ProductWarranty">
                                                                        <div class="row radio-service">
                                                                            <div
                                                                                class="col-md-2">
                                                                                <label class="radio-inline"><input
                                                                                        type="radio"
                                                                                        name="TicketFor"
                                                                                        checked
                                                                                        (change)="OnTicketForChange(true)"
                                                                                        value="New">New</label>
                                                                            </div>
                                                                            <div
                                                                                class="col-md-2">
                                                                                <label class="radio-inline"><input
                                                                                        type="radio"
                                                                                        name="TicketFor"
                                                                                        (change)="OnTicketForChange(false)"
                                                                                        value="Maintenance">Maintenance</label>
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <div class="row" *ngIf="IsItemMaintance">
                                                                                    <div class="col-sm-9 col-md-9 col-xl-9">
                                                                                        <input
                                                                                        id="ItemSearch"
                                                                                         type="text" min="0"
                                                                                         style="height: 32px !important;"
                                                                                        maxlength="32" class="form-control"
                                                                                        placeholder="Search">
                                                                                    </div>
                                                                                    <div class="col-sm-3 col-md-3 col-xl-3">
                                                                                        <button type="button" (click)="OnTicketForChangebtn()"
                                                                                        class="btn btn-brand btn-sm">
                                                                                        <span *ngIf="!IsSearchTrue">Search</span>
                                                                                        <span *ngIf="IsSearchTrue">Loading...</span>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>  
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr class="border" *ngIf="IsItemMaintance">
                                                                    <td colspan="6">
                                                                        <table class="table table-striped- table-bordered table-hover table-checkable" 
                                                                        style="height: 300px;overflow: auto; display: block; width: 100%; min-height: 320px;">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>#</th>
                                                                                <th>{{this.currentUser.Product}}/Service</th>
                                                                                <th>Unique Id</th>
                                                                                <th>Warranty End Date</th>
                                                                                <th>Status</th>
                                                                                <th>Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr *ngFor="let x of reportservice.ReportsWarrantyList; let i=index; async"
                                                                                class="ticket-list-view-info">
                                                                                <td style="width: 2%;">{{i+1}}</td>
                                                                                <td>{{ x.ItemName }}<br><small>{{ x.TicketId }}</small></td>
                                                                                <td>{{ x.UniqId }}</td>
                                                                                <td>{{ x.ExpiryDate | date }}</td>
                                                                                <td>
                                                                                    <span class="kt-badge kt-badge--success kt-badge--inline kt-badge--pill"
                                                                                        *ngIf="x.Status === 'Active'">{{ x.Status }}</span>
                                                                                        <span class="kt-badge kt-badge--warning kt-badge--inline kt-badge--pill"
                                                                                        *ngIf="x.Status === 'Expired'">{{ x.Status }}</span>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="btn-group btn-group-sm">
                                                                                        <a href="javascript:;" (click)="pushTicketItemValues(x, x.IsFrom)" 
                                                                                        data-toggle="modal"
                                                                                        data-target="#MaintanceModelPopup"
                                                                                            class="btn btn-primary">Add in Line item</a>
                                                                                      </div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th colspan="2" width="50%">
                                                                        <div class="product-service-colun-name">{{this.currentUser.Product.toUpperCase()}}
                                                                            / SERVICE</div>
                                                                    </th>
                                                                    <th width="15%">
                                                                        <div class="product-service-colun-name">QTY
                                                                        </div>
                                                                    </th>
                                                                    <th width="15%"
                                                                        *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        <div class="product-service-colun-name">UNIT
                                                                            COST</div>
                                                                    </th>
                                                                    <th width="15%"
                                                                        *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        <div class="product-service-colun-name">TOTAL
                                                                        </div>
                                                                    </th>
                                                                    <th width="5%"></th>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="6">
                                                                        <div class="client-view-border-info"></div>
                                                                    </td>
                                                                </tr>
                                                                <tr class="border"
                                                                    *ngFor="let x of service.TicketItemList; let i=index">
                                                                    <td colspan="2">
                                                                        <b>{{ x.ItemName }}</b><br>{{ x.ItemDescription}}
                                                                        <div *ngIf="x.InWarranty">
                                                                            {{x.WarrantyDays}} Days warranty 
                                                                            <span *ngIf="x.UniqId?.length > 0">({{x.UniqId}})</span>
                                                                        </div>
                                                                        <div *ngIf="x.IsMaintance">
                                                                         <b>Remarks: </b> <span>{{x.MaintanceRemarks}}</span>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div *ngIf="x.Type === 'Product'">
                                                                            {{ x.ItemQuantity}}</div>
                                                                    </td>
                                                                    <td *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        ${{ x.ItemUnitCost}}</td>
                                                                    <td *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        {{ x.ItemTotalCost}}</td>
                                                                    <td>
                                                                        <div class="btn-group">
                                                                            <a *ngIf="!x.IsMaintance" href="javascript:;" class="btn-Edit"
                                                                                (click)="PupulateItemList(x)"
                                                                                title="edit">
                                                                                <i class="far fa-edit text-info"></i>
                                                                            </a>&nbsp;&nbsp;
                                                                            <a href="javascript:;" class=" btn-remove"
                                                                                (click)="RemoveItemsFromTicket(x.Id)"
                                                                                title="remove">
                                                                                <i class="far fa-trash-alt text-danger"></i>
                                                                            </a>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr *ngIf="!IsItemMaintance">
                                                                    <td colspan="2">
                                                                        <div class="row radio-service">
                                                                            <div *ngIf="!currentUser.Permissions.IsProductOnly"
                                                                                class="col-md-4">
                                                                                <label class="radio-inline"><input
                                                                                        type="radio"
                                                                                        name="TicketItem.Type"
                                                                                        #TicketItem.Type="ngModel"
                                                                                        [(ngModel)]="service.TicketItem.Type"
                                                                                        (change)="OnTicketItemTypeChange()"
                                                                                        value="Product">{{this.currentUser.Product}}</label>
                                                                            </div>
                                                                            <div *ngIf="!currentUser.Permissions.IsProductOnly"
                                                                                class="col-md-4">
                                                                                <label class="radio-inline"><input
                                                                                        type="radio"
                                                                                        name="TicketItem.Type"
                                                                                        #TicketItem.Type="ngModel"
                                                                                        [(ngModel)]="service.TicketItem.Type"
                                                                                        (change)="OnTicketItemTypeChange()"
                                                                                        value="Service">Service</label>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td colspan="4"> 
                                                                    </td>
                                                                </tr>
                                                                <tr *ngIf="!IsItemMaintance">
                                                                    <td colspan="2">
                                                                        <div class="row radio-service">
                                                                            <div class="col-md-12" *ngIf="ItemBtn === 'Add'">
                                                                                <l-select2 
                                                                                 name="product_formcontrol"
                                                                                class="select2customcss" [options]="productdata"
                                                                                (valueChange)="WhenSelectProductChange($event)">
                                                                                </l-select2>
                                                                            </div>
                                                                            <div class="col-md-12" *ngIf="ItemBtn === 'update'">
                                                                                <label class="form-control">
                                                                                    {{service.TicketItem.ItemName}}
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input
                                                                            *ngIf="service.TicketItem.Type === 'Product'"
                                                                            name="ItemQuantity" #ItemQuantity="ngModel"
                                                                            [(ngModel)]="service.TicketItem.ItemQuantity"
                                                                            height="30px" type="number" min="0"
                                                                            maxlength="3" class="form-control"
                                                                            [ngClass]="{'InvalidInput': ItemQuantityIsValid===false}"
                                                                            (keyup)="CalculateItemTotalCost($event)"
                                                                            (keypress)="numberOnly($event)"
                                                                            placeholder="Quantity">
                                                                    </td>
                                                                    <td *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        <div class="input-group">
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text"
                                                                                    id="basic-addon1">
                                                                                    <i class="fa fa-dollar-sign"></i>
                                                                                </span>
                                                                            </div>
                                                                            <input name="ItemUnitCost"
                                                                                #ItemUnitCost="ngModel" type="number"
                                                                                min="0" maxlength="6"
                                                                                [(ngModel)]="service.TicketItem.ItemUnitCost"
                                                                                class="form-control"
                                                                                [ngClass]="{'InvalidInput': ItemUnitCosttIsValid===false}"
                                                                                (keyup)="CalculateItemUnitCost($event)"
                                                                                (keypress)="numberwithDecimalOnly($event)"
                                                                                placeholder="Unit Cost">
                                                                        </div>
                                                                    </td>
                                                                    <td *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                        <div class="input-group">
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text"
                                                                                    id="basic-addon1">
                                                                                    <i class="fa fa-dollar-sign"></i>
                                                                                </span>
                                                                            </div>
                                                                            <input name="ItemTotalCost"
                                                                                #ItemTotalCost="ngModel" type="number"
                                                                                min="0"
                                                                                [(ngModel)]="service.TicketItem.ItemTotalCost"
                                                                                height="30px" class="form-control"
                                                                                placeholder="Total Cost" readonly>
                                                                        </div>
                                                                    </td>
                                                                    <td></td>
                                                                </tr>
                                                                <tr *ngIf="!IsItemMaintance">
                                                                    <td colspan="2">
                                                                        <textarea name="ItemDescription"
                                                                            #ItemDescription="ngModel"
                                                                            [(ngModel)]="service.TicketItem.ItemDescription"
                                                                            class="form-control"
                                                                            placeholder="Description"
                                                                            rows="3"></textarea>
                                                                    </td>
                                                                    <td colspan="4">
                                                                        <div class="row"
                                                                            *ngIf="currentUser.Permissions.ProductWarranty">
                                                                            <div class="col-lg-12 col-md-12"
                                                                                *ngIf="tempInWarranty">
                                                                                <div class="row">
                                                                                    <div class="col-lg-7 col-md-7 padd-top-10"
                                                                                        style="margin:auto;">
                                                                                        <label class="kt-checkbox kt-checkbox--solid kt-checkbox--brand">
                                                                                        <input type="checkbox" name="service.TicketItem.InWarranty"
                                                                                        (change)="GenerateUniqueRandom()"
                                                                                        #service.TicketItem.InWarranty="ngModel"
                                                                                            [(ngModel)]="service.TicketItem.InWarranty">
                                                                                            want to give Warranty on
                                                                                        <i *ngIf="service.TicketItem.Type === 'Product'">
                                                                                            {{this.currentUser.Product}}
                                                                                        </i>
                                                                                        <i *ngIf="service.TicketItem.Type === 'Service'">
                                                                                            Service
                                                                                        </i>
                                                                                        <span></span>
                                                                                        </label>
                                                                                        
                                                                                    </div>
                                                                                    <div class="col-lg-5 col-md-5"
                                                                                        style="margin:auto;"
                                                                                        *ngIf="service.TicketItem.InWarranty">
                                                                                       {{service.TicketItem.WarrantyDays}} Days
                                                                                    </div>
                                                                                    <div class="col-lg-5 col-md-5"
                                                                                        *ngIf="!service.TicketItem.InWarranty">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row"
                                                                                    *ngIf="service.TicketItem.InWarranty">
                                                                                    <div class="col-lg-7 col-md-7">
                                                                                        <input name="UniqId"
                                                                                            #UniqId="ngModel"
                                                                                            [(ngModel)]="service.TicketItem.UniqId"
                                                                                            [ngClass]="{'InvalidInput': ItemUniqueIsValid===false}"
                                                                                            height="30px" type="text"
                                                                                            min="0" maxlength="64"
                                                                                            class="form-control"
                                                                                            placeholder="Unique Id">
                                                                                    </div>
                                                                                    <div class="col-lg-5 col-md-5">
                                                                                        <a class="text-warning btnStockUpdate"
                                                                                            href="javascript:void(0)"
                                                                                            (click)="enablewarrantchange()">
                                                                                            <span
                                                                                                *ngIf="!customwarrantyShowEdit"><i
                                                                                                    class="fa fa-plus"
                                                                                                    aria-hidden="true"></i>
                                                                                                Edit Warranty</span>
                                                                                            <span
                                                                                                *ngIf="customwarrantyShowEdit"><i
                                                                                                    class="fa fa-minus"
                                                                                                    aria-hidden="true"></i>
                                                                                                Hide </span>
                                                                                        </a>
                                                                                        <div class="kt-radio-list"
                                                                                            *ngIf="customwarrantyShowEdit">
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    value="90"
                                                                                                    name="WarrantyDays"
                                                                                                    #WarrantyDays="ngModel"
                                                                                                    (change)="customwarrantyShowMethor()"
                                                                                                    [(ngModel)]="service.TicketItem.WarrantyDays">
                                                                                                90 Days
                                                                                                <span></span>
                                                                                            </label>
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    value="180"
                                                                                                    name="WarrantyDays"
                                                                                                    #WarrantyDays="ngModel"
                                                                                                    (change)="customwarrantyShowMethor()"
                                                                                                    [(ngModel)]="service.TicketItem.WarrantyDays">
                                                                                                180 Days
                                                                                                <span></span>
                                                                                            </label>
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    value="270"
                                                                                                    name="WarrantyDays"
                                                                                                    #WarrantyDays="ngModel"
                                                                                                    (change)="customwarrantyShowMethor()"
                                                                                                    [(ngModel)]="service.TicketItem.WarrantyDays">
                                                                                                270 Days
                                                                                                <span></span>
                                                                                            </label>
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    value="365"
                                                                                                    name="WarrantyDays"
                                                                                                    #WarrantyDays="ngModel"
                                                                                                    (change)="customwarrantyShowMethor()"
                                                                                                    [(ngModel)]="service.TicketItem.WarrantyDays">
                                                                                                365 Days
                                                                                                <span></span>
                                                                                            </label>
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand"
                                                                                                *ngIf="customwarrantyShow">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    name="WarrantyDays"
                                                                                                    #WarrantyDays="ngModel"
                                                                                                    (change)="customwarrantyShowMethor()"
                                                                                                    [(ngModel)]="service.TicketItem.WarrantyDays">
                                                                                                Custom
                                                                                                <span></span>
                                                                                            </label>
                                                                                            <label
                                                                                                class="kt-radio kt-radio--bold kt-radio--brand"
                                                                                                *ngIf="!customwarrantyShow">
                                                                                                <input type="radio"
                                                                                                    class="custom-control-input"
                                                                                                    name="WarrantyDays"
                                                                                                    checked
                                                                                                    (change)="customwarrantyShowMethor()">
                                                                                                Custom
                                                                                                <span></span>
                                                                                            </label>
                                                                                        </div>
                                                                                        <div
                                                                                            *ngIf="!customwarrantyShow">
                                                                                            <input
                                                                                                *ngIf="customwarrantyShowEdit"
                                                                                                name="service.TicketItem.WarrantyDays"
                                                                                                #service.TicketItem.WarrantyDays="ngModel"
                                                                                                [(ngModel)]="service.TicketItem.WarrantyDays"
                                                                                                height="30px"
                                                                                                type="text" min="0"
                                                                                                maxlength="4"
                                                                                                class="form-control"
                                                                                                placeholder="Days">
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr *ngIf="!IsItemMaintance">
                                                                    <td colspan="6">
                                                                        <div class="form-group form-group-last">
                                                                            <div class="col-lg-4">
                                                                                <a href="javascript:;"
                                                                                    (click)="AddItemsToTicket()"
                                                                                    class="btn btn-brand btn-sm add-line-item-btn">
                                                                                    <i class="la la-plus"></i>
                                                                                    {{ ItemBtn }}
                                                                                </a>
                                                                                <a style="margin-left: 2px;"
                                                                                    href="javascript:;"
                                                                                    (click)="CleareItemsToTicket()"
                                                                                    class="btn btn-brand btn-sm add-line-item-btn">
                                                                                    <i class="la la-times"></i>
                                                                                    Cancel
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <div class="col-md-12">
                                                                <div class="quots-client-view-border-info"></div>
                                                            </div>
                                                            <div class="row kt-widget4 total-job-price-client"
                                                                *ngIf="!currentUser.Permissions.IsProductOnly">
                                                                <div class="kt-widget4__item">
                                                                    <div class="kt-widget4__info">
                                                                        <p> TOTAL </p>
                                                                    </div>
                                                                    <p> ${{ service.formData.NetAmount.toFixed(2) }} </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="on-site-client-required">
                                        <div
                                            class="kt-portlet kt-portlet--height-fluid kt-widget19 internal-notes-attachment">
                                            <div class="kt-portlet__head">
                                                <div class="kt-portlet__head-label">
                                                    <h3 class="kt-portlet__head-title">
                                                        <strong>
                                                            TERMS & CONDITIONS
                                                        </strong>
                                                    </h3>
                                                </div>
                                            </div>
                                            <div class="kt-portlet__body">
                                                <div class="kt-widget19__wrapper">
                                                    <textarea name="TermsAndConditions"
                                                        [(ngModel)]="service.formData.TermsAndConditions"
                                                        class="form-control" id="TermsAndConditions" rows="3"
                                                        maxlength="1024" placeholder="Terms & Condition">
                                              </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="on-site-client-required">
                                        <div class="kt-portlet kt-portlet--height-fluid kt-widget19 internal-notes-attachment">
                                            <div class="kt-portlet__head">
                                                <div class="kt-portlet__head-label">
                                                    <h3 class="kt-portlet__head-title">
                                                        <strong>INTERNAL NOTES & ATTACHMENTS <span
                                                                class="tooltip-questionMark" data-container="body"
                                                                data-toggle="kt-popover" data-placement="top"
                                                                data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                                                                data-original-title="" title="">?</span></strong>
                                                    </h3>
                                                </div>
                                            </div>
                                            <div class="kt-portlet__body">
                                                <div class="kt-widget19__wrapper">
                                                    <textarea class="form-control" rows="3"
                                                        name="InternalNoteDescription"
                                                        #InternalNoteDescription="ngModel"
                                                        [(ngModel)]="service.formData.InternalNoteDescription"
                                                        placeholder="Note details"></textarea>
                                                    <div class="row">
                                                        <div class="col-md-1"
                                                            *ngFor="let x of service.TicketAttachmentList">
                                                            <div class="row">
                                                                <generic-ticket-icon-attachment [(Name)]="x.AttachmentName" [(Path)]="x.AttachmentPath" [Status]="1" ></generic-ticket-icon-attachment>
                                                                <div class="col-md-3"></div>
                                                                <div class="col-md-3">
                                                                    <a href="javascript:;"
                                                                        (click)="RemoveTicketAttachement(x.Id)"><i
                                                                            class="fa fa-trash text-danger"></i></a>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <a href="{{x.AttachmentPath}}"
                                                                        target="_blank"><i
                                                                            class="fa fa-download text-success"></i></a>
                                                                </div>
                                                                <div class="col-md-3"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="file-upload">
                                                        <label for="upload" class="file-upload__label"><i
                                                                title="Add Attachment" class="fa fa-paperclip"></i>
                                                            <br></label>
                                                        <input id="upload" class="file-upload__input" type="file"
                                                            name="file-upload" (change)="picked($event)">
                                                    </div>
                                                    <div *ngIf="service.TicketAttachmentList.length === 0">
                                                        No Attachment Added yet!
                                                    </div>
                                                    <br>
                                                    <div class="form-group" style="display: none;" >
                                                        <label>Link note to related</label>
                                                        <div class="kt-checkbox-inline">
                                                            <label class="kt-checkbox"
                                                                *ngIf="currentUser.Permissions.QuoteView">
                                                                <input type="checkbox" name="InternalNoteQuote"
                                                                    #InternalNoteQuote="ngModel"
                                                                    [(ngModel)]="service.formData.InternalNoteQuote">
                                                                Quotes
                                                                <span></span>
                                                            </label>
                                                            <label class="kt-checkbox">
                                                                <input type="checkbox" name="InternalNoteTicket"
                                                                    #InternalNoteTicket="ngModel"
                                                                    [(ngModel)]="service.formData.InternalNoteTicket">
                                                                    {{this.currentUser.Ticket}}s
                                                                <span></span>
                                                            </label>
                                                            <label class="kt-checkbox"
                                                                *ngIf="currentUser.Permissions.InvoiceView">
                                                                <input type="checkbox" name="InternalNoteInvoice"
                                                                    #InternalNoteInvoice="ngModel"
                                                                    [(ngModel)]="service.formData.InternalNoteInvoice">
                                                                Invoices
                                                                <span></span>
                                                            </label>
                                                            <label class="kt-checkbox"
                                                                *ngIf="currentUser.Permissions.AllowReceivePayment">
                                                                <input type="checkbox" name="InternalNoteAllowPayment"
                                                                    #InternalNoteInvoice="ngModel"
                                                                    [(ngModel)]="service.formData.InternalNoteAllowPayment">
                                                                Allow To Received Payment
                                                                <span></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Email Notification</label>
                                                        <div class="kt-checkbox-inline">
                                                            <label class="kt-checkbox">
                                                                <input type="checkbox" name="CreateTicketAdmin"
                                                                    #CreateTicketAdmin="ngModel"
                                                                    [(ngModel)]="notifyService.NotificationData.CreateTicketAdmin">
                                                                Admin
                                                                <span></span>
                                                            </label>
                                                            <label class="kt-checkbox">
                                                                <input type="checkbox" name="CreateTicketCustomer"
                                                                    #CreateTicketCustomer="ngModel"
                                                                    [(ngModel)]="notifyService.NotificationData.CreateTicketCustomer">
                                                                Customer
                                                                <span></span>
                                                            </label>
                                                            <label class="kt-checkbox"
                                                                *ngIf="currentUser.Permissions.InvoiceView">
                                                                <input type="checkbox" name="CreateTicketEngineer"
                                                                    #CreateTicketEngineer="ngModel"
                                                                    [(ngModel)]="notifyService.NotificationData.CreateTicketEngineer">
                                                                    {{this.currentUser.Engineer}}
                                                                <span></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" *ngIf="currentUser.Permissions.InvoiceView">
                                                <div class="col-md-12">
                                                    <div class="kt-portlet kt-portlet--height-fluid kt-widget19">
                                                        <div class="kt-portlet__head">
                                                            <div class="kt-portlet__head-label">
                                                                <h3 class="kt-portlet__head-title">
                                                                    INVOICING
                                                                </h3>
                                                            </div>
                                                        </div>
                                                        <div class="kt-portlet__body">
                                                            <div class="kt-widget19__wrapper">
                                                                <div class="kt-widget19__content">
                                                                    <div class="kt-widget19__userpic">
                                                                    </div>
                                                                    <label
                                                                        class="kt-checkbox kt-checkbox--solid kt-checkbox--success">
                                                                        <input type="checkbox" name="WhenInvoiceClosed"
                                                                            #WhenInvoiceClosed="ngModel"
                                                                            [(ngModel)]="service.formData.WhenInvoiceClosed">Remind
                                                                        me to
                                                                        invoice when I close the {{this.currentUser.Ticket}}s
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="service.formData.Id !== '00000000-0000-0000-0000-000000000000'">
                                            <div class="col-md-12 job-for-tab-content">
                                                <generic-reminder-module [(Id)]="service.formData.Id" [(Token)]="currentUser.Token" [ReminderModule]="'ticket'"></generic-reminder-module>
                                            </div>
                                        </div>
                                        <div class="row new-request-footer-bottom">
                                            <button type="reset" (click)="onCancelButtonClick()" routerLink="/tickets/"
                                                class="btn btn-secondary">CANCEL</button>
                                            <div class="btn-group">
                                                <button type="submit" [disabled]="IsTicketCreateloading"
                                                    class="btn btn-brand">{{ createbuttontext }}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="modal fade" id="ticketdetailModalWeek">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">{{service.formData.TicketId}}</h4>
                    <button type="button" class="close" id="ticketdetailModalWeekbutton" data-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="detail-inner">
                        <div class="details-tabs">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#dtab1">WEEK</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div id="dtab1" class="tab-pane active">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="ticket-month">
                                                <table class="table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sun</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="SundayIsActive" #SundayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SundayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Mon</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="MondayIsActive" #MondayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.MondayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Tue</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="TuesdayIsActive"
                                                                        #TuesdayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.TuesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Wed</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="WednesdayIsActive"
                                                                        #WednesdayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.WednesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Thu</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="ThursdayIsActive"
                                                                        #ThursdayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.ThursdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Fri</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="FridayIsActive" #FridayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.FridayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sat</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="SaturdayIsActive"
                                                                        #SaturdayIsActive="ngModel" (click)="recurringchangesapply(1)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SaturdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12">
                                        <button type="button" (click)="OnTicketRecurringHelper(1)"
                                           class="btn primary"  [disabled]="this.recurringchangesbtn === 1 ? false : true" >Changes Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="ticketdetailCustomModalMonth">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">{{service.formData.TicketId}}</h4>
                    <button type="button" class="close" id="ticketdetailCustomModalMonthbutton" data-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="detail-inner">
                        <div class="details-tabs">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#dtab1">Custom Month</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div id="dtab1" class="tab-pane active">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="ticket-month">
                                                <table class="table">
                                                    <thead>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>1st</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date1" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date1">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>2nd</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date2" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date2">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>3rd</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date3" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date3">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>4th</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date4" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date4">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </thead>
                                                </table>
                                                <table class="table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sun</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="SundayIsActive" #SundayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SundayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Mon</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="MondayIsActive" #MondayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.MondayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Tue</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="TuesdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #TuesdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.TuesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Wed</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="WednesdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #WednesdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.WednesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Thu</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="ThursdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #ThursdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.ThursdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Fri</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="FridayIsActive" #FridayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.FridayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sat</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="SaturdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #SaturdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SaturdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12">
                                        <button type="button" (click)="OnTicketRecurringHelper(5)"
                                            class="btn btn-primary" [disabled]="this.recurringchangesbtn === 2 ? false : true">Changes Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="ticketdetailCustomModalMonth2">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">{{service.formData.TicketId}}</h4>
                    <button type="button" class="close" id="ticketdetailCustomModalMonth2button" data-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="detail-inner">
                        <div class="details-tabs">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#dtab1">Custom Alternet Month</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div id="dtab1" class="tab-pane active">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="ticket-month">
                                                <table class="table">
                                                    <thead>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>1st</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date1" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date1">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>2nd</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date2" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date2">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>3rd</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date3" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date3">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>4th</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date4" #Date1="ngModel" (click)="recurringchangesapply(2)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date4">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </thead>
                                                </table>
                                                <table class="table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sun</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="SundayIsActive" #SundayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SundayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Mon</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="MondayIsActive" #MondayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.MondayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Tue</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="TuesdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #TuesdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.TuesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Wed</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="WednesdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #WednesdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.WednesdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Thu</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="ThursdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #ThursdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.ThursdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Fri</p>
                                                                    <input type="checkbox" checked="checked" (click)="recurringchangesapply(2)"
                                                                        name="FridayIsActive" #FridayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.FridayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>Sat</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="SaturdayIsActive" (click)="recurringchangesapply(2)"
                                                                        #SaturdayIsActive="ngModel"
                                                                        [(ngModel)]="service.TicketRecurringHelper.SaturdayIsActive">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12">
                                        <button type="button" (click)="OnTicketRecurringHelper(6)"
                                            class="btn btn-primary" [disabled]="this.recurringchangesbtn === 2 ? false : true">Changes Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="ticketdetailModalMonth">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">{{service.formData.TicketId}}</h4>
                    <button type="button" class="close" id="ticketdetailModalMonthbutton" data-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="detail-inner">
                        <div class="details-tabs">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#dtab2">MONTH</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div id="dtab2" class="tab-pane active">
                                    <div class="row tickt-month-parent">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="ticket-month">
                                                <table class="table">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>1</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date1" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date1">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>2</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date2" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date2">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>3</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date3" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date3">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>4</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date4" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date4">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>5</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date5" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date5">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>6</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date6" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date6">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>7</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date7" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date7">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>8</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date8" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date8">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>9</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date9" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date9">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>10</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date10" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date10">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>11</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date11" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date11">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>12</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date12" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date12">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>13</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date13" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date13">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>14</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date14" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date14">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>15</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date15" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date15">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>16</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date16" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date16">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>17</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date17" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date17">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>18</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date18" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date18">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>19</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date19" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date19">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>20</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date20" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date20">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>21</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date21" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date21">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>22</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date22" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date22">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>23</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date13" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date23">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>24</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date24" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date24">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>25</p>
                                                                    <input type="checkbox" checked="checked" 
                                                                        name="Date25" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date25">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>26</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date26" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date26">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>27</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date27" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date27">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>28</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date28" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date28">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>29</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date29" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date29">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>30</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date30" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date30">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>
                                                            <td>
                                                                <label class="container-check">
                                                                    <p>31</p>
                                                                    <input type="checkbox" checked="checked"
                                                                        name="Date31" #Date1="ngModel" (click)="recurringchangesapply(3)"
                                                                        [(ngModel)]="service.TicketRecurringHelper.Date31">
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </td>

                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12">
                                        <button type="button" (click)="OnTicketRecurringHelper(2)"
                                            class="btn btn-primary" [disabled]="this.recurringchangesbtn === 3 ? false : true">Changes Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="MaintanceModelPopup">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h4 class="modal-title">Remark's</h4>
                    <button type="button" class="close" id="MaintanceModelPopupbutton" data-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="detail-inner">
                        <div class="details-tabs">
                            <div class="tab-content">
                                <div id="dtab1" class="tab-pane active">
                                    <div class="row">
                                        <div class="form-group col-md-12 col-sm-12">
                                            <label>{{this.currentUser.Product}} Name</label>
                                            <input name="ItemName" #ItemName="ngModel" type="text"
                                                [(ngModel)]="service.TicketItem.ItemName" class="form-control"
                                                [disabled]="true">
                                        </div>
                                        <div *ngIf="!currentUser.Permissions.IsProductOnly"
                                            class="form-group col-md-12 col-sm-12">
                                            <label>Unit Cost</label>
                                            <input name="ItemUnitCost" #ItemUnitCost="ngModel" type="number" min="0"
                                                maxlength="6" [(ngModel)]="service.TicketItem.ItemUnitCost"
                                                class="form-control"
                                                [ngClass]="{'InvalidInput': ItemUnitCosttIsValid===false}"
                                                (keyup)="CalculateItemUnitCost($event)"
                                                (keypress)="numberwithDecimalOnly($event)" placeholder="Unit Cost">
                                        </div>
                                        <div class="form-group col-md-12 col-sm-12">
                                            <label>Unique Id</label>
                                            <input name="UniqId" #UniqId="ngModel"
                                                [(ngModel)]="service.TicketItem.UniqId"
                                                [ngClass]="{'InvalidInput': ItemUniqueIsValid===false}" height="30px"
                                                type="text" min="0" maxlength="64" class="form-control"
                                                placeholder="Unique Id">
                                        </div>
                                        <div class="form-group col-md-12 col-sm-12">
                                            <label>Remark's</label>
                                            <textarea name="MaintanceRemarks" #MaintanceRemarks="ngModel"
                                                [(ngModel)]="service.TicketItem.MaintanceRemarks" class="form-control"
                                                placeholder="Maintance Remarks" rows="3"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" (click)="OnMaintanceItemAddInItems()" class="btn btn-brand">Add
                                Item</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>