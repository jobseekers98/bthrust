<div class="kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
    <div class="kt-subheader kt-grid__item" id="kt_subheader">
        <div class="kt-container kt-container--fluid ">
            <div class="kt-subheader__main">
                <h3 class="kt-subheader__title">
                    <a *ngIf="currentUser.Type !== 'Engineer'" href="javascript:;" routerLink="/dashboard">
                        Dashboard
                    </a>
                    <a *ngIf="currentUser.Type === 'Engineer'" href="javascript:;" routerLink="/engineer/engineer-dashboard">
                        Dashboard
                    </a>
                </h3>
                <span *ngIf="currentUser.Type !== 'Engineer'" class="kt-subheader__separator kt-hidden"></span>
                <div *ngIf="currentUser.Type !== 'Engineer'" class="kt-subheader__breadcrumbs">
                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    <span class="kt-subheader__breadcrumbs-separator"></span>
                    <a href="javascript:;" routerLink="/properties" class="kt-subheader__breadcrumbs-link"> properties
                    </a>
                </div>
                <span class="kt-subheader__separator kt-hidden"></span>
                <div class="kt-subheader__breadcrumbs">
                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    <span class="kt-subheader__breadcrumbs-separator"></span>
                    Client History
                </div>
            </div>
            <div class="kt-subheader__toolbar">
                <div class="kt-subheader__wrapper">
                    <a on class="btn btn-primary text-white" onclick="window.history.back()">
                        <!-- <i class="fa fa-undo"></i> -->
                        Back </a>
                </div>
            </div>
        </div>
    </div>
    <div class="customer-list-main-section">
        <div class="kt-widget17">
            <div class="kt-widget17__visual kt-widget17__visual--chart kt-portlet-fit--top kt-portlet-fit--sides"
                style="background-color: #fd397a">
            </div>
            <div class="kt-widget17__stats">
                <div class="kt-widget17__items">
                </div>
                <div class="row mrg-top-10">
                    <div class="col-lg-3">
                        <div class="kt-portlet kt-iconbox kt-iconbox--brand kt-iconbox--animate-slower">
                            <div class="kt-portlet__body">
                                <div class="kt-iconbox__body">
                                    <div class="kt-iconbox__icon">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                            viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path
                                                    d="M3,10.0500091 L3,8 C3,7.44771525 3.44771525,7 4,7 L9,7 L9,9 C9,9.55228475 9.44771525,10 10,10 C10.5522847,10 11,9.55228475 11,9 L11,7 L21,7 C21.5522847,7 22,7.44771525 22,8 L22,10.0500091 C20.8588798,10.2816442 20,11.290521 20,12.5 C20,13.709479 20.8588798,14.7183558 22,14.9499909 L22,17 C22,17.5522847 21.5522847,18 21,18 L11,18 L11,16 C11,15.4477153 10.5522847,15 10,15 C9.44771525,15 9,15.4477153 9,16 L9,18 L4,18 C3.44771525,18 3,17.5522847 3,17 L3,14.9499909 C4.14112016,14.7183558 5,13.709479 5,12.5 C5,11.290521 4.14112016,10.2816442 3,10.0500091 Z M10,11 C9.44771525,11 9,11.4477153 9,12 L9,13 C9,13.5522847 9.44771525,14 10,14 C10.5522847,14 11,13.5522847 11,13 L11,12 C11,11.4477153 10.5522847,11 10,11 Z"
                                                    id="Combined-Shape-Copy" fill="#000000" opacity="0.3"
                                                    transform="translate(12.500000, 12.500000) rotate(-45.000000) translate(-12.500000, -12.500000) " />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="kt-iconbox__desc">
                                        <h3 class="kt-iconbox__title">
                                            <a class="kt-link">Open {{this.currentUser.Ticket}}s</a>
                                        </h3>
                                        <div class="kt-iconbox__content">
                                            {{TotalOpenCount}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="kt-portlet kt-iconbox kt-iconbox--success kt-iconbox--animate-slow">
                            <div class="kt-portlet__body">
                                <div class="kt-iconbox__body">
                                    <div class="kt-iconbox__icon">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                            viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path
                                                    d="M3,10.0500091 L3,8 C3,7.44771525 3.44771525,7 4,7 L9,7 L9,9 C9,9.55228475 9.44771525,10 10,10 C10.5522847,10 11,9.55228475 11,9 L11,7 L21,7 C21.5522847,7 22,7.44771525 22,8 L22,10.0500091 C20.8588798,10.2816442 20,11.290521 20,12.5 C20,13.709479 20.8588798,14.7183558 22,14.9499909 L22,17 C22,17.5522847 21.5522847,18 21,18 L11,18 L11,16 C11,15.4477153 10.5522847,15 10,15 C9.44771525,15 9,15.4477153 9,16 L9,18 L4,18 C3.44771525,18 3,17.5522847 3,17 L3,14.9499909 C4.14112016,14.7183558 5,13.709479 5,12.5 C5,11.290521 4.14112016,10.2816442 3,10.0500091 Z M10,11 C9.44771525,11 9,11.4477153 9,12 L9,13 C9,13.5522847 9.44771525,14 10,14 C10.5522847,14 11,13.5522847 11,13 L11,12 C11,11.4477153 10.5522847,11 10,11 Z"
                                                    id="Combined-Shape-Copy" fill="#000000" opacity="0.3"
                                                    transform="translate(12.500000, 12.500000) rotate(-45.000000) translate(-12.500000, -12.500000) " />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="kt-iconbox__desc">
                                        <h3 class="kt-iconbox__title">
                                            <a class="kt-link">Closed {{this.currentUser.Ticket}}s</a>
                                        </h3>
                                        <div class="kt-iconbox__content">
                                            {{TotalClosedCount}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="kt-portlet kt-iconbox kt-iconbox--warning kt-iconbox--animate-fast">
                            <div class="kt-portlet__body">
                                <div class="kt-iconbox__body">
                                    <div class="kt-iconbox__icon">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                            viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path
                                                    d="M3,10.0500091 L3,8 C3,7.44771525 3.44771525,7 4,7 L9,7 L9,9 C9,9.55228475 9.44771525,10 10,10 C10.5522847,10 11,9.55228475 11,9 L11,7 L21,7 C21.5522847,7 22,7.44771525 22,8 L22,10.0500091 C20.8588798,10.2816442 20,11.290521 20,12.5 C20,13.709479 20.8588798,14.7183558 22,14.9499909 L22,17 C22,17.5522847 21.5522847,18 21,18 L11,18 L11,16 C11,15.4477153 10.5522847,15 10,15 C9.44771525,15 9,15.4477153 9,16 L9,18 L4,18 C3.44771525,18 3,17.5522847 3,17 L3,14.9499909 C4.14112016,14.7183558 5,13.709479 5,12.5 C5,11.290521 4.14112016,10.2816442 3,10.0500091 Z M10,11 C9.44771525,11 9,11.4477153 9,12 L9,13 C9,13.5522847 9.44771525,14 10,14 C10.5522847,14 11,13.5522847 11,13 L11,12 C11,11.4477153 10.5522847,11 10,11 Z"
                                                    id="Combined-Shape-Copy" fill="#000000" opacity="0.3"
                                                    transform="translate(12.500000, 12.500000) rotate(-45.000000) translate(-12.500000, -12.500000) " />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="kt-iconbox__desc">
                                        <h3 class="kt-iconbox__title">
                                            <a class="kt-link">Overdue {{this.currentUser.Ticket}}s</a>
                                        </h3>
                                        <div class="kt-iconbox__content">
                                            {{TotalOverdueCount}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="kt-portlet kt-iconbox kt-iconbox--danger kt-iconbox--animate-faster">
                            <div class="kt-portlet__body">
                                <div class="kt-iconbox__body">
                                    <div class="kt-iconbox__icon">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                            viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path
                                                    d="M3,10.0500091 L3,8 C3,7.44771525 3.44771525,7 4,7 L9,7 L9,9 C9,9.55228475 9.44771525,10 10,10 C10.5522847,10 11,9.55228475 11,9 L11,7 L21,7 C21.5522847,7 22,7.44771525 22,8 L22,10.0500091 C20.8588798,10.2816442 20,11.290521 20,12.5 C20,13.709479 20.8588798,14.7183558 22,14.9499909 L22,17 C22,17.5522847 21.5522847,18 21,18 L11,18 L11,16 C11,15.4477153 10.5522847,15 10,15 C9.44771525,15 9,15.4477153 9,16 L9,18 L4,18 C3.44771525,18 3,17.5522847 3,17 L3,14.9499909 C4.14112016,14.7183558 5,13.709479 5,12.5 C5,11.290521 4.14112016,10.2816442 3,10.0500091 Z M10,11 C9.44771525,11 9,11.4477153 9,12 L9,13 C9,13.5522847 9.44771525,14 10,14 C10.5522847,14 11,13.5522847 11,13 L11,12 C11,11.4477153 10.5522847,11 10,11 Z"
                                                    id="Combined-Shape-Copy" fill="#000000" opacity="0.3"
                                                    transform="translate(12.500000, 12.500000) rotate(-45.000000) translate(-12.500000, -12.500000) " />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="kt-iconbox__desc">
                                        <h3 class="kt-iconbox__title">
                                            <a class="kt-link">Due in 15 days</a>
                                        </h3>
                                        <div class="kt-iconbox__content">
                                            {{TotalDuein15DaysCount}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-section kt-drop-section">
                    <div class="kt-portlet__body customer-listing-datatable">
                        <div class="panel panel-primary list-panel" id="list-panel">
                            <div class="panel-heading list-panel-heading" style="padding: 12px 8px;">
                                <h1 class="panel-title list-panel-title"><i class="fa fa-list"></i> Client History
                                    ({{ClientName}})</h1>
                                <ul class="scFilter">
                                    <li style="width: 330px;">
                                        <l-select2 class="mysearchprop" [data]="data" [options]="options"
                                            (valueChange)="valueChange($event)">
                                        </l-select2>
                                    </li>
                                </ul>
                            </div>
                            <div class="panel-body">

                                <table class="table table-striped- table-bordered table-hover table-checkable"
                                    *ngIf="ticketService.TicketLocalList">
                                    <thead>
                                        <tr>
                                            <th style="width: 5%;">{{this.currentUser.Ticket}}&nbsp;No</th>
                                            <th style="width: 23%;">{{this.currentUser.Ticket}} Date</th>
                                            <th style="width: 27%;">Address</th>
                                            <th style="width: 3%;">Status</th>
                                            <th style="width: 17%">{{this.currentUser.Engineer}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let x of ticketService.TicketLocalList; let i=index; async"
                                            class="quote-list-view-info odd" role="row">
                                            <td>
                                                <span class="btn btn-label-primary">
                                                    <a href="javascript:;" (click)="ViewTicketDetails(x)">
                                                        {{ x.TicketId }}</a><br>
                                                </span>
                                                <span *ngIf="x.InvoiceNo!"
                                                    class="btn btn-label-danger btn-pill invoices-btn">
                                                    {{x.InvoiceNo}}<br>
                                                </span>
                                                <span *ngIf="x.QuoteId!"
                                                    class="btn btn-label-success btn-pill reallocated-one">
                                                    {{x.QuoteId}}<br>
                                                </span>
                                                <span *ngIf="x.RequestId!"
                                                    class="btn btn-label-danger btn-pill invoices-btn">
                                                    {{x.RequestId}}
                                                </span>
                                                <span class="recurring-ticket"
                                                    *ngIf="x.TicketType === 'Recurring Ticket'">Recurring</span>
                                            </td>
                                            <td>
                                                <generic-ticket-date-time-format [(A)]="x.AppointmentStart"
                                                    [(B)]="x.AppointmentEnd" [(C)]="x.CreatedUtcDate" [T]="1">
                                                </generic-ticket-date-time-format>
                                                <span *ngIf="x.OneOffAppointmentDate === null"
                                                    class="ticketstatus statusunallocated">UNALLOCATED</span>
                                                <span *ngIf="x.Rescheduled"
                                                    class="ticketstatus statusrescheduled">RESECHEDULED</span>
                                            </td>
                                            <td>{{ x.CustomerAddress }}</td>
                                            <td class="text-center">
                                                <generic-ticket-status [(Status)]="x.Status" [(OverDueDays)]="x.OverDueDays" ></generic-ticket-status>
                                            </td>
                                            <td>
                                                <generic-ticket-team-list [(TicketTeams)]="x.TicketTeams" [(localPrependUrl)]="localPrependUrl"
                                                    [(Reallocate)]="x.Reallocate" [(Id)]="x.Id" [(TicketId)]="x.TicketId"></generic-ticket-team-list>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td *ngIf="ticketService.TicketLocalList.length === 0" colspan="10"
                                                style="text-align: center;">
                                                <i *ngIf="ticketService.TicketLocalList">No Record!</i>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <i *ngIf="!ticketService.TicketLocalList" class="fa fa-spinner fa-spin"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>