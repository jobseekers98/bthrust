<style>
  .QuoteAddSection {
    width: 100%;
  }

  .QuoteAddSection a {
    float: right;
  }
</style>
<div class="kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
  <div class="kt-subheader kt-grid__item" id="kt_subheader">
    <div class="kt-container kt-container--fluid breadcud-kt-container ">
      <div class="kt-subheader__main">
        <h3 class="kt-subheader__title">
          <a href="javascript:;" routerLink="/dashboard">
            Dashboard
          </a>
        </h3>
        <span class="kt-subheader__separator kt-hidden"></span>
        <div class="kt-subheader__breadcrumbs">
          <i class="fa fa-angle-double-right" aria-hidden="true"></i>
          <span class="kt-subheader__breadcrumbs-separator"></span>
          Quotations
        </div>
      </div>
      <div class="kt-subheader__toolbar">
        <div class="kt-subheader__wrapper" *ngIf="currentUser.Permissions.QuoteCreate">
        </div>
    </div>
    </div>
  </div>
  <div class="customer-list-main-section">
    <div class="kt-widget17">
      <div class="kt-widget17__visual kt-widget17__visual--chart kt-portlet-fit--top kt-portlet-fit--sides"
        style="background-color: #fd397a">
      </div>
      <div class="kt-widget17__stats">
        <div class="row mrg-top-10">
          <div class="col-lg-3">
            <div class="kt-portlet kt-iconbox kt-iconbox--brand kt-iconbox--animate-slower">
              <div class="kt-portlet__body">
                <div class="kt-iconbox__body">
                  <div class="kt-iconbox__icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                      height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="bound" x="0" y="0" width="24" height="24"></rect>
                        <polygon id="“" fill="#000000"
                          transform="translate(16.500000, 12.500000) rotate(-180.000000) translate(-16.500000, -12.500000) "
                          points="19 7 17 13 19 13 19 18 14 18 14 13 16 7"></polygon>
                        <polygon id="Path" fill="#000000" opacity="0.3"
                          transform="translate(8.500000, 12.500000) rotate(-180.000000) translate(-8.500000, -12.500000) "
                          points="11 7 9 13 11 13 11 18 6 18 6 13 8 7"></polygon>
                      </g>
                    </svg>
                  </div>
                  <div class="kt-iconbox__desc">
                    <h3 class="kt-iconbox__title">
                      <a class="kt-link" href="javascript:;">Total Quotations</a>
                    </h3>
                    <div class="kt-iconbox__content">
                      {{TotalQuotation}} Total Quotations
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="kt-portlet kt-iconbox kt-iconbox--success kt-iconbox--animate-slow">
              <div class="kt-portlet__body">
                <div class="kt-iconbox__body">
                  <div class="kt-iconbox__icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                      height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="bound" x="0" y="0" width="24" height="24"></rect>
                        <polygon id="“" fill="#000000"
                          transform="translate(16.500000, 12.500000) rotate(-180.000000) translate(-16.500000, -12.500000) "
                          points="19 7 17 13 19 13 19 18 14 18 14 13 16 7"></polygon>
                        <polygon id="Path" fill="#000000" opacity="0.3"
                          transform="translate(8.500000, 12.500000) rotate(-180.000000) translate(-8.500000, -12.500000) "
                          points="11 7 9 13 11 13 11 18 6 18 6 13 8 7"></polygon>
                      </g>
                    </svg>
                  </div>
                  <div class="kt-iconbox__desc">
                    <h3 class="kt-iconbox__title">
                      <a class="kt-link" href="javascript:;">Accepted Quotations</a>
                    </h3>
                    <div class="kt-iconbox__content">
                      {{AcceptedQuotation}} Accepted Quotations
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="kt-portlet kt-iconbox kt-iconbox--warning kt-iconbox--animate-fast">
              <div class="kt-portlet__body">
                <div class="kt-iconbox__body">
                  <div class="kt-iconbox__icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                      height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="bound" x="0" y="0" width="24" height="24"></rect>
                        <polygon id="“" fill="#000000"
                          transform="translate(16.500000, 12.500000) rotate(-180.000000) translate(-16.500000, -12.500000) "
                          points="19 7 17 13 19 13 19 18 14 18 14 13 16 7"></polygon>
                        <polygon id="Path" fill="#000000" opacity="0.3"
                          transform="translate(8.500000, 12.500000) rotate(-180.000000) translate(-8.500000, -12.500000) "
                          points="11 7 9 13 11 13 11 18 6 18 6 13 8 7"></polygon>
                      </g>
                    </svg>
                  </div>
                  <div class="kt-iconbox__desc">
                    <h3 class="kt-iconbox__title">
                      <a class="kt-link" href="javascript:;">Pending Quotations</a>
                    </h3>
                    <div class="kt-iconbox__content">
                      {{PendingQuotation}} Pending Quotations
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="kt-portlet kt-iconbox kt-iconbox--danger kt-iconbox--animate-faster">
              <div class="kt-portlet__body">
                <div class="kt-iconbox__body">
                  <div class="kt-iconbox__icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                      height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="bound" x="0" y="0" width="24" height="24"></rect>
                        <polygon id="“" fill="#000000"
                          transform="translate(16.500000, 12.500000) rotate(-180.000000) translate(-16.500000, -12.500000) "
                          points="19 7 17 13 19 13 19 18 14 18 14 13 16 7"></polygon>
                        <polygon id="Path" fill="#000000" opacity="0.3"
                          transform="translate(8.500000, 12.500000) rotate(-180.000000) translate(-8.500000, -12.500000) "
                          points="11 7 9 13 11 13 11 18 6 18 6 13 8 7"></polygon>
                      </g>
                    </svg>
                  </div>
                  <div class="kt-iconbox__desc">
                    <h3 class="kt-iconbox__title">
                      <a class="kt-link" href="javascript:;">Rejected Quotations</a>
                    </h3>
                    <div class="kt-iconbox__content">
                      {{RejectedQuotation}} Rejected Quotations
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="kt-section kt-drop-section">
          <div class="kt-portlet__body customer-listing-datatable">
            <div id="kt_table_1_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
              <div class="row">
                <div class="col-sm-12">
                  <div class="panel panel-primary list-panel" id="list-panel">
                    <div class="panel-heading list-panel-heading">
                      <h1 class="panel-title list-panel-title"><i class="fa fa-list"></i> Quotation List</h1>
                      <ul class="scFilter">                        
                      <li>
                        <a href="javascript:void(0)" (click)="exportAsXLSX()" class="btnexportToExcel">Export to
                          Excel</a>
                      </li>
                      </ul>
                    </div>
                    <div class="panel-body">
                      <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                        class="table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline">
                        <thead>
                          <tr>
                            <th style="width: 5%;">Quotation&nbsp;No<br></th>
                            <th style="width: 10%;">Date</th>
                            <th style="width: 15%;">Subject</th>
                            <th style="width: 30%;">Customer Info</th>
                            <th style="width: 25%;">Amount</th>
                            <th style="width: 5%;">Status</th>
                            <th style="width: 10%;">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let q of quoteService.QuoteLocalList; let ii=index async"
                            class="quote-list-view-info odd">
                            <td>
                              <span class="btn btn-label-primary"><a href="javascript:;" (click)="getQuoteDetails(q)">{{ q.QuoteId }}</a><br></span>
                              <span *ngIf="q.InvoiceNo!" class="btn btn-label-danger btn-pill invoices-btn">{{ q.InvoiceNo }}<br></span>
                              <span *ngIf="q.TicketNo!" class="btn btn-label-danger btn-pill invoices-btn"><a href="javascript:;" (click)="viewTicketDetails(q.TicketId)">{{ q.TicketNo }}</a></span>
                            </td>
                            <td>{{q.CreatedUtcDate | date}}</td>
                            <td>{{q.JobTitle}}</td>
                            <td>
                              <strong>Name: </strong> {{q.CustomerName}} <br>
                              <strong>Company: </strong> {{q.CompanyName}}
                            </td>
                            <td>
                              <strong>Sub Total: </strong> {{q.SubTotal.toFixed(2)}} <br>
                              <strong>Discount: </strong> {{q.DiscountAmount.toFixed(2)}} <br>
                              <strong>Tax: </strong> {{q.TaxAmount.toFixed(2)}} <br>
                              <strong>Net Amount: </strong> {{q.NetAmount.toFixed(2)}}
                            </td>
                            <td>
                              <generic-quote-status [(Status)]="q.Status"></generic-quote-status>
                            </td>
                            <td>
                              <div class="btn-group btn-group-sm">
                                <a href="javascript:;" style="border: #1dc9b7;" class="btn btn-primary dropdown-toggle"
                                  data-toggle="dropdown">Action<span class="caret"></span></a>

                                <ul class="dropdown-menu">
                                  <li><a (click)="getQuoteDetails(q)" href="javascript:;">View Details</a></li>
                                  <li *ngIf="q.Status === 2"><a (click)="populateStatusPopup(q, q.Id)"  href="javascript:void(0);">Update Status</a></li>
                                </ul>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

